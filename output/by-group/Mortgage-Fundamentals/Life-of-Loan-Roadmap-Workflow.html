<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life of Loan Roadmap - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Step List */
        .step-list { list-style: none; padding: 0; margin: 18px 0; }
        .step-list li {
            padding: 14px 18px;
            border-left: 3px solid var(--accent-blue);
            background: rgba(0,0,0,0.2);
            margin-bottom: 10px;
            border-radius: 0 8px 8px 0;
            color: var(--text-secondary);
        }
        .step-list li strong { color: var(--text-primary); }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 24px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--accent-green), var(--accent-blue), var(--accent-teal), var(--accent-purple));
        }

        .timeline-item {
            position: relative;
            padding-left: 60px;
            padding-bottom: 30px;
        }

        .timeline-marker {
            position: absolute;
            left: 12px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--accent-blue);
            border: 4px solid var(--bg-card);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 800;
            color: white;
        }

        .timeline-content {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
        }

        .timeline-content h4 { color: var(--accent-blue); margin-bottom: 8px; }
        .timeline-content p { color: var(--text-secondary); font-size: 0.95rem; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Mortgage Fundamentals</a>
        <span class="separator">></span>
        <span class="current">Life of Loan Roadmap</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Life of Loan Roadmap</h2>
            <p>Complete Loan Process Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Prospect</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">LE Pending</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Disclosed</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">File Received</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">UW Received</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Approved</span>
            </a>
            <a href="#section-7" class="nav-item">
                <span class="nav-number">7</span>
                <span class="nav-label">Clear to Close</span>
            </a>
            <a href="#section-8" class="nav-item">
                <span class="nav-number">8</span>
                <span class="nav-label">Docs & Closing</span>
            </a>
            <a href="#section-9" class="nav-item">
                <span class="nav-number">9</span>
                <span class="nav-label">TBD Process</span>
            </a>
            <a href="#section-10" class="nav-item">
                <span class="nav-number">10</span>
                <span class="nav-label">Product Support</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Life of Loan Roadmap</h1>
                <p class="subtitle">Complete guide to the CMG Home Loans mortgage process from Prospect to Funded</p>
                <div class="meta">
                    <span class="meta-item">Systems: Clear 2.0, Byte LOS</span>
                    <span class="meta-item">Roles: Sales, Processing, Underwriting, Closing</span>
                    <span class="meta-item">Updated: January 6, 2026</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 1: Prospect -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Prospect</h2><span>Loan origination and initial application entry</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Entry Method?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">CMG Home (Borrower)</span>
                                <div class="flow-node action">Auto-flow to Clear/Byte</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">CMG Home (Sales)</span>
                                <div class="flow-node action">Sales Entry</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Manual</span>
                                <div class="flow-node action">Clear or Byte Entry</div>
                            </div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node input">Enter 6 Application Pieces</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Auto-Move to LE Pending</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Loan Entry Methods</h4>
                        <p>Loans can be started through three methods:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li><strong>Via CMG Home by Borrower:</strong> Application auto-flows to Clear and Byte pipeline</li>
                            <li><strong>Via Sales in CMG Home:</strong> Sales team initiates the application</li>
                            <li><strong>Manually by Sales:</strong> Direct entry in Clear or Byte systems</li>
                        </ul>
                    </div>

                    <div class="tip-box">
                        <h4>Automatic Status Change</h4>
                        <p>Once 6 pieces of the application are entered, the loan will automatically move to LE Pending status. This triggers the disclosure workflow.</p>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Resource</th>
                                <th>Description</th>
                                <th>System</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Clear 2.0 Entry and Workflow Checklist</strong></td>
                                <td>Complete checklist for loan entry in Clear 2.0</td>
                                <td><span class="badge calculated-badge">Clear</span></td>
                            </tr>
                            <tr>
                                <td><strong>Byte Entry and Workflow Checklist</strong></td>
                                <td>Complete checklist for loan entry in Byte</td>
                                <td><span class="badge calculated-badge">Byte</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 2: LE Pending -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>LE Pending</h2><span>Loan Estimate preparation and initial disclosure</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Sales Completes Request LE</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Disclosure Team Review</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Quality Review</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Send Initial Package</div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li><strong>Request LE:</strong> Sales must complete the Request LE button in Clear or Request disclosure date completion in Byte to communicate to the Disclosure team that loan is ready</li>
                        <li><strong>Monitoring:</strong> The Disclosure team monitors for timely submission for disclosure. Typical turn time is 24 hours once sales indicates ready for LE</li>
                        <li><strong>Quality Review:</strong> Prior to sending initial package, quality review performed by Disclosure Coordinator and collaboration with sales for necessary updates</li>
                        <li><strong>Send Disclosure:</strong> Once initial disclosure is sent, the Coordinator will move to Disclosed status; email notifications sent to the Sales Team to inform</li>
                        <li><strong>URLA Signature:</strong> LO does not have to sign the URLA on most loan types; an email will be sent to LO prompting for signature on loans that require</li>
                    </ul>

                    <div class="info-box">
                        <h4>Turn Time Standard</h4>
                        <p>The Disclosure team targets a <strong>24-hour turn time</strong> from when sales indicates the loan is ready for LE disclosure.</p>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Resource</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Clear or Byte - Requesting Disclosure Checklist</strong></td>
                                <td>Step-by-step guide for requesting disclosures</td>
                            </tr>
                            <tr>
                                <td><strong>eDisclosure related Materials and Resources</strong></td>
                                <td>Comprehensive eDisclosure documentation</td>
                            </tr>
                            <tr>
                                <td><strong>Complete list of Loan Status Options</strong></td>
                                <td>Reference for all available loan statuses</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 3: Disclosed -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Disclosed</h2><span>LO manages loan until ready for processing</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">LO Manages Loan</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Disclosures Signed?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">YES - Signed</span>
                                <div class="flow-node output">Ready for Processing</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">VERBAL ITP</span>
                                <div class="flow-node action">Log Exception</div>
                            </div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Change Status in Byte / Send to Processing in Clear</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">File Received</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>LO Responsibilities During Disclosed Status</h4>
                        <p>The LO manages the loan until they are ready to submit to Processing. This includes gathering documentation and ensuring borrower has signed disclosures.</p>
                    </div>

                    <ul class="step-list">
                        <li><strong>Borrower Signed Disclosures:</strong> Once borrower signed disclosures are received, the loan is ready to progress</li>
                        <li><strong>Verbal ITP Exception:</strong> Verbal Intent to Proceed can be accepted by exception</li>
                        <li><strong>Status Change:</strong> Sales team changes status to File Received in Byte or completes Send to Processing Button in Clear</li>
                    </ul>

                    <div class="tip-box">
                        <h4>Submission Standards</h4>
                        <p>Submission Standards and key actions to change status are covered in the <strong>Sales Submission to Processing Checklist</strong>.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: File Received -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>File Received</h2><span>Processing review, vendor orders, and UW submission</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Processor Loan Review</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Discuss Needs with Sales</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Review Clear Docs</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Place Vendor Orders</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">All Docs Complete?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">YES</span>
                                <div class="flow-node output">Submit to UW</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">NO</span>
                                <div class="flow-node exception">Processing Hold</div>
                            </div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>3 Business Day SLA</h4>
                        <p>Processor must complete loan review and submit for initial UW review within <strong>3 business days</strong> of File Received status.</p>
                    </div>

                    <div class="info-box">
                        <h4>Vendor Orders</h4>
                        <p>Processor will complete applicable orders not placed by Production Assistants/Sales Teams:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Title</li>
                            <li>HOI (Homeowner's Insurance)</li>
                            <li>Appraisal</li>
                            <li>VOEs (Verification of Employment)</li>
                            <li>FHA Connection and VA Portal specific functions</li>
                        </ul>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Order Type</th>
                                <th>Ordered By</th>
                                <th>System</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>FLOOD</strong></td>
                                <td>Auto-pulled</td>
                                <td><span class="badge calculated-badge">Auto</span></td>
                                <td>Auto-pulled at File Received if not pulled by PA prior to initial disclosure</td>
                            </tr>
                            <tr>
                                <td><strong>Appraisal</strong></td>
                                <td>PA or Processor</td>
                                <td>ValueLink / AMC</td>
                                <td>Fee collected electronically. VA appraisals via VA Portal, fee at closing</td>
                            </tr>
                            <tr>
                                <td><strong>Title</strong></td>
                                <td>Processor</td>
                                <td>Various</td>
                                <td>Ordered after File Received</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Appraisal Requirements</h4>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Disclosures must be signed or Verbal Intent to Proceed received and logged prior to ordering</li>
                            <li>If appraisal Due Date is less than 5 business days, order is considered a rush (may vary by location)</li>
                            <li>Appraisal is system/auto delivered to borrower 24 hours after receipt</li>
                        </ul>
                    </div>

                    <div class="exception-box">
                        <h4>Flood Zone Discovery</h4>
                        <p>If a property is found to be in a flood zone, notice can be sent with a change of circumstance.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: UW Received -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>UW Received</h2><span>Initial underwriting review</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Underwriter Review</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Decision?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">APPROVED</span>
                                <div class="flow-node output">Conditional Approval</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">SUSPENDED</span>
                                <div class="flow-node exception">UW Contacts Sales/Processor</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">CANNOT APPROVE</span>
                                <div class="flow-node exception">2nd Level UW Manager Review</div>
                            </div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Turn Time</h4>
                        <p>Turn times vary by region. Typically <strong>72 hours</strong> for initial reviews.</p>
                    </div>

                    <ul class="step-list">
                        <li><strong>Review Complete:</strong> After review and conditions made, loan moved to Approved status</li>
                        <li><strong>Suspension Process:</strong> If suspended, Underwriter will reach out to sales team/processor prior to status change to discuss suspend conditions</li>
                        <li><strong>Adverse Decision:</strong> Loans that cannot be approved have 2nd level underwriting manager review and contact with LO to discuss prior to moving to an adverse or suspended status</li>
                    </ul>
                </div>
            </section>

            <!-- Section 6: Approved -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Approved (Conditional Loan Approval)</h2><span>Working conditions toward Clear to Close</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node output">Email with Conditional Approval</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Processor Reviews Conditions</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">UDM Activated</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Work Towards CTC</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Request CD</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Conditional Approval Process</h4>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Email is sent to loan team with Conditional Approval doc attached</li>
                            <li>Processor to review conditions and work towards Clear to Close</li>
                            <li>Processor team collaborates with Sales as needed and communicates loan progress</li>
                        </ul>
                    </div>

                    <div class="exception-box">
                        <h4>UDM - Undisclosed Debt Monitoring</h4>
                        <p><strong>Constant credit monitoring activated at Approval.</strong> No more gap report and surprise credit issues at closing. Alert emails sent to processor if new tradelines or inquiries hit.</p>
                        <p style="margin-top: 10px;"><strong>IMPORTANT:</strong> Freezes must be lifted, and credit must remain open for the duration of the loan process. UDM is required and will not activate on frozen credit.</p>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>CD Request Requirements</th>
                                <th>Details</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>SLA Average</strong></td>
                                <td>CD is requested 10 days prior to closing</td>
                            </tr>
                            <tr>
                                <td><strong>Rush Orders</strong></td>
                                <td>CD requested for same or next day would be considered a rush</td>
                            </tr>
                            <tr>
                                <td><strong>Status Requirement</strong></td>
                                <td>Approved Status required to request a CD (CTC Status required on Jumbo loans)</td>
                            </tr>
                            <tr>
                                <td><strong>Prerequisites</strong></td>
                                <td>Loan must be locked with appraisal and title received</td>
                            </tr>
                            <tr>
                                <td><strong>LO Approval</strong></td>
                                <td>LO will be sent CD to approve prior to delivery</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 7: Clear to Close -->
            <section id="section-7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <div class="section-title"><h2>Clear to Close</h2><span>Final approval and pre-closing activities</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Submit Conditions for Review</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">UW Final Review</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Clear All PTD Conditions</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Pre-Closing Call</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Clear to Close Status</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Conditions for Review</h4>
                        <p>Processor sends loan to underwriting for conditions, appraisal and/or clear to close.</p>
                        <p style="margin-top: 10px;"><strong>Goal metric:</strong> 2 or less total submissions to underwriting to achieve full Clear to Close.</p>
                    </div>

                    <ul class="step-list">
                        <li><strong>Underwriter Issues Final Approval:</strong> Underwriter clears all prior to doc conditions</li>
                        <li><strong>Processor Finalizes:</strong> Loan processor manages the loan to finalize and perform pre-closing tasks</li>
                    </ul>

                    <div class="tip-box">
                        <h4>Pre-Closing Call</h4>
                        <p>Processor or Production Assistant will call borrower <strong>4 days prior to closing</strong> to confirm:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>No changes to employment</li>
                            <li>No changes to credit tradelines</li>
                            <li>Occupancy intent remains the same</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 8: Docs & Closing -->
            <section id="section-8" class="section">
                <div class="section-header">
                    <div class="section-number">8</div>
                    <div class="section-title"><h2>Docs & Closing</h2><span>Document preparation, signing, and funding</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Docs Ordered</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Docs Out</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Docs Back</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Funds Ordered</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Funds Sent</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">FUNDED</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Status</th>
                                <th>Description</th>
                                <th>Owner</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Docs Ordered</strong></td>
                                <td>Processor moves loan to transition to closing</td>
                                <td>Processor</td>
                            </tr>
                            <tr>
                                <td><strong>Docs Out</strong></td>
                                <td>Closer preps and sends docs to closing agent</td>
                                <td>Closer</td>
                            </tr>
                            <tr>
                                <td><strong>Docs Back</strong></td>
                                <td>Signed documents received from closing</td>
                                <td>Closer</td>
                            </tr>
                            <tr>
                                <td><strong>Funds Ordered</strong></td>
                                <td>Wire requested</td>
                                <td>Closer/Funder</td>
                            </tr>
                            <tr>
                                <td><strong>Funds Sent</strong></td>
                                <td>Wire sent to title/escrow</td>
                                <td>Funder</td>
                            </tr>
                            <tr>
                                <td><strong>Funded</strong></td>
                                <td>Loan funded successfully</td>
                                <td>Funder</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="exception-box">
                        <h4>Wire Cut-off Times</h4>
                        <p><strong>4:00 PM ET / 1:00 PM PT</strong> - Prewires unavailable if outstanding UW conditions are present.</p>
                    </div>

                    <div class="info-box">
                        <h4>Closing Workflow</h4>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Closer now manages the loan and will prep and send docs to closing agent</li>
                            <li>Closer communicates process with status changes</li>
                            <li>Funder will review signed docs, order the wire and fund the loan</li>
                        </ul>
                    </div>

                    <div class="tip-box">
                        <h4>Hybrid E-Closing</h4>
                        <p>Borrowers can save time at the closing table with a Hybrid E-Closing. Borrowers will sign all non-notary documents in advance at their leisure and only sign notary docs with the closing agent.</p>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Post-Close Status</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Purchased</strong></td>
                                <td>Loan purchased by investor</td>
                            </tr>
                            <tr>
                                <td><strong>Shipped</strong></td>
                                <td>Loan shipped to investor</td>
                            </tr>
                            <tr>
                                <td><strong>Investor Purchased</strong></td>
                                <td>Final investor purchase confirmed</td>
                            </tr>
                            <tr>
                                <td><strong>Post Closing Complete</strong></td>
                                <td>All post-closing activities finalized</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 9: TBD Process -->
            <section id="section-9" class="section">
                <div class="section-header">
                    <div class="section-number">9</div>
                    <div class="section-title"><h2>TBD Credit Approval Process</h2><span>Pre-approval workflow for loans without identified property</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Prospect (No Property)</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Credit Only Submission</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Pre-Approved</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node decision">Property Found?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">YES</span>
                                <div class="flow-node action">Update Loan (RESPA 6)</div>
                                <span class="flow-arrow" style="transform: rotate(90deg);">-></span>
                                <div class="flow-node output">LE Pending</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">NO</span>
                                <div class="flow-node input">Wait for Property</div>
                            </div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Status</th>
                                <th>Description</th>
                                <th>Action Required</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Prospect</strong></td>
                                <td>No disclosures sent until property identified</td>
                                <td>Sales team must request status change from processor when ready for UW submission</td>
                            </tr>
                            <tr>
                                <td><strong>Credit Only Submission</strong></td>
                                <td>Processor flips status from Prospect to Credit Only</td>
                                <td>Moves loan to Underwriter's pipeline</td>
                            </tr>
                            <tr>
                                <td><strong>Pre-Approved</strong></td>
                                <td>Loan returns as "Pre-Approved" status</td>
                                <td>Wait until property is found</td>
                            </tr>
                            <tr>
                                <td><strong>LE Pending</strong></td>
                                <td>Once property identified, Sales updates loan</td>
                                <td>Becomes RESPA 6 loan, follows normal workflow</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <h4>TBD Process Notes</h4>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>No disclosures are sent until the property is identified</li>
                            <li>Once property is identified, Sales will update the loan and it becomes a RESPA 6 loan</li>
                            <li>Loan will then follow normal workflow and steps for Initial disclosure forward to closing</li>
                        </ul>
                    </div>

                    <div class="tip-box">
                        <h4>Related Resource</h4>
                        <p>Refer to the <strong>TBD Process Workflow and Action Checklist</strong> for complete details.</p>
                    </div>
                </div>
            </section>

            <!-- Section 10: Product Support -->
            <section id="section-10" class="section">
                <div class="section-header">
                    <div class="section-number">10</div>
                    <div class="section-title"><h2>Scenarios and Credit Exceptions</h2><span>Product Help Desk and exception policy</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>Product Help Desk</h4>
                        <p>To streamline, standardize, and bring uniformity to CMG, CMG has a <strong>Product Help Desk</strong> for sales for loans that are not in a pre-application or an application stage prior to Underwriting Approval.</p>
                        <p style="margin-top: 10px;">CMG's approach to a Centralized Product Help is to assist in loan scenario requests, to standardize the process, and improve underwriting turn times.</p>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Resource</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Scenario Desk Guide</strong></td>
                                <td>Guidance for submitting loan scenario requests</td>
                            </tr>
                            <tr>
                                <td><strong>Exception Policy</strong></td>
                                <td>Guidelines for underwriting exceptions</td>
                            </tr>
                            <tr>
                                <td><strong>Product Support</strong></td>
                                <td>Central resource for product questions</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="exception-box">
                        <h4>Exception Policy</h4>
                        <p>All exceptions to underwriting guidelines and eligibility matrices are considered on an <strong>individual basis</strong> and tracked in accordance with applicable state and federal laws and regulations, as well as investor requirements.</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <div id="quick-ref" class="quick-ref">
                <h3>Life of Loan Quick Reference</h3>
                <pre>
LOAN STATUS PROGRESSION
=======================
PROSPECT -> LE PENDING -> DISCLOSED -> FILE RECEIVED -> UW RECEIVED -> APPROVED -> CTC -> DOCS -> FUNDED

KEY TURN TIMES & SLAs
=====================
STATUS              | TURN TIME           | OWNER
--------------------|---------------------|------------------
LE Pending          | 24 hours            | Disclosure Team
File Received       | 3 business days     | Processor
UW Received         | 72 hours (varies)   | Underwriter
CD Request          | 10 days prior       | Processor
Pre-Closing Call    | 4 days prior        | Processor/PA
Wire Cut-off        | 4:00 PM ET          | Funder

LOAN ENTRY METHODS
==================
1. CMG Home (Borrower) - Auto-flows to Clear/Byte
2. CMG Home (Sales) - Sales initiated
3. Manual Entry - Direct Clear or Byte entry

AUTO-TRIGGER: 6 application pieces = LE Pending status

APPRAISAL ORDERING
==================
- Ordered via ValueLink or designated AMC
- VA Appraisals via VA Portal (fee at closing)
- Must have signed disclosures OR verbal ITP logged
- Rush = Due date < 5 business days
- Auto-delivered to borrower 24 hours after receipt

UDM (UNDISCLOSED DEBT MONITORING)
=================================
- Activated at Approval status
- Monitors for new tradelines/inquiries
- Alert emails sent to processor
- CRITICAL: Credit freezes must be lifted
- Will NOT activate on frozen credit

CLOSING WORKFLOW
================
Docs Ordered -> Docs Out -> Docs Back -> Funds Ordered -> Funds Sent -> FUNDED

Wire Cut-off: 4:00 PM ET / 1:00 PM PT
No prewires if outstanding UW conditions

POST-CLOSE STATUSES
===================
- Purchased
- Shipped
- Investor Purchased
- Post Closing Complete

TBD PROCESS (NO PROPERTY)
=========================
Prospect -> Credit Only -> Pre-Approved -> [Property Found] -> LE Pending -> Normal Flow

RESOURCES
=========
- Clear 2.0 Entry and Workflow Checklist
- Byte Entry and Workflow Checklist
- Requesting Disclosure Checklist
- Sales Submission to Processing Checklist
- TBD Process Workflow and Action Checklist
- Scenario Desk Guide
- Exception Policy
                </pre>
            </div>
        </div>

        <!-- ==================== AI AGENTS TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Agent Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation opportunities identified for the Life of Loan process</p>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">5</div>
                    <div class="agent-summary-label">Agent Opportunities</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">68%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2.5 hrs</div>
                    <div class="agent-summary-label">Est. Time Saved/Loan</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">High</div>
                    <div class="agent-summary-label">Process Impact</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend">
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #ef4444, #f97316);"></div>
                    <span>Critical Priority (9-10)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #f97316, #eab308);"></div>
                    <span>High Priority (7-8)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #eab308, #22c55e);"></div>
                    <span>Medium Priority (5-6)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #22c55e, #14b8a6);"></div>
                    <span>Low Priority (1-4)</span>
                </div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container" id="agent-heatmap">
                <div class="heat-map-title">Priority Heat Map</div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-statusmonitor')">
                        <div class="heat-score">9.4</div>
                        <div class="heat-name">Status Monitor Agent</div>
                        <div class="heat-desc">Track loan status and SLA compliance across pipeline</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>30 min/day</span></div>
                            <div class="heat-metric">Complexity: <span>Medium</span></div>
                        </div>
                    </div>
                    <div class="heat-item critical" onclick="scrollToAgent('agent-vendororder')">
                        <div class="heat-score">9.1</div>
                        <div class="heat-name">Vendor Order Agent</div>
                        <div class="heat-desc">Auto-place title, appraisal, and HOI orders</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>15 min/loan</span></div>
                            <div class="heat-metric">Complexity: <span>High</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-preclosing')">
                        <div class="heat-score">8.2</div>
                        <div class="heat-name">Pre-Closing Call Agent</div>
                        <div class="heat-desc">Automate 4-day pre-closing verification calls</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>10 min/call</span></div>
                            <div class="heat-metric">Complexity: <span>Medium</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-udmmonitor')">
                        <div class="heat-score">7.8</div>
                        <div class="heat-name">UDM Alert Handler</div>
                        <div class="heat-desc">Process and route UDM alerts automatically</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>5 min/alert</span></div>
                            <div class="heat-metric">Complexity: <span>Low</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-conditiontracker')">
                        <div class="heat-score">6.5</div>
                        <div class="heat-name">Condition Tracker</div>
                        <div class="heat-desc">Track and prioritize outstanding conditions</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>20 min/loan</span></div>
                            <div class="heat-metric">Complexity: <span>Medium</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <div id="agent-details">
                <h2 style="color: var(--text-primary); margin-bottom: 25px; font-size: 1.5rem;">Agent Details</h2>
                <div class="agent-grid">
                    <!-- Status Monitor Agent -->
                    <div class="agent-card" id="agent-statusmonitor">
                        <div class="agent-card-header">
                            <div class="agent-icon">S</div>
                            <div class="agent-info">
                                <div class="agent-name">Status Monitor Agent</div>
                                <div class="agent-type">Pipeline Management / Alerts</div>
                            </div>
                            <span class="agent-priority critical">Critical</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Monitors all loans in pipeline for SLA compliance, tracking turn times at each status. Proactively alerts team members when loans approach or exceed target turn times, preventing bottlenecks and ensuring timely closings.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Scan Pipeline</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Check SLAs</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Flag At-Risk</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Send Alerts</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">30m</div>
                                    <div class="agent-stat-label">Time Saved/Day</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">98%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Med</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('statusmonitor')">View Build Prompt</button>
                        </div>
                    </div>

                    <!-- Vendor Order Agent -->
                    <div class="agent-card" id="agent-vendororder">
                        <div class="agent-card-header">
                            <div class="agent-icon">V</div>
                            <div class="agent-info">
                                <div class="agent-name">Vendor Order Agent</div>
                                <div class="agent-type">Integration / Automation</div>
                            </div>
                            <span class="agent-priority critical">Critical</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically places vendor orders (title, appraisal, HOI) when loan reaches File Received status, ensuring all prerequisites are met. Reduces manual order entry and ensures consistent timing.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">File Received</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Check Prerequisites</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Place Orders</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Log & Notify</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">15m</div>
                                    <div class="agent-stat-label">Time Saved/Loan</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">95%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">High</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('vendororder')">View Build Prompt</button>
                        </div>
                    </div>

                    <!-- Pre-Closing Call Agent -->
                    <div class="agent-card" id="agent-preclosing">
                        <div class="agent-card-header">
                            <div class="agent-icon">P</div>
                            <div class="agent-info">
                                <div class="agent-name">Pre-Closing Call Agent</div>
                                <div class="agent-type">Voice AI / Verification</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automates the 4-day pre-closing verification call to borrowers, confirming no changes to employment, credit, or occupancy intent. Records responses and flags any issues for processor review.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">4 Days Out</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Call Borrower</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Verify Items</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Log Results</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">10m</div>
                                    <div class="agent-stat-label">Time Saved/Call</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">92%</div>
                                    <div class="agent-stat-label">Success Rate</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Med</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('preclosing')">View Build Prompt</button>
                        </div>
                    </div>

                    <!-- UDM Alert Handler -->
                    <div class="agent-card" id="agent-udmmonitor">
                        <div class="agent-card-header">
                            <div class="agent-icon">U</div>
                            <div class="agent-info">
                                <div class="agent-name">UDM Alert Handler</div>
                                <div class="agent-type">Alert Processing / Triage</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Processes incoming UDM (Undisclosed Debt Monitoring) alerts, categorizes severity, and routes to appropriate team members. Auto-generates follow-up tasks and documentation for credit changes.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">UDM Alert</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Categorize</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Route</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Create Tasks</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">5m</div>
                                    <div class="agent-stat-label">Time Saved/Alert</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">99%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('udmmonitor')">View Build Prompt</button>
                        </div>
                    </div>

                    <!-- Condition Tracker Agent -->
                    <div class="agent-card" id="agent-conditiontracker">
                        <div class="agent-card-header">
                            <div class="agent-icon">C</div>
                            <div class="agent-info">
                                <div class="agent-name">Condition Tracker</div>
                                <div class="agent-type">Workflow / Task Management</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Tracks all outstanding underwriting conditions, prioritizes based on closing date and complexity, and generates daily action lists for processors. Monitors condition aging and escalates stale items.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Scan Conditions</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Prioritize</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Generate List</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Track Progress</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">20m</div>
                                    <div class="agent-stat-label">Time Saved/Loan</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">96%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Med</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('conditiontracker')">View Build Prompt</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Life of Loan Roadmap Documentation</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Life of Loan Roadmap - CMG Home Loans

## Overview
Complete guide to the mortgage loan process from Prospect to Funded status.

## Loan Status Progression
PROSPECT -> LE PENDING -> DISCLOSED -> FILE RECEIVED -> UW RECEIVED -> APPROVED -> CTC -> DOCS -> FUNDED

## Key Stages

### 1. Prospect
- Loan entry via CMG Home (borrower or sales) or manual entry
- 6 application pieces triggers LE Pending status

### 2. LE Pending
- Sales requests LE disclosure
- 24-hour turn time for disclosure team
- Quality review before sending

### 3. Disclosed
- LO manages loan
- Collect signed disclosures or verbal ITP
- Submit to processing when ready

### 4. File Received
- 3 business day SLA for processor
- Place vendor orders (title, HOI, appraisal, VOEs)
- Submit to underwriting

### 5. UW Received
- 72-hour typical turn time
- Conditional approval or suspension

### 6. Approved
- UDM activated for credit monitoring
- Work conditions toward CTC
- Request CD 10 days prior to closing

### 7. Clear to Close
- Final underwriting approval
- Pre-closing call 4 days prior
- Goal: 2 or less UW submissions

### 8. Docs & Closing
- Docs Ordered -> Out -> Back
- Funds Ordered -> Sent -> FUNDED
- Wire cut-off: 4:00 PM ET

## Special Processes

### TBD Credit Approval
For loans without identified property:
Prospect -> Credit Only -> Pre-Approved -> [Property Found] -> Normal Flow

### Product Support
- Scenario Desk for loan scenarios
- Exception Policy for guideline exceptions</pre>
            </div>
        </div>
    </div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav click to temporarily disable scroll spy
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);

                // Remove active from all, add to clicked
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Re-enable scroll spy after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Agent Prompt System
        const agentPrompts = {
            statusmonitor: {
                name: 'Status Monitor Agent',
                tags: ['Pipeline Management', 'Alerts', 'Medium Complexity', 'Critical Priority'],
                purpose: 'This agent monitors all loans in the pipeline for SLA compliance, tracking turn times at each status. It proactively alerts team members when loans approach or exceed target turn times, preventing bottlenecks and ensuring timely closings.',
                prompt: `You are building a Pipeline Management Agent for CMG Financial's loan process.

AGENT NAME: Status Monitor Agent
TYPE: Pipeline Management / Alerts

OBJECTIVE:
Monitor all active loans for SLA compliance and alert appropriate team members when turn times are at risk.

SLA THRESHOLDS:
- LE Pending: 24 hours
- File Received to UW Submission: 3 business days
- UW Review: 72 hours
- CD Request: 10 days before closing
- Pre-Closing Call: 4 days before closing

ALERT LEVELS:
- GREEN: Within SLA
- YELLOW: 75% of SLA elapsed
- RED: SLA exceeded

MONITORING LOGIC:
1. Query all loans not in Funded/Closed status
2. Calculate time in current status
3. Compare against SLA for that status
4. Generate alerts for YELLOW and RED loans

OUTPUT:
- Daily pipeline report
- Real-time alerts for at-risk loans
- Escalation to supervisors for RED status`,
                integration: `INTEGRATION POINTS:
1. Byte/Clear LOS API
   - Read loan status and timestamps
   - Query pipeline by status

2. Notification System
   - Email alerts
   - Dashboard notifications
   - Microsoft Teams webhooks

3. Reporting
   - Daily summary reports
   - SLA compliance metrics
   - Trend analysis`
            },
            vendororder: {
                name: 'Vendor Order Agent',
                tags: ['Integration', 'Automation', 'High Complexity', 'Critical Priority'],
                purpose: 'Automatically places vendor orders (title, appraisal, HOI) when loan reaches File Received status, ensuring all prerequisites are met and reducing manual order entry time.',
                prompt: `You are building an Integration Agent for CMG Financial's vendor ordering process.

AGENT NAME: Vendor Order Agent
TYPE: Integration / Automation

OBJECTIVE:
Automatically place vendor orders when loan reaches File Received status.

TRIGGER:
Loan status changes to "File Received"

PREREQUISITE CHECKS:
- Signed disclosures OR verbal ITP logged
- Complete property address
- Loan type determined
- Closing date set

VENDOR ORDERS:
1. TITLE
   - Select vendor based on state/region
   - Submit order via API

2. APPRAISAL
   - Check if rush (< 5 days to due date)
   - Order via ValueLink/designated AMC
   - VA loans: Order via VA Portal

3. HOI (if not already in file)
   - Send insurance quote request

4. FLOOD
   - Auto-pulled at File Received
   - Flag if in flood zone

ERROR HANDLING:
- Missing prerequisites: Hold and alert processor
- API failure: Retry 3x, then manual fallback`,
                integration: `INTEGRATION POINTS:
1. LOS System (Byte/Clear)
   - Status change webhook trigger
   - Read loan data
   - Update order status

2. Vendor APIs
   - ValueLink (appraisal)
   - Title company APIs
   - VA Portal (VA loans)

3. Document Storage
   - Store order confirmations
   - Track order status`
            },
            preclosing: {
                name: 'Pre-Closing Call Agent',
                tags: ['Voice AI', 'Verification', 'Medium Complexity', 'High Priority'],
                purpose: 'Automates the 4-day pre-closing verification call to borrowers, confirming no changes to employment, credit, or occupancy intent.',
                prompt: `You are building a Voice AI Agent for CMG Financial's pre-closing verification process.

AGENT NAME: Pre-Closing Call Agent
TYPE: Voice AI / Verification

OBJECTIVE:
Conduct automated pre-closing calls 4 days before scheduled closing.

TRIGGER:
Closing date minus 4 business days

CALL SCRIPT:
1. Identify borrower(s)
2. Confirm closing date
3. Verify no employment changes
4. Verify no new credit accounts
5. Confirm occupancy intent unchanged
6. Ask if any questions

RESPONSE HANDLING:
- All confirmations: Log as complete
- Any changes: Flag for processor review
- Unable to reach: Schedule callback, alert processor

DATA CAPTURE:
- Call timestamp
- Borrower responses
- Any disclosed changes
- Call recording (if permitted)`,
                integration: `INTEGRATION POINTS:
1. Voice Platform
   - Twilio / Amazon Connect
   - Speech-to-text
   - Text-to-speech

2. LOS System
   - Read borrower contact info
   - Log call results
   - Create follow-up tasks

3. Calendar/Scheduling
   - Trigger based on closing date
   - Handle timezone differences`
            },
            udmmonitor: {
                name: 'UDM Alert Handler',
                tags: ['Alert Processing', 'Triage', 'Low Complexity', 'High Priority'],
                purpose: 'Processes incoming UDM (Undisclosed Debt Monitoring) alerts, categorizes severity, and routes to appropriate team members.',
                prompt: `You are building an Alert Processing Agent for CMG Financial's UDM system.

AGENT NAME: UDM Alert Handler
TYPE: Alert Processing / Triage

OBJECTIVE:
Process and route UDM alerts automatically.

ALERT CATEGORIES:
- NEW TRADELINE: New credit account opened
- INQUIRY: Credit inquiry detected
- BALANCE CHANGE: Significant balance increase
- DELINQUENCY: Payment issue detected

SEVERITY LEVELS:
- LOW: Inquiry only, no new debt
- MEDIUM: New tradeline < $5,000
- HIGH: New tradeline > $5,000 or delinquency

ROUTING RULES:
- LOW: Email processor, no action required
- MEDIUM: Alert processor, flag for UW review
- HIGH: Immediate alert to processor + supervisor

AUTO-GENERATED TASKS:
- Request LOE from borrower
- Order updated credit if needed
- Document for file`,
                integration: `INTEGRATION POINTS:
1. UDM System
   - Receive alert webhook
   - Parse alert data

2. LOS System
   - Update loan notes
   - Create tasks
   - Alert team members

3. Task Management
   - Auto-create follow-up items
   - Track resolution`
            },
            conditiontracker: {
                name: 'Condition Tracker Agent',
                tags: ['Workflow', 'Task Management', 'Medium Complexity', 'Medium Priority'],
                purpose: 'Tracks all outstanding underwriting conditions, prioritizes based on closing date and complexity, and generates daily action lists for processors.',
                prompt: `You are building a Workflow Agent for CMG Financial's condition tracking.

AGENT NAME: Condition Tracker
TYPE: Workflow / Task Management

OBJECTIVE:
Track and prioritize outstanding UW conditions.

CONDITION CATEGORIES:
- PTD (Prior to Doc): Must clear before docs
- PTF (Prior to Funding): Must clear before wire
- POST: Post-closing conditions

PRIORITIZATION FACTORS:
1. Days to closing
2. Condition complexity
3. Borrower dependency
4. Third-party dependency

DAILY OUTPUT:
- Prioritized condition list per processor
- Aging report (conditions > 5 days old)
- Escalation list (critical path items)

TRACKING:
- Condition created date
- Last action date
- Responsible party
- Current status`,
                integration: `INTEGRATION POINTS:
1. LOS System
   - Read condition list
   - Track status changes
   - Update notes

2. Task Management
   - Generate daily work lists
   - Track completion

3. Reporting
   - Condition aging metrics
   - Clear-to-close rate analysis`
            }
        };

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = agent.name + ' - Build Prompt';
            document.getElementById('promptTags').innerHTML = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            const fullPrompt = document.getElementById('promptContent').textContent + '\n\n' + document.getElementById('promptIntegration').textContent;
            try {
                await navigator.clipboard.writeText(fullPrompt);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => { if (e.target.id === 'promptModal') closePromptModal(); });
    </script>
</body>
</html>
