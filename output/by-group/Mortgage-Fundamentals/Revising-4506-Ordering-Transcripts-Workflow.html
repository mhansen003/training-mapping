<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revising the 4506 & Ordering Tax Transcripts - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* Step List */
        .step-list { list-style: none; padding: 0; margin: 18px 0; }
        .step-list li {
            padding: 14px 18px;
            border-left: 3px solid var(--accent-blue);
            background: rgba(0,0,0,0.2);
            margin-bottom: 10px;
            border-radius: 0 8px 8px 0;
            color: var(--text-secondary);
        }
        .step-list li strong { color: var(--text-primary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Mortgage Fundamentals</a>
        <span class="separator">></span>
        <span class="current">Revising 4506 & Ordering Tax Transcripts</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>4506 & Tax Transcripts</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">4506-C Overview</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Job Role Responsibilities</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">4506 for Ops</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Creating New 4506 Form</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">4506 Scenario Examples</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Business Tax Returns</span>
            </a>
            <a href="#section-7" class="nav-item">
                <span class="nav-number">7</span>
                <span class="nav-label">Ordering Tax Transcripts</span>
            </a>
            <a href="#section-8" class="nav-item">
                <span class="nav-number">8</span>
                <span class="nav-label">Using Work Number</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Revising the 4506-C & Ordering Tax Transcripts</h1>
                <p class="subtitle">Complete guide for creating 4506 forms in Byte and ordering tax transcripts through Equifax Work Number</p>
                <div class="meta">
                    <span class="meta-item">System: Byte LOS</span>
                    <span class="meta-item">Vendor: Equifax Work Number</span>
                    <span class="meta-item">Updated: Feb 14, 2025</span>
                    <span class="meta-item">Duration: 5-15 min per form</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 1: 4506-C Overview -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>IRS 4506-C in Byte</h2><span>Understanding the purpose and requirements of the 4506 form</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>What is the 4506?</h4>
                        <p>The <strong>4506</strong> is an authorization form that borrowers sign to give permission to the IRS to release copies of their tax transcripts and/or copies of tax forms. The initial 4506 sent with initial disclosures will be for the <strong>1040 only</strong>.</p>
                    </div>

                    <div class="exception-box">
                        <h4>Critical Requirement</h4>
                        <p>We <strong>MUST</strong> have a signed 4506 for <strong>each source of income</strong> used to qualify the loan in the file for post-closing and the investor. This job aid contains the steps to create all additional 4506 forms needed for the closing package.</p>
                    </div>

                    <div class="tip-box">
                        <h4>4506 Purpose</h4>
                        <p>The 4506 is used to validate <strong>qualifying income</strong>. Anyone whose income is not used to qualify (non-borrowing spouse, applicants without income, etc.) do <strong>NOT</strong> require a 4506.</p>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Form Type</th>
                                <th>Description</th>
                                <th>Default Years</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>1040</strong></td>
                                <td>Individual Tax Return Transcript</td>
                                <td>Prior 2 years (Section 8)</td>
                            </tr>
                            <tr>
                                <td><strong>W-2</strong></td>
                                <td>Wage and Income Statement</td>
                                <td>As required</td>
                            </tr>
                            <tr>
                                <td><strong>1120/1120S</strong></td>
                                <td>Corporation Tax Return</td>
                                <td>As required</td>
                            </tr>
                            <tr>
                                <td><strong>1065</strong></td>
                                <td>Partnership Tax Return</td>
                                <td>As required</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 2: Job Role Responsibilities -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Job Role Responsibilities</h2><span>Understanding each role's responsibilities for the 4506 process</span></div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Role</th>
                                <th>Responsibilities</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Loan Officers</strong></td>
                                <td>Ask qualifying questions to determine if an additional 4506 needs to be created <strong>prior to Disclosures</strong>.</td>
                            </tr>
                            <tr>
                                <td><strong>Disclosure Coordinators</strong></td>
                                <td>Section 6 defaults to 1040 and return transcript only. If the LO requested additional tax forms, create a new IRS 4506. Section 8 defaults to the prior two tax years until the IRS tax filing deadline.</td>
                            </tr>
                            <tr>
                                <td><strong>Processors</strong></td>
                                <td>Refer to PTF condition <strong>INC 412</strong> and create any additional 4506 forms noted within the condition. It is <strong>VITAL</strong> to update the information in Byte to maintain accuracy of the IRS 4506 sent in the closing package. Use Work Number website for subsequent requests.</td>
                            </tr>
                            <tr>
                                <td><strong>Closers</strong></td>
                                <td>The 4506 will automatically print to the doc package for 1040 & W-2 requests. Business 4506's will be uploaded to Stored Docs with category 'PTF Docs' and Type 'Documents to be Signed PTF.' Review PTF condition INC 412 and confirm required forms in Section 6 and 7.</td>
                            </tr>
                            <tr>
                                <td><strong>Underwriters</strong></td>
                                <td>Modify PTF condition <strong>INC 412</strong> to match the qualifying income used on the loan. The condition must be specific for the borrower, income, and years required. Some Bond Loans require the <strong>previous 3 years</strong>.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 3: 4506 for Ops -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>4506 for Ops</h2><span>DocuTech vs IDS scenarios for different borrower types</span></div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Scenario</th>
                                <th>DocuTech</th>
                                <th>IDS</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Joint Applications / Married Borrowers</strong></td>
                                <td>Create multiple forms in Byte for printing in DocuTech in the Closing Package</td>
                                <td>Create multiple forms in Byte for printing in IDS in the Closing Package</td>
                            </tr>
                            <tr>
                                <td><strong>Unmarried Borrowers / Single Applicant</strong></td>
                                <td>Create multiple forms in Byte for printing in DocuTech Closing Package</td>
                                <td>Create multiple forms in Byte and add to Stored Documents <strong>manually</strong> as a PTF for IDS Closing Package</td>
                            </tr>
                            <tr>
                                <td><strong>W-2 and 1040s with Different Years</strong></td>
                                <td>Create multiple forms in Byte for printing in DocuTech Closing Package</td>
                                <td>Create multiple forms in Byte and add to Stored Documents <strong>manually</strong> as a PTF for IDS Closing Package</td>
                            </tr>
                            <tr>
                                <td><strong>W-2 and 1040s with Same Years</strong></td>
                                <td>Create multiple forms in Byte for printing in DocuTech Closing Package</td>
                                <td>If unmarried borrower/single applicant, use comma to separate forms in line 6 as <strong>1040, W2</strong></td>
                            </tr>
                            <tr>
                                <td><strong>Business 4506</strong></td>
                                <td>Create multiple forms in Byte for printing in DocuTech Closing Package</td>
                                <td>Create multiple forms in Byte and add to Stored Documents <strong>manually</strong> as a PTF for Closing Package</td>
                            </tr>
                            <tr>
                                <td><strong>Automated AUS Income Validation</strong></td>
                                <td>Only the 1040 is needed. If married borrowers, can combine</td>
                                <td>Only the 1040 is needed. If married borrowers, can combine</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 4: Creating New 4506 Form -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Creating a New 4506 Form</h2><span>Step-by-step process to create additional 4506 forms in Byte</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Review PTF INC 412</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open IRS 4506 Screen</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Create New IRS 4506</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Click Fill Values</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Retail or Wholesale?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">RETAIL</span>
                                <div class="flow-node action">OCR 4506 C Equifax</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">WHOLESALE/JV</span>
                                <div class="flow-node action">OCR 4506 C JV WHS Credit Plus</div>
                            </div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li><strong>Step 1:</strong> Confirm the required form types and years for each Borrower by reviewing <strong>PTF condition INC 412</strong></li>
                        <li><strong>Step 2:</strong> Open the <strong>IRS 4506 Screen</strong> and click <strong>Create a new IRS 4506</strong></li>
                        <li><strong>Step 3:</strong> This creates a new 4506 form in the drop-down. Open the new IRS 4506</li>
                        <li><strong>Step 4:</strong> Click on the <strong>Fill Values</strong> button</li>
                        <li><strong>Step 5:</strong> Select the appropriate default set: <strong>Retail:</strong> OCR 4506 C Equifax | <strong>Wholesale & JV:</strong> OCR 4506 C JV WHS Credit Plus</li>
                        <li><strong>Step 6:</strong> Click OK</li>
                        <li><strong>Step 7:</strong> Select <strong>Primary Taxpayer</strong> from the drop-down</li>
                        <li><strong>Step 8:</strong> Select <strong>Filing Status</strong> from the drop-down (Jointly or Not Jointly)</li>
                    </ul>

                    <div class="exception-box">
                        <h4>CRITICAL: Do NOT Change These Fields</h4>
                        <p><strong>Sections 5a and 5d</strong> are auto-filled and should <strong>NEVER</strong> be changed. Do NOT use the Override function unless creating a 4506 for a business tax return. Resist the urge - Do NOT push the Fill button again after initial setup. <strong>JV Loans MUST use Credit Plus</strong> as the vendor to order transcripts.</p>
                    </div>

                    <div class="info-box">
                        <h4>Previous Name and Address</h4>
                        <p><strong>1c:</strong> Borrower's Previous Name (if different on tax document) | <strong>2c:</strong> Spouse's Previous Name (if different on tax document) | <strong>Section 4:</strong> Previous Address (if different on tax document)</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: 4506 Scenario Examples -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>4506 Scenario Examples</h2><span>Configuration examples for different borrower situations</span></div>
                </div>
                <div class="section-content">
                    <div class="decision-tree">
                        <h3>Married Borrowers - Filing Jointly 1040 Request</h3>
                        <ul class="step-list">
                            <li><strong>Primary Taxpayer:</strong> Choose Borrower 1 from dropdown</li>
                            <li><strong>Filing Status:</strong> Choose <strong>Jointly</strong> from dropdown</li>
                            <li><strong>Section 6:</strong> Input <strong>1040</strong> in Transcript Requested, Check Return Transcript box</li>
                            <li><strong>Section 8:</strong> Input the Years or period requested</li>
                        </ul>
                    </div>

                    <div class="decision-tree">
                        <h3>Married - Not Jointly (Separate Forms Required)</h3>
                        <ul class="step-list">
                            <li><strong>Borrower 1:</strong> Primary Taxpayer = Borrower 1, Filing Status = Not Jointly</li>
                            <li><strong>Borrower 2:</strong> Create second form, Primary Taxpayer = Borrower 2, Filing Status = Not Jointly</li>
                            <li><strong>Section 6:</strong> Input <strong>1040</strong>, check Return Transcript</li>
                            <li><strong>Section 8:</strong> Input Years requested</li>
                        </ul>
                    </div>

                    <div class="decision-tree">
                        <h3>Borrower W-2 Request</h3>
                        <ul class="step-list">
                            <li><strong>Primary Taxpayer:</strong> Choose appropriate Borrower</li>
                            <li><strong>Filing Status:</strong> Choose <strong>Not Jointly</strong></li>
                            <li><strong>Section 7:</strong> Check <strong>Request wage and income transcript</strong> box</li>
                            <li><strong>Forms Requested:</strong> Enter <strong>W-2</strong></li>
                            <li><strong>Line 1a:</strong> Check the box for the borrower, leave Line 2a blank</li>
                        </ul>
                    </div>

                    <div class="decision-tree">
                        <h3>Joint 1040 with Previous Name/Address</h3>
                        <ul class="step-list">
                            <li><strong>1c:</strong> Fill in Borrower's previous name if different on tax returns</li>
                            <li><strong>2c:</strong> Fill in Spouse's previous name if different on tax returns</li>
                            <li><strong>Section 4:</strong> Fill in Previous address if different on last tax return</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 6: Business Tax Returns -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Business Tax Returns</h2><span>Creating 4506 forms for business entities (1120/1120S/1065)</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Select Self-Employed Borrower</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Filing Status: Not Jointly</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Check Override in 1a</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node input">Enter Business Name in Last Name</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter EIN in SSN Field</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Complete Form</div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li><strong>Step 1:</strong> Choose the <strong>Self-Employed Borrower</strong> from Primary Taxpayer dropdown</li>
                        <li><strong>Step 2:</strong> Choose <strong>Not Jointly</strong> from Filing Status dropdown</li>
                        <li><strong>Step 3:</strong> Click the <strong>Override</strong> box in 1a. Current Name section</li>
                        <li><strong>Step 4:</strong> Type the <strong>Business name</strong> from tax returns in the <strong>Last Name field only</strong></li>
                        <li><strong>Step 5:</strong> Input the <strong>Employer Identification Number (EIN)</strong> from tax return in SSN field</li>
                        <li><strong>Step 6:</strong> Click <strong>Override</strong> box in 3. Current Address field and enter Business Address</li>
                        <li><strong>Step 7:</strong> Input appropriate business tax form: <strong>1120</strong>, <strong>1120S</strong>, or <strong>1065</strong></li>
                        <li><strong>Step 8:</strong> Enter Signatory Title and check <strong>Authorized Representative</strong> box</li>
                    </ul>

                    <div class="info-box">
                        <h4>Acceptable IRS Titles</h4>
                        <p><strong>Corporations (1120/1120S):</strong> CEO, CFO, COO, Controller, Managing Member, President, Secretary, Shareholder, Treasurer, Vice-President</p>
                        <p><strong>Partnerships (1065):</strong> Limited Partner, Partner</p>
                    </div>

                    <div class="exception-box">
                        <h4>Manual Upload for Business 4506</h4>
                        <p>Save to Stored Docs | Status: <strong>Reviewed</strong> | Type: <strong>Documents to be Signed PTF</strong> | Category: <strong>PTF Docs</strong> | Description: <strong>IRS 4506-Business</strong></p>
                    </div>
                </div>
            </section>

            <!-- Section 7: Ordering Tax Transcripts -->
            <section id="section-7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <div class="section-title"><h2>Ordering Tax Transcripts</h2><span>Using Equifax Work Number to request tax transcripts</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>About Equifax Work Number</h4>
                        <p><strong>Equifax: The Work Number</strong> is CMG's tax transcript provider. Their IRS Tax Transcript Fulfillment is a fast and efficient way to request tax transcripts online.</p>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Order Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>W2 Income Statement</strong></td><td>Meet investor requirements or replacement for docs</td></tr>
                            <tr><td><strong>W2/1099/K1 Income Statement</strong></td><td>Meet investor requirements or replacement for docs</td></tr>
                            <tr><td><strong>Transcripts</strong></td><td>Shows details about payments and refunds to the IRS</td></tr>
                            <tr><td><strong>1040 Records of Account</strong></td><td>Proof of tax payments and payment plans</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Two Ways to Order</h4>
                        <p><strong>Method 1:</strong> Upload existing signed 4506-C with the request | <strong>Method 2:</strong> Send blank 4506-C through Equifax to get signed by Borrower(s)</p>
                    </div>
                </div>
            </section>

            <!-- Section 8: Using Work Number -->
            <section id="section-8" class="section">
                <div class="section-header">
                    <div class="section-number">8</div>
                    <div class="section-title"><h2>Using The Work Number Website</h2><span>Step-by-step process for ordering through Equifax portal</span></div>
                </div>
                <div class="section-content">
                    <div class="decision-tree">
                        <h3>Logging In</h3>
                        <ul class="step-list">
                            <li><strong>Step 1:</strong> Login to Equifax at <strong>www.theworknumber.com</strong></li>
                            <li><strong>Step 2:</strong> Click <strong>Log In</strong>, then choose <strong>Verify for Your Organization</strong></li>
                            <li><strong>Step 3:</strong> Enter Username, Password, and complete dual authentication</li>
                        </ul>
                    </div>

                    <div class="decision-tree">
                        <h3>Creating an Order</h3>
                        <ul class="step-list">
                            <li><strong>Step 1:</strong> Enter <strong>SSN</strong> and <strong>Loan Number (ALL CAPS)</strong> in Tracking Number</li>
                            <li><strong>Step 2:</strong> For Business, select <strong>Consumer's application for credit</strong></li>
                            <li><strong>Step 3:</strong> Choose <strong>Individual</strong> or <strong>Business</strong> tax transcripts</li>
                            <li><strong>Step 4:</strong> Click <strong>Start Order</strong></li>
                        </ul>
                    </div>

                    <div class="decision-tree">
                        <h3>Upload Existing Signed 4506-C</h3>
                        <ul class="step-list">
                            <li>Choose <strong>Upload Complete Form</strong> from dropdown</li>
                            <li>Use <strong>Browse Files</strong> to upload the signed 4506</li>
                            <li>Specify signature type (Wet/E-Signature) and platform</li>
                            <li>Check <strong>Acknowledgment</strong> box</li>
                        </ul>
                    </div>

                    <div class="decision-tree">
                        <h3>Generate via Equifax (E-Sign)</h3>
                        <ul class="step-list">
                            <li>Choose <strong>Generate using Electronic Signature powered by Adobe</strong></li>
                            <li>Enter Borrower's <strong>Email Address</strong></li>
                            <li>Enter IRS Record Address (exactly as on Tax Returns)</li>
                            <li>Select forms (<strong>only 1 form type per 4506</strong>)</li>
                        </ul>
                    </div>

                    <div class="info-box">
                        <h4>Borrower Email Process</h4>
                        <p>Borrower receives email with link to sign. Password: <strong>5-digit zip code + last 4 digits of SSN</strong>. Order is submitted to IRS upon completion of signature.</p>
                    </div>

                    <div class="tip-box">
                        <h4>Order Status Tracking</h4>
                        <p>Click <strong>My Orders</strong> -> Search by borrower name -> <strong>IRS Report Status Tracker</strong> shows: Order Submitted -> Sent to IRS -> IRS Confirmed Receipt -> Completed</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <div id="quick-ref" class="quick-ref">
                <h3>4506 & Tax Transcripts Quick Reference</h3>
                <pre>
FORM TYPES                          FILL VALUES SELECTION
=========                           =====================
1040    - Individual Tax Return     Retail:        OCR 4506 C Equifax
W-2     - Wage Statement            Wholesale/JV:  OCR 4506 C JV WHS Credit Plus
1120    - Corporation               (JV Loans MUST use Credit Plus)
1120S   - S-Corporation
1065    - Partnership               FILING STATUS
                                    =============
KEY CONDITION: PTF INC 412          Jointly     - Both borrowers on same form
                                    Not Jointly - Separate forms required

BUSINESS 4506 SETUP                 STORED DOCS SETTINGS
===================                 ====================
1. Override 1a: Business Name       Status:      Reviewed
2. SSN Field: Enter EIN             Type:        Documents to be Signed PTF
3. Override Section 3: Address      Category:    PTF Docs
4. Form: 1120/1120S/1065            Description: IRS 4506-Business
5. Check Authorized Representative

WORK NUMBER ORDERING                BORROWER E-SIGN
====================                ===============
Website: www.theworknumber.com      Password: ZIP + Last 4 SSN
Tracking: Loan # in ALL CAPS        Order auto-submits on signature
                </pre>
            </div>
        </div>

        <!-- ==================== AI AGENTS TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation opportunities for the 4506 & Tax Transcript process</p>
            </div>

            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card"><div class="agent-summary-value">4</div><div class="agent-summary-label">Agent Opportunities</div></div>
                <div class="agent-summary-card"><div class="agent-summary-value">68%</div><div class="agent-summary-label">Automation Potential</div></div>
                <div class="agent-summary-card"><div class="agent-summary-value">12 min</div><div class="agent-summary-label">Est. Time Saved</div></div>
                <div class="agent-summary-card"><div class="agent-summary-value">High</div><div class="agent-summary-label">Compliance Impact</div></div>
            </div>

            <div class="heat-legend">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(90deg, #ef4444, #f97316);"></div><span>Critical (9-10)</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(90deg, #f97316, #eab308);"></div><span>High (7-8)</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(90deg, #eab308, #22c55e);"></div><span>Medium (5-6)</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(90deg, #22c55e, #14b8a6);"></div><span>Low (1-4)</span></div>
            </div>

            <div class="heat-map-container" id="agent-heatmap">
                <div class="heat-map-title">Priority Heat Map</div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-validator')"><div class="heat-score">9.1</div><div class="heat-name">4506 Validator Agent</div><div class="heat-desc">Validate forms against INC 412</div><div class="heat-metrics"><div class="heat-metric">Time: <span>5 min</span></div></div></div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-order')"><div class="heat-score">8.3</div><div class="heat-name">Transcript Order Agent</div><div class="heat-desc">Auto-submit to Work Number</div><div class="heat-metrics"><div class="heat-metric">Time: <span>4 min</span></div></div></div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-builder')"><div class="heat-score">7.6</div><div class="heat-name">Form Builder Agent</div><div class="heat-desc">Auto-generate 4506 forms</div><div class="heat-metrics"><div class="heat-metric">Time: <span>3 min</span></div></div></div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-monitor')"><div class="heat-score">6.2</div><div class="heat-name">Status Monitor</div><div class="heat-desc">Track order completion</div><div class="heat-metrics"><div class="heat-metric">Time: <span>N/A</span></div></div></div>
                </div>
            </div>

            <div id="agent-details">
                <h2 style="color: var(--text-primary); margin-bottom: 25px;">Agent Details</h2>
                <div class="agent-grid">
                    <div class="agent-card" id="agent-validator">
                        <div class="agent-card-header">
                            <div class="agent-icon">V</div>
                            <div class="agent-info"><div class="agent-name">4506 Validator Agent</div><div class="agent-type">Validation / Compliance</div></div>
                            <span class="agent-priority critical">Critical</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Validates all 4506 forms against PTF condition INC 412 requirements, ensuring every qualifying income source has a corresponding signed form.</p>
                            <div class="agent-flow"><div class="agent-flow-title">Agent Flow</div><div class="agent-flow-diagram"><span class="agent-step">Read INC 412</span><span class="agent-arrow">-></span><span class="agent-step">Scan Forms</span><span class="agent-arrow">-></span><span class="agent-step">Compare</span><span class="agent-arrow">-></span><span class="agent-step">Report</span></div></div>
                            <div class="agent-stats"><div class="agent-stat"><div class="agent-stat-value">5 min</div><div class="agent-stat-label">Time Saved</div></div><div class="agent-stat"><div class="agent-stat-value">99%</div><div class="agent-stat-label">Accuracy</div></div><div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div></div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('validator')">View Build Prompt</button>
                        </div>
                    </div>

                    <div class="agent-card" id="agent-order">
                        <div class="agent-card-header">
                            <div class="agent-icon">T</div>
                            <div class="agent-info"><div class="agent-name">Transcript Order Agent</div><div class="agent-type">API Integration</div></div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically submits tax transcript orders to Equifax Work Number using signed 4506 forms, tracks status, and uploads completed transcripts.</p>
                            <div class="agent-flow"><div class="agent-flow-title">Agent Flow</div><div class="agent-flow-diagram"><span class="agent-step">Get 4506</span><span class="agent-arrow">-></span><span class="agent-step">Login</span><span class="agent-arrow">-></span><span class="agent-step">Submit</span><span class="agent-arrow">-></span><span class="agent-step">Track</span></div></div>
                            <div class="agent-stats"><div class="agent-stat"><div class="agent-stat-value">4 min</div><div class="agent-stat-label">Time Saved</div></div><div class="agent-stat"><div class="agent-stat-value">95%</div><div class="agent-stat-label">Accuracy</div></div><div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div></div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('order')">View Build Prompt</button>
                        </div>
                    </div>

                    <div class="agent-card" id="agent-builder">
                        <div class="agent-card-header">
                            <div class="agent-icon">F</div>
                            <div class="agent-info"><div class="agent-name">4506 Form Builder</div><div class="agent-type">Document Generation</div></div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Analyzes qualifying income sources and automatically creates all required 4506 forms with correct borrower, filing status, and form types.</p>
                            <div class="agent-flow"><div class="agent-flow-title">Agent Flow</div><div class="agent-flow-diagram"><span class="agent-step">Analyze</span><span class="agent-arrow">-></span><span class="agent-step">Determine</span><span class="agent-arrow">-></span><span class="agent-step">Create</span><span class="agent-arrow">-></span><span class="agent-step">Validate</span></div></div>
                            <div class="agent-stats"><div class="agent-stat"><div class="agent-stat-value">3 min</div><div class="agent-stat-label">Time Saved</div></div><div class="agent-stat"><div class="agent-stat-value">98%</div><div class="agent-stat-label">Accuracy</div></div><div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div></div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('builder')">View Build Prompt</button>
                        </div>
                    </div>

                    <div class="agent-card" id="agent-monitor">
                        <div class="agent-card-header">
                            <div class="agent-icon">M</div>
                            <div class="agent-info"><div class="agent-name">Status Monitor Agent</div><div class="agent-type">Monitoring / Alerts</div></div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Monitors pending transcript orders, tracks IRS processing status, and notifies processors when transcripts are ready or rejected.</p>
                            <div class="agent-flow"><div class="agent-flow-title">Agent Flow</div><div class="agent-flow-diagram"><span class="agent-step">Poll</span><span class="agent-arrow">-></span><span class="agent-step">Check</span><span class="agent-arrow">-></span><span class="agent-step">Notify</span><span class="agent-arrow">-></span><span class="agent-step">Download</span></div></div>
                            <div class="agent-stats"><div class="agent-stat"><div class="agent-stat-value">N/A</div><div class="agent-stat-label">Time Saved</div></div><div class="agent-stat"><div class="agent-stat-value">99%</div><div class="agent-stat-label">Accuracy</div></div><div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div></div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('monitor')">View Build Prompt</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header"><h3>Workflow Documentation</h3><div class="modal-actions"><button class="modal-btn copy" onclick="copyToClipboard()">Copy</button><button class="modal-btn close" onclick="closeDocModal()">Close</button></div></div>
            <div class="modal-body"><pre id="docContent"># 4506-C & Tax Transcripts Workflow

## Overview
The 4506 authorizes IRS to release tax transcripts. Required for each qualifying income source.

## Form Types
- 1040: Individual Tax Return
- W-2: Wage Statement
- 1120/1120S: Corporation
- 1065: Partnership

## Key Roles
- LO: Identify needs before disclosures
- Processor: Review INC 412, create forms
- Closer: Verify and upload business 4506
- UW: Modify INC 412 for qualifying income

## Work Number
Website: www.theworknumber.com
Upload signed 4506 or generate via Equifax e-sign</pre></div>
        </div>
    </div>

    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header"><h3 id="promptModalTitle">Agent Prompt</h3><div class="modal-actions"><button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy</button><button class="modal-btn close" onclick="closePromptModal()">Close</button></div></div>
            <div class="modal-body"><div class="prompt-tags" id="promptTags"></div><div class="prompt-section"><h4>Purpose</h4><div class="prompt-box" id="promptPurpose"></div></div><div class="prompt-section"><h4>Build Prompt</h4><div class="prompt-box" id="promptContent"></div></div></div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied!</div>

    <script>
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }
            window.scrollTo(0, 0);
        }

        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
                scrollTimeout = setTimeout(() => { isScrolling = false; }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        function openDocModal() { document.getElementById('docModal').classList.add('show'); document.body.style.overflow = 'hidden'; }
        function closeDocModal() { document.getElementById('docModal').classList.remove('show'); document.body.style.overflow = ''; }
        async function copyToClipboard() { try { await navigator.clipboard.writeText(document.getElementById('docContent').textContent); document.getElementById('copySuccess').style.display = 'block'; setTimeout(() => { document.getElementById('copySuccess').style.display = 'none'; }, 2000); } catch (e) { alert('Failed'); } }

        function scrollToAgent(agentId) {
            const card = document.getElementById(agentId);
            if (card) { card.scrollIntoView({ behavior: 'smooth', block: 'center' }); setTimeout(() => { card.classList.add('highlight'); }, 300); setTimeout(() => { card.classList.remove('highlight'); }, 2500); }
        }

        const agentPrompts = {
            validator: { name: '4506 Validator', tags: ['Validation', 'Compliance'], purpose: 'Validates 4506 forms against INC 412 requirements.', prompt: 'Build agent to read INC 412, scan all 4506 forms, compare requirements, and report missing/incorrect forms.' },
            order: { name: 'Transcript Order', tags: ['API', 'Automation'], purpose: 'Submits transcript orders to Work Number automatically.', prompt: 'Build agent to login to Work Number, upload 4506, submit order, and track status through completion.' },
            builder: { name: 'Form Builder', tags: ['Generation'], purpose: 'Auto-generates required 4506 forms based on income sources.', prompt: 'Build agent to analyze qualifying income, determine form types, create forms in Byte with correct settings.' },
            monitor: { name: 'Status Monitor', tags: ['Monitoring'], purpose: 'Tracks transcript order status and notifies on completion.', prompt: 'Build agent to poll Work Number status, detect changes, notify processors, and auto-download completed transcripts.' }
        };

        function showAgentPrompt(key) {
            const a = agentPrompts[key]; if (!a) return;
            document.getElementById('promptModalTitle').textContent = a.name;
            document.getElementById('promptTags').innerHTML = a.tags.map(t => '<span class="prompt-tag">' + t + '</span>').join('');
            document.getElementById('promptPurpose').textContent = a.purpose;
            document.getElementById('promptContent').textContent = a.prompt;
            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() { document.getElementById('promptModal').classList.remove('show'); document.body.style.overflow = ''; }
        async function copyPromptToClipboard() { try { await navigator.clipboard.writeText(document.getElementById('promptContent').textContent); document.getElementById('copySuccess').style.display = 'block'; setTimeout(() => { document.getElementById('copySuccess').style.display = 'none'; }, 2000); } catch (e) { alert('Failed'); } }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });
        document.getElementById('promptModal').addEventListener('click', (e) => { if (e.target.id === 'promptModal') closePromptModal(); });
        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });
    </script>
</body>
</html>
