<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First-Time Homebuyer Home Comparison Checklist - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Feature Cards */
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .feature-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .feature-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .feature-card-header h4 { font-size: 1.05rem; }
        .feature-card-body { padding: 22px; }
        .feature-card ul { list-style: none; padding: 0; }
        .feature-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .feature-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        .copy-prompt-btn {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 15px;
        }

        .copy-prompt-btn:hover { transform: scale(1.05); box-shadow: 0 5px 20px rgba(139, 92, 246, 0.3); }

        /* Step List */
        .step-list { list-style: none; padding: 0; margin: 18px 0; }
        .step-list li {
            padding: 14px 18px;
            border-left: 3px solid var(--accent-blue);
            background: rgba(0,0,0,0.2);
            margin-bottom: 10px;
            border-radius: 0 8px 8px 0;
            color: var(--text-secondary);
        }
        .step-list li strong { color: var(--text-primary); }

        /* Checklist Category */
        .checklist-category {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .checklist-category h3 {
            color: var(--accent-teal);
            margin-bottom: 18px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-subtle);
            font-size: 1.1rem;
        }

        .checklist-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            color: var(--text-secondary);
        }

        .checklist-item .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--accent-blue);
            border-radius: 4px;
            flex-shrink: 0;
        }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Mortgage Fundamentals</a>
        <span class="separator">></span>
        <span class="current">First-Time Homebuyer Home Comparison Checklist</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Home Comparison Checklist</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Overview & Purpose</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Step 1: Select Features</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Step 2: Rank Importance</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Step 3: Check Features</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Location Features</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Layout Features</span>
            </a>
            <a href="#section-7" class="nav-item">
                <span class="nav-number">7</span>
                <span class="nav-label">Extra Features</span>
            </a>
            <a href="#section-8" class="nav-item">
                <span class="nav-number">8</span>
                <span class="nav-label">Calculate Rankings</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>First-Time Homebuyer Home Comparison Checklist</h1>
                <p class="subtitle">A comprehensive tool to help first-time homebuyers identify important features, rank preferences, and objectively compare multiple homes</p>
                <div class="meta">
                    <span class="meta-item">Source: Enact MI</span>
                    <span class="meta-item">Audience: First-Time Homebuyers</span>
                    <span class="meta-item">Document: 01755.CB.0323</span>
                    <span class="meta-item">Duration: 15-30 min</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 1: Overview & Purpose -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Overview & Purpose</h2><span>Understanding the Home Comparison Checklist tool</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start Home Search</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Use Comparison Tool</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Make Informed Decision</div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>What is the Home Comparison Checklist?</h4>
                        <p>Choosing a home is a major decision, but the process can be exciting! This comparison tool allows first-time homebuyers to quickly identify the features that are important to them and rank options to see which home best aligns with their preferences.</p>
                    </div>
                    <div class="summary-grid">
                        <div class="summary-card">
                            <h4>Compare Up To</h4>
                            <div class="value">3</div>
                            <div class="label">Homes at Once</div>
                        </div>
                        <div class="summary-card">
                            <h4>Feature Categories</h4>
                            <div class="value">3</div>
                            <div class="label">Location, Layouts, Extras</div>
                        </div>
                        <div class="summary-card">
                            <h4>Process Steps</h4>
                            <div class="value">3</div>
                            <div class="label">Select, Rank, Check</div>
                        </div>
                        <div class="summary-card">
                            <h4>Output</h4>
                            <div class="value">Score</div>
                            <div class="label">Ranked Home Results</div>
                        </div>
                    </div>
                    <div class="tip-box">
                        <h4>Why Use This Tool?</h4>
                        <p>First-time homebuyers often feel overwhelmed by the number of decisions involved. This checklist transforms subjective feelings into objective comparisons by weighting features based on personal importance and tracking which homes actually have the features that matter most.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Step 1 - Select Features -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Step 1: Select Features</h2><span>Identify the features most important to you in a home</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Review Feature Categories</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Important to You?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">YES</span>
                                <div class="flow-node output">Add to Checklist</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">NO</span>
                                <div class="flow-node action">Skip Feature</div>
                            </div>
                        </div>
                    </div>
                    <ul class="step-list">
                        <li><strong>Review Suggestions:</strong> The checklist provides pre-populated feature suggestions across three categories: Location, Layouts, and Extra Features</li>
                        <li><strong>Use Your Own:</strong> You can also create your own custom features by writing them in the blank rows provided</li>
                        <li><strong>Be Selective:</strong> Only include features that are genuinely important to your decision - not everything needs to be tracked</li>
                        <li><strong>Think Long-Term:</strong> Consider both immediate needs and future requirements (family growth, aging in place, etc.)</li>
                    </ul>
                    <div class="info-box">
                        <h4>Feature Selection Tips</h4>
                        <p>Focus on "must-haves" vs "nice-to-haves". Must-haves are non-negotiable (e.g., minimum bedrooms for your family). Nice-to-haves can be compromised if the price or other factors are right.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Step 2 - Rank Importance -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Step 2: Rank Importance</h2><span>Prioritize features with 1 being most important</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">List Selected Features</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Assign Priority Rank</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Weighted Scoring Ready</div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Meaning</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>1</strong></td>
                                <td>Most Important - Non-negotiable priority</td>
                                <td>Commute to Work (must be under 30 min)</td>
                            </tr>
                            <tr>
                                <td><strong>2</strong></td>
                                <td>Very Important - High priority</td>
                                <td>Minimum 3 Bedrooms</td>
                            </tr>
                            <tr>
                                <td><strong>3</strong></td>
                                <td>Important - Significant factor</td>
                                <td>Good School District</td>
                            </tr>
                            <tr>
                                <td><strong>4+</strong></td>
                                <td>Nice to Have - Would be great but flexible</td>
                                <td>Pool, Fireplace, etc.</td>
                            </tr>
                            <tr>
                                <td><strong>0</strong></td>
                                <td>Default - Not yet ranked</td>
                                <td>Feature needs ranking assignment</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="tip-box">
                        <h4>Ranking Strategy</h4>
                        <p>Lower numbers = Higher importance. The calculator will weight features with rank "1" more heavily than features with rank "5". Be honest about what truly matters - if good schools are more important than a pool, make sure the rankings reflect that!</p>
                    </div>
                    <div class="exception-box">
                        <h4>Avoid Ranking Ties</h4>
                        <p>Try not to give multiple features the same rank. Force yourself to make hard choices about priorities - this is what makes the comparison tool most effective. If two things are "equally important," which would you choose if you could only have one?</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Step 3 - Check Features -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Step 3: Check Features</h2><span>Mark which homes have each feature</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Enter Home Details</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Tour/Research Each Home</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Check Applicable Boxes</div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Address</strong></td>
                                <td>Full street address of the property</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>List Price</strong></td>
                                <td>Current asking price for the home</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Est. Monthly Payment</strong></td>
                                <td>Estimated mortgage payment (use mortgage calculator)</td>
                                <td><span class="badge optional-badge">Recommended</span></td>
                            </tr>
                            <tr>
                                <td><strong>Feature Checkboxes</strong></td>
                                <td>Check the box if the home HAS this feature</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="info-box">
                        <h4>How to Check Features</h4>
                        <p>For each home you're considering (Home 1, Home 2, Home 3), check the box in that column if the property has the corresponding feature. Leave the box unchecked if the home does NOT have that feature.</p>
                    </div>
                    <ul class="step-list">
                        <li><strong>Be Objective:</strong> Only check the box if the home genuinely meets that criteria - don't check "Pool" if it has a small splash pad</li>
                        <li><strong>Research Thoroughly:</strong> Use listing photos, virtual tours, and in-person visits to verify features</li>
                        <li><strong>Take Notes:</strong> For features that are "close but not quite," make notes for discussion with your loan officer</li>
                        <li><strong>Update as Needed:</strong> You can revisit and update checkboxes as you learn more about each property</li>
                    </ul>
                </div>
            </section>

            <!-- Section 5: Location Features -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Location Features</h2><span>Key location-related factors to consider</span></div>
                </div>
                <div class="section-content">
                    <div class="checklist-category">
                        <h3>Location Category - Suggested Features</h3>
                        <div class="checklist-items">
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Commute to Work</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Proximity to School</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Access to Public Transportation</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Walkability - Sidewalks, Paths, Parks, etc.</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Urban, Suburban, Rural</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Location in a Homeowners Association (HOA)</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Access to Airports, Highways</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Convenient to Shopping & Restaurants</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Nearness to Family & Friends</span>
                            </div>
                        </div>
                    </div>
                    <div class="tip-box">
                        <h4>Location Considerations for First-Time Buyers</h4>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>You can change almost everything about a house except its location</li>
                            <li>Consider commute times at rush hour, not just weekend visits</li>
                            <li>Research school ratings even if you don't have children - it affects resale value</li>
                            <li>HOA fees add to monthly costs but may provide amenities and maintain property values</li>
                        </ul>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Location Feature</th>
                                <th>Why It Matters</th>
                                <th>How to Verify</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Commute to Work</strong></td>
                                <td>Daily time and gas/transit costs add up significantly</td>
                                <td>Drive the route during rush hour before making offer</td>
                            </tr>
                            <tr>
                                <td><strong>Proximity to School</strong></td>
                                <td>School district quality affects property values</td>
                                <td>Check GreatSchools.org, state ratings</td>
                            </tr>
                            <tr>
                                <td><strong>HOA Location</strong></td>
                                <td>Rules, fees, and amenities vary widely</td>
                                <td>Request HOA documents, review fees and restrictions</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 6: Layout Features -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Layout Features</h2><span>Home structure and space considerations</span></div>
                </div>
                <div class="section-content">
                    <div class="checklist-category">
                        <h3>Layouts Category - Suggested Features</h3>
                        <div class="checklist-items">
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Minimum Desired Square Footage</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Minimum Desired # of Bedrooms</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Minimum Desired # of Bathrooms</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Basement [Finished or Unfinished]</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Outdoor Living Space</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Laundry Room</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Style of House [Ranch, Colonial, Craftsman, etc.]</span>
                            </div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>Thinking About Space</h4>
                        <p>Consider your current and future needs. Will you work from home? Do you need guest rooms? Are you planning to expand your family? A home office, nursery, or in-law suite might be important even if not immediately needed.</p>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Layout Feature</th>
                                <th>Typical Buyer Needs</th>
                                <th>Renovation Potential</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Square Footage</strong></td>
                                <td>2,000-2,500 sq ft avg for families</td>
                                <td><span class="badge required-badge">Hard to Change</span></td>
                            </tr>
                            <tr>
                                <td><strong>Bedrooms</strong></td>
                                <td>3+ for families, 2+ for couples</td>
                                <td><span class="badge optional-badge">Moderate</span></td>
                            </tr>
                            <tr>
                                <td><strong>Bathrooms</strong></td>
                                <td>2+ recommended, 1.5 minimum</td>
                                <td><span class="badge required-badge">Expensive to Add</span></td>
                            </tr>
                            <tr>
                                <td><strong>Basement</strong></td>
                                <td>Storage, future living space, storm shelter</td>
                                <td><span class="badge calculated-badge">Can Finish Later</span></td>
                            </tr>
                            <tr>
                                <td><strong>Outdoor Space</strong></td>
                                <td>Deck, patio, yard size for activities</td>
                                <td><span class="badge optional-badge">Easier to Add</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 7: Extra Features -->
            <section id="section-7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <div class="section-title"><h2>Extra Features</h2><span>Additional amenities and property characteristics</span></div>
                </div>
                <div class="section-content">
                    <div class="checklist-category">
                        <h3>Extra Features Category - Suggested Features</h3>
                        <div class="checklist-items">
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Desired Age of Home [New or Existing]</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Pool</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Garage</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Appliances Included</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Fireplace [Gas or Wood]</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Exterior Material [Brick or Siding]</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Lot Size</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Fenced Yard</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checkbox"></span>
                                <span>Power Source [Gas or Electric]</span>
                            </div>
                        </div>
                    </div>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-card-header">
                                <h4>New Construction Benefits</h4>
                            </div>
                            <div class="feature-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Builder warranty coverage</li>
                                    <li><span class="check-icon">+</span> Modern energy efficiency</li>
                                    <li><span class="check-icon">+</span> Customize finishes</li>
                                    <li><span class="check-icon">+</span> Latest building codes</li>
                                    <li><span class="x-icon">-</span> May cost more per sq ft</li>
                                </ul>
                            </div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-header">
                                <h4>Existing Home Benefits</h4>
                            </div>
                            <div class="feature-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Established neighborhood</li>
                                    <li><span class="check-icon">+</span> Mature landscaping</li>
                                    <li><span class="check-icon">+</span> Character and charm</li>
                                    <li><span class="check-icon">+</span> Often more space for price</li>
                                    <li><span class="x-icon">-</span> May need updates/repairs</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="exception-box">
                        <h4>Pool Considerations</h4>
                        <p>Pools can increase insurance costs, require ongoing maintenance, and may limit buyer pool when selling. However, they add significant lifestyle value in warmer climates. Consider both the costs and benefits carefully before making this a priority feature.</p>
                    </div>
                </div>
            </section>

            <!-- Section 8: Calculate Rankings -->
            <section id="section-8" class="section">
                <div class="section-header">
                    <div class="section-number">8</div>
                    <div class="section-title"><h2>Calculate Rankings</h2><span>How the comparison tool generates results</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Features Selected</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Rankings Assigned</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Checkboxes Completed</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Calculator Ranks Homes</div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>How Scoring Works</h4>
                        <p>The calculator ranks each home based on your preferences. Homes that have more of your highly-ranked features will score higher than homes missing those features. The final ranking helps you objectively compare which home best matches what you've identified as most important.</p>
                    </div>
                    <div class="decision-tree">
                        <h3>Interpreting Results</h3>
                        <ul class="step-list">
                            <li><strong>Highest Score:</strong> Home that best matches your prioritized features - but don't ignore price and affordability!</li>
                            <li><strong>Close Scores:</strong> If two homes score similarly, revisit your rankings or consider other factors like price, neighborhood feel, or gut instinct</li>
                            <li><strong>Low Score:</strong> A home scoring low may still be worth considering if it excels in your #1 priority or is significantly below budget</li>
                            <li><strong>Use as a Guide:</strong> This tool informs your decision but shouldn't be the only factor - trust your instincts too</li>
                        </ul>
                    </div>
                    <div class="tip-box">
                        <h4>Private Mortgage Insurance (PMI) Note</h4>
                        <p>Homeownership doesn't have to be a dream! Private mortgage insurance can get you into a house faster with less than a 20% down payment. Talk to your loan officer to learn more about the value of mortgage insurance from Enact.</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <div id="quick-ref" class="quick-ref">
                <h3>Home Comparison Checklist Quick Reference</h3>
                <pre>
HOME COMPARISON CHECKLIST - QUICK GUIDE
=======================================

3-STEP PROCESS
==============
Step 1: SELECT features important to you
Step 2: RANK importance (1 = most important)
Step 3: CHECK boxes if homes have features

LOCATION FEATURES
=================
[ ] Commute to Work
[ ] Proximity to School
[ ] Access to Public Transportation
[ ] Walkability - Sidewalks, Paths, Parks
[ ] Urban, Suburban, Rural
[ ] Location in HOA
[ ] Access to Airports, Highways
[ ] Convenient to Shopping & Restaurants
[ ] Nearness to Family & Friends

LAYOUT FEATURES
===============
[ ] Minimum Desired Square Footage
[ ] Minimum Desired # of Bedrooms
[ ] Minimum Desired # of Bathrooms
[ ] Basement [Finished or Unfinished]
[ ] Outdoor Living Space
[ ] Laundry Room
[ ] Style of House [Ranch, Colonial, etc.]

EXTRA FEATURES
==============
[ ] Desired Age of Home [New or Existing]
[ ] Pool
[ ] Garage
[ ] Appliances Included
[ ] Fireplace [Gas or Wood]
[ ] Exterior Material [Brick or Siding]
[ ] Lot Size
[ ] Fenced Yard
[ ] Power Source [Gas or Electric]

HOME DETAILS TO RECORD
======================
- Address
- List Price
- Est. Monthly Payment

SCORING TIPS
============
- Lower rank number = Higher importance
- Calculator weights highly-ranked features more
- Compare scores but consider price too
- Trust your instincts alongside the numbers

DOCUMENT INFO
=============
Source: Enact Mortgage Insurance
Document: 01755.CB.0323
Copyright: 2023 Enact Holdings, Inc.
                </pre>
            </div>
        </div>

        <!-- ==================== AI AGENTS TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Agent Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation opportunities identified for the Home Comparison process</p>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">4</div>
                    <div class="agent-summary-label">Agent Opportunities</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">65%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">45 min</div>
                    <div class="agent-summary-label">Est. Time Saved</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">High</div>
                    <div class="agent-summary-label">Customer Experience Impact</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend">
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #ef4444, #f97316);"></div>
                    <span>Critical Priority (9-10)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #f97316, #eab308);"></div>
                    <span>High Priority (7-8)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #eab308, #22c55e);"></div>
                    <span>Medium Priority (5-6)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #22c55e, #14b8a6);"></div>
                    <span>Low Priority (1-4)</span>
                </div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container" id="agent-heatmap">
                <div class="heat-map-title">Priority Heat Map</div>
                <div class="heat-map-grid">
                    <div class="heat-item high" onclick="scrollToAgent('agent-listing')">
                        <div class="heat-score">8.5</div>
                        <div class="heat-name">Listing Data Agent</div>
                        <div class="heat-desc">Auto-populate home details from MLS listings</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>15 min</span></div>
                            <div class="heat-metric">Complexity: <span>Medium</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-commute')">
                        <div class="heat-score">7.8</div>
                        <div class="heat-name">Commute Calculator</div>
                        <div class="heat-desc">Calculate commute times to work addresses</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>10 min</span></div>
                            <div class="heat-metric">Complexity: <span>Low</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-school')">
                        <div class="heat-score">6.2</div>
                        <div class="heat-name">School Rating Agent</div>
                        <div class="heat-desc">Fetch school ratings for property addresses</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>10 min</span></div>
                            <div class="heat-metric">Complexity: <span>Low</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-payment')">
                        <div class="heat-score">5.5</div>
                        <div class="heat-name">Payment Estimator</div>
                        <div class="heat-desc">Calculate monthly payment with taxes/insurance</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>10 min</span></div>
                            <div class="heat-metric">Complexity: <span>Low</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <div id="agent-details">
                <h2 style="color: var(--text-primary); margin-bottom: 25px; font-size: 1.5rem;">Agent Details</h2>
                <div class="agent-grid">
                    <!-- Listing Data Agent -->
                    <div class="agent-card" id="agent-listing">
                        <div class="agent-card-header">
                            <div class="agent-icon">L</div>
                            <div class="agent-info">
                                <div class="agent-name">Listing Data Agent</div>
                                <div class="agent-type">Data Integration / MLS API</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically pulls property details from MLS listings when a user enters an address or listing URL. Populates price, square footage, bedrooms, bathrooms, and other features to eliminate manual data entry.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Enter Address/URL</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Query MLS</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Parse Details</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Auto-Fill Form</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">15 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">95%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Med</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('listing')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- Commute Calculator Agent -->
                    <div class="agent-card" id="agent-commute">
                        <div class="agent-card-header">
                            <div class="agent-icon">C</div>
                            <div class="agent-info">
                                <div class="agent-name">Commute Calculator</div>
                                <div class="agent-type">Maps Integration / Routing</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Calculates commute time from each property to the buyer's workplace using real traffic data. Shows drive time, distance, and public transit options to help buyers evaluate location convenience.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Property Address</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Work Address</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Maps API</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Commute Report</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">10 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">98%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('commute')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- School Rating Agent -->
                    <div class="agent-card" id="agent-school">
                        <div class="agent-card-header">
                            <div class="agent-icon">S</div>
                            <div class="agent-info">
                                <div class="agent-name">School Rating Agent</div>
                                <div class="agent-type">Data Enrichment / Education API</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Fetches school district information and ratings for each property address. Displays elementary, middle, and high school options with ratings to help buyers evaluate educational options.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Property Address</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">School API</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Fetch Ratings</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Display Scores</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">10 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">92%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('school')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- Payment Estimator Agent -->
                    <div class="agent-card" id="agent-payment">
                        <div class="agent-card-header">
                            <div class="agent-icon">P</div>
                            <div class="agent-info">
                                <div class="agent-name">Payment Estimator</div>
                                <div class="agent-type">Financial Calculation</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Calculates estimated monthly payment including principal, interest, taxes, insurance, and PMI based on list price, assumed down payment, and current rates. Helps buyers quickly assess affordability.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">List Price</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Down Payment</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Rate Lookup</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">PITI Calculation</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">10 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">90%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('payment')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Home Comparison Checklist Documentation</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># First-Time Homebuyer Home Comparison Checklist

## Overview
A comparison tool that helps first-time homebuyers identify important features, rank preferences, and objectively compare multiple homes.

## 3-Step Process

### Step 1: Select Features
- Review pre-populated suggestions
- Add custom features as needed
- Focus on genuine priorities

### Step 2: Rank Importance
- Assign priority rankings (1 = most important)
- Lower numbers = higher weight in scoring
- Avoid ties for best results

### Step 3: Check Features
- Enter property address and price
- Check boxes for features each home HAS
- Be objective and thorough

## Feature Categories

### Location
- Commute to Work
- Proximity to School
- Public Transportation Access
- Walkability
- Urban/Suburban/Rural
- HOA Location
- Highway/Airport Access
- Shopping & Restaurants
- Family & Friends Proximity

### Layouts
- Minimum Square Footage
- Number of Bedrooms
- Number of Bathrooms
- Basement (Finished/Unfinished)
- Outdoor Living Space
- Laundry Room
- House Style

### Extra Features
- Home Age (New/Existing)
- Pool
- Garage
- Appliances Included
- Fireplace
- Exterior Material
- Lot Size
- Fenced Yard
- Power Source

## Scoring
Calculator ranks homes based on weighted preferences. Higher-ranked features contribute more to the score. Use results as a guide alongside price and intuition.

## Source
Enact Mortgage Insurance - Document 01755.CB.0323
Copyright 2023 Enact Holdings, Inc.</pre>
            </div>
        </div>
    </div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav click to temporarily disable scroll spy
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);

                // Remove active from all, add to clicked
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Re-enable scroll spy after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Agent Prompt System
        const agentPrompts = {
            listing: {
                name: 'Listing Data Agent',
                tags: ['Data Integration', 'MLS API', 'Medium Complexity', 'High Priority'],
                purpose: `This agent automatically pulls property details from MLS listings when a user enters an address or listing URL. It populates price, square footage, bedrooms, bathrooms, and other features to eliminate manual data entry and reduce errors.`,
                prompt: `You are building a Data Integration Agent for the Home Comparison Checklist.

AGENT NAME: Listing Data Agent
TYPE: Data Integration / MLS API

OBJECTIVE:
Automatically fetch and populate property details from MLS listings when a buyer enters an address or listing URL.

INPUT DATA:
- Property address (street, city, state, zip)
- OR MLS listing URL (Zillow, Redfin, Realtor.com)

DATA SOURCES:
1. Zillow API / Zestimate data
2. Redfin API
3. Realtor.com data
4. Local MLS IDX feeds

FIELDS TO EXTRACT:
{
  "address": "123 Main St, Anytown, ST 12345",
  "list_price": 450000,
  "square_footage": 2200,
  "bedrooms": 4,
  "bathrooms": 2.5,
  "year_built": 2015,
  "lot_size": "0.25 acres",
  "garage": true,
  "garage_spaces": 2,
  "pool": false,
  "fireplace": true,
  "fireplace_type": "gas",
  "basement": true,
  "basement_finished": false,
  "hoa": true,
  "hoa_fee": 150,
  "property_type": "Single Family",
  "exterior": "Brick",
  "heating": "Gas",
  "cooling": "Central"
}

AUTO-CHECK LOGIC:
- If bedrooms >= user's minimum -> check "Minimum Bedrooms"
- If bathrooms >= user's minimum -> check "Minimum Bathrooms"
- If square_footage >= user's minimum -> check "Minimum Sq Ft"
- If pool == true -> check "Pool"
- etc.

ERROR HANDLING:
- If address not found: Prompt for manual entry
- If partial data: Fill what's available, flag missing
- If multiple matches: Show disambiguation options`,
                integration: `INTEGRATION POINTS:
1. MLS/IDX Data Feeds
   - RETS or Web API access
   - Rate limiting compliance
   - Data licensing requirements

2. Third-Party APIs
   - Zillow Bridge API
   - Redfin Partners
   - Realtor.com developer access

3. Form Auto-Fill
   - Map extracted fields to checklist
   - Handle unit conversions
   - Format currency values

4. Caching
   - Cache listings for 24 hours
   - Invalidate on price change alerts`
            },
            commute: {
                name: 'Commute Calculator Agent',
                tags: ['Maps Integration', 'Routing', 'Low Complexity', 'High Priority'],
                purpose: `This agent calculates commute time from each property to the buyer's workplace using real traffic data. It shows drive time, distance, and public transit options to help buyers evaluate location convenience objectively.`,
                prompt: `You are building a Maps Integration Agent for the Home Comparison Checklist.

AGENT NAME: Commute Calculator
TYPE: Maps Integration / Routing

OBJECTIVE:
Calculate and compare commute times from each property to buyer's workplace.

INPUT DATA:
- Property addresses (Home 1, 2, 3)
- Work address
- Preferred arrival time (for traffic calculation)

API INTEGRATION:
1. Google Maps Directions API
   - Driving directions with traffic
   - Transit directions
   - Walking/biking options

2. Alternative APIs
   - MapQuest
   - HERE Maps
   - OpenRouteService

CALCULATION MODES:
{
  "driving": {
    "duration_typical": "25 min",
    "duration_rush_hour": "45 min",
    "distance_miles": 12.3
  },
  "transit": {
    "duration": "55 min",
    "walking_time": "12 min",
    "transfers": 1
  },
  "bicycling": {
    "duration": "35 min",
    "distance_miles": 8.5
  }
}

OUTPUT FORMAT:
Per property, generate commute score:
- Under 15 min: Excellent
- 15-30 min: Good
- 30-45 min: Moderate
- 45-60 min: Long
- Over 60 min: Very Long

AUTO-CHECK LOGIC:
- If commute_rush_hour <= user_max -> check "Commute to Work"`,
                integration: `INTEGRATION POINTS:
1. Google Maps Platform
   - Directions API key
   - Places API for address validation
   - Rate limits: 50 requests/second

2. Traffic Data
   - Real-time traffic updates
   - Historical traffic patterns
   - Rush hour modeling

3. User Preferences
   - Store work address securely
   - Allow multiple work addresses (dual income)
   - Preferred arrival times

4. Comparison Display
   - Side-by-side commute table
   - Color-coded by duration
   - Map visualization option`
            },
            school: {
                name: 'School Rating Agent',
                tags: ['Data Enrichment', 'Education API', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent fetches school district information and ratings for each property address. It displays elementary, middle, and high school options with ratings to help buyers evaluate educational options for current or future children.`,
                prompt: `You are building a Data Enrichment Agent for the Home Comparison Checklist.

AGENT NAME: School Rating Agent
TYPE: Data Enrichment / Education API

OBJECTIVE:
Fetch and display school district ratings for each property.

INPUT DATA:
- Property addresses

DATA SOURCES:
1. GreatSchools.org API
2. Niche.com school ratings
3. State education department data
4. US Census school district boundaries

OUTPUT DATA:
{
  "elementary": {
    "name": "Lincoln Elementary",
    "rating": 8,
    "distance": "0.5 mi",
    "type": "Public"
  },
  "middle": {
    "name": "Jefferson Middle School",
    "rating": 7,
    "distance": "1.2 mi",
    "type": "Public"
  },
  "high": {
    "name": "Washington High School",
    "rating": 9,
    "distance": "2.1 mi",
    "type": "Public"
  },
  "district_rating": 8,
  "nearby_private": [
    {
      "name": "St. Mary's Academy",
      "rating": 9,
      "distance": "3.5 mi"
    }
  ]
}

SCORING:
- Rating 9-10: Excellent
- Rating 7-8: Good
- Rating 5-6: Average
- Rating Below 5: Below Average

AUTO-CHECK LOGIC:
- If district_rating >= user_minimum -> check "Proximity to School"`,
                integration: `INTEGRATION POINTS:
1. GreatSchools API
   - School search by address
   - District boundary lookup
   - Rating retrieval

2. Address Geocoding
   - Convert address to lat/long
   - Match to school districts
   - Calculate distances

3. Comparison Display
   - School cards per property
   - Rating badges
   - Distance indicators

4. Data Freshness
   - Cache ratings for 30 days
   - Update after rating changes
   - Show "as of" date`
            },
            payment: {
                name: 'Payment Estimator Agent',
                tags: ['Financial Calculation', 'Rate API', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent calculates estimated monthly payment including principal, interest, taxes, insurance, and PMI based on list price, assumed down payment, and current rates. It helps buyers quickly assess affordability without manual calculations.`,
                prompt: `You are building a Financial Calculation Agent for the Home Comparison Checklist.

AGENT NAME: Payment Estimator
TYPE: Financial Calculation

OBJECTIVE:
Calculate estimated monthly mortgage payment for each property.

INPUT DATA:
- List price
- Down payment percentage (default 10%)
- Credit score range (for rate estimation)
- Loan type preference (Conventional, FHA, VA)

CALCULATION COMPONENTS:
{
  "loan_amount": 405000,
  "interest_rate": 6.75,
  "loan_term": 360,
  "principal_interest": 2627,
  "property_tax": 375,
  "homeowners_insurance": 150,
  "pmi": 168,
  "hoa_fee": 150,
  "total_piti": 3470
}

RATE SOURCES:
1. Freddie Mac PMMS (weekly average)
2. Bankrate.com
3. CMG Financial rate sheets
4. Real-time rate APIs

TAX ESTIMATION:
- Use county tax rate by property address
- Average 1.1% of home value nationally
- Adjust for local exemptions

INSURANCE ESTIMATION:
- National average: $1,200/year
- Adjust by state and property value
- Factor in flood zone status

PMI CALCULATION:
- If down payment < 20%
- Rate based on LTV and credit score
- Typical range: 0.5% - 1.5% annually

OUTPUT:
{
  "monthly_payment": 3470,
  "breakdown": {
    "P&I": 2627,
    "Taxes": 375,
    "Insurance": 150,
    "PMI": 168,
    "HOA": 150
  },
  "total_cash_to_close": 52500
}`,
                integration: `INTEGRATION POINTS:
1. Rate APIs
   - Daily rate updates
   - Rate lock simulation
   - Points/no-points comparison

2. Property Tax Databases
   - County assessor APIs
   - Historical tax records
   - Exemption eligibility

3. Insurance Estimators
   - Home value-based quotes
   - Flood zone lookup
   - Bundling discounts

4. PMI Providers
   - Enact MI rate cards
   - LTV-based pricing
   - Monthly vs upfront options

5. Comparison Display
   - Side-by-side payment table
   - Affordability indicators
   - What-if scenarios`
            }
        };

        // Show agent prompt modal
        let currentPromptContent = '';

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = agent.name + ' - Build Prompt';

            const tagsHtml = agent.tags.map(tag => '<span class="prompt-tag">' + tag + '</span>').join('');
            document.getElementById('promptTags').innerHTML = tagsHtml;

            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            currentPromptContent = '# ' + agent.name + '\n\n## Purpose\n' + agent.purpose + '\n\n## Build Prompt\n' + agent.prompt + '\n\n## Integration Points\n' + agent.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            try {
                await navigator.clipboard.writeText(currentPromptContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
