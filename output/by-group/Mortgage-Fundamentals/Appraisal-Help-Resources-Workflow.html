<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appraisal Help Resources - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Contact Cards */
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin: 22px 0;
        }

        .contact-card {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .contact-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.3);
        }

        .contact-card-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .contact-card-header.reviews {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
        }

        .contact-card-header.setup {
            background: linear-gradient(135deg, var(--accent-teal) 0%, var(--accent-green) 100%);
        }

        .contact-card-header h4 { font-size: 1.1rem; font-weight: 700; margin-bottom: 8px; }
        .contact-card-header .email { font-size: 0.9rem; opacity: 0.9; }
        .contact-card-header .email a { color: white; text-decoration: none; }
        .contact-card-header .email a:hover { text-decoration: underline; }

        .contact-card-body { padding: 22px; }
        .contact-card-body ul { list-style: none; padding: 0; margin: 0; }
        .contact-card-body li {
            padding: 12px 0;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: flex-start;
            gap: 12px;
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }
        .contact-card-body li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; flex-shrink: 0; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* Step List */
        .step-list { list-style: none; padding: 0; margin: 18px 0; }
        .step-list li {
            padding: 14px 18px;
            border-left: 3px solid var(--accent-blue);
            background: rgba(0,0,0,0.2);
            margin-bottom: 10px;
            border-radius: 0 8px 8px 0;
            color: var(--text-secondary);
        }
        .step-list li strong { color: var(--text-primary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
            .contact-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Mortgage Fundamentals</a>
        <span class="separator">></span>
        <span class="current">Appraisal Help Resources</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Appraisal Help</h2>
            <p>Contact & Resource Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Contact Overview</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Appraisal Department</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Appraisal Reviews</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Appraiser Setup</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Request Routing</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Appraisal Help Resources</h1>
                <p class="subtitle">Complete guide to CMG Financial appraisal department contacts and support resources</p>
                <div class="meta">
                    <span class="meta-item">Department: Appraisal</span>
                    <span class="meta-item">Role: All Staff</span>
                    <span class="meta-item">Updated: March 8, 2022</span>
                    <span class="meta-item">Reference: Quick Contact Guide</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #14b8a6);"></div><span>General Questions</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #8b5cf6, #3b82f6);"></div><span>Reviews & ROV</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #22c55e);"></div><span>Appraiser Setup</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Urgent Issues</span></div>
            </div>

            <!-- Section 1: Contact Overview -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Contact Overview</h2><span>Understanding which email address to use for your appraisal needs</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Appraisal Question</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">What Type?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Order/General</span>
                                <div class="flow-node action">cmgappraisaldept@</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">ROV/Content</span>
                                <div class="flow-node action">appraisalreviews@</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Panel/Appraiser</span>
                                <div class="flow-node action">appraisersetup@</div>
                            </div>
                        </div>
                    </div>

                    <div class="contact-grid">
                        <div class="contact-card">
                            <div class="contact-card-header">
                                <h4>Appraisal Department</h4>
                                <div class="email"><a href="mailto:cmgappraisaldept@cmgfi.com">cmgappraisaldept@cmgfi.com</a></div>
                            </div>
                            <div class="contact-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> General questions on how to order appraisals</li>
                                    <li><span class="check-icon">+</span> Questions or issues related to specific orders</li>
                                </ul>
                            </div>
                        </div>

                        <div class="contact-card">
                            <div class="contact-card-header reviews">
                                <h4>Appraisal Reviews</h4>
                                <div class="email"><a href="mailto:appraisalreviews@cmgfi.com">appraisalreviews@cmgfi.com</a></div>
                            </div>
                            <div class="contact-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Requests for Reconsiderations of Value (ROV)</li>
                                    <li><span class="check-icon">+</span> Requests for Second Appraisal</li>
                                    <li><span class="check-icon">+</span> Questions about content of an appraisal</li>
                                </ul>
                            </div>
                        </div>

                        <div class="contact-card">
                            <div class="contact-card-header setup">
                                <h4>Appraiser Setup</h4>
                                <div class="email"><a href="mailto:appraisersetup@cmgfi.com">appraisersetup@cmgfi.com</a></div>
                            </div>
                            <div class="contact-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Requests to add appraisers to branch panel</li>
                                    <li><span class="check-icon">+</span> Concerns related to particular appraisers</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Choosing the Right Contact</h4>
                        <p>Using the correct email address ensures your request is routed to the appropriate team member and handled efficiently. When in doubt, use the general appraisal department email.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Appraisal Department -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Appraisal Department Contact</h2><span>cmgappraisaldept@cmgfi.com - General questions and order issues</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Need Help with Appraisal Order</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Email cmgappraisaldept@cmgfi.com</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Team Responds</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Use Case</th>
                                <th>Description</th>
                                <th>Priority</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>How to Order Appraisals</strong></td>
                                <td>Questions about the appraisal ordering process, systems, or procedures</td>
                                <td><span class="badge optional-badge">Standard</span></td>
                            </tr>
                            <tr>
                                <td><strong>Order Status Inquiries</strong></td>
                                <td>Questions about the status of a specific appraisal order</td>
                                <td><span class="badge optional-badge">Standard</span></td>
                            </tr>
                            <tr>
                                <td><strong>Order Issues</strong></td>
                                <td>Problems with existing orders, scheduling conflicts, or delivery delays</td>
                                <td><span class="badge required-badge">High</span></td>
                            </tr>
                            <tr>
                                <td><strong>System Access</strong></td>
                                <td>Questions about accessing appraisal management systems</td>
                                <td><span class="badge optional-badge">Standard</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Best Practice: Include Loan Details</h4>
                        <p>When emailing about a specific order, always include the loan number, borrower name, and property address to expedite your request.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Appraisal Reviews -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Appraisal Reviews Contact</h2><span>appraisalreviews@cmgfi.com - ROV, Second Appraisals, and Content Questions</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Value Concern or Content Question</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">What's Needed?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">ROV Request</span>
                                <div class="flow-node action">Submit with Comps</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Second Appraisal</span>
                                <div class="flow-node action">Request Review</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Content Question</span>
                                <div class="flow-node action">Ask for Clarification</div>
                            </div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Request Type</th>
                                <th>Description</th>
                                <th>What to Include</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Reconsideration of Value (ROV)</strong></td>
                                <td>Request to re-evaluate the appraised value based on new comparable sales or information</td>
                                <td><span class="badge required-badge">Comps Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Second Appraisal Request</strong></td>
                                <td>Request for an additional appraisal when ROV is insufficient</td>
                                <td><span class="badge required-badge">Justification</span></td>
                            </tr>
                            <tr>
                                <td><strong>Content Questions</strong></td>
                                <td>Questions about specific items, adjustments, or conclusions in an appraisal report</td>
                                <td><span class="badge optional-badge">Page/Section Ref</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="exception-box">
                        <h4>ROV Requirements</h4>
                        <p>When submitting a Reconsideration of Value request, you must include supporting comparable sales data. Requests without adequate supporting documentation may be delayed or declined.</p>
                    </div>

                    <ul class="step-list">
                        <li><strong>ROV Step 1:</strong> Gather 3-5 comparable sales that support a higher value</li>
                        <li><strong>ROV Step 2:</strong> Document why these comps are more appropriate than those used</li>
                        <li><strong>ROV Step 3:</strong> Submit request with loan number, property address, and comp data</li>
                        <li><strong>ROV Step 4:</strong> Reviews team will coordinate with appraiser for response</li>
                    </ul>
                </div>
            </section>

            <!-- Section 4: Appraiser Setup -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Appraiser Setup Contact</h2><span>appraisersetup@cmgfi.com - Panel additions and appraiser concerns</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Appraiser Request</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Request Type?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Add to Panel</span>
                                <div class="flow-node action">Submit Appraiser Info</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Report Concern</span>
                                <div class="flow-node exception">Document Issue</div>
                            </div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Request Type</th>
                                <th>Description</th>
                                <th>Required Information</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Add Appraiser to Panel</strong></td>
                                <td>Request to add a new appraiser to your branch's approved panel</td>
                                <td><span class="badge required-badge">License, E&O, W9</span></td>
                            </tr>
                            <tr>
                                <td><strong>Appraiser Performance Concern</strong></td>
                                <td>Report issues with appraiser quality, timeliness, or professionalism</td>
                                <td><span class="badge required-badge">Loan # + Details</span></td>
                            </tr>
                            <tr>
                                <td><strong>Panel Removal Request</strong></td>
                                <td>Request to remove an appraiser from the branch panel</td>
                                <td><span class="badge required-badge">Justification</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <h4>Adding Appraisers to Panel</h4>
                        <p>When requesting to add an appraiser to your branch panel, include the appraiser's name, license number, contact information, and coverage area. The setup team will verify credentials and add them to the rotation.</p>
                    </div>

                    <div class="exception-box">
                        <h4>Reporting Appraiser Concerns</h4>
                        <p>All concerns regarding appraiser conduct or quality must be documented with specific details including the loan number, property address, and a clear description of the issue. This information is used for quality tracking and panel management.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Request Routing -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Request Routing Guide</h2><span>Decision tree for routing your appraisal requests</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">I Have an Appraisal Question</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node decision">Is it about value or content?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">YES - Value/Content</span>
                                <div class="flow-node output">appraisalreviews@cmgfi.com</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">NO</span>
                                <div class="flow-node decision">Is it about an appraiser?</div>
                            </div>
                        </div>
                        <div class="decision-branch" style="margin-top: 30px;">
                            <div class="branch">
                                <span class="branch-label">YES - Appraiser Related</span>
                                <div class="flow-node output">appraisersetup@cmgfi.com</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">NO - Order/General</span>
                                <div class="flow-node output">cmgappraisaldept@cmgfi.com</div>
                            </div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>If Your Question Is About...</th>
                                <th>Contact</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>How to order an appraisal</td>
                                <td><strong>cmgappraisaldept@cmgfi.com</strong></td>
                            </tr>
                            <tr>
                                <td>Status of an existing order</td>
                                <td><strong>cmgappraisaldept@cmgfi.com</strong></td>
                            </tr>
                            <tr>
                                <td>Issues with an order (scheduling, delivery)</td>
                                <td><strong>cmgappraisaldept@cmgfi.com</strong></td>
                            </tr>
                            <tr>
                                <td>Requesting a Reconsideration of Value</td>
                                <td><strong>appraisalreviews@cmgfi.com</strong></td>
                            </tr>
                            <tr>
                                <td>Requesting a second appraisal</td>
                                <td><strong>appraisalreviews@cmgfi.com</strong></td>
                            </tr>
                            <tr>
                                <td>Questions about appraisal content</td>
                                <td><strong>appraisalreviews@cmgfi.com</strong></td>
                            </tr>
                            <tr>
                                <td>Adding an appraiser to your panel</td>
                                <td><strong>appraisersetup@cmgfi.com</strong></td>
                            </tr>
                            <tr>
                                <td>Concerns about a specific appraiser</td>
                                <td><strong>appraisersetup@cmgfi.com</strong></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Pro Tip: Email Subject Lines</h4>
                        <p>Always include the loan number in your email subject line for faster processing. Example: "ROV Request - Loan #12345678 - 123 Main St"</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <div id="quick-ref" class="quick-ref">
                <h3>Appraisal Help Quick Reference</h3>
                <pre>
APPRAISAL DEPARTMENT CONTACT SUMMARY
====================================

EMAIL                           | USE FOR
--------------------------------|------------------------------------------
cmgappraisaldept@cmgfi.com      | - General appraisal ordering questions
                                | - Order status inquiries
                                | - Issues with specific orders
                                | - System access questions
--------------------------------|------------------------------------------
appraisalreviews@cmgfi.com      | - Reconsideration of Value (ROV) requests
                                | - Second appraisal requests
                                | - Questions about appraisal content
                                | - Value dispute resolution
--------------------------------|------------------------------------------
appraisersetup@cmgfi.com        | - Add appraisers to branch panel
                                | - Appraiser performance concerns
                                | - Panel management requests
                                | - Appraiser credential issues


QUICK DECISION GUIDE
====================
"I need help ordering an appraisal"     -> cmgappraisaldept@cmgfi.com
"My appraisal is late"                  -> cmgappraisaldept@cmgfi.com
"The value seems too low"               -> appraisalreviews@cmgfi.com
"I want to request an ROV"              -> appraisalreviews@cmgfi.com
"I have a question about the comps"     -> appraisalreviews@cmgfi.com
"I want to add an appraiser"            -> appraisersetup@cmgfi.com
"I have concerns about an appraiser"    -> appraisersetup@cmgfi.com


EMAIL BEST PRACTICES
====================
- Always include loan number in subject line
- Include property address
- Attach supporting documentation when applicable
- For ROV: Include comparable sales data
- For appraiser concerns: Document specific issues


RESPONSE TIME EXPECTATIONS
==========================
General Inquiries:     1-2 business days
Order Issues:          Same day if urgent
ROV Requests:          3-5 business days
Panel Additions:       5-7 business days


Document Updated: 3/8/2022
                </pre>
            </div>
        </div>

        <!-- ==================== AI AGENTS TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Agent Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation opportunities identified for the Appraisal Help process</p>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">3</div>
                    <div class="agent-summary-label">Agent Opportunities</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">65%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">15 min</div>
                    <div class="agent-summary-label">Est. Time Saved</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">Medium</div>
                    <div class="agent-summary-label">Compliance Impact</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend">
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #ef4444, #f97316);"></div>
                    <span>Critical Priority (9-10)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #f97316, #eab308);"></div>
                    <span>High Priority (7-8)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #eab308, #22c55e);"></div>
                    <span>Medium Priority (5-6)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #22c55e, #14b8a6);"></div>
                    <span>Low Priority (1-4)</span>
                </div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container" id="agent-heatmap">
                <div class="heat-map-title">Priority Heat Map</div>
                <div class="heat-map-grid">
                    <div class="heat-item high" onclick="scrollToAgent('agent-router')">
                        <div class="heat-score">8.5</div>
                        <div class="heat-name">Smart Email Router</div>
                        <div class="heat-desc">Auto-route appraisal emails to correct department</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>5 min</span></div>
                            <div class="heat-metric">Complexity: <span>Medium</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-rov')">
                        <div class="heat-score">7.8</div>
                        <div class="heat-name">ROV Assistant</div>
                        <div class="heat-desc">Validate ROV requests and compile supporting data</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>8 min</span></div>
                            <div class="heat-metric">Complexity: <span>Medium</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-status')">
                        <div class="heat-score">6.2</div>
                        <div class="heat-name">Order Status Bot</div>
                        <div class="heat-desc">Auto-respond to appraisal order status inquiries</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>2 min</span></div>
                            <div class="heat-metric">Complexity: <span>Low</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <div id="agent-details">
                <h2 style="color: var(--text-primary); margin-bottom: 25px; font-size: 1.5rem;">Agent Details</h2>
                <div class="agent-grid">
                    <!-- Smart Email Router Agent -->
                    <div class="agent-card" id="agent-router">
                        <div class="agent-card-header">
                            <div class="agent-icon">R</div>
                            <div class="agent-info">
                                <div class="agent-name">Smart Email Router</div>
                                <div class="agent-type">Email Classification / NLP</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Analyzes incoming appraisal-related emails and automatically routes them to the correct department email (cmgappraisaldept, appraisalreviews, or appraisersetup) based on content analysis, reducing misdirected requests and response time.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Email Received</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">NLP Analysis</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Classify Intent</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Route Email</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">5 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">92%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Med</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('router')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- ROV Assistant Agent -->
                    <div class="agent-card" id="agent-rov">
                        <div class="agent-card-header">
                            <div class="agent-icon">V</div>
                            <div class="agent-info">
                                <div class="agent-name">ROV Assistant</div>
                                <div class="agent-type">Data Validation / Research</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Assists with Reconsideration of Value requests by validating submitted comparable sales, searching for additional supporting comps, and pre-populating ROV submission forms with loan and property data.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">ROV Initiated</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Validate Comps</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Find More Data</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Compile Package</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">8 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">88%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Med</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('rov')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- Order Status Bot Agent -->
                    <div class="agent-card" id="agent-status">
                        <div class="agent-card-header">
                            <div class="agent-icon">S</div>
                            <div class="agent-info">
                                <div class="agent-name">Order Status Bot</div>
                                <div class="agent-type">Automated Response / Integration</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically responds to appraisal order status inquiries by pulling real-time data from the appraisal management system and sending formatted status updates without human intervention.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Status Request</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Extract Loan #</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Query AMC</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Send Response</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">2 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">99%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('status')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Appraisal Help Resources Documentation</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Appraisal Help Resources - CMG Financial

## Overview
This guide provides contact information for CMG Financial's appraisal department resources.
Updated: March 8, 2022

## Contact Directory

### 1. CMG Appraisal Department
**Email:** cmgappraisaldept@cmgfi.com
**Use For:**
- General questions on how to order appraisals
- Questions or issues related to specific orders
- Order status inquiries
- System access questions

### 2. Appraisal Reviews
**Email:** appraisalreviews@cmgfi.com
**Use For:**
- Requests for Reconsiderations of Value (ROV)
- Requests for Second Appraisal
- Questions about content of an appraisal
- Value dispute resolution

### 3. Appraiser Setup
**Email:** appraisersetup@cmgfi.com
**Use For:**
- Requests to add appraisers to branch panel
- Concerns related to particular appraisers
- Panel management requests
- Appraiser credential verification

## Quick Decision Guide

| Question Type | Contact |
|---------------|---------|
| Ordering help | cmgappraisaldept@cmgfi.com |
| Order status | cmgappraisaldept@cmgfi.com |
| Order issues | cmgappraisaldept@cmgfi.com |
| ROV request | appraisalreviews@cmgfi.com |
| Second appraisal | appraisalreviews@cmgfi.com |
| Content questions | appraisalreviews@cmgfi.com |
| Add appraiser | appraisersetup@cmgfi.com |
| Appraiser concerns | appraisersetup@cmgfi.com |

## Best Practices
- Include loan number in subject line
- Provide property address
- Attach supporting documentation
- For ROV: Include comparable sales data</pre>
            </div>
        </div>
    </div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav click to temporarily disable scroll spy
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);

                // Remove active from all, add to clicked
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Re-enable scroll spy after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Agent Prompt System
        const agentPrompts = {
            router: {
                name: 'Smart Email Router',
                tags: ['Email Classification', 'NLP', 'Medium Complexity', 'High Priority'],
                purpose: `This agent analyzes incoming appraisal-related emails and automatically routes them to the correct department email based on content analysis. It reduces misdirected requests, eliminates manual triage, and significantly improves response time for urgent appraisal matters.`,
                prompt: `You are building an Email Classification Agent for CMG Financial's Appraisal Department.

AGENT NAME: Smart Email Router
TYPE: Email Classification / NLP

OBJECTIVE:
Analyze incoming emails to the appraisal department and automatically route them to the correct specialized email address based on content analysis.

ROUTING RULES:

1. cmgappraisaldept@cmgfi.com (General/Orders)
   Keywords: order, ordering, how to, status, schedule, delivery, late, delayed, system, access
   Intent: General questions, order inquiries, process help

2. appraisalreviews@cmgfi.com (Reviews/ROV)
   Keywords: value, ROV, reconsideration, second appraisal, comps, comparables, too low, dispute, content, adjustments
   Intent: Value concerns, content questions, ROV requests

3. appraisersetup@cmgfi.com (Panel/Appraiser)
   Keywords: add appraiser, panel, license, appraiser concern, quality issue, remove appraiser, credential
   Intent: Panel management, appraiser-related issues

CLASSIFICATION LOGIC:
1. Extract subject line and body text
2. Identify key terms and phrases
3. Analyze intent using NLP model
4. Apply confidence threshold (>85% auto-route, <85% human review)
5. Extract loan number for tracking

OUTPUT FORMAT:
{
  "suggested_route": "email@cmgfi.com",
  "confidence": 0.92,
  "extracted_loan_number": "12345678",
  "key_phrases": ["ROV request", "value too low"],
  "requires_review": false
}`,
                integration: `INTEGRATION POINTS:

1. Email Server (Exchange/O365)
   - Monitor incoming emails to shared inbox
   - Apply routing rules
   - Forward to appropriate address
   - Add tracking headers

2. Loan Origination System
   - Validate loan numbers
   - Attach email to loan file
   - Update activity log

3. Metrics Dashboard
   - Track routing accuracy
   - Monitor response times
   - Identify training opportunities

DEPLOYMENT:
- Azure Logic Apps or Power Automate
- ML model hosted on Azure ML
- Real-time processing with <30s latency`
            },
            rov: {
                name: 'ROV Assistant',
                tags: ['Data Validation', 'Research', 'Medium Complexity', 'High Priority'],
                purpose: `This agent assists with Reconsideration of Value requests by validating submitted comparable sales data, searching for additional supporting comps from MLS and public records, and pre-populating ROV submission forms with loan and property data to ensure complete, well-supported submissions.`,
                prompt: `You are building a Research Assistant Agent for CMG Financial's Appraisal Reviews team.

AGENT NAME: ROV Assistant
TYPE: Data Validation / Property Research

OBJECTIVE:
Assist processors with Reconsideration of Value (ROV) requests by validating comps, finding additional supporting data, and preparing submission packages.

WORKFLOW:

1. INTAKE
   - Parse ROV request email
   - Extract loan number and property address
   - Retrieve original appraisal data

2. COMP VALIDATION
   - For each submitted comp:
     * Verify sale date (within 90 days)
     * Confirm proximity (within 1 mile)
     * Check square footage (+/- 20%)
     * Validate sale price source

3. COMP SEARCH
   - Query MLS database
   - Search public records
   - Find additional supporting sales
   - Calculate adjusted values

4. PACKAGE COMPILATION
   - Generate comp comparison grid
   - Calculate value reconciliation
   - Pre-fill ROV form
   - Attach supporting documents

VALIDATION RULES:
- Comps must be within 90 days of appraisal date
- Comps must be within 1 mile (0.5 for urban)
- GLA within 20% of subject
- Same property type required

OUTPUT:
{
  "submitted_comps_valid": true,
  "additional_comps_found": 3,
  "suggested_value_range": "$425,000 - $435,000",
  "rov_strength": "Strong",
  "package_ready": true
}`,
                integration: `INTEGRATION POINTS:

1. MLS Data Feed
   - Real-time comp search
   - Historical sales data
   - Active listing comparison

2. Public Records API
   - Verify sale prices
   - Confirm transfer dates
   - Property characteristics

3. Appraisal Management System
   - Retrieve original report
   - Access appraiser comps
   - Submit ROV request

4. Document Generation
   - ROV form auto-fill
   - Comp grid generation
   - Package assembly

DEPLOYMENT:
- API integrations with MLS providers
- Scheduled batch processing
- Interactive assistant mode`
            },
            status: {
                name: 'Order Status Bot',
                tags: ['Automated Response', 'Integration', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent automatically responds to appraisal order status inquiries by extracting the loan number from the email, querying the appraisal management system for real-time status, and sending a formatted response with current status, scheduled dates, and estimated completion.`,
                prompt: `You are building an Automated Response Agent for CMG Financial's Appraisal Department.

AGENT NAME: Order Status Bot
TYPE: Automated Response / System Integration

OBJECTIVE:
Automatically respond to appraisal order status inquiries by pulling real-time data from the appraisal management system.

TRIGGER:
Email to cmgappraisaldept@cmgfi.com containing:
- "status" + loan number
- "where is" + loan number
- "update on" + appraisal/order

WORKFLOW:

1. EXTRACT LOAN NUMBER
   - Parse subject line and body
   - Regex pattern: /\\b\\d{8,10}\\b/
   - Validate against LOS

2. QUERY AMC SYSTEM
   - API call to appraisal management
   - Retrieve order status
   - Get scheduled dates
   - Fetch appraiser assignment

3. GENERATE RESPONSE
   - Format status email
   - Include key dates
   - Provide next steps
   - Add escalation path if delayed

RESPONSE TEMPLATE:
---
Subject: RE: Appraisal Status - Loan #{loan_number}

Thank you for your inquiry. Here is the current status:

LOAN: {loan_number}
PROPERTY: {property_address}
ORDER STATUS: {status}
APPRAISER: {appraiser_name}
INSPECTION DATE: {inspection_date}
ESTIMATED DELIVERY: {est_delivery}

{conditional_note}

If you need immediate assistance, please reply to this email.
---

STATUS CODES:
- ORDERED: Awaiting appraiser acceptance
- ACCEPTED: Appraiser assigned, pending inspection
- INSPECTED: Inspection complete, report in progress
- DELIVERED: Report delivered to lender
- REVISION: Revision requested, in progress`,
                integration: `INTEGRATION POINTS:

1. Email System
   - Monitor incoming emails
   - Parse for status requests
   - Send automated responses
   - CC processor on response

2. Appraisal Management API
   - Real-time status lookup
   - Appraiser information
   - Schedule data
   - Delivery tracking

3. LOS Integration
   - Loan validation
   - Property data
   - Processor lookup
   - Activity logging

DEPLOYMENT:
- Power Automate flow
- API connector to AMC
- Template-based responses
- Escalation rules for delays`
            }
        };

        function showAgentPrompt(agentId) {
            const agent = agentPrompts[agentId];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = agent.name + ' - Build Prompt';
            document.getElementById('promptTags').innerHTML = agent.tags.map(t => `<span class="prompt-tag">${t}</span>`).join('');
            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            const fullPrompt = document.getElementById('promptContent').textContent + '\n\n' + document.getElementById('promptIntegration').textContent;
            try {
                await navigator.clipboard.writeText(fullPrompt);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => { if (e.target.id === 'promptModal') closePromptModal(); });
    </script>
</body>
</html>
