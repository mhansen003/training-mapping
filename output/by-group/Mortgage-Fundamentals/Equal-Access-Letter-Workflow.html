<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equal Access Letter - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* Step List */
        .step-list { list-style: none; padding: 0; margin: 18px 0; }
        .step-list li {
            padding: 14px 18px;
            border-left: 3px solid var(--accent-blue);
            background: rgba(0,0,0,0.2);
            margin-bottom: 10px;
            border-radius: 0 8px 8px 0;
            color: var(--text-secondary);
        }
        .step-list li strong { color: var(--text-primary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        .copy-prompt-btn {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 15px;
        }

        .copy-prompt-btn:hover { transform: scale(1.05); box-shadow: 0 5px 20px rgba(139, 92, 246, 0.3); }

        /* Form Preview */
        .form-preview {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            color: #333;
        }

        .form-preview h3 {
            color: #84bc00;
            font-size: 1.4rem;
            text-align: center;
            margin-bottom: 25px;
            letter-spacing: 0.2em;
        }

        .form-field {
            margin-bottom: 20px;
        }

        .form-field label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .form-field .field-line {
            border-bottom: 1px solid #333;
            height: 25px;
            margin-top: 5px;
        }

        .form-field .field-hint {
            font-size: 0.85rem;
            color: #666;
            font-style: italic;
            margin-top: 5px;
        }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Mortgage Fundamentals</a>
        <span class="separator">></span>
        <span class="current">Equal Access Letter</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Equal Access Letter</h2>
            <p>Joint Bank Account Verification</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Purpose & Overview</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">When to Use</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Required Information</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Completion Process</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Document Submission</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Compliance & Storage</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Equal Access Letter</h1>
                <p class="subtitle">Joint bank account verification letter certifying full access to shared funds for mortgage qualification</p>
                <div class="meta">
                    <span class="meta-item">Document: CMG Financial Form</span>
                    <span class="meta-item">Role: Loan Officer / Processor</span>
                    <span class="meta-item">Updated: April 2, 2018</span>
                    <span class="meta-item">Duration: 2-5 min</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 1: Purpose & Overview -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Purpose & Overview</h2><span>Understanding the Equal Access Letter and its role in mortgage processing</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Joint Account Scenario</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Borrower on Account?</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Equal Access Letter Required</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Certify Fund Access</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>What is an Equal Access Letter?</h4>
                        <p>The Equal Access Letter is a CMG Financial document that certifies a mortgage applicant has <strong>full access to any or all funds</strong> in a joint bank account. This letter is signed by the joint account holder (non-borrower) to confirm the borrower can use the funds for the mortgage transaction.</p>
                    </div>

                    <div class="summary-grid">
                        <div class="summary-card">
                            <h4>Document Type</h4>
                            <div class="value">Letter</div>
                            <div class="label">Certification Form</div>
                        </div>
                        <div class="summary-card">
                            <h4>Signatory</h4>
                            <div class="value">Co-Owner</div>
                            <div class="label">Joint Account Holder</div>
                        </div>
                        <div class="summary-card">
                            <h4>Purpose</h4>
                            <div class="value">Access</div>
                            <div class="label">Fund Verification</div>
                        </div>
                        <div class="summary-card">
                            <h4>Requirement</h4>
                            <div class="value">Wet Sig</div>
                            <div class="label">Physical Signature</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>Key Purpose</h4>
                        <p>This document provides written verification that the borrower has unrestricted access to funds in a jointly-held account, satisfying underwriting requirements for asset verification when the borrower is not the sole account holder.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: When to Use -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>When to Use</h2><span>Scenarios requiring an Equal Access Letter</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Review Bank Statements</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Joint Account?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">YES - Borrower Not Listed</span>
                                <div class="flow-node action">Request Equal Access Letter</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">NO - Sole Owner</span>
                                <div class="flow-node output">No Letter Required</div>
                            </div>
                        </div>
                    </div>

                    <div class="decision-tree">
                        <h3>Scenarios Requiring Equal Access Letter</h3>
                        <ul class="step-list">
                            <li><strong>Scenario 1:</strong> Borrower's name is NOT on the bank account, but they have access to funds held by a spouse, partner, or family member</li>
                            <li><strong>Scenario 2:</strong> Joint account is held with someone who is NOT on the mortgage application</li>
                            <li><strong>Scenario 3:</strong> Funds being used for down payment or reserves are in an account with a non-borrower co-owner</li>
                            <li><strong>Scenario 4:</strong> Bank statements show a joint account but only one party is applying for the mortgage</li>
                        </ul>
                    </div>

                    <div class="exception-box">
                        <h4>When NOT Required</h4>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Borrower is the sole account holder</li>
                            <li>All joint account holders are on the mortgage application</li>
                            <li>Funds are from a different, individually-held account</li>
                        </ul>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Account Scenario</th>
                                <th>Equal Access Letter</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Borrower Only</strong></td>
                                <td><span class="badge optional-badge">Not Required</span></td>
                                <td>Sole ownership = full access implied</td>
                            </tr>
                            <tr>
                                <td><strong>Joint - Both on Loan</strong></td>
                                <td><span class="badge optional-badge">Not Required</span></td>
                                <td>Both parties are borrowers</td>
                            </tr>
                            <tr>
                                <td><strong>Joint - One on Loan</strong></td>
                                <td><span class="badge required-badge">Required</span></td>
                                <td>Non-borrower must certify access</td>
                            </tr>
                            <tr>
                                <td><strong>Non-Borrower Account</strong></td>
                                <td><span class="badge required-badge">Required</span></td>
                                <td>Account holder must certify borrower access</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 3: Required Information -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Required Information</h2><span>Fields that must be completed on the Equal Access Letter</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Print Form</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Complete Fields</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Sign Document</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Return to CMG</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Date</strong></td>
                                <td>Date the letter is being signed (MM/DD/YY format)</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Borrower Name</strong></td>
                                <td>Full name of the person who has access to the funds (the mortgage applicant)</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Account Number(s)</strong></td>
                                <td>Full or last 4 digits of the joint bank account number(s)</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Bank Name/Location</strong></td>
                                <td>Name of the financial institution where the account is held</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Printed Name</strong></td>
                                <td>Printed name of the joint account holder (signatory)</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Signature</strong></td>
                                <td>Wet signature of the joint account holder certifying access</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="form-preview">
                        <h3>EQUAL ACCESS LETTER</h3>
                        <div class="form-field">
                            <label>Date:</label>
                            <div class="field-line"></div>
                        </div>
                        <p style="margin: 15px 0; color: #333;"><strong>Re: Joint Bank Account</strong></p>
                        <p style="margin: 15px 0; color: #333;">This letter is to certify that</p>
                        <div class="form-field">
                            <div class="field-line"></div>
                            <div class="field-hint">(Borrower's full name)</div>
                        </div>
                        <p style="margin: 15px 0; color: #333;">has full access to any or all funds in our joint bank account number(s):</p>
                        <div class="form-field">
                            <div class="field-line"></div>
                            <div class="field-hint">(Account number(s))</div>
                        </div>
                        <p style="margin: 15px 0; color: #333;">located at</p>
                        <div class="form-field">
                            <div class="field-line"></div>
                            <div class="field-hint">(Bank name and location)</div>
                        </div>
                        <p style="margin: 30px 0 15px 0; color: #333;">Sincerely,</p>
                        <div class="form-field">
                            <label>Printed Name:</label>
                            <div class="field-line"></div>
                        </div>
                        <div class="form-field">
                            <label>Signature:</label>
                            <div class="field-line"></div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Certification Statement</h4>
                        <p>The letter certifies: <em>"This letter is to certify that [BORROWER NAME] has full access to any or all funds in our joint bank account number(s): [ACCOUNT NUMBER(S)] located at [BANK NAME/LOCATION]."</em></p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Completion Process -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Completion Process</h2><span>Step-by-step instructions for completing the Equal Access Letter</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Download/Print Form</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Fill In All Fields</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Sign & Date</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Submit to CMG</div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li><strong>Step 1:</strong> <strong>Print the Form</strong> - Download and print the Equal Access Letter form from CMG Financial's document library or receive from your CMG Financial Representative</li>
                        <li><strong>Step 2:</strong> <strong>Enter the Date</strong> - Write the current date at the top of the form in MM/DD/YY format</li>
                        <li><strong>Step 3:</strong> <strong>Enter Borrower Name</strong> - Write the full legal name of the person who has access to the funds (the mortgage applicant/borrower)</li>
                        <li><strong>Step 4:</strong> <strong>Enter Account Number(s)</strong> - List all joint bank account numbers that the borrower has access to. Multiple accounts can be listed if applicable</li>
                        <li><strong>Step 5:</strong> <strong>Enter Bank Information</strong> - Write the name of the financial institution and branch location where the account(s) is held</li>
                        <li><strong>Step 6:</strong> <strong>Print Name</strong> - The joint account holder (signatory) prints their full legal name</li>
                        <li><strong>Step 7:</strong> <strong>Sign the Letter</strong> - The joint account holder provides their wet signature to certify the borrower's access to funds</li>
                        <li><strong>Step 8:</strong> <strong>Return to CMG</strong> - Submit the completed, signed letter to your CMG Financial Representative</li>
                    </ul>

                    <div class="exception-box">
                        <h4>Important Requirements</h4>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li><strong>Wet Signature Required:</strong> Electronic signatures may not be accepted - verify with your CMG Representative</li>
                            <li><strong>Complete All Fields:</strong> Incomplete forms will be returned and may delay processing</li>
                            <li><strong>Legible Writing:</strong> Ensure all handwritten information is clear and readable</li>
                            <li><strong>Match Bank Statements:</strong> Account numbers and bank names must match provided bank statements</li>
                        </ul>
                    </div>

                    <div class="tip-box">
                        <h4>Best Practices</h4>
                        <p>Have the joint account holder complete and sign this letter in the presence of the borrower or loan officer when possible to avoid discrepancies. Keep a copy of the signed letter for your records.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Document Submission -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Document Submission</h2><span>How to properly submit the completed Equal Access Letter</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Scan/Photo Document</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Quality Check</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Submit to CMG Rep</div>
                        </div>
                    </div>

                    <div class="decision-tree">
                        <h3>Submission Methods</h3>
                        <ul class="step-list">
                            <li><strong>Option 1: Email</strong> - Scan or photograph the signed letter and email to your CMG Financial Representative</li>
                            <li><strong>Option 2: Fax</strong> - Fax the completed letter to the designated CMG fax number</li>
                            <li><strong>Option 3: Secure Upload</strong> - Upload to the borrower portal or secure document upload system</li>
                            <li><strong>Option 4: Physical Mail</strong> - Mail the original signed letter if required by the specific transaction</li>
                        </ul>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Quality Checkpoint</th>
                                <th>Requirement</th>
                                <th>Impact</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Signature Present</strong></td>
                                <td>Physical wet signature visible</td>
                                <td><span class="badge required-badge">Critical</span></td>
                            </tr>
                            <tr>
                                <td><strong>All Fields Complete</strong></td>
                                <td>No blank required fields</td>
                                <td><span class="badge required-badge">Critical</span></td>
                            </tr>
                            <tr>
                                <td><strong>Legibility</strong></td>
                                <td>All text clearly readable</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Account Match</strong></td>
                                <td>Accounts match bank statements</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Date Current</strong></td>
                                <td>Date within acceptable timeframe</td>
                                <td><span class="badge calculated-badge">Verified</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <h4>Document Instructions</h4>
                        <p>As stated on the form: <em>"Instructions: Print this page and complete the information. Then, sign and return this letter to the CMG Financial Representative."</em></p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Compliance & Storage -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Compliance & Storage</h2><span>Document retention and compliance requirements</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Receive Document</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Verify Completeness</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">File in Loan Package</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Document Stored</div>
                        </div>
                    </div>

                    <div class="decision-tree">
                        <h3>Processor Responsibilities</h3>
                        <ul class="step-list">
                            <li><strong>Verification:</strong> Confirm all fields are completed accurately and signature is present</li>
                            <li><strong>Cross-Reference:</strong> Verify account numbers match provided bank statements</li>
                            <li><strong>Documentation:</strong> Note receipt of Equal Access Letter in loan file comments</li>
                            <li><strong>Storage:</strong> Upload to document management system under Asset Documentation</li>
                            <li><strong>Condition Clear:</strong> If this was a condition, update condition status accordingly</li>
                        </ul>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Storage Field</th>
                                <th>Value</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Document Type</strong></td>
                                <td>Equal Access Letter / Asset Verification</td>
                                <td>Select from document type dropdown</td>
                            </tr>
                            <tr>
                                <td><strong>Category</strong></td>
                                <td>ASSET / AST</td>
                                <td>Asset documentation category</td>
                            </tr>
                            <tr>
                                <td><strong>Status</strong></td>
                                <td>Received / Approved</td>
                                <td>After verification complete</td>
                            </tr>
                            <tr>
                                <td><strong>Retention</strong></td>
                                <td>Per CMG policy</td>
                                <td>Maintain with loan file</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <h4>CMG Financial Licensing</h4>
                        <p>CMG Financial is a registered trade name of CMG Mortgage, Inc., NMLS# 1820. CMG Mortgage Inc. is an equal opportunity lender, licensed by the Department of Business Oversight under the California Residential Mortgage Lending Act No. 4150025. Offer of credit is subject to credit approval.</p>
                    </div>

                    <div class="tip-box">
                        <h4>Additional Resources</h4>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li><strong>Company Information:</strong> www.cmgfi.com</li>
                            <li><strong>State Licenses:</strong> www.cmgfi.com/corporate/licensing</li>
                            <li><strong>NMLS Consumer Access:</strong> www.nmlsconsumeraccess.org</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <div id="quick-ref" class="quick-ref">
                <h3>Equal Access Letter Quick Reference</h3>
                <pre>
EQUAL ACCESS LETTER - QUICK GUIDE
==================================

PURPOSE:
Certifies borrower has full access to funds in a joint bank account
where they may not be the primary or sole account holder.

WHEN REQUIRED:
[ ] Joint account with non-borrower co-owner
[ ] Borrower using funds from another person's account
[ ] Spouse/partner account not listed on application
[ ] Family member providing funds from shared account

REQUIRED FIELDS:
================
1. Date           - Current date (MM/DD/YY)
2. Borrower Name  - Full legal name of mortgage applicant
3. Account #(s)   - Joint bank account number(s)
4. Bank Location  - Name of financial institution
5. Printed Name   - Account holder (signatory) name
6. Signature      - Wet signature of account holder

COMPLETION STEPS:
=================
1. Print the Equal Access Letter form
2. Complete all required information
3. Joint account holder signs the letter
4. Return signed letter to CMG Financial Representative

SUBMISSION METHODS:
===================
- Email scan/photo to CMG Representative
- Fax to designated number
- Secure document upload
- Physical mail (if required)

PROCESSOR CHECKLIST:
====================
[ ] All fields completed
[ ] Signature present
[ ] Account matches bank statements
[ ] Filed in document management
[ ] Condition cleared (if applicable)

DOCUMENT STORAGE:
=================
- Type: Equal Access Letter / Asset Verification
- Category: ASSET
- Status: Approved
- Retain with loan file per CMG policy

CONTACT:
========
- Company: www.cmgfi.com
- Licensing: www.cmgfi.com/corporate/licensing
- NMLS: www.nmlsconsumeraccess.org
- CMG Mortgage, Inc. NMLS# 1820
                </pre>
            </div>
        </div>

        <!-- ==================== AI AGENTS TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Agent Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation opportunities identified for the Equal Access Letter process</p>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">3</div>
                    <div class="agent-summary-label">Agent Opportunities</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">65%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">4 min</div>
                    <div class="agent-summary-label">Est. Time Saved</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">Med</div>
                    <div class="agent-summary-label">Compliance Impact</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend">
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #ef4444, #f97316);"></div>
                    <span>Critical Priority (9-10)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #f97316, #eab308);"></div>
                    <span>High Priority (7-8)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #eab308, #22c55e);"></div>
                    <span>Medium Priority (5-6)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #22c55e, #14b8a6);"></div>
                    <span>Low Priority (1-4)</span>
                </div>
            </div>

            <!-- Heat Map -->
            <div class="heat-map-container" id="agent-heatmap">
                <div class="heat-map-title">Automation Priority Heat Map</div>
                <div class="heat-map-grid">
                    <div class="heat-item high" onclick="scrollToAgent('agent-formgen')">
                        <div class="heat-score">7</div>
                        <div class="heat-name">Form Pre-Fill Agent</div>
                        <div class="heat-desc">Auto-populate letter fields from loan data</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>2 min</span></div>
                            <div class="heat-metric">Volume: <span>High</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-docverify')">
                        <div class="heat-score">6</div>
                        <div class="heat-name">Document Validator</div>
                        <div class="heat-desc">Verify completeness and match accounts</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>1 min</span></div>
                            <div class="heat-metric">Volume: <span>High</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-condtrack')">
                        <div class="heat-score">5</div>
                        <div class="heat-name">Condition Tracker</div>
                        <div class="heat-desc">Auto-clear conditions upon receipt</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>1 min</span></div>
                            <div class="heat-metric">Volume: <span>Med</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Cards -->
            <div id="agent-details">
                <div class="heat-map-title">Agent Details</div>
                <div class="agent-grid">
                    <!-- Form Pre-Fill Agent -->
                    <div class="agent-card" id="agent-formgen">
                        <div class="agent-card-header">
                            <div class="agent-icon"></div>
                            <div class="agent-info">
                                <div class="agent-name">Form Pre-Fill Agent</div>
                                <div class="agent-type">Document Generation</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically pre-populates the Equal Access Letter with borrower name, bank account information, and bank name extracted from loan file data and bank statements. Reduces manual data entry and ensures accuracy.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Workflow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Read Loan Data</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Parse Bank Stmts</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Fill Form</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Generate PDF</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">2 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">95%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Med</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('formgen')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- Document Validator Agent -->
                    <div class="agent-card" id="agent-docverify">
                        <div class="agent-card-header">
                            <div class="agent-icon"></div>
                            <div class="agent-info">
                                <div class="agent-name">Document Validator</div>
                                <div class="agent-type">Quality Assurance</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Validates completed Equal Access Letters by checking all required fields are filled, signature is present, and account numbers match the bank statements in the loan file. Flags discrepancies for processor review.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Workflow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">OCR Document</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Validate Fields</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Cross-Check</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Report Status</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">1 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">98%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('docverify')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- Condition Tracker Agent -->
                    <div class="agent-card" id="agent-condtrack">
                        <div class="agent-card-header">
                            <div class="agent-icon"></div>
                            <div class="agent-info">
                                <div class="agent-name">Condition Tracker</div>
                                <div class="agent-type">Workflow Automation</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Monitors for received Equal Access Letters and automatically updates loan conditions, attaches documents to conditions, and notifies processors of cleared conditions. Integrates with LOS condition tracking.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Workflow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Detect Upload</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Match Condition</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Attach Doc</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Clear Status</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">1 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">99%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('condtrack')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Equal Access Letter Documentation</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Equal Access Letter - CMG Financial

## Overview
The Equal Access Letter is a CMG Financial document that certifies a mortgage applicant has full access to any or all funds in a joint bank account. This letter is signed by the joint account holder (non-borrower) to confirm the borrower can use the funds for the mortgage transaction.

## When Required
- Joint account with non-borrower co-owner
- Borrower using funds from another person's account
- Spouse/partner account not listed on application
- Family member providing funds from shared account

## Required Fields
1. **Date** - Current date the letter is being signed
2. **Borrower Name** - Full name of the mortgage applicant
3. **Account Number(s)** - Joint bank account number(s)
4. **Bank Location** - Name of the financial institution
5. **Printed Name** - Joint account holder's printed name
6. **Signature** - Wet signature of the account holder

## Certification Statement
"This letter is to certify that [BORROWER NAME] has full access to any or all funds in our joint bank account number(s): [ACCOUNT NUMBER(S)] located at [BANK NAME/LOCATION]."

## Completion Process
1. Print the Equal Access Letter form
2. Complete all required information
3. Joint account holder signs the letter
4. Return signed letter to CMG Financial Representative

## Submission Methods
- Email scan/photo to CMG Representative
- Fax to designated number
- Secure document upload
- Physical mail (if required)

## Document Storage
- Type: Equal Access Letter / Asset Verification
- Category: ASSET
- Status: Approved after verification
- Retain with loan file per CMG policy

## CMG Financial
CMG Mortgage, Inc., NMLS# 1820
Equal Opportunity Lender
www.cmgfi.com</pre>
            </div>
        </div>
    </div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav click to temporarily disable scroll spy
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);

                // Remove active from all, add to clicked
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Re-enable scroll spy after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Agent Prompt System
        const agentPrompts = {
            formgen: {
                name: 'Form Pre-Fill Agent',
                tags: ['Document Generation', 'PDF', 'Medium Complexity', 'High Priority'],
                purpose: `This agent automatically pre-populates Equal Access Letter forms with borrower information, account numbers, and bank names extracted from the loan file and bank statements. It creates a ready-to-sign PDF that only requires the joint account holder's signature.`,
                prompt: `You are building a Document Generation Agent for CMG Financial's Equal Access Letter process.

AGENT NAME: Form Pre-Fill Agent
TYPE: Document Generation / PDF Automation

OBJECTIVE:
Create an agent that automatically populates Equal Access Letter forms with data from the loan file and uploaded bank statements, reducing manual data entry and ensuring accuracy.

INPUT DATA SOURCES:
1. Loan File (LOS)
   - Borrower full legal name
   - Co-borrower information (if applicable)
   - Loan number

2. Bank Statements (OCR/Parsed)
   - Account holder names
   - Account numbers (full or last 4)
   - Bank name and branch
   - Account type (checking/savings)

FIELD MAPPING:
{
  "date": "CURRENT_DATE (MM/DD/YY)",
  "borrower_name": "loan.borrower.full_name",
  "account_numbers": "bank_statement.account_number",
  "bank_location": "bank_statement.bank_name + branch",
  "printed_name": "[LEAVE BLANK - Manual Entry]",
  "signature": "[LEAVE BLANK - Manual Signature]"
}

PDF GENERATION:
1. Load Equal Access Letter template
2. Fill text fields using PDF form library
3. Leave signature fields blank for wet signature
4. Add loan number watermark (optional)
5. Generate timestamped filename

OUTPUT:
- Pre-filled PDF ready for signature
- Upload to borrower portal for download
- Notify processor form is ready`,
                integration: `INTEGRATION POINTS:
1. Loan Origination System (LOS)
   - Read borrower data via API
   - Access loan file information
   - Store generated documents

2. Document Parser
   - OCR for bank statements
   - Extract account information
   - Validate data quality

3. PDF Library
   - PDFKit or similar
   - Form field population
   - Watermarking capability

4. Borrower Portal
   - Upload generated PDF
   - Send notification to borrower
   - Track document status

DEPLOYMENT:
- Trigger: When Equal Access Letter condition created
- Background: Generate and upload PDF
- Notification: Alert processor when ready`
            },
            docverify: {
                name: 'Document Validator',
                tags: ['Quality Assurance', 'OCR', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent validates completed Equal Access Letters by using OCR to extract field data, checking for completeness, verifying signature presence, and cross-referencing account numbers with bank statements in the loan file.`,
                prompt: `You are building a Quality Assurance Agent for CMG Financial's Equal Access Letter process.

AGENT NAME: Document Validator
TYPE: Quality Assurance / OCR Validation

OBJECTIVE:
Validate submitted Equal Access Letters for completeness, accuracy, and compliance by extracting field data and cross-referencing with loan file documents.

VALIDATION CHECKLIST:
1. FIELD COMPLETENESS
   - Date: Present and valid format
   - Borrower Name: Present and matches loan file
   - Account Number(s): Present and formatted correctly
   - Bank Location: Present
   - Printed Name: Present
   - Signature: Present (ink detected)

2. DATA ACCURACY
   - Account numbers match bank statements
   - Borrower name matches loan application
   - Bank name matches statement header
   - Date is current (within 30 days)

3. SIGNATURE VALIDATION
   - Ink presence detected in signature area
   - Signature differs from printed name
   - No digital/typed signature

OCR EXTRACTION:
{
  "date_field": { "x": 50, "y": 150, "width": 200, "height": 30 },
  "borrower_name": { "x": 50, "y": 220, "width": 500, "height": 30 },
  "account_numbers": { "x": 50, "y": 280, "width": 500, "height": 30 },
  "bank_location": { "x": 50, "y": 340, "width": 500, "height": 30 },
  "printed_name": { "x": 120, "y": 450, "width": 400, "height": 30 },
  "signature_area": { "x": 100, "y": 500, "width": 400, "height": 60 }
}

VALIDATION RESPONSE:
{
  "status": "PASS" | "FAIL" | "REVIEW",
  "completeness_score": 100,
  "accuracy_score": 95,
  "issues": [],
  "warnings": [],
  "extracted_data": {}
}`,
                integration: `INTEGRATION POINTS:
1. OCR Service
   - Tesseract or cloud OCR
   - Handwriting recognition
   - Confidence scoring

2. Loan File API
   - Retrieve borrower data
   - Access bank statements
   - Cross-reference accounts

3. Document Management
   - Receive uploaded documents
   - Update document status
   - Flag for processor review

4. Notification System
   - Alert on validation failure
   - Send approval notifications
   - Escalate signature issues

QUALITY THRESHOLDS:
- Completeness: 100% required
- Accuracy: 90% minimum
- Confidence: 85% OCR minimum`
            },
            condtrack: {
                name: 'Condition Tracker',
                tags: ['Workflow Automation', 'LOS Integration', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent monitors for uploaded Equal Access Letters, matches them to outstanding conditions, automatically attaches documents to conditions, and updates condition status. It notifies processors when conditions are cleared.`,
                prompt: `You are building a Workflow Automation Agent for CMG Financial's loan condition tracking.

AGENT NAME: Condition Tracker
TYPE: Workflow Automation / Condition Management

OBJECTIVE:
Monitor document uploads, identify Equal Access Letters, match to outstanding conditions, attach documents, and automatically clear conditions when requirements are met.

TRIGGER CONDITIONS:
1. New document uploaded to loan file
2. Document type = "Equal Access Letter" OR
3. Document name contains "equal access" OR
4. OCR detects Equal Access Letter template

MATCHING LOGIC:
1. Identify loan number from document/upload context
2. Query outstanding conditions for loan
3. Find condition type = "Equal Access Letter" or "Asset Verification"
4. Verify condition status = "Outstanding" or "Pending"

CONDITION UPDATE WORKFLOW:
1. DETECT: New document upload event
2. CLASSIFY: Determine document type
3. VALIDATE: Run Document Validator agent
4. MATCH: Find corresponding condition
5. ATTACH: Link document to condition
6. UPDATE: Set condition status = "Received"
7. NOTIFY: Alert processor of update

CONDITION STATUS MAPPING:
{
  "document_valid": true,
  "auto_clear": true,
  "new_status": "Received",
  "next_status": "Approved" // After processor review
}

NOTIFICATION TEMPLATE:
Subject: Equal Access Letter Received - Loan #{loan_number}
Body:
- Document: Equal Access Letter
- Borrower: {borrower_name}
- Condition: {condition_id} - Auto-attached
- Status: Received - Pending Review
- Action: Please review and approve`,
                integration: `INTEGRATION POINTS:
1. Document Upload Monitor
   - Watch for new uploads
   - File type detection
   - Metadata extraction

2. LOS Condition API
   - Query conditions by loan
   - Update condition status
   - Attach documents to conditions

3. Document Validator Agent
   - Validate before attaching
   - Ensure completeness
   - Cross-reference data

4. Notification Service
   - Email processor
   - Dashboard alerts
   - Slack/Teams integration

AUTO-CLEAR RULES:
- Only if document passes validation
- Only if single matching condition
- Processor must approve final clear
- Log all auto-actions for audit`
            }
        };

        function showAgentPrompt(agentId) {
            const agent = agentPrompts[agentId];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = agent.name + ' - Build Prompt';
            document.getElementById('promptTags').innerHTML = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            const promptText = document.getElementById('promptContent').textContent;
            try {
                await navigator.clipboard.writeText(promptText);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => { if (e.target.id === 'promptModal') closePromptModal(); });
    </script>
</body>
</html>
