<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patriot Act Borrower Documentation - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }
        .flow-node.end { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box, .warning-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        .warning-box { background: rgba(245, 158, 11, 0.08); border-color: var(--accent-amber); border: 1px solid rgba(245, 158, 11, 0.2); border-left: 4px solid var(--accent-amber); }
        .warning-box h4 { color: var(--accent-amber); margin-bottom: 10px; font-size: 1rem; }
        .warning-box p, .warning-box li { color: var(--text-secondary); }

        /* Step List */
        .step-list { list-style: none; padding: 0; margin: 18px 0; }
        .step-list li {
            padding: 14px 18px;
            border-left: 3px solid var(--accent-blue);
            background: rgba(0,0,0,0.2);
            margin-bottom: 10px;
            border-radius: 0 8px 8px 0;
            color: var(--text-secondary);
        }
        .step-list li strong { color: var(--text-primary); }

        /* ID Type Grid */
        .id-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .id-type-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .id-type-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border-color: var(--accent-blue);
        }

        .id-type-card .icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .id-type-card h4 {
            color: var(--text-primary);
            font-size: 0.95rem;
            margin-bottom: 5px;
        }

        .id-type-card p {
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        .copy-prompt-btn {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 15px;
        }

        .copy-prompt-btn:hover { transform: scale(1.05); box-shadow: 0 5px 20px rgba(139, 92, 246, 0.3); }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
        .breadcrumb-logo-link { display: inline-flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; flex-shrink: 0; margin-right: 4px; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 24px; width: auto; display: block; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
<a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Mortgage Fundamentals</a>
        <span class="separator">></span>
        <span class="current">Patriot Act Borrower Documentation</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Patriot Act Form</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Overview & Requirements</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Navigate to Screen</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Complete Form Fields</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Acceptable ID Types</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Store Document</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Clear Condition</span>
            </a>
            <a href="#section-7" class="nav-item">
                <span class="nav-number">7</span>
                <span class="nav-label">Funder Verification</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Patriot Act Borrower Documentation</h1>
                <p class="subtitle">Required federal compliance form for all mortgage transactions - identifying and verifying customer information per USA PATRIOT Act</p>
                <div class="meta">
                    <span class="meta-item">System: Byte LOS</span>
                    <span class="meta-item">Role: Processor / Account Manager</span>
                    <span class="meta-item">Updated: October 3, 2025</span>
                    <span class="meta-item">Duration: 2-5 min per borrower</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception/Warning</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 1: Overview & Requirements -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Overview & Requirements</h2><span>Understanding the Patriot Act compliance requirements</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>Federal Compliance Requirement</h4>
                        <p>Federal law requires all financial institutions to obtain, verify, and record information that identifies every customer. Completion of this documentation is required in order to comply with the law. A completed copy of this documentation must be retained with the loan file.</p>
                    </div>

                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Loan Created</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">UW Received Status</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Auto-Condition Fires</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Complete Patriot Act Form</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Requirement</th>
                                <th>Description</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>All Mortgage Transactions</strong></td>
                                <td>Form is required on every loan regardless of loan type or program</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Auto-Condition at UW Received</strong></td>
                                <td>System automatically generates a condition when loan reaches UW Received status</td>
                                <td><span class="badge calculated-badge">Auto-Generated</span></td>
                            </tr>
                            <tr>
                                <td><strong>Power of Attorney Loans</strong></td>
                                <td>Must be completed PRIOR to Clear to Close (CTC)</td>
                                <td><span class="badge required-badge">Critical</span></td>
                            </tr>
                            <tr>
                                <td><strong>Multiple Borrowers</strong></td>
                                <td>Complete form for each borrower on the loan</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="exception-box">
                        <h4>Power of Attorney - Critical Timing</h4>
                        <p>On loans with a Power of Attorney, the Patriot Act Borrower Documentation form <strong>MUST</strong> be completed prior to CTC (Clear to Close). Failure to complete this step will delay funding.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Navigate to Screen -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Navigate to Screen</h2><span>Access the Patriot Act Borrower Disclosure screen in Byte</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open Loan File</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Find a Screen or Document</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Select "Patriot Act Borrower Doc"</div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li><strong>Step 2a:</strong> Open the loan file in Byte Pro Enterprise</li>
                        <li><strong>Step 2b:</strong> Use the "Find a Screen or Document" search bar</li>
                        <li><strong>Step 2c:</strong> Navigate to <strong>Compliance</strong> section in the left menu</li>
                        <li><strong>Step 2d:</strong> Select <strong>Patriot Act Borrower Doc</strong> from the list</li>
                    </ul>

                    <div class="tip-box">
                        <h4>Quick Navigation Tip</h4>
                        <p>The Patriot Act Borrower Documentation screen can be found under the <strong>Compliance</strong> folder in the navigation menu. You can also type "Patriot" in the Find a Screen search box for quick access.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Complete Form Fields -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Complete Form Fields</h2><span>Enter borrower identification details from photo ID</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Select Borrower</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter ID Details</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Co-Borrower?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">YES</span>
                                <div class="flow-node action">Repeat for Co-Borrower</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">NO</span>
                                <div class="flow-node output">Proceed to Store</div>
                            </div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                                <th>Source</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Document Type</strong></td>
                                <td>Type of photo identification (Driver's License, Passport, etc.)</td>
                                <td>Borrower's ID</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Document Number</strong></td>
                                <td>Identification number from the document</td>
                                <td>Borrower's ID</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Place of Issuance</strong></td>
                                <td>State or country that issued the identification</td>
                                <td>Borrower's ID</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Date of Issuance</strong></td>
                                <td>Date the identification was issued</td>
                                <td>Borrower's ID</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Expiration Date</strong></td>
                                <td>Date the identification expires</td>
                                <td>Borrower's ID</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>OFAC Scan</strong></td>
                                <td>Office of Foreign Assets Control checkbox</td>
                                <td>System</td>
                                <td><span class="badge optional-badge">Do Not Check</span></td>
                            </tr>
                            <tr>
                                <td><strong>Comments</strong></td>
                                <td>Optional notes or comments</td>
                                <td>User</td>
                                <td><span class="badge optional-badge">Optional</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="warning-box">
                        <h4>OFAC Scan Checkbox</h4>
                        <p>Do <strong>NOT</strong> check the OFAC Scan checkbox. This field is reserved for specific compliance procedures and should be left unchecked during normal processing.</p>
                    </div>

                    <div class="info-box">
                        <h4>Multiple Borrowers</h4>
                        <p>If the loan has a Co-Borrower, repeat all steps for each additional borrower. The screen displays both Borrower and Co-Borrower sections side by side for easy data entry.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Acceptable ID Types -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Acceptable ID Types</h2><span>Valid identification documents for Patriot Act compliance</span></div>
                </div>
                <div class="section-content">
                    <div class="id-type-grid">
                        <div class="id-type-card">
                            <div class="icon">ID</div>
                            <h4>Driver's License</h4>
                            <p>State-issued driver's license with photo</p>
                        </div>
                        <div class="id-type-card">
                            <div class="icon">SS</div>
                            <h4>U.S. Social Security Card</h4>
                            <p>Original Social Security card</p>
                        </div>
                        <div class="id-type-card">
                            <div class="icon">BC</div>
                            <h4>Birth Certificate</h4>
                            <p>Certified birth certificate</p>
                        </div>
                        <div class="id-type-card">
                            <div class="icon">MIL</div>
                            <h4>U.S. Military Card</h4>
                            <p>Active duty or veteran military ID</p>
                        </div>
                        <div class="id-type-card">
                            <div class="icon">SCH</div>
                            <h4>School ID Card</h4>
                            <p>Valid school identification with photo</p>
                        </div>
                        <div class="id-type-card">
                            <div class="icon">PP</div>
                            <h4>U.S. Passport</h4>
                            <p>Current or expired U.S. passport</p>
                        </div>
                        <div class="id-type-card">
                            <div class="icon">CIT</div>
                            <h4>Certificate of U.S. Citizenship</h4>
                            <p>Form N-560 or N-561</p>
                        </div>
                        <div class="id-type-card">
                            <div class="icon">NAT</div>
                            <h4>Certificate of Naturalization</h4>
                            <p>Form N-550 or N-570</p>
                        </div>
                        <div class="id-type-card">
                            <div class="icon">FP</div>
                            <h4>Foreign Passport</h4>
                            <p>Valid passport from foreign country</p>
                        </div>
                        <div class="id-type-card">
                            <div class="icon">ARC</div>
                            <h4>Alien Registration Receipt Card</h4>
                            <p>Permanent Resident Card (Green Card)</p>
                        </div>
                        <div class="id-type-card">
                            <div class="icon">TRC</div>
                            <h4>Temporary Resident Card</h4>
                            <p>Temporary resident documentation</p>
                        </div>
                        <div class="id-type-card">
                            <div class="icon">EAC</div>
                            <h4>Employment Authorization Card</h4>
                            <p>Form I-766 EAD card</p>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>Document Selection</h4>
                        <p>Select the appropriate Document Type from the dropdown menu in Byte. The system provides a comprehensive list of acceptable identification types that meet federal compliance requirements.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Store Document -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Store Document</h2><span>Add the completed form to Stored Docs</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Click Print Icon</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Select Document</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Store</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Document Saved</div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li><strong>Step 5a:</strong> Click the <strong>Print Icon</strong> in the toolbar</li>
                        <li><strong>Step 5b:</strong> In the Available Documents list, select <strong>"Patriot Act - Borrower Documentation"</strong></li>
                        <li><strong>Step 5c:</strong> Click the <strong>Store</strong> button to save to Stored Docs</li>
                        <li><strong>Step 5d:</strong> Open the document in Stored Docs</li>
                        <li><strong>Step 5e:</strong> <strong>Add your signature</strong> and <strong>date</strong> the document</li>
                    </ul>

                    <div class="info-box">
                        <h4>Document Storage</h4>
                        <p>The document will be stored in Stored Docs with the type "Patriot Act - Borrower Documentation". Ensure you sign and date the document after storing to complete the compliance requirement.</p>
                    </div>

                    <div class="tip-box">
                        <h4>Signature Requirement</h4>
                        <p>The Processor or Account Manager must sign and date the stored document. This signature confirms that the identification was verified and the information entered matches the borrower's photo ID.</p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Clear Condition -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Clear Condition</h2><span>Clear or submit the auto-generated condition</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node decision">P3 or P2?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">P3 LOAN</span>
                                <div class="flow-node action">Open Conditions Screen</div>
                                <span class="flow-arrow down">-></span>
                                <div class="flow-node output">Clear the Condition</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">P2 LOAN</span>
                                <div class="flow-node action">Attach Document to Condition</div>
                                <span class="flow-arrow down">-></span>
                                <div class="flow-node output">Mark Submitted for UW</div>
                            </div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Loan Type</th>
                                <th>Action Required</th>
                                <th>Steps</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>P3 Loans</strong></td>
                                <td>Clear the condition directly</td>
                                <td>Navigate to Conditions screen and clear the Patriot Act condition</td>
                            </tr>
                            <tr>
                                <td><strong>P2 Loans</strong></td>
                                <td>Submit for Underwriting review</td>
                                <td>Attach the stored document to the condition and mark as "Submitted for Underwriting"</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <h4>P3 vs P2 Processing</h4>
                        <p><strong>P3:</strong> Processor has authority to clear the condition after verifying and storing the document.<br>
                        <strong>P2:</strong> Document must be submitted for Underwriting review and approval before condition can be cleared.</p>
                    </div>
                </div>
            </section>

            <!-- Section 7: Funder Verification -->
            <section id="section-7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <div class="section-title"><h2>Funder Verification</h2><span>Final verification before funding</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Funder Reviews File</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Patriot Act Complete?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">YES - COMPLETE</span>
                                <div class="flow-node output">Proceed to Fund</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">NO - INCOMPLETE</span>
                                <div class="flow-node exception">Return to Processor</div>
                            </div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Funder Verification - CRITICAL</h4>
                        <p>The Closer/Funder <strong>MUST</strong> verify the Patriot Act Borrower Documentation form is fully completed with all identification information and signed <strong>BEFORE</strong> funding the loan. Loans cannot fund without this verification.</p>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Verification Item</th>
                                <th>Requirement</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>All ID Fields Complete</strong></td>
                                <td>Document Type, Number, Place of Issuance, Dates all filled</td>
                            </tr>
                            <tr>
                                <td><strong>All Borrowers Included</strong></td>
                                <td>Form completed for every borrower on the loan</td>
                            </tr>
                            <tr>
                                <td><strong>Signature Present</strong></td>
                                <td>Processor/Account Manager signature on stored document</td>
                            </tr>
                            <tr>
                                <td><strong>Date Present</strong></td>
                                <td>Document dated when signed</td>
                            </tr>
                            <tr>
                                <td><strong>Document Stored</strong></td>
                                <td>Form saved in Stored Docs</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Funding Gate</h4>
                        <p>This is a critical funding gate. If the Patriot Act Borrower Documentation is incomplete or missing, the funder will return the file for correction, potentially delaying funding and closing.</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <div id="quick-ref" class="quick-ref">
                <h3>Patriot Act Quick Reference</h3>
                <pre>
PATRIOT ACT BORROWER DOCUMENTATION - QUICK REFERENCE
=====================================================

WHEN REQUIRED:
- All mortgage transactions (100% of loans)
- Auto-condition fires at UW Received status
- POA loans: Must complete PRIOR to CTC

WHO COMPLETES:
- Processor or Account Manager

REQUIRED FIELDS (from borrower's photo ID):
[ ] Document Type (Driver's License, Passport, etc.)
[ ] Document Number
[ ] Place of Issuance
[ ] Date of Issuance
[ ] Expiration Date
[X] OFAC Scan - DO NOT CHECK
[ ] Comments - Optional

ACCEPTABLE ID TYPES:
- Driver's License
- U.S. Social Security Card
- Birth Certificate
- U.S. Military Card
- School ID Card
- U.S. Passport
- Certificate of U.S. Citizenship
- Certificate of Naturalization
- Foreign Passport
- Alien Registration Receipt Card
- Temporary Resident Card
- Employment Authorization Card

STORAGE STEPS:
1. Click Print Icon
2. Select "Patriot Act - Borrower Documentation"
3. Click Store
4. Open in Stored Docs
5. Sign and date the document

CLEARING CONDITION:
- P3: Clear condition on Conditions screen
- P2: Attach to condition, mark Submitted for UW

FUNDER VERIFICATION CHECKLIST:
[ ] All ID fields complete
[ ] All borrowers included
[ ] Signature present
[ ] Date present
[ ] Document in Stored Docs

CRITICAL REMINDERS:
! POA loans - complete BEFORE CTC
! Funder must verify BEFORE funding
! Do NOT check OFAC Scan checkbox
! Sign and date stored document

NAVIGATION PATH:
Byte > Find Screen > Compliance > Patriot Act Borrower Doc
                </pre>
            </div>
        </div>

        <!-- ==================== AI AGENTS TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Agent Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation opportunities identified for the Patriot Act Documentation process</p>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">3</div>
                    <div class="agent-summary-label">Agent Opportunities</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">65%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">4 min</div>
                    <div class="agent-summary-label">Est. Time Saved</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">High</div>
                    <div class="agent-summary-label">Compliance Impact</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend">
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #ef4444, #f97316);"></div>
                    <span>Critical Priority (9-10)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #f97316, #eab308);"></div>
                    <span>High Priority (7-8)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #eab308, #22c55e);"></div>
                    <span>Medium Priority (5-6)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #22c55e, #14b8a6);"></div>
                    <span>Low Priority (1-4)</span>
                </div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container" id="agent-heatmap">
                <div class="heat-map-title">Priority Heat Map</div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-idextract')">
                        <div class="heat-score">9.0</div>
                        <div class="heat-name">ID Data Extractor</div>
                        <div class="heat-desc">OCR extraction from photo ID images</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>3 min</span></div>
                            <div class="heat-metric">Complexity: <span>Medium</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-poamonitor')">
                        <div class="heat-score">8.2</div>
                        <div class="heat-name">POA Status Monitor</div>
                        <div class="heat-desc">Alert when POA loans approach CTC without completion</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>N/A</span></div>
                            <div class="heat-metric">Complexity: <span>Low</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-fundverify')">
                        <div class="heat-score">6.5</div>
                        <div class="heat-name">Funder Verification Agent</div>
                        <div class="heat-desc">Auto-validate completeness before funding</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>1 min</span></div>
                            <div class="heat-metric">Complexity: <span>Low</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <div id="agent-details">
                <h2 style="color: var(--text-primary); margin-bottom: 25px; font-size: 1.5rem;">Agent Details</h2>
                <div class="agent-grid">
                    <!-- ID Data Extractor Agent -->
                    <div class="agent-card" id="agent-idextract">
                        <div class="agent-card-header">
                            <div class="agent-icon">ID</div>
                            <div class="agent-info">
                                <div class="agent-name">ID Data Extractor</div>
                                <div class="agent-type">OCR / Data Extraction</div>
                            </div>
                            <span class="agent-priority critical">Critical</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically extracts identification data from uploaded photo ID images using OCR technology. Parses Document Type, Number, Place of Issuance, and Dates to pre-populate the Patriot Act form fields, eliminating manual data entry errors.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">ID Image Upload</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">OCR Processing</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Data Extraction</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Populate Fields</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">3 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">98%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Med</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('idextract')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- POA Status Monitor Agent -->
                    <div class="agent-card" id="agent-poamonitor">
                        <div class="agent-card-header">
                            <div class="agent-icon">POA</div>
                            <div class="agent-info">
                                <div class="agent-name">POA Status Monitor</div>
                                <div class="agent-type">Monitoring / Alerts</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Monitors loans with Power of Attorney and alerts processors when the loan is approaching CTC status without completed Patriot Act documentation. Prevents funding delays by ensuring compliance timing requirements are met.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Detect POA Loan</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Monitor Status</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Check Compliance</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Alert if Missing</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">N/A</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">100%</div>
                                    <div class="agent-stat-label">Coverage</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('poamonitor')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- Funder Verification Agent -->
                    <div class="agent-card" id="agent-fundverify">
                        <div class="agent-card-header">
                            <div class="agent-icon">FV</div>
                            <div class="agent-info">
                                <div class="agent-name">Funder Verification Agent</div>
                                <div class="agent-type">Validation / QC</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically validates that the Patriot Act form is complete before funding. Checks all required fields, signature presence, and document storage. Provides funder with pass/fail status and specific items needing attention.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Funding Request</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Validate Fields</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Check Signature</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Report Status</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">1 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">100%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('fundverify')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Document Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Patriot Act Borrower Documentation - Workflow</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy to Clipboard</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Patriot Act Borrower Documentation Workflow

## Overview
The Patriot Act Borrower Documentation is a required form on all mortgage transactions.
An auto-condition fires at UW Received status to ensure compliance.

## Critical Timing
- **POA Loans**: Must complete PRIOR to CTC (Clear to Close)

## Process Steps

### 1. Navigate to Screen
- Open loan file in Byte
- Find Screen > Compliance > Patriot Act Borrower Doc

### 2. Complete Form Fields
Based on borrower's photo identification:
- Document Type
- Document Number
- Place of Issuance
- Date of Issuance
- Expiration Date
- OFAC Scan: DO NOT CHECK
- Comments: Optional

### 3. Repeat for Additional Borrowers
Complete all fields for each borrower on the loan.

### 4. Store Document
1. Click Print Icon
2. Select "Patriot Act - Borrower Documentation"
3. Click Store
4. Open in Stored Docs
5. Add signature and date

### 5. Clear Condition
- **P3**: Clear condition on Conditions screen
- **P2**: Attach document, mark Submitted for UW

### 6. Funder Verification
Closer/Funder MUST verify before funding:
- All ID fields complete
- All borrowers included
- Signature present
- Date present
- Document stored

## Acceptable ID Types
- Driver's License
- U.S. Social Security Card
- Birth Certificate
- U.S. Military Card
- School ID Card
- U.S. Passport
- Certificate of U.S. Citizenship
- Certificate of Naturalization
- Foreign Passport
- Alien Registration Receipt Card
- Temporary Resident Card
- Employment Authorization Card

---
Last Updated: October 3, 2025
                </pre>
            </div>
        </div>
    </div>

    <!-- Agent Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptTitle">Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPrompt()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav click to temporarily disable scroll spy
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);

                // Remove active from all, add to clicked
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Re-enable scroll spy after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Agent Prompt System
        const agentPrompts = {
            idextract: {
                name: 'ID Data Extractor Agent',
                tags: ['OCR', 'Data Extraction', 'Medium Complexity', 'Critical Priority'],
                purpose: `This agent uses OCR (Optical Character Recognition) technology to automatically extract identification data from uploaded photo ID images. It parses the Document Type, Document Number, Place of Issuance, Date of Issuance, and Expiration Date to pre-populate the Patriot Act form fields, eliminating manual data entry and reducing errors.`,
                prompt: `You are building an OCR Data Extraction Agent for CMG Financial's Patriot Act Borrower Documentation process.

AGENT NAME: ID Data Extractor
TYPE: OCR / Data Extraction

OBJECTIVE:
Create an agent that automatically extracts identification information from uploaded photo ID images and populates the Patriot Act form fields in Byte.

INPUT DATA:
- Photo ID image (JPG, PNG, PDF)
- Supported ID types: Driver's License, Passport, Military ID, etc.

OCR PROCESSING:
1. Image preprocessing (rotation, contrast, noise reduction)
2. Text extraction using Tesseract or cloud OCR service
3. Field identification and parsing

EXTRACTION TARGETS:
{
  "document_type": "Driver's License | Passport | Military ID | etc.",
  "document_number": "extracted ID number",
  "place_of_issuance": "State or Country",
  "date_of_issuance": "MM/DD/YYYY",
  "expiration_date": "MM/DD/YYYY",
  "borrower_name": "Full Name (for verification)",
  "date_of_birth": "MM/DD/YYYY (for verification)"
}

DOCUMENT TYPE DETECTION:
- Driver's License: Look for "DRIVER LICENSE", state name, DL number format
- Passport: Look for "PASSPORT", MRZ zone, country code
- Military ID: Look for "ARMED FORCES", branch name, DOD ID

BYTE FIELD MAPPING:
- Document Type dropdown: response.document_type
- Document Number: response.document_number
- Place of Issuance: response.place_of_issuance
- Date of Issuance: response.date_of_issuance
- Expiration Date: response.expiration_date

VALIDATION:
- Cross-reference extracted name with loan borrower name
- Validate date formats
- Check expiration date is not in the past
- Flag low-confidence extractions for manual review

ERROR HANDLING:
- If image quality poor: Request re-upload
- If field unreadable: Leave blank, flag for manual entry
- If document type unknown: Present options to user`,
                integration: `INTEGRATION POINTS:
1. Document Upload Service
   - Accept images from Stored Docs
   - Support drag-drop upload
   - Convert PDF to image if needed

2. OCR Service
   - Google Cloud Vision API
   - Amazon Textract
   - Azure Computer Vision
   - Fallback: Tesseract OCR

3. Byte LOS API
   - Write extracted data to Patriot Act screen
   - Trigger on screen load or manual request
   - Confidence indicators for each field

4. Audit Trail
   - Log OCR results
   - Store original image reference
   - Track manual corrections for ML training

DEPLOYMENT:
- Triggered when ID image uploaded to loan file
- Button on Patriot Act screen: "Extract from ID"
- Show extraction preview before populating fields`
            },
            poamonitor: {
                name: 'POA Status Monitor Agent',
                tags: ['Monitoring', 'Alerts', 'Low Complexity', 'High Priority'],
                purpose: `This agent monitors loans with Power of Attorney and proactively alerts processors when the loan is approaching CTC status without completed Patriot Act documentation. This prevents funding delays by ensuring the critical timing requirement (Patriot Act must be complete BEFORE CTC on POA loans) is met.`,
                prompt: `You are building a Monitoring Agent for CMG Financial's Patriot Act compliance process.

AGENT NAME: POA Status Monitor
TYPE: Monitoring / Push Notifications

OBJECTIVE:
Monitor all loans with Power of Attorney and alert processors when approaching CTC without completed Patriot Act documentation.

DETECTION CRITERIA:
1. Loan has Power of Attorney indicator = TRUE
2. Patriot Act condition status != Cleared
3. Loan status approaching CTC

MONITORING LOGIC:
1. Scan all active loans daily
2. Identify loans with POA flag
3. Check Patriot Act condition status
4. Evaluate loan milestone proximity to CTC

ALERT THRESHOLDS:
- Loan reaches UW Approved: INFO alert
- Loan reaches Conditions Cleared: WARNING alert
- Loan reaches Pre-CTC: URGENT alert
- Loan at CTC without completion: CRITICAL BLOCK

ALERT MESSAGE FORMAT:
{
  "loan_number": "2026-001234",
  "borrower_name": "John Smith",
  "poa_type": "Full POA / Limited POA",
  "current_status": "Conditions Cleared",
  "patriot_act_status": "Not Completed",
  "alert_level": "WARNING",
  "processor": "Jane Doe",
  "action_required": "Complete Patriot Act Borrower Documentation before CTC"
}

ALERT CHANNELS:
- Email notification to processor
- Byte dashboard notification
- Pipeline flag/highlight
- Supervisor notification for URGENT+

BLOCKING LOGIC:
- If loan at CTC and Patriot Act incomplete:
  - Prevent CTC status change
  - Display blocking message
  - Require override with supervisor approval`,
                integration: `INTEGRATION POINTS:
1. Byte LOS Database
   - Query loan POA indicator
   - Query condition statuses
   - Query loan milestones
   - Monitor status changes

2. Notification Services
   - Email via SendGrid/SMTP
   - Byte internal notifications
   - MS Teams webhooks

3. Pipeline Dashboard
   - Visual indicator on POA loans
   - Color-coded urgency
   - Quick link to Patriot Act screen

4. Workflow Engine
   - Status change triggers
   - Real-time monitoring
   - Escalation rules

DEPLOYMENT:
- Background service running every 15 minutes
- Real-time trigger on status changes
- Daily digest report for supervisors`
            },
            fundverify: {
                name: 'Funder Verification Agent',
                tags: ['Validation', 'QC', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent automatically validates that the Patriot Act Borrower Documentation form is complete before funding. It checks all required fields, verifies signature presence, confirms document storage, and provides the funder with a clear pass/fail status along with specific items needing attention.`,
                prompt: `You are building a Validation Agent for CMG Financial's Patriot Act funding verification process.

AGENT NAME: Funder Verification Agent
TYPE: Validation / Quality Control

OBJECTIVE:
Automatically validate Patriot Act Borrower Documentation completeness before funding, providing funders with instant pass/fail status.

VALIDATION CHECKLIST:
1. All Required Fields Complete
   [ ] Document Type (not blank)
   [ ] Document Number (not blank)
   [ ] Place of Issuance (not blank)
   [ ] Date of Issuance (valid date)
   [ ] Expiration Date (valid date, not expired)

2. All Borrowers Covered
   [ ] Primary Borrower section complete
   [ ] Co-Borrower section complete (if applicable)
   [ ] Additional borrowers (if applicable)

3. Document Storage
   [ ] Document exists in Stored Docs
   [ ] Document type = "Patriot Act - Borrower Documentation"
   [ ] Document is viewable/accessible

4. Signature Verification
   [ ] Signature field not blank
   [ ] Date field not blank

VALIDATION OUTPUT:
{
  "loan_number": "2026-001234",
  "validation_status": "PASS | FAIL",
  "checked_at": "2026-01-27T10:30:00Z",
  "borrowers_validated": 2,
  "issues": [
    {
      "field": "Co-Borrower Expiration Date",
      "issue": "Missing value",
      "severity": "BLOCKING"
    }
  ],
  "funder_action": "PROCEED | RETURN TO PROCESSOR"
}

SEVERITY LEVELS:
- BLOCKING: Cannot fund until resolved
- WARNING: Can fund with supervisor approval
- INFO: Noted but does not block funding

INTEGRATION WITH FUNDING QUEUE:
- Auto-run when loan enters funding queue
- Display results on funder dashboard
- One-click "Return to Processor" with pre-filled issue list`,
                integration: `INTEGRATION POINTS:
1. Byte LOS API
   - Read Patriot Act screen fields
   - Read Stored Docs inventory
   - Check borrower count on loan

2. Funder Dashboard
   - Validation status indicator
   - Drill-down to specific issues
   - Quick action buttons

3. Processor Communication
   - Auto-generate task on failure
   - Include specific fields to fix
   - Priority flag for POA loans

4. Audit Trail
   - Log all validations
   - Track resolution time
   - Compliance reporting

DEPLOYMENT:
- Triggered on funding queue entry
- Manual trigger button for re-check
- Batch validation for pipeline review`
            }
        };

        function showAgentPrompt(agentId) {
            const agent = agentPrompts[agentId];
            if (!agent) return;

            document.getElementById('promptTitle').textContent = agent.name;
            document.getElementById('promptTags').innerHTML = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPrompt() {
            const agent = document.getElementById('promptTitle').textContent;
            const purpose = document.getElementById('promptPurpose').textContent;
            const prompt = document.getElementById('promptContent').textContent;
            const integration = document.getElementById('promptIntegration').textContent;

            const fullText = `# ${agent}\n\n## Purpose\n${purpose}\n\n## Build Prompt\n${prompt}\n\n## Integration\n${integration}`;

            try {
                await navigator.clipboard.writeText(fullText);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => { if (e.target.id === 'promptModal') closePromptModal(); });
    </script>
</body>
</html>
