<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ordering CMG Payoffs - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box, .warning-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        .warning-box { background: rgba(245, 158, 11, 0.08); border-color: var(--accent-amber); border: 1px solid rgba(245, 158, 11, 0.2); border-left: 4px solid var(--accent-amber); }
        .warning-box h4 { color: var(--accent-amber); margin-bottom: 10px; font-size: 1rem; }
        .warning-box p, .warning-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Contact Cards */
        .contact-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .contact-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .contact-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .contact-card-header h4 { font-size: 1.05rem; }
        .contact-card-body { padding: 22px; }
        .contact-card ul { list-style: none; padding: 0; }
        .contact-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .contact-card li:last-child { border-bottom: none; }
        .contact-icon { color: var(--accent-blue); font-weight: bold; width: 24px; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* Step List */
        .step-list { list-style: none; padding: 0; margin: 18px 0; }
        .step-list li {
            padding: 14px 18px;
            border-left: 3px solid var(--accent-blue);
            background: rgba(0,0,0,0.2);
            margin-bottom: 10px;
            border-radius: 0 8px 8px 0;
            color: var(--text-secondary);
        }
        .step-list li strong { color: var(--text-primary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Mortgage Fundamentals</a>
        <span class="separator">></span>
        <span class="current">Ordering CMG Payoffs</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>CMG Payoffs</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Confirm Servicer</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Find Loan in DOMO</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Order Payoff in Byte</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Field Guide</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Payoff Processing Rules</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">ServiceMac Loans</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Ordering CMG Payoffs - Job Aid</h1>
                <p class="subtitle">Complete guide for ordering the fastest, most accurate payoffs for CMG portfolio loans</p>
                <div class="meta">
                    <span class="meta-item">System: Byte LOS / DOMO</span>
                    <span class="meta-item">Role: Processor / Closer</span>
                    <span class="meta-item">Updated: January 21, 2026</span>
                    <span class="meta-item">Delivery: 72 hours</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 1: Confirm Servicer -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Confirm the Loan is with CMG or Cenlar for Servicing</h2><span>Verify the loan servicer before ordering an internal payoff</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Access DOMO</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Check Servicer</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">CMG or Cenlar</span>
                                <div class="flow-node output">Order Internal Payoff</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Other Servicer</span>
                                <div class="flow-node exception">Contact Servicer Directly</div>
                            </div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>Why This Step is Critical</h4>
                        <p>This verification step confirms that CMG services the loan and an internal payoff is appropriate. The Servicer field will show either <strong>CMG</strong> or <strong>Cenlar</strong> for loans that qualify for internal payoff requests.</p>
                    </div>
                    <div class="tip-box">
                        <h4>Pro Tip</h4>
                        <p>Always verify the servicer before proceeding. If the loan is serviced by another company, you cannot request an internal CMG payoff - it must be requested directly with that servicer.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Find Loan in DOMO -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Find Old Loan in DOMO</h2><span>Use the Loan Officer / Account Exec Servicing Info card</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Open DOMO</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Navigate to Servicing Info</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Search Borrower/Loan</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Confirm Servicer Details</div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>DOMO Website</h4>
                        <p>Access the Loan Officer / Account Exec Servicing Info card in DOMO to view:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Loan Count for the borrower</li>
                            <li>Is_Repay status</li>
                            <li>Last Payment Received Date</li>
                            <li>Interim_Byte indicator</li>
                            <li>Last Payment Amount</li>
                            <li>LOS_Servicer_Code</li>
                            <li><strong>Servicer</strong> (CMG or Cenlar)</li>
                            <li>1st Pmt Due and Investor info</li>
                        </ul>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>DOMO Field</th>
                                <th>Description</th>
                                <th>What to Look For</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Servicer</strong></td>
                                <td>Current loan servicer</td>
                                <td><span class="badge required-badge">Must be CMG or Cenlar</span></td>
                            </tr>
                            <tr>
                                <td><strong>LOS_Servicer_Code</strong></td>
                                <td>Servicer code in LOS</td>
                                <td>CMG-LoanServ or Cenlar</td>
                            </tr>
                            <tr>
                                <td><strong>Last Payment Received Date</strong></td>
                                <td>Date of most recent payment</td>
                                <td>Verify loan is current</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 3: Order Payoff in Byte -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Order the Payoff in Byte</h2><span>Complete the Payoff Request on the Servicing screen of the NEW loan</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Open NEW Loan in Byte</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Navigate to Servicing Screen</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Complete Payoff Request</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Submit Request</div>
                        </div>
                    </div>
                    <ul class="step-list">
                        <li><strong>Step 1:</strong> Open the <strong>NEW loan</strong> file in Byte (the refinance loan, not the existing loan being paid off)</li>
                        <li><strong>Step 2:</strong> Navigate to the <strong>Servicing</strong> screen</li>
                        <li><strong>Step 3:</strong> Locate the <strong>PAYOFF REQUEST</strong> section</li>
                        <li><strong>Step 4:</strong> Complete all required fields in the Payoff Request section</li>
                        <li><strong>Step 5:</strong> Complete the <strong>First Request</strong> section with dates</li>
                    </ul>

                    <div class="warning-box">
                        <h4>IMPORTANT: Multiple Request Sections</h4>
                        <p>Only complete the <strong>Second Request</strong>, <strong>Third Request</strong>, or <strong>Fourth Request</strong> sections if a NEW or UPDATED payoff is needed.</p>
                        <p style="margin-top: 10px;">If requested more than 4 times, please edit the First Request field instead of creating additional requests.</p>
                    </div>

                    <div class="exception-box">
                        <h4>Closing Date Changes</h4>
                        <p>If your closing date changes, you <strong>MUST</strong> request an updated payoff with an <strong>ACCURATE good-through date</strong>.</p>
                        <p style="margin-top: 10px;"><strong>WARNING:</strong> Expired payoff quotes will NOT be honored!</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Field Guide -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Field Guide</h2><span>All fields must be complete to trigger payoff creation</span></div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Field Name</th>
                                <th>Description</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Nothin' But Net</strong></td>
                                <td>Check box if netted payoff is needed, leave unchecked for standard payoff. <em>(CMG to CMG refinance only option; no exceptions)</em></td>
                                <td><span class="badge optional-badge">Optional</span></td>
                            </tr>
                            <tr>
                                <td><strong>Existing CMG Loan Number</strong></td>
                                <td>10-digit CMG loan number for the previous loan (the loan being refinanced) found on the Servicing Info DOMO card</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Current Escrow Balance</strong></td>
                                <td>Current escrow balance for the existing loan</td>
                                <td><span class="badge calculated-badge">Reference</span></td>
                            </tr>
                            <tr>
                                <td><strong>Requestor Email</strong></td>
                                <td>Person requesting the payoff and where quote will be sent via email</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Servicing Coordinator</strong></td>
                                <td>Assigned servicing coordinator for the loan</td>
                                <td><span class="badge optional-badge">Optional</span></td>
                            </tr>
                            <tr>
                                <td><strong>Date Requested</strong></td>
                                <td>Requests should be submitted a <strong>minimum of 5 days prior</strong> to the CD release date</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Good Thru Date / Payoff Good Through Date</strong></td>
                                <td>Payoffs issued with a good through date up to <strong>30 calendar days</strong> from the date the payoff is requested if field is incomplete</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Net Payoff Request To Cenlar</strong></td>
                                <td>Indicator for netted payoff request to Cenlar</td>
                                <td><span class="badge optional-badge">If Applicable</span></td>
                            </tr>
                            <tr>
                                <td><strong>Payoff Received</strong></td>
                                <td>Date payoff was received from servicer</td>
                                <td><span class="badge calculated-badge">Auto-Updated</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <h4>Payoff Delivery</h4>
                        <p>Payoffs will be delivered to the <strong>REQUESTOR EMAIL</strong> within <strong>72 hours</strong>.</p>
                        <p style="margin-top: 10px;">If the team has any questions, they will reach out to the REQUESTOR EMAIL.</p>
                    </div>

                    <div class="decision-tree">
                        <h3>Request Sections Overview</h3>
                        <ul class="step-list">
                            <li><strong>First Request:</strong> Initial payoff request - Date Requested, Good Thru Date, Net Payoff Request To Cenlar, Payoff Received</li>
                            <li><strong>Second Request:</strong> Only if updated payoff needed - Date Requested 2, Good Thru Date 2, Net Payoff Request to Cenlar 2, Payoff Received 2</li>
                            <li><strong>Third Request:</strong> Only if updated payoff needed - Date Requested 3, Good Thru Date 3, Net Payoff Request to Cenlar 3, Payoff Received 3</li>
                            <li><strong>Fourth Request:</strong> Only if updated payoff needed - Date Requested 4, Good Thru Date 4, Net Payoff Request to Cenlar 4, Payoff Received 4</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 5: Payoff Processing Rules -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Payoff May Not Process If...</h2><span>Critical rules and rejection scenarios</span></div>
                </div>
                <div class="section-content">
                    <div class="exception-box">
                        <h4>HARD REJECT: Expired Payoff</h4>
                        <p>CMG policy now requires a <strong>hard rejection</strong> for the use of an expired payoff. No exceptions will be made.</p>
                    </div>

                    <div class="decision-tree">
                        <h3>If a Payoff is Short</h3>
                        <div class="tree-node level-1">
                            <span class="tree-label">Less than $50 Short</span>
                            <p>The payoff WILL process, but the <strong>branch will be billed back</strong> for the advance amount.</p>
                        </div>
                        <div class="tree-node">
                            <span class="tree-label">Greater than $50 Short</span>
                            <p>The payoff will <strong>NOT process</strong>. Actions taken:</p>
                            <ul style="margin-top: 10px; margin-left: 20px;">
                                <li>Customer will be notified to contact the title company because there is an issue with their closing</li>
                                <li>The Requestor Email designee will be notified</li>
                                <li><strong>Per diem interest will continue</strong> until the matter is resolved</li>
                            </ul>
                        </div>
                    </div>

                    <div class="warning-box">
                        <h4>Payoff with Another Servicer</h4>
                        <p>If a payoff is with another servicer, <strong>we cannot provide it</strong> - it must be requested with the servicer directly.</p>
                    </div>

                    <div class="summary-grid">
                        <div class="summary-card">
                            <h4>Request Lead Time</h4>
                            <div class="value">5</div>
                            <div class="label">Days Minimum Before CD</div>
                        </div>
                        <div class="summary-card">
                            <h4>Delivery Time</h4>
                            <div class="value">72</div>
                            <div class="label">Hours</div>
                        </div>
                        <div class="summary-card">
                            <h4>Good Thru Max</h4>
                            <div class="value">30</div>
                            <div class="label">Calendar Days</div>
                        </div>
                        <div class="summary-card">
                            <h4>Short Threshold</h4>
                            <div class="value">$50</div>
                            <div class="label">Processing Limit</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>Questions?</h4>
                        <p>For any questions, please email: <strong>servicinghelp@cmgfi.com</strong></p>
                    </div>
                </div>
            </section>

            <!-- Section 6: ServiceMac Loans -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>CMG Loans with ServiceMac</h2><span>Special handling for HomeBridge-originated loans</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>When to Use ServiceMac</h4>
                        <p>If the loan was originated under <strong>HomeBridge</strong> and is serviced by ServiceMac (indicated by a loan number starting with <strong>801xxx</strong>), all payoff requests must be made directly through ServiceMac.</p>
                    </div>

                    <div class="contact-grid">
                        <div class="contact-card">
                            <div class="contact-card-header">
                                <h4>ServiceMac Contact Information</h4>
                            </div>
                            <div class="contact-card-body">
                                <ul>
                                    <li>
                                        <span class="contact-icon">P</span>
                                        <strong>Phone:</strong> 844-478-2622
                                    </li>
                                    <li>
                                        <span class="contact-icon">H</span>
                                        <strong>Hours:</strong> M-F 8:30 AM - 8:00 PM ET
                                    </li>
                                    <li>
                                        <span class="contact-icon">S</span>
                                        <strong>Saturday:</strong> 9:00 AM - 3:00 PM ET
                                    </li>
                                    <li>
                                        <span class="contact-icon">M</span>
                                        <strong>Mail:</strong> PO Box 100077, Duluth, GA 30096-9377
                                    </li>
                                    <li>
                                        <span class="contact-icon">W</span>
                                        <strong>Website:</strong> www.myservicemac.com
                                    </li>
                                    <li>
                                        <span class="contact-icon">E</span>
                                        <strong>Email:</strong> support@servicemacusa.com
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>How to Identify ServiceMac Loans</h4>
                        <p>Look for loan numbers that start with <strong>801xxx</strong>. These loans were originated under HomeBridge and are serviced by ServiceMac, not CMG or Cenlar.</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <div id="quick-ref" class="quick-ref">
                <h3>CMG Payoffs Quick Reference</h3>
                <pre>
ORDERING CMG PAYOFFS - QUICK REFERENCE
======================================

STEP 1: VERIFY SERVICER
-----------------------
[ ] Access DOMO - Loan Officer / Account Exec Servicing Info
[ ] Confirm Servicer = CMG or Cenlar
[ ] If other servicer -> Contact servicer directly

STEP 2: ORDER IN BYTE (NEW LOAN)
--------------------------------
Location: Servicing Screen > Payoff Request

Required Fields:
[ ] Existing CMG Loan Number (10 digits from DOMO)
[ ] Requestor Email (where payoff will be sent)
[ ] Date Requested (minimum 5 days before CD)
[ ] Good Thru Date (up to 30 calendar days)

Optional:
[ ] Nothin' But Net checkbox (CMG-to-CMG refi ONLY)

TIMING REQUIREMENTS
-------------------
Request Lead Time:    5 days minimum before CD release
Payoff Delivery:      Within 72 hours to Requestor Email
Good Thru Maximum:    30 calendar days from request date

PAYOFF PROCESSING RULES
-----------------------
EXPIRED PAYOFF:     HARD REJECT - No exceptions
SHORT < $50:        Processes, branch billed back
SHORT > $50:        Does NOT process, per diem continues
OTHER SERVICER:     Request directly from servicer

SERVICEMAC LOANS (801xxx)
-------------------------
Phone:    844-478-2622
Hours:    M-F 8:30 AM - 8:00 PM ET, Sat 9-3 PM ET
Website:  www.myservicemac.com
Email:    support@servicemacusa.com
Mail:     PO Box 100077, Duluth, GA 30096-9377

SUPPORT
-------
Email: servicinghelp@cmgfi.com
                </pre>
            </div>
        </div>

        <!-- ==================== AI AGENTS TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Agent Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation opportunities identified for the CMG Payoff ordering process</p>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">4</div>
                    <div class="agent-summary-label">Agent Opportunities</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">68%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">15 min</div>
                    <div class="agent-summary-label">Est. Time Saved</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">High</div>
                    <div class="agent-summary-label">Error Reduction</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend">
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #ef4444, #f97316);"></div>
                    <span>Critical Priority (9-10)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #f97316, #eab308);"></div>
                    <span>High Priority (7-8)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #eab308, #22c55e);"></div>
                    <span>Medium Priority (5-6)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(90deg, #22c55e, #14b8a6);"></div>
                    <span>Low Priority (1-4)</span>
                </div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container" id="agent-heatmap">
                <div class="heat-map-title">Priority Heat Map</div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-servicerlookup')">
                        <div class="heat-score">9.1</div>
                        <div class="heat-name">Servicer Lookup Agent</div>
                        <div class="heat-desc">Auto-verify servicer status from DOMO before payoff request</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>3 min</span></div>
                            <div class="heat-metric">Complexity: <span>Low</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-expiration')">
                        <div class="heat-score">8.5</div>
                        <div class="heat-name">Expiration Monitor</div>
                        <div class="heat-desc">Alert before payoff quotes expire to prevent hard rejections</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>N/A</span></div>
                            <div class="heat-metric">Complexity: <span>Low</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-autofill')">
                        <div class="heat-score">7.8</div>
                        <div class="heat-name">Payoff Auto-Fill</div>
                        <div class="heat-desc">Pre-populate payoff request fields from DOMO data</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>5 min</span></div>
                            <div class="heat-metric">Complexity: <span>Medium</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-servicemac')">
                        <div class="heat-score">6.2</div>
                        <div class="heat-name">ServiceMac Router</div>
                        <div class="heat-desc">Auto-detect 801xxx loans and route to ServiceMac contact</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Time: <span>2 min</span></div>
                            <div class="heat-metric">Complexity: <span>Low</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <div id="agent-details">
                <h2 style="color: var(--text-primary); margin-bottom: 25px; font-size: 1.5rem;">Agent Details</h2>
                <div class="agent-grid">
                    <!-- Servicer Lookup Agent -->
                    <div class="agent-card" id="agent-servicerlookup">
                        <div class="agent-card-header">
                            <div class="agent-icon">S</div>
                            <div class="agent-info">
                                <div class="agent-name">Servicer Lookup Agent</div>
                                <div class="agent-type">Data Validation / API</div>
                            </div>
                            <span class="agent-priority critical">Critical</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically queries DOMO to verify the loan servicer (CMG or Cenlar) before allowing payoff request submission. Prevents errors by blocking requests for loans serviced by other companies and routing them appropriately.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Loan Number</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Query DOMO</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Validate Servicer</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Allow/Block</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">3 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">99%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('servicerlookup')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- Expiration Monitor Agent -->
                    <div class="agent-card" id="agent-expiration">
                        <div class="agent-card-header">
                            <div class="agent-icon">E</div>
                            <div class="agent-info">
                                <div class="agent-name">Payoff Expiration Monitor</div>
                                <div class="agent-type">Monitoring / Alerts</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Monitors all active payoff quotes and sends proactive alerts before they expire. Critical for preventing hard rejections due to expired payoff quotes, which CMG policy now strictly enforces.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Scan Good Thru</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Check Threshold</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Send Alert</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Prompt Refresh</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">N/A</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">100%</div>
                                    <div class="agent-stat-label">Prevent Reject</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('expiration')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- Payoff Auto-Fill Agent -->
                    <div class="agent-card" id="agent-autofill">
                        <div class="agent-card-header">
                            <div class="agent-icon">A</div>
                            <div class="agent-info">
                                <div class="agent-name">Payoff Auto-Fill Agent</div>
                                <div class="agent-type">Data Integration</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically pre-populates the Byte payoff request form with data from DOMO including the 10-digit CMG loan number, servicer code, and calculates optimal Good Thru Date based on expected closing date.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Fetch DOMO</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Map Fields</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Calculate Dates</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Fill Byte</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">5 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">95%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Med</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('autofill')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- ServiceMac Router Agent -->
                    <div class="agent-card" id="agent-servicemac">
                        <div class="agent-card-header">
                            <div class="agent-icon">M</div>
                            <div class="agent-info">
                                <div class="agent-name">ServiceMac Router</div>
                                <div class="agent-type">Routing / Detection</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically detects HomeBridge-originated loans (801xxx prefix) and routes users to ServiceMac contact information, preventing failed payoff requests and providing direct contact details for quick resolution.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Flow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Check Prefix</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Detect 801xxx</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Route to SM</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Show Contact</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">2 min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">100%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('servicemac')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>CMG Payoffs Workflow Documentation</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Ordering CMG Payoffs - Job Aid

## Overview
To ensure that you have the fastest, most accurate payoff for your CMG portfolio loan, follow this process.

## Step 1: Confirm Servicer
- Access DOMO: Loan Officer / Account Exec Servicing Info
- Verify Servicer = CMG or Cenlar
- If other servicer, request payoff directly from them

## Step 2: Order Payoff in Byte
Location: NEW loan > Servicing Screen > Payoff Request

### Required Fields
- Nothin' But Net: Check for netted payoff (CMG-to-CMG refi only)
- Existing CMG Loan Number: 10-digit from DOMO
- Requestor Email: Where quote will be sent
- Date Requested: Minimum 5 days before CD release
- Good Thru Date: Up to 30 calendar days

## Timing
- Request: 5+ days before CD
- Delivery: Within 72 hours
- Good Thru: Max 30 days

## Processing Rules
- EXPIRED PAYOFF: Hard reject, no exceptions
- SHORT < $50: Processes, branch billed back
- SHORT > $50: Does not process, per diem continues

## ServiceMac Loans (801xxx)
For HomeBridge-originated loans:
- Phone: 844-478-2622
- Hours: M-F 8:30 AM - 8:00 PM ET, Sat 9-3 PM ET
- Website: www.myservicemac.com
- Email: support@servicemacusa.com

## Support
Email: servicinghelp@cmgfi.com</pre>
            </div>
        </div>
    </div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav click to temporarily disable scroll spy
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);

                // Remove active from all, add to clicked
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Re-enable scroll spy after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Agent Prompt System
        const agentPrompts = {
            servicerlookup: {
                name: 'Servicer Lookup Agent',
                tags: ['Data Validation', 'API', 'Low Complexity', 'Critical Priority'],
                purpose: `This agent automatically queries DOMO to verify the loan servicer (CMG or Cenlar) before allowing payoff request submission. It prevents errors by blocking requests for loans serviced by other companies and routing them to the appropriate servicer.`,
                prompt: `You are building a Data Validation Agent for CMG Financial's Byte LOS payoff ordering process.

AGENT NAME: Servicer Lookup Agent
TYPE: Data Validation / API Integration

OBJECTIVE:
Automatically verify that a loan is serviced by CMG or Cenlar before allowing a payoff request to be submitted in Byte.

INPUT DATA:
- Existing CMG Loan Number (10 digits)
- Borrower Name (for verification)

API INTEGRATION:
1. DOMO API
   - Endpoint: /loan-officer/servicing-info
   - Query: { loan_number, borrower_name }
   - Response: { servicer, los_servicer_code, last_payment_date }

VALIDATION LOGIC:
IF servicer IN ['CMG', 'Cenlar']:
   RETURN { valid: true, allow_request: true }
ELSE IF loan_number.startsWith('801'):
   RETURN { valid: false, route_to: 'ServiceMac', contact: '844-478-2622' }
ELSE:
   RETURN { valid: false, message: 'Contact servicer directly' }

BYTE INTEGRATION:
- Block payoff request submission if servicer != CMG/Cenlar
- Display appropriate routing message
- Pre-fill servicer information in request form`,
                integration: `INTEGRATION POINTS:
1. DOMO API
   - Read access to Loan Officer / Account Exec Servicing Info
   - Query by loan number and borrower
   - Handle API timeouts gracefully

2. Byte LOS
   - Trigger validation on form load
   - Block/allow form submission
   - Display validation messages

3. User Interface
   - Clear success/failure indicators
   - Alternative routing information
   - ServiceMac contact card display

DEPLOYMENT:
- Trigger: When user enters Existing CMG Loan Number
- Response time: < 2 seconds
- Fallback: Manual verification option`
            },
            expiration: {
                name: 'Payoff Expiration Monitor',
                tags: ['Monitoring', 'Alerts', 'Low Complexity', 'High Priority'],
                purpose: `This agent monitors all active payoff quotes and sends proactive alerts before they expire. Critical for preventing hard rejections due to expired payoff quotes, which CMG policy now strictly enforces with no exceptions.`,
                prompt: `You are building a Monitoring Agent for CMG Financial's payoff management process.

AGENT NAME: Payoff Expiration Monitor
TYPE: Monitoring / Push Notifications

OBJECTIVE:
Monitor all active payoff quotes and alert processors before expiration to prevent hard rejections.

MONITORING LOGIC:
1. Scan all loans with active payoff requests
2. Extract Good Thru Date from Byte
3. Calculate days until expiration
4. Trigger alerts based on thresholds

ALERT THRESHOLDS:
- 7 days: INFO alert to processor
- 3 days: WARNING alert to processor + supervisor
- 1 day: URGENT alert with action required
- 0 days: CRITICAL - payoff expired, HARD REJECT warning

ALERT MESSAGE FORMAT:
{
  "loan_number": "2026-001234",
  "borrower_name": "John Smith",
  "good_thru_date": "2026-02-01",
  "days_remaining": 3,
  "processor_email": "jane.doe@cmgfi.com",
  "alert_level": "WARNING",
  "action_required": "Request updated payoff or confirm closing date"
}

ALERT CHANNELS:
- Email notification
- Byte dashboard notification
- Microsoft Teams webhook (URGENT/CRITICAL)`,
                integration: `INTEGRATION POINTS:
1. Byte LOS
   - Read Good Thru Date from payoff requests
   - Read closing date from loan file
   - Access processor assignment

2. Email System
   - SMTP integration for alerts
   - Template-based notifications
   - CC supervisor for escalations

3. Microsoft Teams
   - Webhook for critical alerts
   - Channel: #payoff-alerts
   - @mention for urgent items

DEPLOYMENT:
- Scheduled scan: Every 4 hours
- Real-time trigger: On closing date change
- Alert batching: Group by processor`
            },
            autofill: {
                name: 'Payoff Auto-Fill Agent',
                tags: ['Data Integration', 'Automation', 'Medium Complexity', 'High Priority'],
                purpose: `This agent automatically pre-populates the Byte payoff request form with data from DOMO including the 10-digit CMG loan number, servicer code, and calculates optimal Good Thru Date based on expected closing date.`,
                prompt: `You are building a Data Integration Agent for CMG Financial's payoff request automation.

AGENT NAME: Payoff Auto-Fill Agent
TYPE: Data Integration / Form Automation

OBJECTIVE:
Automatically populate payoff request fields in Byte with data from DOMO and calculated values.

INPUT DATA:
- NEW loan number (current refinance)
- Borrower SSN or name
- Expected closing date

DATA FETCH:
1. Query DOMO for existing loan info:
   - Existing CMG Loan Number (10 digits)
   - Current Escrow Balance
   - Last Payment Date
   - Servicer Code

2. Calculate dates:
   - Date Requested = TODAY
   - Good Thru Date = Closing Date + 5 business days (max 30 days)
   - Validate: Request Date >= 5 days before CD release

BYTE FIELD MAPPING:
- Existing CMG Loan Number: DOMO.loan_number
- Current Escrow Balance: DOMO.escrow_balance
- Date Requested: CALCULATED.today
- Good Thru Date: CALCULATED.optimal_date
- Nothin' But Net: AUTO (check if CMG-to-CMG refi)

VALIDATION:
- Warn if closing date < 5 days from request
- Error if Good Thru Date > 30 days
- Suggest Nothin' But Net for qualifying refinances`,
                integration: `INTEGRATION POINTS:
1. DOMO API
   - Fetch existing loan details
   - Validate loan ownership
   - Get current escrow balance

2. Byte LOS
   - Write to payoff request form
   - Trigger form validation
   - Handle auto-save

3. Date Calculation Service
   - Business day calculations
   - Holiday calendar integration
   - State-specific adjustments

DEPLOYMENT:
- Trigger: On NEW loan Servicing screen load
- Mode: Auto-suggest with user confirmation
- Fallback: Manual entry always available`
            },
            servicemac: {
                name: 'ServiceMac Router',
                tags: ['Routing', 'Detection', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent automatically detects HomeBridge-originated loans (801xxx prefix) and routes users to ServiceMac contact information, preventing failed payoff requests and providing direct contact details.`,
                prompt: `You are building a Routing Agent for CMG Financial's payoff request process.

AGENT NAME: ServiceMac Router
TYPE: Routing / Detection

OBJECTIVE:
Automatically detect loans originated under HomeBridge (801xxx prefix) and route users to ServiceMac for payoff requests.

DETECTION LOGIC:
IF loan_number.startsWith('801'):
   RETURN {
     is_servicemac: true,
     contact: {
       phone: '844-478-2622',
       hours: 'M-F 8:30 AM - 8:00 PM ET, Sat 9-3 PM ET',
       website: 'www.myservicemac.com',
       email: 'support@servicemacusa.com',
       mail: 'PO Box 100077, Duluth, GA 30096-9377'
     }
   }

USER INTERFACE:
1. Display ServiceMac contact card
2. Provide click-to-call functionality
3. Pre-populate email template
4. Block CMG payoff request form

MESSAGE TEMPLATE:
"This loan (801xxx) was originated under HomeBridge and is serviced by ServiceMac. Please contact ServiceMac directly for payoff requests."`,
                integration: `INTEGRATION POINTS:
1. Byte LOS
   - Intercept on loan number entry
   - Block CMG payoff form for 801xxx
   - Display ServiceMac contact card

2. User Interface
   - Modal popup with contact info
   - Click-to-call button
   - Email template launcher
   - Print contact card option

3. Logging
   - Track ServiceMac redirects
   - Monitor for patterns
   - Report on HomeBridge volume

DEPLOYMENT:
- Trigger: Immediate on loan number entry
- Detection: First 3 characters check
- User action: Acknowledge before proceeding`
            }
        };

        function showAgentPrompt(agentId) {
            const agent = agentPrompts[agentId];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = agent.name + ' - Build Prompt';
            document.getElementById('promptTags').innerHTML = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            const content = document.getElementById('promptContent').textContent;
            try {
                await navigator.clipboard.writeText(content);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => { if (e.target.id === 'promptModal') closePromptModal(); });
    </script>
</body>
</html>
