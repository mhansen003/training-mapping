<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IDS Complete Workflow | CMG Training Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-teal: #14b8a6;
            --accent-teal-light: #2dd4bf;
            --accent-blue: #3b82f6;
            --accent-amber: #f59e0b;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --accent-rose: #f43f5e;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; }

        .breadcrumb { background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%); padding: 14px 25px; display: flex; align-items: center; gap: 12px; font-size: 0.9rem; position: fixed; top: 0; left: 0; right: 0; z-index: 1001; border-bottom: 1px solid var(--border-subtle); }
        .breadcrumb a { color: var(--text-secondary); text-decoration: none; font-weight: 600; padding: 6px 12px; background: rgba(255,255,255,0.05); border-radius: 6px; border: 1px solid var(--border-subtle); transition: all 0.2s; }
        .breadcrumb a:hover { background: rgba(20, 184, 166, 0.15); color: var(--accent-teal); }
        .breadcrumb .separator { color: var(--text-muted); }
        .breadcrumb .current { color: var(--accent-teal); font-weight: 600; }

        .layout { display: flex; padding-top: 54px; }

        .sidebar { width: 300px; background: var(--bg-secondary); border-right: 1px solid var(--border-subtle); height: calc(100vh - 54px); position: fixed; top: 54px; left: 0; overflow-y: auto; padding: 20px 0; }
        .sidebar-header { padding: 0 20px 20px; border-bottom: 1px solid var(--border-subtle); margin-bottom: 15px; }
        .sidebar-title { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); margin-bottom: 8px; }
        .workflow-name { font-size: 1.1rem; font-weight: 700; }
        .workflow-subtitle { font-size: 0.85rem; color: var(--text-muted); margin-top: 4px; }
        .nav-section { padding: 0 12px; margin-bottom: 20px; }
        .nav-section-title { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); padding: 8px 12px; }
        .nav-item { display: flex; align-items: center; gap: 10px; padding: 10px 12px; color: var(--text-secondary); text-decoration: none; border-radius: 8px; font-size: 0.85rem; font-weight: 500; transition: all 0.2s; cursor: pointer; }
        .nav-item:hover { background: rgba(20, 184, 166, 0.1); color: var(--text-primary); }
        .nav-item.active { background: rgba(20, 184, 166, 0.15); color: var(--accent-teal); }
        .nav-item .step-num { width: 22px; height: 22px; background: var(--bg-card); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 700; }
        .nav-item.active .step-num { background: var(--accent-teal); color: white; }

        .main-content { flex: 1; margin-left: 300px; padding: 30px 40px; max-width: calc(100% - 300px); }

        .workflow-header { margin-bottom: 30px; }
        .workflow-header h1 { font-size: 2rem; font-weight: 800; margin-bottom: 10px; background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-teal) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .workflow-meta { display: flex; gap: 20px; color: var(--text-muted); font-size: 0.9rem; flex-wrap: wrap; }
        .workflow-meta span { display: flex; align-items: center; gap: 6px; }

        .system-overview { background: linear-gradient(135deg, rgba(20, 184, 166, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%); border: 1px solid rgba(20, 184, 166, 0.3); border-radius: 16px; padding: 25px; margin-bottom: 30px; }
        .system-overview h2 { font-size: 1.2rem; margin-bottom: 12px; color: var(--accent-teal); }
        .system-overview p { color: var(--text-secondary); line-height: 1.7; }

        .tab-container { margin-bottom: 30px; }
        .tab-buttons { display: flex; gap: 10px; margin-bottom: 25px; flex-wrap: wrap; }
        .tab-btn { padding: 12px 24px; background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 10px; color: var(--text-secondary); font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 8px; }
        .tab-btn:hover { border-color: var(--accent-teal); color: var(--text-primary); }
        .tab-btn.active { background: rgba(20, 184, 166, 0.15); border-color: var(--accent-teal); color: var(--accent-teal); }
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .workflow-section { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 30px; margin-bottom: 25px; }
        .workflow-section h2 { font-size: 1.3rem; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }
        .section-icon { width: 36px; height: 36px; background: linear-gradient(135deg, var(--accent-teal) 0%, var(--accent-blue) 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; }

        .step-list { display: flex; flex-direction: column; gap: 16px; }
        .step-item { display: flex; gap: 16px; padding: 18px; background: rgba(0,0,0,0.2); border-radius: 12px; border: 1px solid var(--border-subtle); }
        .step-number { width: 32px; height: 32px; background: var(--accent-teal); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.9rem; flex-shrink: 0; }
        .step-content h3 { font-size: 1rem; font-weight: 700; margin-bottom: 6px; }
        .step-content p { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; }

        .callout { background: rgba(20, 184, 166, 0.1); border: 1px solid rgba(20, 184, 166, 0.3); border-radius: 12px; padding: 18px 22px; margin-top: 20px; }
        .callout-title { font-weight: 700; color: var(--accent-teal); margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
        .callout p { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; }
        .warning-callout { background: rgba(245, 158, 11, 0.1); border-color: rgba(245, 158, 11, 0.3); }
        .warning-callout .callout-title { color: var(--accent-amber); }
        .success-callout { background: rgba(34, 197, 94, 0.1); border-color: rgba(34, 197, 94, 0.3); }
        .success-callout .callout-title { color: var(--accent-green); }
        .info-callout { background: rgba(59, 130, 246, 0.1); border-color: rgba(59, 130, 246, 0.3); }
        .info-callout .callout-title { color: var(--accent-blue); }

        .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
        .status-item { background: rgba(0,0,0,0.2); border-radius: 10px; padding: 15px; text-align: center; }
        .status-item .indicator { width: 20px; height: 20px; border-radius: 50%; margin: 0 auto 10px; }
        .status-item .indicator.green { background: var(--accent-green); box-shadow: 0 0 10px var(--accent-green); }
        .status-item .indicator.yellow { background: var(--accent-amber); box-shadow: 0 0 10px var(--accent-amber); }
        .status-item .label { font-size: 0.85rem; color: var(--text-secondary); }

        .account-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .account-table th, .account-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid var(--border-subtle); }
        .account-table th { background: rgba(0,0,0,0.3); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); }
        .account-table td { font-size: 0.9rem; color: var(--text-secondary); }
        .account-table code { background: rgba(20, 184, 166, 0.15); padding: 3px 8px; border-radius: 4px; font-family: 'JetBrains Mono', monospace; color: var(--accent-teal); }

        /* AI Agents Panel */
        .heat-map { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 25px; margin-bottom: 30px; }
        .heat-map h3 { font-size: 1.1rem; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .heat-map-grid { display: flex; flex-wrap: wrap; gap: 10px; }
        .heat-item { padding: 12px 18px; border-radius: 10px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 8px; }
        .heat-item:hover { transform: scale(1.05); }
        .heat-item .score { background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 6px; font-size: 0.75rem; }
        .heat-critical { background: linear-gradient(135deg, rgba(244, 63, 94, 0.3) 0%, rgba(244, 63, 94, 0.1) 100%); border: 1px solid rgba(244, 63, 94, 0.4); color: var(--accent-rose); }
        .heat-high { background: linear-gradient(135deg, rgba(34, 197, 94, 0.3) 0%, rgba(34, 197, 94, 0.1) 100%); border: 1px solid rgba(34, 197, 94, 0.4); color: var(--accent-green); }
        .heat-medium { background: linear-gradient(135deg, rgba(59, 130, 246, 0.3) 0%, rgba(59, 130, 246, 0.1) 100%); border: 1px solid rgba(59, 130, 246, 0.4); color: var(--accent-blue); }
        .heat-low { background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(139, 92, 246, 0.1) 100%); border: 1px solid rgba(139, 92, 246, 0.4); color: var(--accent-purple); }

        .agents-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 20px; }
        .agent-card { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 25px; transition: all 0.3s; }
        .agent-card:hover { border-color: rgba(20, 184, 166, 0.4); }
        .agent-card.highlight { animation: highlightPulse 2s ease-out; }
        @keyframes highlightPulse { 0% { box-shadow: 0 0 0 0 rgba(20, 184, 166, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(20, 184, 166, 0); } 100% { box-shadow: 0 0 0 0 rgba(20, 184, 166, 0); } }

        .agent-header { display: flex; align-items: flex-start; gap: 15px; margin-bottom: 18px; }
        .agent-avatar { width: 50px; height: 50px; background: linear-gradient(135deg, var(--accent-teal) 0%, var(--accent-blue) 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .agent-info { flex: 1; }
        .agent-name { font-size: 1.1rem; font-weight: 700; margin-bottom: 4px; }
        .agent-role { font-size: 0.8rem; color: var(--text-muted); }
        .confidence-badge { padding: 6px 12px; border-radius: 8px; font-size: 0.8rem; font-weight: 700; }
        .confidence-critical { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .confidence-high { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .confidence-medium { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        .agent-description { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 18px; }

        .agent-metrics { display: flex; gap: 15px; margin-bottom: 18px; }
        .metric { background: rgba(0,0,0,0.2); padding: 10px 15px; border-radius: 8px; flex: 1; text-align: center; }
        .metric-value { font-size: 1.1rem; font-weight: 700; color: var(--accent-teal); }
        .metric-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; }

        .agent-triggers { margin-bottom: 18px; }
        .agent-triggers h4 { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.05em; }
        .trigger-list { display: flex; flex-wrap: wrap; gap: 8px; }
        .trigger-tag { padding: 5px 12px; background: rgba(255,255,255,0.05); border-radius: 6px; font-size: 0.8rem; color: var(--text-secondary); }

        .view-prompt-btn { width: 100%; padding: 12px; background: rgba(20, 184, 166, 0.1); border: 1px solid rgba(20, 184, 166, 0.3); border-radius: 10px; color: var(--accent-teal); font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: all 0.2s; }
        .view-prompt-btn:hover { background: rgba(20, 184, 166, 0.2); }

        /* Modal */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 2000; align-items: center; justify-content: center; padding: 20px; }
        .modal-overlay.active { display: flex; }
        .modal-content { background: var(--bg-secondary); border: 1px solid var(--border-subtle); border-radius: 20px; max-width: 800px; width: 100%; max-height: 85vh; overflow-y: auto; }
        .modal-header { padding: 25px 30px; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; background: var(--bg-secondary); z-index: 10; }
        .modal-header h2 { font-size: 1.3rem; font-weight: 700; }
        .modal-close { width: 36px; height: 36px; background: rgba(255,255,255,0.1); border: none; border-radius: 8px; color: var(--text-secondary); font-size: 1.2rem; cursor: pointer; transition: all 0.2s; }
        .modal-close:hover { background: rgba(244, 63, 94, 0.2); color: var(--accent-rose); }
        .modal-body { padding: 30px; }
        .modal-section { margin-bottom: 25px; }
        .modal-section:last-child { margin-bottom: 0; }
        .modal-section h3 { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.05em; }
        .prompt-box { background: var(--bg-primary); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 20px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; color: var(--text-secondary); line-height: 1.7; white-space: pre-wrap; position: relative; }
        .copy-btn { position: absolute; top: 10px; right: 10px; padding: 8px 12px; background: rgba(20, 184, 166, 0.2); border: none; border-radius: 6px; color: var(--accent-teal); font-size: 0.8rem; cursor: pointer; transition: all 0.2s; }
        .copy-btn:hover { background: rgba(20, 184, 166, 0.4); }
        .integration-list { display: flex; flex-direction: column; gap: 10px; }
        .integration-item { display: flex; align-items: center; gap: 12px; padding: 12px 15px; background: rgba(255,255,255,0.03); border-radius: 10px; }
        .integration-icon { width: 32px; height: 32px; background: rgba(20, 184, 166, 0.15); border-radius: 8px; display: flex; align-items: center; justify-content: center; }
        .integration-text { font-size: 0.9rem; color: var(--text-secondary); }

        .tag-row { display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap; }
        .tag { padding: 4px 10px; border-radius: 6px; font-size: 0.75rem; font-weight: 600; }
        .tag-type { background: rgba(139, 92, 246, 0.2); color: var(--accent-purple); }
        .tag-priority { background: rgba(34, 197, 94, 0.2); color: var(--accent-green); }
        .tag-effort { background: rgba(245, 158, 11, 0.2); color: var(--accent-amber); }

        .quick-ref { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 25px; margin-top: 30px; }
        .quick-ref h3 { font-size: 1.1rem; margin-bottom: 20px; color: var(--accent-teal); }
        .quick-ref-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
        .quick-ref-item { background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px; }
        .quick-ref-item h4 { font-size: 0.9rem; margin-bottom: 8px; color: var(--text-primary); }
        .quick-ref-item p { font-size: 0.85rem; color: var(--text-secondary); }
    </style>
</head>
<body>
    <nav class="breadcrumb">
        <a href="../../index.html">üè† Portal</a>
        <span class="separator">‚Ä∫</span>
        <a href="./index.html">üìù IDS</a>
        <span class="separator">‚Ä∫</span>
        <span class="current">Complete Workflow</span>
    </nav>

    <div class="layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">System</div>
                <div class="workflow-name">IDS (International Document Services)</div>
                <div class="workflow-subtitle">E-Signing & Disclosure Management</div>
            </div>
            <nav class="nav-section">
                <div class="nav-section-title">Staff Workflows</div>
                <a class="nav-item active" href="#login-access"><span class="step-num">1</span> Login & Access</a>
                <a class="nav-item" href="#check-signatures"><span class="step-num">2</span> Check Signatures</a>
                <a class="nav-item" href="#check-docs"><span class="step-num">3</span> Check Docs to Sign</a>
                <a class="nav-item" href="#resend-email"><span class="step-num">4</span> Resend Email</a>
                <a class="nav-item" href="#resend-lo-link"><span class="step-num">5</span> Resend LO Link</a>
                <a class="nav-item" href="#update-email"><span class="step-num">6</span> Update Email</a>
                <a class="nav-item" href="#retrieve-docs"><span class="step-num">7</span> Retrieve Documents</a>
                <a class="nav-item" href="#regenerate"><span class="step-num">8</span> Regenerate Disclosures</a>
            </nav>
            <nav class="nav-section">
                <div class="nav-section-title">Borrower Instructions</div>
                <a class="nav-item" href="#borrower-esign"><span class="step-num">üìù</span> E-Signing Disclosures</a>
                <a class="nav-item" href="#borrower-hybrid"><span class="step-num">üè†</span> Hybrid e-Closing</a>
            </nav>
            <nav class="nav-section">
                <div class="nav-section-title">AI Opportunities</div>
                <a class="nav-item" href="#" onclick="switchTab('agents'); return false;"><span class="step-num">ü§ñ</span> 5 AI Agents</a>
            </nav>
        </aside>

        <main class="main-content">
            <div class="workflow-header">
                <h1>IDS Complete Training Workflow</h1>
                <div class="workflow-meta">
                    <span>üìÖ Updated: January 2026</span>
                    <span>üìÑ 7 Modules</span>
                    <span>üë§ LO / Processor / Closer</span>
                    <span>üîó Integrated with Byte</span>
                </div>
            </div>

            <div class="system-overview">
                <h2>üîê About IDS</h2>
                <p><strong>IDS (International Document Services)</strong> is CMG's vendor of choice for all disclosures and documents. IDS is fully integrated with Byte - when disclosures are sent (called a "push"), the system updates automatically. When signatures are received, information flows back (called "pushback"). The Fulfillment Dashboard at <code>https://fulfillment.idsdoc.com</code> provides complete visibility into disclosure packages, signatures, and document status.</p>
            </div>

            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="switchTab('workflow')">üìã Workflow Steps</button>
                    <button class="tab-btn" onclick="switchTab('agents')">ü§ñ AI Agents (5)</button>
                </div>

                <!-- Workflow Panel -->
                <div id="workflow-panel" class="tab-panel active">

                    <!-- Section 1: Login & Access -->
                    <section class="workflow-section" id="login-access">
                        <h2><span class="section-icon">üîë</span> Login & Access Management</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 20px;">Access IDS through the Fulfillment Dashboard and manage your credentials.</p>

                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Access the Fulfillment Dashboard</h3>
                                    <p>Open <strong>https://fulfillment.idsdoc.com/Account/Login</strong> in your browser. This is the main portal for all IDS disclosure management.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>Enter Credentials</h3>
                                    <p>Enter your <strong>Username</strong> and <strong>Password</strong>, then click <strong>Login</strong>. Your account is tied to your LOS system (Byte or DataTrac).</p>
                                </div>
                            </div>
                        </div>

                        <div class="callout info-callout">
                            <div class="callout-title">üè¶ Account Types by LOS</div>
                            <p>Your IDS account is named according to the LOS you use. Most users have 1-2 accounts, though some Retail users may have up to 4.</p>
                        </div>

                        <table class="account-table">
                            <thead>
                                <tr>
                                    <th>Account Code</th>
                                    <th>LOS System</th>
                                    <th>Channel</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><code>BCMGR</code></td><td>BytePro</td><td>Retail</td></tr>
                                <tr><td><code>BCMGB</code></td><td>BytePro</td><td>Brokered Retail</td></tr>
                                <tr><td><code>BCMGW</code></td><td>BytePro</td><td>Wholesale</td></tr>
                                <tr><td><code>RECMG</code></td><td>DataTrac</td><td>Retail</td></tr>
                                <tr><td><code>BRKRD</code></td><td>DataTrac</td><td>Brokered Retail</td></tr>
                                <tr><td><code>CMGC</code></td><td>DataTrac</td><td>Wholesale</td></tr>
                            </tbody>
                        </table>

                        <div class="callout warning-callout" style="margin-top: 20px;">
                            <div class="callout-title">üîê Forgot Password?</div>
                            <p>Visit <strong>www.idsdoc.com ‚Üí Login ‚Üí Forgot Password</strong>. Enter your username and click Email Password. Check your email (and junk folder) for the reset link. After resetting in IDS, also update your credentials in Byte: <strong>Customize ‚Üí Defaults ‚Üí IDS</strong>.</p>
                        </div>
                    </section>

                    <!-- Section 2: Check Signatures -->
                    <section class="workflow-section" id="check-signatures">
                        <h2><span class="section-icon">‚úÖ</span> Checking for Signatures</h2>
                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Search for the Loan</h3>
                                    <p>In the Active Packages window, type the <strong>loan number</strong> in the Search field and click the magnifying glass. You can also search by borrower's last name.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>Expand Borrower Activity</h3>
                                    <p>Click the <strong>+ sign</strong> next to the Borrower name to expand the activity panel and see signature status.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>Interpret Status Colors</h3>
                                    <p>Review the color-coded status indicators to quickly assess signing progress.</p>
                                </div>
                            </div>
                        </div>

                        <div class="status-grid">
                            <div class="status-item">
                                <div class="indicator green"></div>
                                <div class="label"><strong>Green</strong> = Signed</div>
                            </div>
                            <div class="status-item">
                                <div class="indicator yellow"></div>
                                <div class="label"><strong>Yellow</strong> = Not Signed</div>
                            </div>
                        </div>
                    </section>

                    <!-- Section 3: Check Docs Left to Sign -->
                    <section class="workflow-section" id="check-docs">
                        <h2><span class="section-icon">üìã</span> Checking Documents Left to Sign</h2>
                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Search and Expand</h3>
                                    <p>Search for the loan and click the <strong>+ sign</strong> next to the Borrower name to expand their activity.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>View Documents Included</h3>
                                    <p>Click the <strong>+ sign</strong> next to <strong>Completed</strong> to see the Documents Included list. This shows all documents in the package.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>Identify Unsigned Documents</h3>
                                    <p>Any documents <strong>missing a check mark</strong> in the Completed column have not been signed yet. Follow up with the borrower on these specific documents.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Section 4: Resend Email -->
                    <section class="workflow-section" id="resend-email">
                        <h2><span class="section-icon">üìß</span> Resending Disclosure Email to Borrower</h2>
                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Locate the Borrower</h3>
                                    <p>Search for the loan, then click the <strong>+ sign</strong> next to the Borrower name to expand.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>Click Resend Signer Email</h3>
                                    <p>Click <strong>"Resend Signer Email"</strong>. The email is sent <strong>immediately</strong> once clicked - there's no confirmation prompt.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>Confirm Delivery</h3>
                                    <p>An "Email Sent" pop-up appears. Click <strong>OK</strong>. A new IDS disclosure email will be delivered to the sender's inbox once the Borrower receives the new link.</p>
                                </div>
                            </div>
                        </div>

                        <div class="callout warning-callout">
                            <div class="callout-title">‚ö†Ô∏è Important Note</div>
                            <p>The email is immediately sent to the Borrower once "Resend Signer Email" is clicked. There is no undo - make sure you've verified the email address is correct before clicking.</p>
                        </div>
                    </section>

                    <!-- Section 5: Resend LO Link -->
                    <section class="workflow-section" id="resend-lo-link">
                        <h2><span class="section-icon">üëî</span> Resending Link to Loan Officer</h2>
                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Expand Borrower Activity</h3>
                                    <p>Search for the loan and click the <strong>+ sign</strong> next to the Borrower name.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>Click eSign Room</h3>
                                    <p>Click the <strong>"eSign Room"</strong> tab to access the signing interface.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>Copy the URL</h3>
                                    <p>The Loan Officer Authentication window opens with a unique URL. <strong>Copy and paste the web address</strong> and send it to the Loan Officer via email or message.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Section 6: Update Email -->
                    <section class="workflow-section" id="update-email">
                        <h2><span class="section-icon">‚úèÔ∏è</span> Updating Borrower Email Address</h2>
                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Expand Borrower Details</h3>
                                    <p>Search for the loan and click the <strong>+ sign</strong> next to the Borrower name.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>Edit Contact Info</h3>
                                    <p>Click the <strong>Edit (pencil) button</strong> next to Contact Info. Update the email address field with the correct address.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>Save and Resend</h3>
                                    <p>Click the <strong>Save (disk) button</strong>, then click <strong>"Resend Signer Email"</strong> to send disclosures to the updated address.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Section 7: Retrieve Documents -->
                    <section class="workflow-section" id="retrieve-docs">
                        <h2><span class="section-icon">üì•</span> Retrieving Disclosure Documents</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 20px;">When pushback doesn't feed to Byte automatically, manually retrieve documents from IDS.</p>

                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Access eSign Room</h3>
                                    <p>Search for the loan, expand the borrower, and click <strong>"eSign Room"</strong>.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>Authenticate</h3>
                                    <p>Enter your IDS <strong>Username and Password</strong> in the Loan Officer Authentication window. Click <strong>Login</strong>.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>View/Print All Documents</h3>
                                    <p>All signed documents are displayed. Click <strong>"View/Print All"</strong> to open them as a PDF in a new tab.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h3>Upload to Byte</h3>
                                    <p>Click <strong>Print ‚Üí BytePro Print to Loan File</strong>. In the Import window, select <strong>Auto-Index</strong> to let the system read barcodes and store documents automatically.</p>
                                </div>
                            </div>
                        </div>

                        <div class="callout info-callout">
                            <div class="callout-title">üí° Why Manual Retrieval?</div>
                            <p>If the Disclosure Coordinator or Closer doesn't choose "Submit and Flag as Disclosed" when sending, IDS doesn't send pushback notifications to Byte. Documents must then be manually pulled from IDS directly.</p>
                        </div>
                    </section>

                    <!-- Section 8: Regenerate Disclosures -->
                    <section class="workflow-section" id="regenerate">
                        <h2><span class="section-icon">üîÑ</span> Regenerating Disclosures</h2>
                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Select the Borrower</h3>
                                    <p>Search for the loan and click the <strong>name of the Borrower</strong> who needs Initial Disclosures or Closing Disclosures resent.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>Update Email if Needed</h3>
                                    <p>If the email needs to be corrected, click the <strong>Edit button</strong>, update the address, and click <strong>Save</strong>.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>Resend the Package</h3>
                                    <p>Click <strong>"Resend Signer Email"</strong> to regenerate and send the disclosure package.</p>
                                </div>
                            </div>
                        </div>

                        <div class="callout warning-callout">
                            <div class="callout-title">‚ö†Ô∏è Date Change Warning</div>
                            <p>For same-day resending, the Disclosure Date will be updated in Byte. If the date changes (e.g., package was sent yesterday, resent today), the Disclosure Log must be <strong>manually updated in Byte</strong>. Contact <strong>training@cmgfi.com</strong> if the date needs correction.</p>
                        </div>
                    </section>

                    <!-- Borrower Instructions Sections -->
                    <section class="workflow-section" id="borrower-esign">
                        <h2><span class="section-icon">üìù</span> Borrower Instructions: E-Signing Disclosures</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 20px;">Guide for borrowers on how to electronically sign their disclosure documents.</p>

                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Receive Email from IDS</h3>
                                    <p>Within 24-72 hours of loan registration (excluding weekends/holidays), borrowers receive an email from <strong>notifications@idsdoc.com</strong> with a link to their disclosures.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>Verify Identity</h3>
                                    <p>Click the link and complete the <strong>3 validation questions</strong>: last 4 of SSN, birth year, and email address used for notification.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>Review Electronic Consent</h3>
                                    <p>The first document is the <strong>Consent to Receive Electronic Disclosures</strong>. Read and accept to continue.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h3>Sign Documents</h3>
                                    <p>Click <strong>"SIGN HERE"</strong> buttons throughout the documents. Use <strong>"Jump to next signature item"</strong> to navigate efficiently. Complete data fields where required.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <h3>Complete and Save</h3>
                                    <p>A <strong>Congratulations</strong> screen appears when all documents are signed. Click <strong>"Print/Save Package"</strong> to keep copies, then check <strong>"Review Acknowledged"</strong>.</p>
                                </div>
                            </div>
                        </div>

                        <div class="callout">
                            <div class="callout-title">üñ®Ô∏è Ink Sign Documents</div>
                            <p>Documents labeled <strong>"INK SIGN"</strong> must be printed, physically signed, and delivered to the loan officer. These cannot be e-signed.</p>
                        </div>
                    </section>

                    <section class="workflow-section" id="borrower-hybrid">
                        <h2><span class="section-icon">üè†</span> Borrower Instructions: Hybrid e-Closing</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 20px;">Hybrid e-Closing allows borrowers to sign most closing documents electronically before their in-person appointment.</p>

                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Review Documents Before Closing Day</h3>
                                    <p>Receive email from <strong>notifications@idsdocs.com</strong> with a link to view all closing documents. This link is for <strong>review only</strong> until closing day.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>Create New Account</h3>
                                    <p>Click <strong>"Create new account"</strong> (this is different from the Loan Estimate/Closing Disclosure process). Set up username and password.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>Sign at Midnight Hawaii Time</h3>
                                    <p>At <strong>midnight Hawaii Time on closing day</strong>, the link becomes available for electronic signatures. Sign all applicable documents as early as possible that morning.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h3>Track Progress</h3>
                                    <p>Documents requiring wet signature show an <strong>INK SIGN</strong> symbol. A <strong>green check mark</strong> appears on the bottom left when each document is completed.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <h3>Complete In-Person Signing</h3>
                                    <p>Wet signature documents will be at the Closing Agent (Escrow/Title Company). Thanks to e-signing, the <strong>in-person appointment will be shorter</strong>.</p>
                                </div>
                            </div>
                        </div>

                        <div class="callout success-callout">
                            <div class="callout-title">‚ú® Benefits of Hybrid e-Closing</div>
                            <p><strong>Convenience:</strong> Sign from anywhere after midnight HT on closing day. <strong>Speed:</strong> Reduce time at closing appointment. <strong>Security:</strong> Secure and reliable e-signing process.</p>
                        </div>
                    </section>

                    <!-- Quick Reference Card -->
                    <div class="quick-ref">
                        <h3>üìå Quick Reference</h3>
                        <div class="quick-ref-grid">
                            <div class="quick-ref-item">
                                <h4>üîó IDS Fulfillment URL</h4>
                                <p>https://fulfillment.idsdoc.com/Account/Login</p>
                            </div>
                            <div class="quick-ref-item">
                                <h4>üìû IDS Support</h4>
                                <p>800-554-1872 | service@idsdoc.com</p>
                            </div>
                            <div class="quick-ref-item">
                                <h4>üü¢ Green Status</h4>
                                <p>Document/Borrower has signed</p>
                            </div>
                            <div class="quick-ref-item">
                                <h4>üü° Yellow Status</h4>
                                <p>Document/Borrower has NOT signed</p>
                            </div>
                            <div class="quick-ref-item">
                                <h4>üìß Borrower Emails From</h4>
                                <p>notifications@idsdoc.com</p>
                            </div>
                            <div class="quick-ref-item">
                                <h4>üîÑ Byte Integration</h4>
                                <p>Push (send) & Pushback (receive)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Agents Panel -->
                <div id="agents-panel" class="tab-panel">
                    <div class="heat-map">
                        <h3>üéØ AI Agent Opportunity Heat Map</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 20px; font-size: 0.9rem;">Click a tile to jump to the agent details. Scores indicate automation potential (0-100).</p>
                        <div class="heat-map-grid">
                            <div class="heat-item heat-critical" onclick="scrollToAgent('agent-signature')">
                                <span>Signature Status Monitor</span>
                                <span class="score">95</span>
                            </div>
                            <div class="heat-item heat-high" onclick="scrollToAgent('agent-esign')">
                                <span>E-Sign Reminder Agent</span>
                                <span class="score">88</span>
                            </div>
                            <div class="heat-item heat-high" onclick="scrollToAgent('agent-pushback')">
                                <span>Pushback Validator</span>
                                <span class="score">85</span>
                            </div>
                            <div class="heat-item heat-medium" onclick="scrollToAgent('agent-email')">
                                <span>Email Verification Agent</span>
                                <span class="score">78</span>
                            </div>
                            <div class="heat-item heat-medium" onclick="scrollToAgent('agent-hybrid')">
                                <span>Hybrid Closing Coordinator</span>
                                <span class="score">72</span>
                            </div>
                        </div>
                    </div>

                    <div class="agents-grid">
                        <!-- Agent 1: Signature Status Monitor -->
                        <div class="agent-card" id="agent-signature">
                            <div class="agent-header">
                                <div class="agent-avatar">‚úÖ</div>
                                <div class="agent-info">
                                    <div class="agent-name">Signature Status Monitor</div>
                                    <div class="agent-role">Real-Time Monitoring Agent</div>
                                </div>
                                <span class="confidence-badge confidence-critical">95</span>
                            </div>
                            <p class="agent-description">Continuously monitors IDS for signature completions across all active loan packages. Automatically updates Byte and alerts staff when borrowers complete signing or when packages remain unsigned past thresholds.</p>
                            <div class="agent-metrics">
                                <div class="metric">
                                    <div class="metric-value">4hrs</div>
                                    <div class="metric-label">Time Saved/Day</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value">98%</div>
                                    <div class="metric-label">Accuracy</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value">Low</div>
                                    <div class="metric-label">Complexity</div>
                                </div>
                            </div>
                            <div class="agent-triggers">
                                <h4>Activation Triggers</h4>
                                <div class="trigger-list">
                                    <span class="trigger-tag">Package sent to borrower</span>
                                    <span class="trigger-tag">24hrs no activity</span>
                                    <span class="trigger-tag">Signature completed</span>
                                    <span class="trigger-tag">Pipeline review</span>
                                </div>
                            </div>
                            <button class="view-prompt-btn" onclick="openModal('signature')">‚ú® View AI Prompt to Build This Agent</button>
                        </div>

                        <!-- Agent 2: E-Sign Reminder Agent -->
                        <div class="agent-card" id="agent-esign">
                            <div class="agent-header">
                                <div class="agent-avatar">üìß</div>
                                <div class="agent-info">
                                    <div class="agent-name">E-Sign Reminder Agent</div>
                                    <div class="agent-role">Automated Communication Agent</div>
                                </div>
                                <span class="confidence-badge confidence-high">88</span>
                            </div>
                            <p class="agent-description">Automatically sends reminder emails to borrowers who haven't completed e-signing within configured time windows. Personalizes messages based on disclosure type and urgency, and logs all communication attempts.</p>
                            <div class="agent-metrics">
                                <div class="metric">
                                    <div class="metric-value">30%</div>
                                    <div class="metric-label">Faster Sign Rate</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value">2hrs</div>
                                    <div class="metric-label">Time Saved/Day</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value">Med</div>
                                    <div class="metric-label">Complexity</div>
                                </div>
                            </div>
                            <div class="agent-triggers">
                                <h4>Activation Triggers</h4>
                                <div class="trigger-list">
                                    <span class="trigger-tag">24hrs unsigned</span>
                                    <span class="trigger-tag">48hrs unsigned</span>
                                    <span class="trigger-tag">Compliance deadline approaching</span>
                                </div>
                            </div>
                            <button class="view-prompt-btn" onclick="openModal('esign')">‚ú® View AI Prompt to Build This Agent</button>
                        </div>

                        <!-- Agent 3: Pushback Validator -->
                        <div class="agent-card" id="agent-pushback">
                            <div class="agent-header">
                                <div class="agent-avatar">üîÑ</div>
                                <div class="agent-info">
                                    <div class="agent-name">Pushback Validator</div>
                                    <div class="agent-role">Data Integrity Agent</div>
                                </div>
                                <span class="confidence-badge confidence-high">85</span>
                            </div>
                            <p class="agent-description">Monitors IDS-to-Byte pushback synchronization. Detects when signed documents fail to transfer, identifies loans requiring manual document retrieval, and automatically triggers retrieval workflow when pushback fails.</p>
                            <div class="agent-metrics">
                                <div class="metric">
                                    <div class="metric-value">100%</div>
                                    <div class="metric-label">Sync Detection</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value">1hr</div>
                                    <div class="metric-label">Time Saved/Loan</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value">Med</div>
                                    <div class="metric-label">Complexity</div>
                                </div>
                            </div>
                            <div class="agent-triggers">
                                <h4>Activation Triggers</h4>
                                <div class="trigger-list">
                                    <span class="trigger-tag">Signature completed in IDS</span>
                                    <span class="trigger-tag">Byte sync check</span>
                                    <span class="trigger-tag">Document missing in Byte</span>
                                </div>
                            </div>
                            <button class="view-prompt-btn" onclick="openModal('pushback')">‚ú® View AI Prompt to Build This Agent</button>
                        </div>

                        <!-- Agent 4: Email Verification Agent -->
                        <div class="agent-card" id="agent-email">
                            <div class="agent-header">
                                <div class="agent-avatar">üì¨</div>
                                <div class="agent-info">
                                    <div class="agent-name">Email Verification Agent</div>
                                    <div class="agent-role">Pre-Send Validation Agent</div>
                                </div>
                                <span class="confidence-badge confidence-medium">78</span>
                            </div>
                            <p class="agent-description">Validates borrower email addresses before disclosure packages are sent. Checks for common typos, invalid domains, and known bad addresses. Prevents failed deliveries and reduces resend requests.</p>
                            <div class="agent-metrics">
                                <div class="metric">
                                    <div class="metric-value">95%</div>
                                    <div class="metric-label">Error Prevention</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value">15min</div>
                                    <div class="metric-label">Saved/Bad Email</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value">Low</div>
                                    <div class="metric-label">Complexity</div>
                                </div>
                            </div>
                            <div class="agent-triggers">
                                <h4>Activation Triggers</h4>
                                <div class="trigger-list">
                                    <span class="trigger-tag">Pre-disclosure send</span>
                                    <span class="trigger-tag">Email update in IDS</span>
                                    <span class="trigger-tag">Loan registration</span>
                                </div>
                            </div>
                            <button class="view-prompt-btn" onclick="openModal('email')">‚ú® View AI Prompt to Build This Agent</button>
                        </div>

                        <!-- Agent 5: Hybrid Closing Coordinator -->
                        <div class="agent-card" id="agent-hybrid">
                            <div class="agent-header">
                                <div class="agent-avatar">üè†</div>
                                <div class="agent-info">
                                    <div class="agent-name">Hybrid Closing Coordinator</div>
                                    <div class="agent-role">Closing Orchestration Agent</div>
                                </div>
                                <span class="confidence-badge confidence-medium">72</span>
                            </div>
                            <p class="agent-description">Orchestrates hybrid e-closing workflow by tracking pre-closing document review, monitoring midnight HT signing window activation, and coordinating with closing agents. Alerts all parties when e-signing is complete.</p>
                            <div class="agent-metrics">
                                <div class="metric">
                                    <div class="metric-value">50%</div>
                                    <div class="metric-label">Faster Closings</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value">3hrs</div>
                                    <div class="metric-label">Coord Time Saved</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value">High</div>
                                    <div class="metric-label">Complexity</div>
                                </div>
                            </div>
                            <div class="agent-triggers">
                                <h4>Activation Triggers</h4>
                                <div class="trigger-list">
                                    <span class="trigger-tag">Closing docs generated</span>
                                    <span class="trigger-tag">Closing day midnight HT</span>
                                    <span class="trigger-tag">E-sign complete</span>
                                    <span class="trigger-tag">Wet sign docs needed</span>
                                </div>
                            </div>
                            <button class="view-prompt-btn" onclick="openModal('hybrid')">‚ú® View AI Prompt to Build This Agent</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Agent Details</h2>
                <button class="modal-close" onclick="closeModal()">‚úï</button>
            </div>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <script>
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
            } else {
                document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
            }
        }

        function scrollToAgent(agentId) {
            const agent = document.getElementById(agentId);
            if (agent) {
                agent.scrollIntoView({ behavior: 'smooth', block: 'center' });
                agent.classList.add('highlight');
                setTimeout(() => agent.classList.remove('highlight'), 2000);
            }
        }

        // Sidebar scroll spy
        document.querySelectorAll('.nav-item[href^="#"]').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const target = document.getElementById(targetId);
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });

        const agentData = {
            signature: {
                title: 'Signature Status Monitor',
                type: 'Monitoring Agent',
                priority: 'Critical (95)',
                effort: 'Low',
                purpose: 'Eliminates manual checking of IDS signature status by continuously monitoring all active disclosure packages and proactively alerting staff to completed signatures and overdue packages.',
                prompt: `You are a Signature Status Monitoring Agent for CMG Financial's IDS integration.

AGENT NAME: Signature Status Monitor
TYPE: Real-Time Monitoring / Notification

OBJECTIVE:
Monitor the IDS Fulfillment Dashboard for signature status changes across all active disclosure packages. Detect when borrowers complete e-signing, when packages remain unsigned past thresholds, and automatically update downstream systems.

INPUT DATA SOURCES:
1. IDS Fulfillment API
   - Active Packages list
   - Signature status (Green=Signed, Yellow=Not Signed)
   - Documents Included completion status
   - Timestamp of last activity

2. Byte Loan Pipeline
   - Active loans awaiting disclosures
   - Loan officer assignments
   - Expected signing deadlines

MONITORING LOGIC:
| Status | Threshold | Action |
|--------|-----------|--------|
| Signed (Green) | Immediate | Update Byte, notify LO, log completion |
| Not Signed (Yellow) | 24hrs | Alert LO via email |
| Not Signed (Yellow) | 48hrs | Alert LO + Supervisor |
| Not Signed (Yellow) | 72hrs | Escalate to Compliance |

DETECTION RULES:
- Poll IDS API every 15 minutes during business hours
- Poll every 60 minutes outside business hours
- Compare current status vs. previous status
- Trigger notification only on status change

OUTPUT FORMAT:
Return JSON for each detected event:
{
  "event_type": "signature_complete" | "overdue_alert",
  "loan_number": "string",
  "borrower_name": "string",
  "package_type": "Initial Disclosures" | "Closing Disclosures",
  "documents_signed": number,
  "documents_total": number,
  "completion_timestamp": "ISO8601",
  "assigned_lo": "string",
  "action_taken": "string",
  "next_check": "ISO8601"
}

ERROR HANDLING:
- IDS API unavailable: Retry 3x with exponential backoff, then alert IT
- Authentication failure: Alert IT immediately
- Status parsing error: Log and flag for manual review

INTEGRATION POINTS:
- IDS Fulfillment Dashboard API
- Byte loan data sync
- Email notification system
- Compliance tracking database`,
                integrations: [
                    { icon: 'üîó', text: 'IDS Fulfillment Dashboard API for real-time status' },
                    { icon: 'üíæ', text: 'Byte loan database for pipeline context' },
                    { icon: 'üìß', text: 'Email/SMS notification service' },
                    { icon: 'üìä', text: 'Compliance tracking dashboard' }
                ]
            },
            esign: {
                title: 'E-Sign Reminder Agent',
                type: 'Communication Agent',
                priority: 'High (88)',
                effort: 'Medium',
                purpose: 'Automates borrower follow-up for unsigned disclosure packages, reducing manual phone calls and emails while improving e-sign completion rates.',
                prompt: `You are an E-Sign Reminder Agent for CMG Financial.

AGENT NAME: E-Sign Reminder Agent
TYPE: Automated Communication / Follow-Up

OBJECTIVE:
Automatically send personalized reminder emails to borrowers who haven't completed e-signing their disclosure packages within configured time thresholds. Track all communication attempts and escalate when needed.

INPUT DATA SOURCES:
1. IDS Signature Status
   - Package sent timestamp
   - Current signing status
   - Documents remaining

2. Borrower Contact Info
   - Email address
   - Borrower name
   - Co-borrower if applicable

3. Loan Context
   - Loan officer name/contact
   - Disclosure type (Initial vs. Closing)
   - Compliance deadline

REMINDER SCHEDULE:
| Hours Since Send | Action | Tone |
|------------------|--------|------|
| 24 hrs | First reminder | Friendly, helpful |
| 48 hrs | Second reminder | Slightly urgent |
| 72 hrs | Final reminder | Urgent, deadline mention |
| 96 hrs | Escalate to LO | Alert for phone follow-up |

MESSAGE TEMPLATES:
First Reminder (24hrs):
Subject: Action Needed - Your CMG Loan Disclosures Are Waiting
Body: Dear {borrower_name}, we noticed you haven't had a chance to review and sign your {disclosure_type} yet...

Final Reminder (72hrs):
Subject: URGENT: Disclosure Signature Required for Loan #{loan_number}
Body: Dear {borrower_name}, this is a final reminder that your {disclosure_type} require signature to continue processing...

OUTPUT FORMAT:
{
  "reminder_sent": true,
  "loan_number": "string",
  "borrower_email": "string",
  "reminder_type": "first" | "second" | "final" | "escalation",
  "sent_timestamp": "ISO8601",
  "disclosure_type": "string",
  "next_reminder_scheduled": "ISO8601" | null
}

ERROR HANDLING:
- Email bounce: Flag for email correction, notify LO
- Borrower unsubscribed: Alert LO for phone call
- Rate limit: Queue and retry

COMPLIANCE NOTES:
- Respect opt-out preferences
- Include LO contact info in all messages
- Log all communications for audit trail`,
                integrations: [
                    { icon: 'üìß', text: 'SMTP email service for sending reminders' },
                    { icon: 'üîó', text: 'IDS API for signature status tracking' },
                    { icon: 'üìã', text: 'Communication log database' },
                    { icon: 'üë§', text: 'CRM for contact preferences' }
                ]
            },
            pushback: {
                title: 'Pushback Validator',
                type: 'Data Integrity Agent',
                priority: 'High (85)',
                effort: 'Medium',
                purpose: 'Ensures IDS-to-Byte synchronization is working correctly, automatically detecting when signed documents fail to transfer and triggering manual retrieval workflows.',
                prompt: `You are a Pushback Validator Agent for CMG Financial's IDS-Byte integration.

AGENT NAME: Pushback Validator
TYPE: Data Integrity / Sync Verification

OBJECTIVE:
Monitor the IDS-to-Byte pushback process to ensure signed disclosure documents are properly transferred. Detect synchronization failures and automatically trigger manual document retrieval when pushback fails.

INPUT DATA SOURCES:
1. IDS Fulfillment Dashboard
   - Signed package status
   - Completion timestamps
   - Document list

2. Byte Stored Documents
   - Document inventory for loan
   - Upload timestamps
   - Document types received

SYNC VALIDATION LOGIC:
After signature completion in IDS:
1. Wait 30 minutes for pushback
2. Query Byte for expected documents
3. Compare document lists
4. Flag any missing documents

EXPECTED DOCUMENTS (Initial Disclosures):
- Intent to Proceed
- Borrower Certification and Authorization
- Loan Estimate
- eConsent Agreement
- State-specific disclosures

DETECTION RULES:
| Scenario | Detection | Action |
|----------|-----------|--------|
| All docs received | Byte has all IDS docs | Log success, close monitoring |
| Partial pushback | Some docs missing | Alert, schedule recheck |
| No pushback | Zero docs after 2hrs | Trigger manual retrieval |
| Flag as Disclosed missing | Pushback never initiated | Alert training team |

OUTPUT FORMAT:
{
  "sync_status": "complete" | "partial" | "failed",
  "loan_number": "string",
  "ids_doc_count": number,
  "byte_doc_count": number,
  "missing_documents": ["string"],
  "detection_timestamp": "ISO8601",
  "recommended_action": "none" | "recheck" | "manual_retrieval",
  "manual_retrieval_url": "string" | null
}

ERROR HANDLING:
- Byte API unavailable: Retry with backoff
- IDS session expired: Re-authenticate
- Document count mismatch: Flag for human review

MANUAL RETRIEVAL TRIGGER:
When pushback fails, generate task:
1. Alert assigned processor
2. Provide direct IDS eSign Room link
3. Include step-by-step retrieval instructions
4. Track until documents appear in Byte`,
                integrations: [
                    { icon: 'üîó', text: 'IDS Fulfillment API for signature confirmation' },
                    { icon: 'üíæ', text: 'Byte document storage API' },
                    { icon: 'üìã', text: 'Task management system for manual retrieval' },
                    { icon: 'üìä', text: 'Sync failure analytics dashboard' }
                ]
            },
            email: {
                title: 'Email Verification Agent',
                type: 'Pre-Send Validation Agent',
                priority: 'Medium (78)',
                effort: 'Low',
                purpose: 'Prevents disclosure delivery failures by validating borrower email addresses before packages are sent, catching typos and invalid addresses proactively.',
                prompt: `You are an Email Verification Agent for CMG Financial.

AGENT NAME: Email Verification Agent
TYPE: Pre-Send Validation / Data Quality

OBJECTIVE:
Validate borrower email addresses before disclosure packages are sent through IDS. Catch common typos, invalid domains, and known problematic addresses to prevent failed deliveries.

INPUT DATA SOURCES:
1. Borrower Contact Information
   - Primary email address
   - Co-borrower email if different
   - Loan number

2. Validation Databases
   - Known invalid domains list
   - Previously bounced addresses
   - Disposable email domains

VALIDATION CHECKS:
| Check Type | Rule | Action on Fail |
|------------|------|----------------|
| Format | Valid email syntax | Block, request correction |
| Domain | MX record exists | Warn, suggest verification |
| Typo Detection | Common mistakes (gmial, yaho) | Auto-suggest correction |
| Disposable | Known temp email domains | Block, request real email |
| Previous Bounce | In bounce database | Alert, request new address |

COMMON TYPO CORRECTIONS:
- gmial.com ‚Üí gmail.com
- gmal.com ‚Üí gmail.com
- yaho.com ‚Üí yahoo.com
- hotmal.com ‚Üí hotmail.com
- @aol.co ‚Üí @aol.com

OUTPUT FORMAT:
{
  "validation_result": "valid" | "warning" | "invalid",
  "email_checked": "string",
  "loan_number": "string",
  "issues_found": [
    {
      "type": "typo" | "domain" | "disposable" | "bounce",
      "severity": "error" | "warning",
      "suggestion": "string" | null,
      "message": "string"
    }
  ],
  "corrected_email": "string" | null,
  "can_proceed": boolean
}

ERROR HANDLING:
- DNS lookup timeout: Proceed with warning
- Validation service down: Log and allow manual override
- Unknown domain: Allow but flag for monitoring

INTEGRATION POINTS:
- Pre-disclosure send hook in Byte/IDS workflow
- Bounce tracking database
- Email service provider feedback loops`,
                integrations: [
                    { icon: '‚úâÔ∏è', text: 'Email validation API (DNS/MX checks)' },
                    { icon: 'üíæ', text: 'Bounce tracking database' },
                    { icon: 'üîó', text: 'Byte borrower data fields' },
                    { icon: '‚ö†Ô∏è', text: 'Alert system for invalid emails' }
                ]
            },
            hybrid: {
                title: 'Hybrid Closing Coordinator',
                type: 'Orchestration Agent',
                priority: 'Medium (72)',
                effort: 'High',
                purpose: 'Manages the complex hybrid e-closing workflow by coordinating timing, tracking document status, and ensuring all parties are notified at each stage.',
                prompt: `You are a Hybrid Closing Coordinator Agent for CMG Financial.

AGENT NAME: Hybrid Closing Coordinator
TYPE: Workflow Orchestration / Multi-Party Coordination

OBJECTIVE:
Orchestrate the hybrid e-closing process by tracking document review status, activating signing at the correct time (midnight Hawaii Time on closing day), and coordinating between borrowers, loan officers, and closing agents.

INPUT DATA SOURCES:
1. Closing Schedule
   - Closing date
   - Closing time
   - Closing agent info

2. IDS Package Status
   - Document review status
   - Signing activation timestamp
   - Wet-sign document list

3. Parties Involved
   - Borrower(s) contact info
   - Loan Officer
   - Closing Agent (Escrow/Title)

WORKFLOW ORCHESTRATION:
| Phase | Timing | Actions |
|-------|--------|---------|
| Pre-Review | T-3 days | Send review-only link, notify borrower |
| Activation | Midnight HT on closing day | Enable signing, alert borrower |
| E-Sign Complete | Upon completion | Notify LO, Closing Agent, log docs |
| Pre-Appointment | T-2 hours | Confirm wet-sign docs ready |
| Post-Close | Closing day | Verify all docs received |

MIDNIGHT HAWAII TIME CALCULATION:
- Convert closing date to Hawaii timezone (HST/HDT)
- Activation time = Closing_Date 00:00:00 HST
- Convert to server timezone for scheduling

NOTIFICATION TEMPLATES:
Signing Activation:
"Your closing documents are now ready for e-signature! Please sign as early as possible this morning..."

E-Sign Complete to Closing Agent:
"Borrower {name} has completed e-signing for Loan #{number}. {X} wet-sign documents remain for in-person appointment..."

OUTPUT FORMAT:
{
  "workflow_stage": "pre_review" | "activated" | "e_sign_complete" | "closing_day",
  "loan_number": "string",
  "closing_date": "YYYY-MM-DD",
  "activation_timestamp": "ISO8601",
  "e_sign_docs_total": number,
  "e_sign_docs_complete": number,
  "wet_sign_docs_count": number,
  "notifications_sent": [
    {
      "recipient": "string",
      "type": "string",
      "timestamp": "ISO8601"
    }
  ],
  "next_scheduled_action": {
    "action": "string",
    "scheduled_time": "ISO8601"
  }
}

ERROR HANDLING:
- Signing not complete by 10am closing day: Urgent alert to LO
- Closing agent not notified: Auto-resend with escalation
- Wet-sign docs missing: Alert closer immediately

COORDINATION NOTES:
- Always provide direct eSign Room link in notifications
- Include list of wet-sign documents for closing agent
- Track timezone correctly for Hawaii Time activation`,
                integrations: [
                    { icon: 'üìÖ', text: 'Closing calendar for scheduling' },
                    { icon: 'üîó', text: 'IDS API for document status' },
                    { icon: 'üìß', text: 'Multi-party notification system' },
                    { icon: 'üè¢', text: 'Closing agent contact database' },
                    { icon: '‚è∞', text: 'Timezone-aware scheduler' }
                ]
            }
        };

        function openModal(agentKey) {
            const agent = agentData[agentKey];
            document.getElementById('modal-title').textContent = agent.title;

            let integrationsHTML = agent.integrations.map(i => `
                <div class="integration-item">
                    <div class="integration-icon">${i.icon}</div>
                    <span class="integration-text">${i.text}</span>
                </div>
            `).join('');

            document.getElementById('modal-body').innerHTML = `
                <div class="tag-row">
                    <span class="tag tag-type">${agent.type}</span>
                    <span class="tag tag-priority">Priority: ${agent.priority}</span>
                    <span class="tag tag-effort">Effort: ${agent.effort}</span>
                </div>
                <div class="modal-section">
                    <h3>Agent Purpose</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">${agent.purpose}</p>
                </div>
                <div class="modal-section">
                    <h3>Full Build Prompt</h3>
                    <div class="prompt-box">
                        <button class="copy-btn" onclick="copyPrompt(this)">üìã Copy</button>
                        ${agent.prompt}
                    </div>
                </div>
                <div class="modal-section">
                    <h3>Integration Points</h3>
                    <div class="integration-list">${integrationsHTML}</div>
                </div>
            `;

            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        function copyPrompt(btn) {
            const promptBox = btn.parentElement;
            const text = promptBox.innerText.replace('üìã Copy', '').trim();
            navigator.clipboard.writeText(text).then(() => {
                btn.textContent = '‚úì Copied!';
                setTimeout(() => btn.textContent = 'üìã Copy', 2000);
            });
        }

        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });
    </script>
</body>
</html>
