<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoanBeam Dashboard - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* File Type Cards */
        .file-type-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .file-type-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .file-type-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .file-type-card-header h4 { font-size: 1.05rem; }
        .file-type-card-body { padding: 22px; }
        .file-type-card ul { list-style: none; padding: 0; }
        .file-type-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .file-type-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Agent Summary */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }

        .modal-close {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 0.9rem;
        }

        .modal-body {
            padding: 28px;
            overflow-y: auto;
            flex: 1;
        }

        .prompt-section { margin-bottom: 25px; }

        .prompt-section h4 {
            color: var(--accent-purple);
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .prompt-tag {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .copy-prompt-btn {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 15px;
        }

        .copy-prompt-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.3);
        }

        #copySuccess {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; }
            .agent-grid { grid-template-columns: 1fr; }
        }
        .breadcrumb-logo-link { display: inline-flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; flex-shrink: 0; margin-right: 4px; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 24px; width: auto; display: block; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
<a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">üè† Portal Home</a>
        <span class="separator">‚Ä∫</span>
        <a href="./index.html">üìä LoanBeam</a>
        <span class="separator">‚Ä∫</span>
        <span class="current">üñ•Ô∏è Dashboard Operations</span>
    </nav>

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Dashboard Operations</h2>
            <p>Application upload & workbook management</p>
        </div>

        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">üìä Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">ü§ñ AI Agents</button>
        </div>

        <nav class="sidebar-nav" id="workflowNav">
            <a class="nav-item active" href="#login">
                <span class="nav-number">1</span>
                <span class="nav-label">Login & Access</span>
            </a>
            <a class="nav-item" href="#dashboard">
                <span class="nav-number">2</span>
                <span class="nav-label">Dashboard Navigation</span>
            </a>
            <a class="nav-item" href="#new-application">
                <span class="nav-number">3</span>
                <span class="nav-label">New Application</span>
            </a>
            <a class="nav-item" href="#upload">
                <span class="nav-number">4</span>
                <span class="nav-label">Upload Documents</span>
            </a>
            <a class="nav-item" href="#download">
                <span class="nav-number">5</span>
                <span class="nav-label">Download Workbooks</span>
            </a>
            <a class="nav-item" href="#missing-docs">
                <span class="nav-number">6</span>
                <span class="nav-label">Missing Documents</span>
            </a>
            <a class="nav-item" href="#edited-upload">
                <span class="nav-number">7</span>
                <span class="nav-label">Upload Edited Workbooks</span>
            </a>
            <a class="nav-item" href="#reference-number">
                <span class="nav-number">8</span>
                <span class="nav-label">Reference Number (LPA)</span>
            </a>
        </nav>

        <nav class="sidebar-nav" id="agentNav" style="display: none;">
            <a class="nav-item" href="#agent-doc-validation">
                <span class="nav-number">ü§ñ</span>
                <span class="nav-label">Document Validation</span>
            </a>
            <a class="nav-item" href="#agent-upload-assist">
                <span class="nav-number">ü§ñ</span>
                <span class="nav-label">Upload Assistant</span>
            </a>
            <a class="nav-item" href="#agent-missing-docs">
                <span class="nav-number">ü§ñ</span>
                <span class="nav-label">Missing Doc Resolver</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <a href="./index.html" class="doc-btn">‚Üê Back to LoanBeam</a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Workflow Tab -->
        <div class="tab-panel active" id="workflowPanel">
            <div class="header">
                <h1>üìä LoanBeam Dashboard Operations</h1>
                <p class="subtitle">Complete workflow for managing applications, uploading tax documents, and downloading income calculation workbooks</p>
                <div class="meta">
                    <span class="meta-item">üë§ Processor / LO</span>
                    <span class="meta-item">‚è±Ô∏è 10-15 min per application</span>
                    <span class="meta-item">üìÑ Source: Dashboard User Guide</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);"></div>
                    <span>Start/End</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);"></div>
                    <span>Action Step</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);"></div>
                    <span>Decision Point</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--bg-secondary); border: 2px solid var(--accent-blue);"></div>
                    <span>User Input</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);"></div>
                    <span>System Output</span>
                </div>
            </div>

            <!-- Section 1: Login & Access -->
            <section class="section" id="login">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title">
                        <h2>Login & Access</h2>
                        <span>Accessing the LoanBeam platform</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Navigate to LoanBeam</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node input">Enter Credentials</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Click Login</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node output">Dashboard Loads</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>üîê Access Requirements</h4>
                        <p>LoanBeam credentials are provided by CMG IT. Contact your manager or IT support if you need access or have forgotten your password.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Dashboard Navigation -->
            <section class="section" id="dashboard">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title">
                        <h2>Dashboard Navigation</h2>
                        <span>Understanding the main dashboard interface</span>
                    </div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Dashboard Element</th>
                                <th>Function</th>
                                <th>Usage</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Application List</strong></td>
                                <td>Shows all submitted applications with status</td>
                                <td>Click any row to view details</td>
                            </tr>
                            <tr>
                                <td><strong>Filter Controls</strong></td>
                                <td>Narrow down applications by date, status, borrower</td>
                                <td>Use dropdowns or text search</td>
                            </tr>
                            <tr>
                                <td><strong>Grouping Options</strong></td>
                                <td>Organize applications by various criteria</td>
                                <td>Group by status, date, or assigned processor</td>
                            </tr>
                            <tr>
                                <td><strong>New Application Button</strong></td>
                                <td>Create a new income calculation request</td>
                                <td>Click to start upload workflow</td>
                            </tr>
                            <tr>
                                <td><strong>Download Column</strong></td>
                                <td>Access completed workbooks</td>
                                <td>Click download icon when available</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>üí° Pro Tip: Filtering</h4>
                        <p>Use the status filter to quickly find applications that need attention. "Missing Documents" status indicates additional uploads are required.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: New Application -->
            <section class="section" id="new-application">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title">
                        <h2>Creating a New Application</h2>
                        <span>Starting the income calculation process</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Click "New Application"</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node input">Enter Borrower Info</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node decision">Select Output Type</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Fannie Mae</span>
                                <div class="flow-node output">Form 1084 Workbook</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Freddie Mac</span>
                                <div class="flow-node output">Form 91 Workbook</div>
                            </div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Required</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Borrower Name</strong></td>
                                <td><span class="badge required-badge">Required</span></td>
                                <td>Full legal name as shown on tax documents</td>
                            </tr>
                            <tr>
                                <td><strong>Co-Borrower Name</strong></td>
                                <td><span class="badge optional-badge">Optional</span></td>
                                <td>If joint filing or co-borrower has separate income</td>
                            </tr>
                            <tr>
                                <td><strong>Loan Number</strong></td>
                                <td><span class="badge required-badge">Required</span></td>
                                <td>CLEAR loan number for reference</td>
                            </tr>
                            <tr>
                                <td><strong>Output Format</strong></td>
                                <td><span class="badge required-badge">Required</span></td>
                                <td>FNMA Form 1084 or Freddie Form 91</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 4: Upload Documents -->
            <section class="section" id="upload">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title">
                        <h2>Upload Tax Documents</h2>
                        <span>Submitting documents for OCR processing</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Click Upload Area</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node input">Select PDF Files</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Click Submit</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node output">OCR Processing Begins</div>
                        </div>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 25px 0 15px;">Supported Tax Document Types</h3>

                    <div class="file-type-grid">
                        <div class="file-type-card">
                            <div class="file-type-card-header">
                                <h4>üìÑ Personal Tax Returns</h4>
                            </div>
                            <div class="file-type-card-body">
                                <ul>
                                    <li><span class="check-icon">‚úì</span> Form 1040 (Standard)</li>
                                    <li><span class="check-icon">‚úì</span> Form 1040A (Simplified)</li>
                                    <li><span class="check-icon">‚úì</span> Form 1040EZ (Basic)</li>
                                    <li><span class="check-icon">‚úì</span> Schedules A through F</li>
                                    <li><span class="check-icon">‚úì</span> Schedules 1 through 6</li>
                                </ul>
                            </div>
                        </div>
                        <div class="file-type-card">
                            <div class="file-type-card-header">
                                <h4>üè¢ Business Tax Returns</h4>
                            </div>
                            <div class="file-type-card-body">
                                <ul>
                                    <li><span class="check-icon">‚úì</span> Form 1065 (Partnership)</li>
                                    <li><span class="check-icon">‚úì</span> Form 1120S (S Corporation)</li>
                                    <li><span class="check-icon">‚úì</span> Form 1120 (C Corporation)</li>
                                    <li><span class="check-icon">‚úì</span> K-1 Forms (All types)</li>
                                </ul>
                            </div>
                        </div>
                        <div class="file-type-card">
                            <div class="file-type-card-header">
                                <h4>üìã Supporting Documents</h4>
                            </div>
                            <div class="file-type-card-body">
                                <ul>
                                    <li><span class="check-icon">‚úì</span> W-2 Forms</li>
                                    <li><span class="check-icon">‚úì</span> IRS Transcripts</li>
                                    <li><span class="check-icon">‚úì</span> Trust Documents</li>
                                    <li><span class="check-icon">‚úì</span> Profit & Loss Statements</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>‚ö†Ô∏è Upload Requirements</h4>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Files must be in PDF format</li>
                            <li>Documents must be legible and not password-protected</li>
                            <li>Upload complete tax returns including all schedules</li>
                            <li>Maximum file size: 50MB per document</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 5: Download Workbooks -->
            <section class="section" id="download">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title">
                        <h2>Download Completed Workbooks</h2>
                        <span>Retrieving processed income calculations</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Locate Application</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node decision">Status = Complete?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Yes</span>
                                <div class="flow-node action">Click Download Icon</div>
                                <span class="flow-arrow down">‚Üí</span>
                                <div class="flow-node output">Excel Workbook Downloads</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">No</span>
                                <div class="flow-node exception">Wait for Processing</div>
                            </div>
                        </div>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 25px 0 15px;">Files Available for Download</h3>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>File Type</th>
                                <th>Format</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Income Workbook</strong></td>
                                <td>Excel (.xlsx)</td>
                                <td>Complete income calculation with all tabs</td>
                            </tr>
                            <tr>
                                <td><strong>Summary Report</strong></td>
                                <td>PDF</td>
                                <td>Executive summary of qualifying income</td>
                            </tr>
                            <tr>
                                <td><strong>Source Documents</strong></td>
                                <td>PDF</td>
                                <td>Original uploaded documents (reference)</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>üí° Processing Time</h4>
                        <p>Most applications are processed within 2-4 hours during business days. Complex returns with multiple businesses may take longer.</p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Missing Documents -->
            <section class="section" id="missing-docs">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title">
                        <h2>Handling Missing Documents</h2>
                        <span>Resolving incomplete submissions</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node exception">Missing Docs Notification</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Review Missing List</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node input">Gather Documents</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Upload Additional Files</div>
                        </div>
                    </div>

                    <div class="decision-tree">
                        <h3>üîç Common Missing Document Scenarios</h3>
                        <div class="tree-node level-1">
                            <span class="tree-label">Schedule Missing</span>
                            A tax schedule referenced in the 1040 was not included in the upload. Upload the specific schedule (C, E, F, etc.)
                        </div>
                        <div class="tree-node">
                            <span class="tree-label">K-1 Not Found</span>
                            Partnership or S-Corp income requires the K-1 form. Upload all K-1s for each business entity.
                        </div>
                        <div class="tree-node">
                            <span class="tree-label">Business Return Needed</span>
                            Self-employment income requires the complete business tax return (1065, 1120S, or 1120).
                        </div>
                        <div class="tree-node">
                            <span class="tree-label">Prior Year Required</span>
                            Two years of tax returns needed but only one year was uploaded.
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>üìß Email Notifications</h4>
                        <p>LoanBeam sends email notifications when documents are missing. The email includes a direct link to upload additional files to the existing application.</p>
                    </div>
                </div>
            </section>

            <!-- Section 7: Upload Edited Workbooks -->
            <section class="section" id="edited-upload">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <div class="section-title">
                        <h2>Upload Edited Workbooks</h2>
                        <span>Submitting modified Form 91 workbooks</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Edit Form 91 in Excel</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Save Changes</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Click "Upload Edited"</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node output">New Reference # Generated</div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>‚ö†Ô∏è Critical: Form 91 Only</h4>
                        <p>The edited workbook upload feature is <strong>only available for Freddie Mac Form 91 workbooks</strong>. FNMA Form 1084 workbooks cannot be uploaded after editing because they do not integrate with an AUS system for rep & warranty relief.</p>
                    </div>

                    <div class="info-box">
                        <h4>üîÑ Why Upload Edited Workbooks?</h4>
                        <p>When you make manual overrides or corrections in the Form 91 workbook, uploading the edited version back to LoanBeam generates a new Reference Number. This updated reference ensures your modifications are reflected in the LPA submission for Rep & Warranty relief.</p>
                    </div>
                </div>
            </section>

            <!-- Section 8: Reference Number -->
            <section class="section" id="reference-number">
                <div class="section-header">
                    <div class="section-number">8</div>
                    <div class="section-title">
                        <h2>Reference Number for Freddie Mac LPA</h2>
                        <span>Enabling Rep & Warranty relief on income calculations</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node output">Download Form 91 Workbook</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Locate Reference Number</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node input">Enter in LPA</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node output">LPA Validates Income</div>
                        </div>
                    </div>

                    <div class="summary-grid">
                        <div class="summary-card">
                            <h4>Reference Number</h4>
                            <div class="value">LB-</div>
                            <div class="label">Unique per workbook</div>
                        </div>
                        <div class="summary-card">
                            <h4>Valid For</h4>
                            <div class="value">120</div>
                            <div class="label">Days from generation</div>
                        </div>
                        <div class="summary-card">
                            <h4>Location</h4>
                            <div class="value">Cover</div>
                            <div class="label">Page of workbook</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>üí° Rep & Warranty Relief</h4>
                        <p>When the LoanBeam Reference Number is entered in LPA and the income findings match, Freddie Mac provides rep & warranty relief on the income calculation. This reduces lender liability if the income was calculated correctly according to the source documents.</p>
                    </div>

                    <div class="quick-ref">
                        <h3>üìã Reference Number Entry in LPA</h3>
                        <pre>1. Open Loan Product Advisor (LPA)
2. Navigate to the Income Section
3. Find the "Third Party Income Calculator" field
4. Enter the LoanBeam Reference Number (format: LB-XXXXXXXX)
5. Submit for AUS findings
6. Review income findings for "Verified" status</pre>
                    </div>
                </div>
            </section>

        </div>

        <!-- Agent Opportunities Tab -->
        <div class="tab-panel" id="agentPanel">
            <div class="agent-header">
                <h1>ü§ñ AI Agent Opportunities</h1>
                <p class="subtitle">Automation opportunities for LoanBeam Dashboard operations</p>
            </div>

            <!-- Agent Summary Stats -->
            <div class="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">3</div>
                    <div class="agent-summary-label">Agent Opportunities</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">45%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">High</div>
                    <div class="agent-summary-label">ROI Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend">
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div>
                    <span>Critical (9-10)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div>
                    <span>High (7-8)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div>
                    <span>Medium (5-6)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div>
                    <span>Low (1-4)</span>
                </div>
            </div>

            <!-- Heat Map -->
            <div class="heat-map-container">
                <h3 class="heat-map-title">üìä Priority Heat Map</h3>
                <div class="heat-map-grid">
                    <div class="heat-item high" onclick="scrollToAgent('agent-doc-validation')">
                        <div class="heat-score">8</div>
                        <div class="heat-name">Document Validation Agent</div>
                        <div class="heat-desc">Pre-upload document verification</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Complexity: <span>Medium</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-upload-assist')">
                        <div class="heat-score">7</div>
                        <div class="heat-name">Upload Assistant Agent</div>
                        <div class="heat-desc">Intelligent document routing</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Complexity: <span>Low</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-missing-docs')">
                        <div class="heat-score">6</div>
                        <div class="heat-name">Missing Doc Resolver</div>
                        <div class="heat-desc">Automated borrower follow-up</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Complexity: <span>Medium</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Cards -->
            <div class="agent-grid">
                <!-- Document Validation Agent -->
                <div class="agent-card" id="agent-doc-validation">
                    <div class="agent-card-header">
                        <div class="agent-icon">üìã</div>
                        <div class="agent-info">
                            <div class="agent-name">Document Validation Agent</div>
                            <div class="agent-type">Pre-Processing Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Validates tax documents before upload to catch common issues like missing pages, illegible scans, password-protected PDFs, and incomplete tax returns. Reduces "Missing Documents" rejections by 60%.</p>

                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Workflow</div>
                            <div class="agent-flow-diagram">
                                <span class="agent-step">Receive PDF</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">OCR Check</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Form Detection</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Completeness</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Report</span>
                            </div>
                        </div>

                        <div class="agent-stats">
                            <div class="agent-stat">
                                <div class="agent-stat-value">60%</div>
                                <div class="agent-stat-label">Rejection Reduction</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">< 30s</div>
                                <div class="agent-stat-label">Processing Time</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">20+</div>
                                <div class="agent-stat-label">Form Types</div>
                            </div>
                        </div>

                        <button class="agent-prompt-btn" onclick="openPromptModal('doc-validation')">
                            üîÆ View AI Prompt
                        </button>
                    </div>
                </div>

                <!-- Upload Assistant Agent -->
                <div class="agent-card" id="agent-upload-assist">
                    <div class="agent-card-header">
                        <div class="agent-icon">üì§</div>
                        <div class="agent-info">
                            <div class="agent-name">Upload Assistant Agent</div>
                            <div class="agent-type">Workflow Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Intelligently identifies and organizes uploaded documents, automatically detecting borrower vs. co-borrower docs, tax years, and document types. Reduces manual sorting time by 70%.</p>

                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Workflow</div>
                            <div class="agent-flow-diagram">
                                <span class="agent-step">Bulk Upload</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Document ID</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Year Detection</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Auto-Sort</span>
                            </div>
                        </div>

                        <div class="agent-stats">
                            <div class="agent-stat">
                                <div class="agent-stat-value">70%</div>
                                <div class="agent-stat-label">Time Savings</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">98%</div>
                                <div class="agent-stat-label">Accuracy</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">Auto</div>
                                <div class="agent-stat-label">Year Detection</div>
                            </div>
                        </div>

                        <button class="agent-prompt-btn" onclick="openPromptModal('upload-assist')">
                            üîÆ View AI Prompt
                        </button>
                    </div>
                </div>

                <!-- Missing Doc Resolver Agent -->
                <div class="agent-card" id="agent-missing-docs">
                    <div class="agent-card-header">
                        <div class="agent-icon">üìß</div>
                        <div class="agent-info">
                            <div class="agent-name">Missing Doc Resolver Agent</div>
                            <div class="agent-type">Communication Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically generates borrower-friendly emails explaining exactly which documents are missing and why they're needed. Includes simple instructions for obtaining missing forms.</p>

                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Workflow</div>
                            <div class="agent-flow-diagram">
                                <span class="agent-step">Missing Alert</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Analyze Gap</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Draft Email</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Send</span>
                            </div>
                        </div>

                        <div class="agent-stats">
                            <div class="agent-stat">
                                <div class="agent-stat-value">50%</div>
                                <div class="agent-stat-label">Faster Resolution</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">Auto</div>
                                <div class="agent-stat-label">Email Draft</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">24hr</div>
                                <div class="agent-stat-label">Response SLA</div>
                            </div>
                        </div>

                        <button class="agent-prompt-btn" onclick="openPromptModal('missing-docs')">
                            üîÆ View AI Prompt
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Prompt Modal -->
    <div class="modal-overlay" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">ü§ñ AI Agent Prompt</h3>
                <button class="modal-close" onclick="closePromptModal()">‚úï Close</button>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>üìù System Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <button class="copy-prompt-btn" onclick="copyPrompt()">üìã Copy Prompt</button>
            </div>
        </div>
    </div>

    <div id="copySuccess">‚úì Copied to clipboard!</div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflowPanel').classList.add('active');
                document.getElementById('workflowNav').style.display = 'block';
                document.getElementById('agentNav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agentPanel').classList.add('active');
                document.getElementById('workflowNav').style.display = 'none';
                document.getElementById('agentNav').style.display = 'block';
            }
        }

        // Scroll spy for workflow nav
        const sections = document.querySelectorAll('.section');
        const navItems = document.querySelectorAll('#workflowNav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        // Prevent scroll-spy from interfering during navigation clicks
        navItems.forEach(item => {
            item.addEventListener('click', (e) => {
                isScrolling = true;
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => { isScrolling = false; }, 1000);
            });
        });

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            const scrollPosition = window.scrollY + 150;

            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionBottom = sectionTop + section.offsetHeight;

                if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                    current = section.getAttribute('id');
                }
            });

            if (current) {
                navItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('href') === '#' + current) {
                        item.classList.add('active');
                    }
                });
            }
        }

        window.addEventListener('scroll', updateActiveNav);

        // Scroll to agent card
        function scrollToAgent(agentId) {
            switchTab('agents');
            setTimeout(() => {
                const agent = document.getElementById(agentId);
                if (agent) {
                    agent.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    agent.classList.add('highlight');
                    setTimeout(() => agent.classList.remove('highlight'), 2000);
                }
            }, 100);
        }

        // Prompt data
        const prompts = {
            'doc-validation': {
                title: 'Document Validation Agent',
                tags: ['Pre-Processing', 'OCR', 'Validation', 'Tax Documents'],
                prompt: `You are a Tax Document Validation Agent for LoanBeam income calculations.

TASK: Analyze uploaded PDF tax documents and validate they meet submission requirements.

VALIDATION CHECKS:
1. PDF Quality
   - Is the document legible (OCR confidence > 90%)?
   - Are all pages present and in order?
   - Is the document password-protected? (reject if yes)

2. Document Identification
   - Identify the tax form type (1040, 1065, 1120S, K-1, W-2, etc.)
   - Extract the tax year from the document
   - Identify the taxpayer name(s)

3. Completeness Check
   - For 1040: Are all referenced schedules included?
   - For business returns: Is the K-1 included?
   - Are both required tax years present?

OUTPUT FORMAT:
{
  "validation_status": "PASS|FAIL|WARNING",
  "document_type": "Form type identified",
  "tax_year": "YYYY",
  "taxpayer_name": "Name as shown",
  "issues": [
    {
      "severity": "ERROR|WARNING",
      "description": "Issue description",
      "resolution": "How to fix"
    }
  ],
  "missing_documents": ["List of required docs not found"]
}

Always explain issues in plain language that a processor can understand.`
            },
            'upload-assist': {
                title: 'Upload Assistant Agent',
                tags: ['Workflow', 'Document Sorting', 'Automation'],
                prompt: `You are an Upload Assistant Agent for LoanBeam document organization.

TASK: Analyze a batch of uploaded tax documents and intelligently organize them for submission.

ANALYSIS STEPS:
1. Document Identification
   - Scan each PDF and identify the form type
   - Extract taxpayer names from each document
   - Determine tax year for each document

2. Borrower Assignment
   - Match documents to borrower vs. co-borrower based on names
   - Flag any documents that don't match expected borrower names

3. Organization
   - Group documents by borrower
   - Sort by tax year (most recent first)
   - Identify complete vs. incomplete tax year sets

4. Recommendations
   - Suggest optimal upload order
   - Identify any potential missing documents
   - Flag any duplicate uploads

OUTPUT FORMAT:
{
  "borrower_documents": [
    {"name": "filename.pdf", "type": "Form 1040", "year": "2024", "borrower": "Primary"}
  ],
  "organization_suggestion": "Recommended upload groupings",
  "warnings": ["Any issues detected"],
  "ready_for_upload": true|false
}

Be proactive in catching potential issues before upload.`
            },
            'missing-docs': {
                title: 'Missing Document Resolver Agent',
                tags: ['Communication', 'Email', 'Borrower Outreach'],
                prompt: `You are a Missing Document Resolver Agent for LoanBeam applications.

TASK: Generate borrower-friendly communications explaining missing documents.

INPUT: List of missing documents from LoanBeam notification

FOR EACH MISSING DOCUMENT:
1. Explain in simple terms what the document is
2. Explain why it's needed for the loan
3. Provide instructions on how to obtain it
4. Suggest alternative sources if applicable

TONE GUIDELINES:
- Friendly and professional
- Avoid jargon - use plain language
- Be specific about what's needed
- Include helpful tips for common issues

EMAIL TEMPLATE:
Subject: Action Needed: Missing Documents for Your Loan Application

Hi [Borrower Name],

We're processing your income documentation and noticed we need a few additional items to complete the analysis.

MISSING DOCUMENTS:
[For each document]
üìÑ [Document Name]
   What it is: [Simple explanation]
   Why we need it: [Brief reason]
   How to get it: [Instructions]

NEXT STEPS:
1. Gather the documents listed above
2. Upload them using this link: [Upload Link]
3. We'll continue processing within 24 hours of receipt

Questions? Reply to this email and we'll help!

Thanks,
[Processor Name]

Include IRS.gov links for obtaining transcripts when applicable.`
            }
        };

        // Modal functions
        function openPromptModal(promptId) {
            const data = prompts[promptId];
            document.getElementById('modalTitle').textContent = 'ü§ñ ' + data.title;
            document.getElementById('promptTags').innerHTML = data.tags.map(t => `<span class="prompt-tag">${t}</span>`).join('');
            document.getElementById('promptContent').textContent = data.prompt;
            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPrompt() {
            const prompt = document.getElementById('promptContent').textContent;
            try {
                await navigator.clipboard.writeText(prompt);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        // Close modal on escape or click outside
        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closePromptModal();
        });
    </script>
</body>
</html>
