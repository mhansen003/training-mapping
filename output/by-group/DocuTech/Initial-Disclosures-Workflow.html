<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Initial Disclosures - Workflow | CMG Training Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-teal: #14b8a6;
            --accent-teal-light: #2dd4bf;
            --accent-blue: #3b82f6;
            --accent-amber: #f59e0b;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --accent-rose: #f43f5e;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; }

        .breadcrumb { background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%); padding: 14px 25px; display: flex; align-items: center; gap: 12px; font-size: 0.9rem; position: fixed; top: 0; left: 0; right: 0; z-index: 1001; border-bottom: 1px solid var(--border-subtle); }
        .breadcrumb a { color: var(--text-secondary); text-decoration: none; font-weight: 600; padding: 6px 12px; background: rgba(255,255,255,0.05); border-radius: 6px; border: 1px solid var(--border-subtle); transition: all 0.2s; }
        .breadcrumb a:hover { background: rgba(20, 184, 166, 0.15); color: var(--accent-teal); }
        .breadcrumb .separator { color: var(--text-muted); }
        .breadcrumb .current { color: var(--accent-teal); font-weight: 600; }

        .layout { display: flex; padding-top: 54px; }

        .sidebar { width: 280px; background: var(--bg-secondary); border-right: 1px solid var(--border-subtle); height: calc(100vh - 54px); position: fixed; top: 54px; left: 0; overflow-y: auto; padding: 20px 0; }
        .sidebar-header { padding: 0 20px 20px; border-bottom: 1px solid var(--border-subtle); margin-bottom: 15px; }
        .sidebar-title { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); margin-bottom: 8px; }
        .workflow-name { font-size: 1.1rem; font-weight: 700; }
        .nav-section { padding: 0 12px; margin-bottom: 20px; }
        .nav-section-title { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); padding: 8px 12px; }
        .nav-item { display: flex; align-items: center; gap: 10px; padding: 10px 12px; color: var(--text-secondary); text-decoration: none; border-radius: 8px; font-size: 0.85rem; font-weight: 500; transition: all 0.2s; cursor: pointer; }
        .nav-item:hover { background: rgba(20, 184, 166, 0.1); color: var(--text-primary); }
        .nav-item.active { background: rgba(20, 184, 166, 0.15); color: var(--accent-teal); }
        .nav-item .step-num { width: 22px; height: 22px; background: var(--bg-card); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 700; }
        .nav-item.active .step-num { background: var(--accent-teal); color: white; }

        .main-content { flex: 1; margin-left: 280px; padding: 30px 40px; max-width: calc(100% - 280px); }

        .workflow-header { margin-bottom: 30px; }
        .workflow-header h1 { font-size: 2rem; font-weight: 800; margin-bottom: 10px; background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-teal) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .workflow-meta { display: flex; gap: 20px; color: var(--text-muted); font-size: 0.9rem; }
        .workflow-meta span { display: flex; align-items: center; gap: 6px; }

        .tab-container { margin-bottom: 30px; }
        .tab-buttons { display: flex; gap: 10px; margin-bottom: 25px; }
        .tab-btn { padding: 12px 24px; background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 10px; color: var(--text-secondary); font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 8px; }
        .tab-btn:hover { border-color: var(--accent-teal); color: var(--text-primary); }
        .tab-btn.active { background: rgba(20, 184, 166, 0.15); border-color: var(--accent-teal); color: var(--accent-teal); }
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .workflow-section { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 30px; margin-bottom: 25px; }
        .workflow-section h2 { font-size: 1.3rem; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }
        .section-icon { width: 36px; height: 36px; background: linear-gradient(135deg, var(--accent-teal) 0%, var(--accent-blue) 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; }

        .step-list { display: flex; flex-direction: column; gap: 16px; }
        .step-item { display: flex; gap: 16px; padding: 18px; background: rgba(0,0,0,0.2); border-radius: 12px; border: 1px solid var(--border-subtle); }
        .step-number { width: 32px; height: 32px; background: var(--accent-teal); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.9rem; flex-shrink: 0; }
        .step-content h3 { font-size: 1rem; font-weight: 700; margin-bottom: 6px; }
        .step-content p { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; }

        .callout { background: rgba(20, 184, 166, 0.1); border: 1px solid rgba(20, 184, 166, 0.3); border-radius: 12px; padding: 18px 22px; margin-top: 20px; }
        .callout-title { font-weight: 700; color: var(--accent-teal); margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
        .callout p { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; }
        .warning-callout { background: rgba(245, 158, 11, 0.1); border-color: rgba(245, 158, 11, 0.3); }
        .warning-callout .callout-title { color: var(--accent-amber); }
        .success-callout { background: rgba(34, 197, 94, 0.1); border-color: rgba(34, 197, 94, 0.3); }
        .success-callout .callout-title { color: var(--accent-green); }

        /* AI Agents Panel */
        .heat-map { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 25px; margin-bottom: 30px; }
        .heat-map h3 { font-size: 1.1rem; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .heat-map-grid { display: flex; flex-wrap: wrap; gap: 10px; }
        .heat-item { padding: 12px 18px; border-radius: 10px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 8px; }
        .heat-item:hover { transform: scale(1.05); }
        .heat-item .score { background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 6px; font-size: 0.75rem; }
        .heat-high { background: linear-gradient(135deg, rgba(34, 197, 94, 0.3) 0%, rgba(34, 197, 94, 0.1) 100%); border: 1px solid rgba(34, 197, 94, 0.4); color: var(--accent-green); }
        .heat-medium { background: linear-gradient(135deg, rgba(59, 130, 246, 0.3) 0%, rgba(59, 130, 246, 0.1) 100%); border: 1px solid rgba(59, 130, 246, 0.4); color: var(--accent-blue); }

        .agents-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 20px; }
        .agent-card { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; padding: 25px; transition: all 0.3s; }
        .agent-card:hover { border-color: rgba(20, 184, 166, 0.4); }
        .agent-card.highlight { animation: highlightPulse 2s ease-out; }
        @keyframes highlightPulse { 0% { box-shadow: 0 0 0 0 rgba(20, 184, 166, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(20, 184, 166, 0); } 100% { box-shadow: 0 0 0 0 rgba(20, 184, 166, 0); } }

        .agent-header { display: flex; align-items: flex-start; gap: 15px; margin-bottom: 18px; }
        .agent-avatar { width: 50px; height: 50px; background: linear-gradient(135deg, var(--accent-teal) 0%, var(--accent-blue) 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .agent-info { flex: 1; }
        .agent-name { font-size: 1.1rem; font-weight: 700; margin-bottom: 4px; }
        .agent-role { font-size: 0.8rem; color: var(--text-muted); }
        .confidence-badge { padding: 6px 12px; border-radius: 8px; font-size: 0.8rem; font-weight: 700; }
        .confidence-high { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .confidence-medium { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        .agent-description { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 18px; }

        .agent-triggers { margin-bottom: 18px; }
        .agent-triggers h4 { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.05em; }
        .trigger-list { display: flex; flex-wrap: wrap; gap: 8px; }
        .trigger-tag { padding: 5px 12px; background: rgba(255,255,255,0.05); border-radius: 6px; font-size: 0.8rem; color: var(--text-secondary); }

        .view-prompt-btn { width: 100%; padding: 12px; background: rgba(20, 184, 166, 0.1); border: 1px solid rgba(20, 184, 166, 0.3); border-radius: 10px; color: var(--accent-teal); font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: all 0.2s; }
        .view-prompt-btn:hover { background: rgba(20, 184, 166, 0.2); }

        /* Modal */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 2000; align-items: center; justify-content: center; padding: 20px; }
        .modal-overlay.active { display: flex; }
        .modal-content { background: var(--bg-secondary); border: 1px solid var(--border-subtle); border-radius: 20px; max-width: 700px; width: 100%; max-height: 85vh; overflow-y: auto; }
        .modal-header { padding: 25px 30px; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; background: var(--bg-secondary); z-index: 10; }
        .modal-header h2 { font-size: 1.3rem; font-weight: 700; }
        .modal-close { width: 36px; height: 36px; background: rgba(255,255,255,0.1); border: none; border-radius: 8px; color: var(--text-secondary); font-size: 1.2rem; cursor: pointer; transition: all 0.2s; }
        .modal-close:hover { background: rgba(244, 63, 94, 0.2); color: var(--accent-rose); }
        .modal-body { padding: 30px; }
        .modal-section { margin-bottom: 25px; }
        .modal-section:last-child { margin-bottom: 0; }
        .modal-section h3 { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.05em; }
        .prompt-box { background: var(--bg-primary); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 20px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; color: var(--text-secondary); line-height: 1.7; white-space: pre-wrap; }
        .integration-list { display: flex; flex-direction: column; gap: 10px; }
        .integration-item { display: flex; align-items: center; gap: 12px; padding: 12px 15px; background: rgba(255,255,255,0.03); border-radius: 10px; }
        .integration-icon { width: 32px; height: 32px; background: rgba(20, 184, 166, 0.15); border-radius: 8px; display: flex; align-items: center; justify-content: center; }
        .integration-text { font-size: 0.9rem; color: var(--text-secondary); }

        .checklist-box { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 20px; margin-top: 20px; }
        .checklist-box h4 { font-size: 0.9rem; font-weight: 700; margin-bottom: 12px; color: var(--accent-teal); }
        .checklist-item { display: flex; align-items: flex-start; gap: 10px; padding: 8px 0; border-bottom: 1px solid var(--border-subtle); }
        .checklist-item:last-child { border-bottom: none; }
        .checklist-check { color: var(--accent-green); font-size: 1rem; }
        .checklist-text { font-size: 0.85rem; color: var(--text-secondary); }
    </style>
</head>
<body>
    <nav class="breadcrumb">
        <a href="../../index.html">üè† Portal</a>
        <span class="separator">‚Ä∫</span>
        <a href="./index.html">üìÑ DocuTech</a>
        <span class="separator">‚Ä∫</span>
        <span class="current">Initial Disclosures</span>
    </nav>

    <div class="layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">Workflow</div>
                <div class="workflow-name">Initial Disclosures</div>
            </div>
            <nav class="nav-section">
                <div class="nav-section-title">Sections</div>
                <a class="nav-item active" href="#prerequisites"><span class="step-num">1</span> Prerequisites</a>
                <a class="nav-item" href="#create-package"><span class="step-num">2</span> Create Package</a>
                <a class="nav-item" href="#select-documents"><span class="step-num">3</span> Select Documents</a>
                <a class="nav-item" href="#delivery"><span class="step-num">4</span> Delivery & E-Sign</a>
                <a class="nav-item" href="#verification"><span class="step-num">5</span> Verification</a>
            </nav>
            <nav class="nav-section">
                <div class="nav-section-title">AI Agents</div>
                <a class="nav-item" href="#" onclick="switchTab('agents'); return false;"><span class="step-num">ü§ñ</span> 2 Active Agents</a>
            </nav>
        </aside>

        <main class="main-content">
            <div class="workflow-header">
                <h1>Initial Disclosures Workflow</h1>
                <div class="workflow-meta">
                    <span>üìÖ Updated: October 2025</span>
                    <span>‚è±Ô∏è ~15 min to complete</span>
                    <span>üë§ LO / PA / Processor</span>
                </div>
            </div>

            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="switchTab('workflow')">üìã Workflow Steps</button>
                    <button class="tab-btn" onclick="switchTab('agents')">ü§ñ AI Agents (2)</button>
                </div>

                <!-- Workflow Panel -->
                <div id="workflow-panel" class="tab-panel active">
                    <section class="workflow-section" id="prerequisites">
                        <h2><span class="section-icon">‚úÖ</span> Prerequisites</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 20px;">Before generating initial disclosures, ensure the following data is complete in Byte:</p>

                        <div class="checklist-box">
                            <h4>üìã Pre-Disclosure Checklist</h4>
                            <div class="checklist-item">
                                <span class="checklist-check">‚òëÔ∏è</span>
                                <span class="checklist-text"><strong>Borrower Information:</strong> Full name, SSN, DOB, email, phone, current address</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-check">‚òëÔ∏è</span>
                                <span class="checklist-text"><strong>Subject Property:</strong> Complete address, property type, occupancy</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-check">‚òëÔ∏è</span>
                                <span class="checklist-text"><strong>Loan Terms:</strong> Loan amount, rate, loan type, term, product</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-check">‚òëÔ∏è</span>
                                <span class="checklist-text"><strong>Pricing:</strong> Loan locked or floated with current pricing</span>
                            </div>
                            <div class="checklist-item">
                                <span class="checklist-check">‚òëÔ∏è</span>
                                <span class="checklist-text"><strong>Fee Worksheet:</strong> All fees entered accurately (3rd party, title, etc.)</span>
                            </div>
                        </div>

                        <div class="callout warning-callout">
                            <div class="callout-title">‚ö†Ô∏è Critical: 3-Day Rule</div>
                            <p>Initial disclosures (Loan Estimate) must be delivered within 3 business days of receiving a completed loan application. The clock starts when you have: name, income, SSN, property address, estimated property value, and loan amount.</p>
                        </div>
                    </section>

                    <section class="workflow-section" id="create-package">
                        <h2><span class="section-icon">üì¶</span> Create Disclosure Package</h2>
                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Open DocuTech from Byte</h3>
                                    <p>In Byte, navigate to the loan file. Click <strong>Services ‚Üí DocuTech ‚Üí Initial Disclosure</strong> from the top menu.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>Select Package Type</h3>
                                    <p>Choose <strong>"Initial Disclosure"</strong> as the package type. This pre-loads the standard initial disclosure document set including the Loan Estimate.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>Review Loan Data</h3>
                                    <p>DocuTech will pull loan data from Byte. Review the summary screen to ensure all data transferred correctly, especially loan terms, borrower info, and fees.</p>
                                </div>
                            </div>
                        </div>

                        <div class="callout">
                            <div class="callout-title">üí° Data Push</div>
                            <p>When you create a package, Byte "pushes" current loan data to DocuTech. If you make changes in Byte after this point, you'll need to refresh/re-push the data or the documents will use stale information.</p>
                        </div>
                    </section>

                    <section class="workflow-section" id="select-documents">
                        <h2><span class="section-icon">üìÑ</span> Select Documents</h2>
                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h3>Review Document List</h3>
                                    <p>The Initial Disclosure package includes pre-selected documents. Review the list and ensure all required documents are checked, including state-specific disclosures.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <h3>Add State Conflict Disclosures</h3>
                                    <p>If the borrower lives in a different state than the property (e.g., CA borrower buying in AZ), add the <strong>State Conflict Disclosure</strong> package. Search for it in the document list.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <h3>Preview Documents</h3>
                                    <p>Click <strong>"Preview"</strong> to generate and review the documents before sending. Check the Loan Estimate carefully for accuracy of fees, rate, and terms.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="workflow-section" id="delivery">
                        <h2><span class="section-icon">üì®</span> Delivery & E-Sign</h2>
                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <h3>Select Delivery Method</h3>
                                    <p>Choose <strong>"E-Sign"</strong> as the delivery method. Verify the borrower's email address is correct. The system will send an invitation link to e-sign.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <h3>Push to Byte for E-Signing</h3>
                                    <p>Click <strong>"Push to Byte"</strong>. This sends the document package to Byte's e-sign module. The borrower will receive an email with a link to review and sign documents.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">9</div>
                                <div class="step-content">
                                    <h3>Monitor E-Sign Status</h3>
                                    <p>In Byte, check <strong>E-Sign Status</strong> to track when documents are viewed and signed. You can resend invitations if needed from this screen.</p>
                                </div>
                            </div>
                        </div>

                        <div class="callout success-callout">
                            <div class="callout-title">‚úÖ Auto Push-Back</div>
                            <p>Once the borrower e-signs all documents, they automatically "push back" to DocuTech and are stored in the loan file. No manual download required!</p>
                        </div>
                    </section>

                    <section class="workflow-section" id="verification">
                        <h2><span class="section-icon">üîç</span> Verification</h2>
                        <div class="step-list">
                            <div class="step-item">
                                <div class="step-number">10</div>
                                <div class="step-content">
                                    <h3>Confirm Document Delivery</h3>
                                    <p>Verify the disclosure was delivered within 3 business days. Check DocuTech for delivery timestamp and e-sign completion status.</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">11</div>
                                <div class="step-content">
                                    <h3>Review Signed Documents</h3>
                                    <p>Once e-signed, review the returned documents in DocuTech. Ensure all signatures are present and the Intent to Proceed has been acknowledged (if applicable).</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">12</div>
                                <div class="step-content">
                                    <h3>Document in Byte</h3>
                                    <p>Update the loan timeline/notes in Byte to reflect disclosure completion. Note the date delivered and date signed for compliance tracking.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- AI Agents Panel -->
                <div id="agents-panel" class="tab-panel">
                    <div class="heat-map">
                        <h3>üéØ Agent Confidence Map</h3>
                        <div class="heat-map-grid">
                            <div class="heat-item heat-high" onclick="scrollToAgent('agent-compliance')">
                                <span>Compliance Deadline Monitor</span>
                                <span class="score">90</span>
                            </div>
                            <div class="heat-item heat-medium" onclick="scrollToAgent('agent-data')">
                                <span>Data Integrity Validator</span>
                                <span class="score">86</span>
                            </div>
                        </div>
                    </div>

                    <div class="agents-grid">
                        <div class="agent-card" id="agent-compliance">
                            <div class="agent-header">
                                <div class="agent-avatar">‚è∞</div>
                                <div class="agent-info">
                                    <div class="agent-name">Compliance Deadline Monitor</div>
                                    <div class="agent-role">Disclosure Timing Agent</div>
                                </div>
                                <span class="confidence-badge confidence-high">90</span>
                            </div>
                            <p class="agent-description">Monitors the 3-business-day disclosure deadline from application date. Alerts users when approaching deadline and flags any potential violations for immediate action.</p>
                            <div class="agent-triggers">
                                <h4>Activation Triggers</h4>
                                <div class="trigger-list">
                                    <span class="trigger-tag">New application received</span>
                                    <span class="trigger-tag">2 days elapsed</span>
                                    <span class="trigger-tag">Deadline approaching</span>
                                </div>
                            </div>
                            <button class="view-prompt-btn" onclick="openModal('compliance')">View Full Prompt ‚Üí</button>
                        </div>

                        <div class="agent-card" id="agent-data">
                            <div class="agent-header">
                                <div class="agent-avatar">üîç</div>
                                <div class="agent-info">
                                    <div class="agent-name">Data Integrity Validator</div>
                                    <div class="agent-role">Pre-Disclosure Check Agent</div>
                                </div>
                                <span class="confidence-badge confidence-medium">86</span>
                            </div>
                            <p class="agent-description">Validates all required loan data fields before disclosure generation. Identifies missing or inconsistent data that could cause document errors or compliance issues.</p>
                            <div class="agent-triggers">
                                <h4>Activation Triggers</h4>
                                <div class="trigger-list">
                                    <span class="trigger-tag">Pre-disclosure check</span>
                                    <span class="trigger-tag">Data push initiated</span>
                                    <span class="trigger-tag">Fee worksheet updated</span>
                                </div>
                            </div>
                            <button class="view-prompt-btn" onclick="openModal('data')">View Full Prompt ‚Üí</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Agent Details</h2>
                <button class="modal-close" onclick="closeModal()">‚úï</button>
            </div>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <script>
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
            } else {
                document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
            }
        }

        function scrollToAgent(agentId) {
            const agent = document.getElementById(agentId);
            if (agent) {
                agent.scrollIntoView({ behavior: 'smooth', block: 'center' });
                agent.classList.add('highlight');
                setTimeout(() => agent.classList.remove('highlight'), 2000);
            }
        }

        const agentData = {
            compliance: {
                title: 'Compliance Deadline Monitor',
                purpose: 'Ensures initial disclosures are delivered within the required 3-business-day window from application receipt, preventing TRID violations.',
                prompt: `You are a Compliance Deadline Monitor for mortgage disclosures.

MONITORING SCOPE:
- Track application received date for all new loans
- Calculate 3-business-day deadline (excluding Sundays and federal holidays)
- Monitor disclosure delivery status in DocuTech

ALERT THRESHOLDS:
- Day 1: Log application received, deadline calculated
- Day 2: Yellow alert if disclosure not yet sent
- Day 3 morning: Red alert with escalation
- Post-deadline: Violation flag for compliance review

ACTIONS:
- Send automated reminders to assigned LO/PA
- Escalate to supervisor at red alert level
- Document all timeline events for audit trail
- Flag any date calculation anomalies

OUTPUT: Daily deadline report with loan-level status and risk indicators.`,
                integrations: [
                    { icon: 'üìÖ', text: 'Byte loan timeline for application date' },
                    { icon: 'üìÑ', text: 'DocuTech delivery confirmations' },
                    { icon: 'üîî', text: 'Email/notification system for alerts' }
                ]
            },
            data: {
                title: 'Data Integrity Validator',
                purpose: 'Pre-validates all loan data fields before disclosure generation to prevent errors, missing information, and document regeneration.',
                prompt: `You are a Data Integrity Validator for DocuTech disclosures.

VALIDATION SCOPE:
Pre-disclosure data check covering:
- Borrower: Name, SSN, DOB, email, phone, address
- Property: Full address, type, occupancy, estimated value
- Loan: Amount, rate, term, product code, loan type
- Fees: Origination, 3rd party, title, government

VALIDATION RULES:
- All required fields populated (no blanks)
- Format validation (SSN pattern, email format, etc.)
- Cross-field consistency (loan amount vs. property value)
- Fee reasonableness checks (within typical ranges)
- State-specific requirements flagged

ERROR HANDLING:
- Block disclosure if critical fields missing
- Warn on data inconsistencies
- Suggest corrections based on common patterns
- Log all validation results

OUTPUT: Pass/Fail status with detailed field-level report.`,
                integrations: [
                    { icon: 'üîó', text: 'Byte loan data fields via API push' },
                    { icon: 'üìä', text: 'Fee worksheet validation rules' },
                    { icon: 'üìã', text: 'State compliance requirement database' }
                ]
            }
        };

        function openModal(agentKey) {
            const agent = agentData[agentKey];
            document.getElementById('modal-title').textContent = agent.title;

            let integrationsHTML = agent.integrations.map(i => `
                <div class="integration-item">
                    <div class="integration-icon">${i.icon}</div>
                    <span class="integration-text">${i.text}</span>
                </div>
            `).join('');

            document.getElementById('modal-body').innerHTML = `
                <div class="modal-section">
                    <h3>Purpose</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">${agent.purpose}</p>
                </div>
                <div class="modal-section">
                    <h3>Full Prompt</h3>
                    <div class="prompt-box">${agent.prompt}</div>
                </div>
                <div class="modal-section">
                    <h3>Integration Points</h3>
                    <div class="integration-list">${integrationsHTML}</div>
                </div>
            `;

            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });
    </script>
</body>
</html>
