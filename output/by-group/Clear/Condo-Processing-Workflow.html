<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Condo Processing - CLEAR 2.0 Workflow | CMG Training Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        .sidebar-tabs { display: flex; border-bottom: 1px solid var(--border-subtle); }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }
        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }
        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }

        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }
        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }
        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }

        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; }
        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }

        .heat-score { position: absolute; top: 15px; right: 15px; font-size: 1.8rem; font-weight: 800; }
        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }
        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            scroll-margin-top: 75px;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority { padding: 6px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; }
        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }
        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-purple); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
        }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
        .breadcrumb-logo-link { display: inline-flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; flex-shrink: 0; margin-right: 4px; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 24px; width: auto; display: block; }
    </style>
</head>
<body>
    <nav class="breadcrumb">
<a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">üè† Portal Home</a>
        <span class="separator">‚Ä∫</span>
        <a href="./index.html">üè¶ CLEAR 2.0</a>
        <span class="separator">‚Ä∫</span>
        <span class="current">üè¢ Condo Processing</span>
    </nav>

    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>üè¢ Condo Processing</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">üìã Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">ü§ñ AI Agents</button>
        </div>

        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Overview</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Identify Condo Type</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Order Questionnaire</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Review Requirements</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Clear Conditions</span>
            </a>
        </nav>

        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">üìä</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">üî•</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">ü§ñ</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <a href="./index.html" class="doc-btn">‚Üê Back to CLEAR Index</a>
        </div>
    </aside>

    <main class="main-content">
        <div id="workflow-panel" class="tab-panel active">
            <div class="header">
                <h1>üè¢ Condo Processing in CLEAR 2.0</h1>
                <p class="subtitle">Complete workflow for condominium loan processing and project approval</p>
                <div class="meta">
                    <span class="meta-item">üè¢ System: CLEAR 2.0</span>
                    <span class="meta-item">üë§ Role: Processor / LO</span>
                    <span class="meta-item">üìÖ Updated: Jan 2026</span>
                    <span class="meta-item">‚è±Ô∏è Duration: 5-15 min</span>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title">
                        <h2>Condo Processing Overview</h2>
                        <span>Understanding condominium loan requirements</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Condo Identified</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node decision">Project Type?</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Order Questionnaire</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node output">Project Approved</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>üè¢ Why Condo Processing Matters</h4>
                        <p>Condominium loans require additional review of the project (HOA) to ensure it meets agency requirements. The project's financial health, insurance coverage, and legal structure all impact loan eligibility.</p>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Review Type</th>
                                <th>When Required</th>
                                <th>Documentation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Full Review</strong></td>
                                <td>New construction, high-rise, investor-heavy</td>
                                <td>Full questionnaire + HOA docs</td>
                            </tr>
                            <tr>
                                <td><strong>Limited Review</strong></td>
                                <td>Established projects, owner-occupied heavy</td>
                                <td>Limited questionnaire</td>
                            </tr>
                            <tr>
                                <td><strong>CPM Approved</strong></td>
                                <td>Fannie Mae pre-approved list</td>
                                <td>Verification only</td>
                            </tr>
                            <tr>
                                <td><strong>PERS Approved</strong></td>
                                <td>Freddie Mac pre-approved list</td>
                                <td>Verification only</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title">
                        <h2>Identify Condo Project Type</h2>
                        <span>Determine review requirements based on project characteristics</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Check CPM/PERS</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node decision">Pre-Approved?</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node output">Yes: Use Approval</div>
                            <span class="flow-arrow" style="opacity: 0.3;">|</span>
                            <div class="flow-node action">No: Determine Review Level</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Criteria</th>
                                <th>Full Review Required</th>
                                <th>Limited Review OK</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Units Sold</strong></td>
                                <td>&lt;90% sold or &lt;50% owner-occupied</td>
                                <td>‚â•90% sold AND ‚â•50% owner-occupied</td>
                            </tr>
                            <tr>
                                <td><strong>Building Type</strong></td>
                                <td>High-rise (5+ stories)</td>
                                <td>Low/mid-rise (1-4 stories)</td>
                            </tr>
                            <tr>
                                <td><strong>Age</strong></td>
                                <td>New construction (&lt;1 year)</td>
                                <td>Established (1+ year)</td>
                            </tr>
                            <tr>
                                <td><strong>Commercial Space</strong></td>
                                <td>&gt;25% commercial use</td>
                                <td>‚â§25% commercial use</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>üí° Pro Tip: Check CPM First</h4>
                        <p>Always check the Fannie Mae Condo Project Manager (CPM) database first. If the project is already approved, you can skip the full questionnaire process and save significant time.</p>
                    </div>
                </div>
            </section>

            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title">
                        <h2>Order Condo Questionnaire</h2>
                        <span>Request required HOA documentation</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Services Menu</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Order Condo Cert</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node input">Select Vendor</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Submit Order</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node output">Track in Services</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Document</th>
                                <th>Purpose</th>
                                <th>Required For</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Condo Questionnaire</strong></td>
                                <td>HOA financial & legal info</td>
                                <td><span class="badge required-badge">All Condos</span></td>
                            </tr>
                            <tr>
                                <td><strong>HOA Budget</strong></td>
                                <td>Financial health assessment</td>
                                <td><span class="badge required-badge">Full Review</span></td>
                            </tr>
                            <tr>
                                <td><strong>CC&Rs</strong></td>
                                <td>Covenants and restrictions</td>
                                <td><span class="badge optional-badge">If Issues</span></td>
                            </tr>
                            <tr>
                                <td><strong>Insurance Certificate</strong></td>
                                <td>Master policy verification</td>
                                <td><span class="badge required-badge">All Condos</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="exception-box">
                        <h4>‚ö†Ô∏è Turnaround Times</h4>
                        <p>Condo questionnaires typically take 3-7 business days from the HOA management company. Order early in the process to avoid closing delays.</p>
                    </div>
                </div>
            </section>

            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title">
                        <h2>Review Project Requirements</h2>
                        <span>Analyze questionnaire for eligibility issues</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Questionnaire Received</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Review Financials</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Check Insurance</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Verify Legal</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node decision">Meets Guidelines?</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node output">Approve/Condition</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Review Area</th>
                                <th>Requirement</th>
                                <th>Red Flag</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Reserve Ratio</strong></td>
                                <td>‚â•10% of budget in reserves</td>
                                <td>Special assessments pending</td>
                            </tr>
                            <tr>
                                <td><strong>Delinquency Rate</strong></td>
                                <td>&lt;15% units 60+ days delinquent</td>
                                <td>High delinquency = project risk</td>
                            </tr>
                            <tr>
                                <td><strong>Litigation</strong></td>
                                <td>No material pending litigation</td>
                                <td>Construction defect lawsuits</td>
                            </tr>
                            <tr>
                                <td><strong>Insurance</strong></td>
                                <td>Master policy covers building</td>
                                <td>Gaps in coverage</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title">
                        <h2>Clear Condo Conditions</h2>
                        <span>Resolve any outstanding project issues</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Review Conditions</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Gather Documents</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Submit to UW</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node output">Conditions Cleared</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>‚úÖ Common Condo Conditions</h4>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Updated insurance certificate with CMG as mortgagee</li>
                            <li>Evidence of reserve funding</li>
                            <li>Litigation status letter</li>
                            <li>Updated budget if over 12 months old</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="quick-ref" class="quick-ref">
                <h3>‚ö° Quick Reference Card</h3>
                <pre>
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                   CONDO PROCESSING QUICK GUIDE                   ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë  STEP 1: Check Pre-Approved Lists                                ‚ïë
‚ïë  ‚Ä¢ CPM (Fannie Mae): condoprojectmanager.com                     ‚ïë
‚ïë  ‚Ä¢ PERS (Freddie Mac): freddiemac.com/condominiums               ‚ïë
‚ïë                                                                  ‚ïë
‚ïë  REVIEW TYPE DETERMINATION:                                      ‚ïë
‚ïë  Full Review: High-rise, new construction, <90% sold             ‚ïë
‚ïë  Limited Review: Low-rise, established, owner-occupied           ‚ïë
‚ïë                                                                  ‚ïë
‚ïë  KEY REQUIREMENTS:                                               ‚ïë
‚ïë  ‚Ä¢ Reserves: ‚â•10% of annual budget                               ‚ïë
‚ïë  ‚Ä¢ Delinquency: <15% units 60+ days late                         ‚ïë
‚ïë  ‚Ä¢ Insurance: Master policy in force                             ‚ïë
‚ïë  ‚Ä¢ Litigation: No material pending suits                         ‚ïë
‚ïë                                                                  ‚ïë
‚ïë  TURNAROUND: 3-7 business days for questionnaire                 ‚ïë
‚ïë  ORDER EARLY to avoid closing delays!                            ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
                </pre>
            </section>
        </div>

        <div id="agents-panel" class="tab-panel">
            <div class="agent-header">
                <h1>ü§ñ AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for Condo Processing Workflow</p>
                <div class="meta">
                    <span class="meta-item">ü§ñ 3 Agent Candidates Identified</span>
                    <span class="meta-item">‚è±Ô∏è Est. 55% Time Savings</span>
                </div>
            </div>

            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">3</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">1</div>
                    <div class="agent-summary-label">Critical Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">55%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">75%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
            </div>

            <div class="heat-map-container">
                <div class="heat-map-title">üî• Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-questionnaire-analyzer')">
                        <div class="heat-score">93</div>
                        <div class="heat-name">Questionnaire Analyzer</div>
                        <div class="heat-desc">Auto-review condo questionnaires</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Volume: <span>High</span></div>
                            <div class="heat-metric">Impact: <span>Speed</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-cpm-checker')">
                        <div class="heat-score">85</div>
                        <div class="heat-name">CPM/PERS Checker</div>
                        <div class="heat-desc">Auto-check approval databases</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Volume: <span>High</span></div>
                            <div class="heat-metric">Impact: <span>Speed</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-insurance-validator')">
                        <div class="heat-score">79</div>
                        <div class="heat-name">HOA Insurance Validator</div>
                        <div class="heat-desc">Verify master policy coverage</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Volume: <span>Med</span></div>
                            <div class="heat-metric">Impact: <span>Compliance</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <h2 style="margin-bottom: 25px; color: var(--text-primary);" id="agent-details">ü§ñ Agent Details</h2>
            <div class="agent-grid">
                <div class="agent-card" id="agent-questionnaire-analyzer">
                    <div class="agent-card-header">
                        <div class="agent-icon">üìã</div>
                        <div class="agent-info">
                            <div class="agent-name">Condo Questionnaire Analyzer</div>
                            <div class="agent-type">Document Analysis Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically extracts and validates key data points from condo questionnaires, flagging potential eligibility issues and generating a structured review summary for underwriting.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Workflow</div>
                            <div class="agent-flow-diagram">
                                <span class="agent-step">Parse Document</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Extract Data</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Check Guidelines</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Generate Report</span>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat">
                                <div class="agent-stat-value">93</div>
                                <div class="agent-stat-label">Priority</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">60%</div>
                                <div class="agent-stat-label">Time Save</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">High</div>
                                <div class="agent-stat-label">ROI</div>
                            </div>
                        </div>
                        <button class="agent-prompt-btn" onclick="openPromptModal('questionnaire-analyzer')">‚ú® View AI Build Prompt</button>
                    </div>
                </div>

                <div class="agent-card" id="agent-cpm-checker">
                    <div class="agent-card-header">
                        <div class="agent-icon">üîç</div>
                        <div class="agent-info">
                            <div class="agent-name">CPM/PERS Lookup Agent</div>
                            <div class="agent-type">Database Query Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically checks Fannie Mae CPM and Freddie Mac PERS databases for pre-approved projects, eliminating manual lookups and immediately routing eligible loans to expedited processing.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Workflow</div>
                            <div class="agent-flow-diagram">
                                <span class="agent-step">Get Address</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Query CPM</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Query PERS</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Report Status</span>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat">
                                <div class="agent-stat-value">85</div>
                                <div class="agent-stat-label">Priority</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">45%</div>
                                <div class="agent-stat-label">Time Save</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">High</div>
                                <div class="agent-stat-label">ROI</div>
                            </div>
                        </div>
                        <button class="agent-prompt-btn" onclick="openPromptModal('cpm-checker')">‚ú® View AI Build Prompt</button>
                    </div>
                </div>

                <div class="agent-card" id="agent-insurance-validator">
                    <div class="agent-card-header">
                        <div class="agent-icon">üõ°Ô∏è</div>
                        <div class="agent-info">
                            <div class="agent-name">HOA Insurance Validator</div>
                            <div class="agent-type">Validation Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Reviews HOA master insurance policies to verify coverage meets agency requirements, checking policy limits, coverage types, and expiration dates.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Workflow</div>
                            <div class="agent-flow-diagram">
                                <span class="agent-step">Read Policy</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Check Limits</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Verify Coverage</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Flag Gaps</span>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat">
                                <div class="agent-stat-value">79</div>
                                <div class="agent-stat-label">Priority</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">35%</div>
                                <div class="agent-stat-label">Time Save</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value">Med</div>
                                <div class="agent-stat-label">ROI</div>
                            </div>
                        </div>
                        <button class="agent-prompt-btn" onclick="openPromptModal('insurance-validator')">‚ú® View AI Build Prompt</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="modal-overlay" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">‚ú® AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPrompt()">üìã Copy Prompt</button>
                    <button class="modal-btn close" onclick="closeModal()">‚úï Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>üéØ Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>üìù Full Build Prompt</h4>
                    <div class="prompt-box" id="promptFull"></div>
                </div>
                <div class="prompt-section">
                    <h4>üîó Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">‚úì Copied to clipboard!</div>

    <script>
        const agentPrompts = {
            'questionnaire-analyzer': {
                title: 'Condo Questionnaire Analyzer',
                tags: ['Document Analysis', 'Data Extraction', 'Guideline Check', 'Automation'],
                purpose: 'Automatically extract and validate key data from condo questionnaires to accelerate review and flag eligibility issues.',
                fullPrompt: `You are a Condo Questionnaire Analysis Agent for CMG Financial.

ROLE: Extract, validate, and analyze condo questionnaire data against agency guidelines.

DATA EXTRACTION TARGETS:
1. Project Name & Address
2. Number of Units (total, sold, rented, owner-occupied)
3. Reserve Fund Balance & Percentage of Budget
4. Delinquency Rate (units 30+, 60+ days late)
5. Pending Special Assessments
6. Pending Litigation (type, amount, status)
7. Commercial Space Percentage
8. HOA Management Company

VALIDATION RULES:
- Reserve ratio must be ‚â•10% of annual budget
- Delinquency rate must be <15% for 60+ day accounts
- No material pending litigation affecting habitability
- Commercial space must be ‚â§25% (or ‚â§35% for FHA)
- Single entity ownership must be <10% (Fannie) or <20% (Freddie)

OUTPUT FORMAT:
‚úì ELIGIBLE: All requirements met
‚ö† CONDITIONAL: Issues requiring attention (list specifics)
‚úó INELIGIBLE: Disqualifying factors (list specifics)

Include extracted data summary table for UW review.`,
                integration: `Integration Points:
‚Ä¢ Document OCR/Extraction Service
‚Ä¢ CLEAR 2.0 Loan Data API
‚Ä¢ Underwriting Condition System
‚Ä¢ Fannie Mae/Freddie Mac Guidelines Database

Triggers:
‚Ä¢ Fires when condo questionnaire uploaded to eFolder
‚Ä¢ Re-runs on document replacement
‚Ä¢ Manual trigger available for processor`
            },
            'cpm-checker': {
                title: 'CPM/PERS Lookup Agent',
                tags: ['Database Query', 'API Integration', 'Eligibility Check', 'Speed'],
                purpose: 'Automatically check agency approval databases to identify pre-approved condo projects and skip full questionnaire process.',
                fullPrompt: `You are a CPM/PERS Database Lookup Agent for CMG Financial.

ROLE: Query Fannie Mae CPM and Freddie Mac PERS databases to check condo project approval status.

LOOKUP PROCESS:
1. Extract property address from loan
2. Normalize address format for database query
3. Query Fannie Mae Condo Project Manager (CPM)
4. Query Freddie Mac PERS database
5. Return approval status and details

RESULT INTERPRETATION:
CPM Status:
- "Approved" = Full project approval, use approval ID
- "Accepted" = Limited review eligible
- "Not Found" = Requires manual review

PERS Status:
- "Approved" = Project meets Freddie guidelines
- "Expired" = Was approved, needs renewal
- "Not Found" = Requires manual review

OUTPUT:
{
  "cpm_status": "Approved|Accepted|Not Found",
  "cpm_id": "if applicable",
  "cpm_expiration": "date",
  "pers_status": "Approved|Expired|Not Found",
  "pers_id": "if applicable",
  "recommendation": "Skip questionnaire|Order questionnaire|Ineligible"
}`,
                integration: `Integration Points:
‚Ä¢ Fannie Mae CPM API
‚Ä¢ Freddie Mac PERS API
‚Ä¢ Property Address Normalization Service
‚Ä¢ CLEAR 2.0 Loan Record

Triggers:
‚Ä¢ Property type identified as "Condo"
‚Ä¢ Address populated on loan
‚Ä¢ Manual lookup request`
            },
            'insurance-validator': {
                title: 'HOA Insurance Validator',
                tags: ['Insurance Review', 'Coverage Validation', 'Compliance', 'Risk'],
                purpose: 'Review HOA master insurance policies to verify coverage meets agency and investor requirements.',
                fullPrompt: `You are an HOA Insurance Validation Agent for CMG Financial.

ROLE: Analyze HOA master insurance policies for compliance with lending requirements.

COVERAGE REQUIREMENTS:
1. Property/Hazard Insurance
   - Replacement cost coverage for building
   - No coinsurance penalty provisions
   - Deductible ‚â§5% of policy face amount

2. Liability Insurance
   - General liability ‚â•$1M per occurrence
   - Covers common areas and shared elements

3. Fidelity Bond/Crime Coverage
   - ‚â•3 months HOA assessments
   - Covers board members and management

4. Flood Insurance (if in SFHA)
   - Coverage for building in special flood hazard area
   - Maximum available under NFIP

VALIDATION CHECKLIST:
‚ñ° Policy is current (not expired)
‚ñ° Coverage amounts meet minimums
‚ñ° Named insured includes HOA
‚ñ° All required coverage types present
‚ñ° Deductibles within acceptable limits

OUTPUT:
‚úì COMPLIANT: All coverage requirements met
‚ö† GAPS IDENTIFIED: List specific deficiencies
‚úó NON-COMPLIANT: Critical coverage missing`,
                integration: `Integration Points:
‚Ä¢ Document Parser for Insurance Certificates
‚Ä¢ Agency Guideline Requirements Database
‚Ä¢ Underwriting Condition System
‚Ä¢ Flood Zone Verification Service

Data Required:
‚Ä¢ HOA Master Insurance Declaration Page
‚Ä¢ Certificate of Insurance
‚Ä¢ Flood determination (for SFHA check)`
            }
        };

        let currentPrompt = '';

        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
            document.getElementById(tab + '-panel').classList.add('active');
            document.getElementById('workflow-nav').style.display = tab === 'workflow' ? 'block' : 'none';
            document.getElementById('agents-nav').style.display = tab === 'agents' ? 'block' : 'none';
        }

        function scrollToAgent(agentId) {
            const card = document.getElementById(agentId);
            if (card) {
                card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                card.classList.add('highlight');
                setTimeout(() => card.classList.remove('highlight'), 2000);
            }
        }

        function openPromptModal(agentKey) {
            const agent = agentPrompts[agentKey];
            document.getElementById('modalTitle').textContent = '‚ú® ' + agent.title + ' - Build Prompt';
            document.getElementById('promptTags').innerHTML = agent.tags.map(t => `<span class="prompt-tag">${t}</span>`).join('');
            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptFull').textContent = agent.fullPrompt;
            document.getElementById('promptIntegration').textContent = agent.integration;
            currentPrompt = agent.fullPrompt;
            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPrompt() {
            try {
                await navigator.clipboard.writeText(currentPrompt);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => success.style.display = 'none', 2000);
            } catch (e) {
                alert('Failed to copy to clipboard');
            }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closeModal();
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
            });
        });
    </script>
</body>
</html>
