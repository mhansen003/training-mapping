<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borrower Management - CLEAR 2.0 Workflow | CMG Training Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Layout */
        .page-layout {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Fixed Sidebar */
        .sidebar {
            width: 280px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
            position: sticky;
            top: 52px;
            height: calc(100vh - 52px);
            overflow: hidden;
        }

        .sidebar-header {
            padding: 24px 20px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .sidebar-subtitle {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Tab Switcher */
        .tab-switcher {
            display: flex;
            padding: 12px;
            gap: 8px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .tab-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-size: 0.85rem;
            transition: all 0.2s;
            background: transparent;
            color: var(--text-muted);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
        }

        .tab-btn:not(.active):hover {
            background: rgba(255,255,255,0.05);
            color: var(--text-primary);
        }

        /* Section Navigation */
        .section-nav {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
        }

        .nav-group {
            margin-bottom: 20px;
        }

        .nav-group-title {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-muted);
            padding: 8px 12px;
        }

        .nav-item {
            display: block;
            padding: 10px 12px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.85rem;
            border-radius: 6px;
            margin-bottom: 2px;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.05);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-left-color: var(--accent-blue);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            max-width: 1000px;
        }

        /* Content Sections */
        .content-section {
            margin-bottom: 50px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .section-icon {
            font-size: 2rem;
        }

        .section-title {
            font-size: 1.6rem;
            font-weight: 800;
        }

        /* Flow Diagram */
        .flow-diagram {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin: 25px 0;
            align-items: center;
        }

        .flow-node {
            padding: 14px 20px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.9rem;
            text-align: center;
            min-width: 140px;
        }

        .flow-node.start {
            background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%);
            color: white;
            border-radius: 25px;
        }

        .flow-node.action {
            background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%);
            color: white;
        }

        .flow-node.decision {
            background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%);
            color: white;
            clip-path: polygon(15% 0%, 85% 0%, 100% 50%, 85% 100%, 15% 100%, 0% 50%);
            padding: 14px 30px;
        }

        .flow-node.input {
            background: var(--bg-card);
            border: 2px solid var(--accent-blue);
            color: var(--text-primary);
        }

        .flow-node.output {
            background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%);
            color: white;
        }

        .flow-node.exception {
            background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%);
            color: white;
        }

        .flow-arrow {
            color: var(--text-muted);
            font-size: 1.5rem;
        }

        /* Info Box */
        .info-box {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .info-box.tip {
            border-left: 4px solid var(--accent-green);
        }

        .info-box.warning {
            border-left: 4px solid var(--accent-amber);
        }

        .info-box.critical {
            border-left: 4px solid var(--accent-rose);
        }

        .info-box-title {
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Field Table */
        .field-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.9rem;
        }

        .field-table th,
        .field-table td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table th {
            background: var(--bg-card);
            font-weight: 700;
            color: var(--text-primary);
        }

        .field-table td {
            color: var(--text-secondary);
        }

        .field-table tr:hover td {
            background: rgba(255,255,255,0.02);
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .badge.required {
            background: rgba(239, 68, 68, 0.15);
            color: #f87171;
        }

        .badge.optional {
            background: rgba(100, 116, 139, 0.15);
            color: var(--text-muted);
        }

        /* Step List */
        .step-list {
            counter-reset: step;
            list-style: none;
            padding: 0;
        }

        .step-item {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
            padding: 18px;
            background: var(--bg-card);
            border-radius: 10px;
            border: 1px solid var(--border-subtle);
        }

        .step-item::before {
            counter-increment: step;
            content: counter(step);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            border-radius: 50%;
            font-weight: 700;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .step-content h4 {
            font-weight: 700;
            margin-bottom: 6px;
        }

        .step-content p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Heat Map Grid for AI Agents */
        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .heat-tile {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .heat-tile::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
        }

        .heat-tile.critical::before { background: var(--accent-rose); }
        .heat-tile.high::before { background: var(--accent-amber); }
        .heat-tile.medium::before { background: var(--accent-blue); }
        .heat-tile.low::before { background: var(--accent-green); }

        .heat-tile:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .heat-tile.highlighted {
            border-color: var(--accent-blue);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        .heat-score {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .heat-tile.critical .heat-score { color: var(--accent-rose); }
        .heat-tile.high .heat-score { color: var(--accent-amber); }
        .heat-tile.medium .heat-score { color: var(--accent-blue); }
        .heat-tile.low .heat-score { color: var(--accent-green); }

        .heat-name {
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }

        .heat-desc {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Agent Cards */
        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 24px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .agent-card.highlighted {
            border-color: var(--accent-blue);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.2);
        }

        .agent-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 18px;
        }

        .agent-title {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .agent-type {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .agent-score {
            text-align: right;
        }

        .agent-score-value {
            font-size: 2rem;
            font-weight: 800;
        }

        .agent-score-label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .agent-flow {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
            margin: 18px 0;
            padding: 16px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
        }

        .agent-flow-step {
            padding: 8px 14px;
            background: var(--bg-secondary);
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .agent-flow-arrow {
            color: var(--text-muted);
        }

        .agent-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 18px 0;
        }

        .agent-metric {
            text-align: center;
            padding: 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
        }

        .agent-metric-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--accent-teal);
        }

        .agent-metric-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .view-prompt-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .view-prompt-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .modal-header-buttons {
            display: flex;
            gap: 12px;
        }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .modal-btn.copy {
            background: white;
            color: var(--accent-purple);
        }

        .modal-btn.close {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .modal-body {
            padding: 28px;
            overflow-y: auto;
            flex: 1;
        }

        .prompt-section {
            margin-bottom: 24px;
        }

        .prompt-section-title {
            font-weight: 700;
            color: var(--accent-teal);
            margin-bottom: 12px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .prompt-content {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 18px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            white-space: pre-wrap;
            color: var(--text-secondary);
        }

        .prompt-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .prompt-tag {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .prompt-tag.type {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
        }

        .prompt-tag.complexity {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .prompt-tag.priority {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-amber);
        }

        #copySuccess {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
        }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(20, 184, 166, 0.1) 100%);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 24px;
            margin: 30px 0;
        }

        .quick-ref h3 {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quick-ref-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }

        .quick-ref-item {
            background: rgba(0,0,0,0.2);
            padding: 14px;
            border-radius: 8px;
        }

        .quick-ref-item strong {
            display: block;
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .quick-ref-item span {
            font-weight: 600;
            color: var(--text-primary);
        }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html">üè† Portal Home</a>
        <span class="separator">‚Ä∫</span>
        <a href="./index.html">üè¶ CLEAR 2.0</a>
        <span class="separator">‚Ä∫</span>
        <span class="current">üë• Borrower Management</span>
    </nav>

    <div class="page-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">Borrower Management</div>
                <div class="sidebar-subtitle">CLEAR 2.0 Module</div>
            </div>

            <div class="tab-switcher">
                <button class="tab-btn active" onclick="switchTab('workflow')">üìã Workflow</button>
                <button class="tab-btn" onclick="switchTab('agents')">ü§ñ AI Agents</button>
            </div>

            <nav class="section-nav" id="workflowNav">
                <div class="nav-group">
                    <div class="nav-group-title">Overview</div>
                    <a href="#overview" class="nav-item active">Process Overview</a>
                    <a href="#guidelines" class="nav-item">Borrower Guidelines</a>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">Core Functions</div>
                    <a href="#manage" class="nav-item">Manage Borrowers</a>
                    <a href="#switch" class="nav-item">Switch Positions</a>
                    <a href="#split" class="nav-item">Split to Application</a>
                    <a href="#delete" class="nav-item">Delete Borrower</a>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">Reference</div>
                    <a href="#quickref" class="nav-item">Quick Reference</a>
                </div>
            </nav>

            <nav class="section-nav" id="agentsNav" style="display: none;">
                <div class="nav-group">
                    <div class="nav-group-title">Heat Map</div>
                    <a href="#heatmap" class="nav-item active">Priority Overview</a>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">Agents</div>
                    <a href="#agent1" class="nav-item">Privacy Advisor</a>
                    <a href="#agent2" class="nav-item">Borrower Setup Agent</a>
                    <a href="#agent3" class="nav-item">Surefire Sync Monitor</a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Workflow Tab -->
            <div id="workflowContent" class="tab-content active">
                <section id="overview" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">üë•</span>
                        <h2 class="section-title">Borrower Management Overview</h2>
                    </div>

                    <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 20px;">
                        Borrower Management in CLEAR 2.0 enables Loan Officers and Production Assistants to manage borrower and co-borrower relationships, switch positions, split applications, and handle deletions. The structure depends on borrower relationships, occupancy intentions, and privacy preferences.
                    </p>

                    <div class="flow-diagram">
                        <div class="flow-node start">Start</div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="flow-node decision">Privacy Question</div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="flow-node action">Joint or Separate</div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="flow-node input">URLA Entry</div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="flow-node output">Application Ready</div>
                    </div>

                    <div class="info-box tip">
                        <div class="info-box-title">üí° Pro Tip</div>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Always ask borrowers the privacy question before proceeding: "Do you mind if the other borrower sees your financial information?" This determines whether to set up a joint or separate application structure.</p>
                    </div>
                </section>

                <section id="guidelines" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">üìã</span>
                        <h2 class="section-title">Borrower & Co-Borrower Guidelines</h2>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Requirement</th>
                                <th>Details</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Credit Report Type</strong></td>
                                <td>Joint (shared financials visible) or Individual (privacy between borrowers)</td>
                                <td><span class="badge required">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Marital Status</strong></td>
                                <td>Borrowers do NOT need to be married to apply jointly</td>
                                <td><span class="badge optional">Note</span></td>
                            </tr>
                            <tr>
                                <td><strong>Occupancy Requirement</strong></td>
                                <td>Both borrowers must have same intended occupancy (primary, second, investment)</td>
                                <td><span class="badge required">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Financial Transparency</strong></td>
                                <td>In joint application, all assets and liabilities are visible to both borrowers</td>
                                <td><span class="badge required">Required</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box warning">
                        <div class="info-box-title">‚ö†Ô∏è Privacy Decision Logic</div>
                        <ul style="color: var(--text-secondary); font-size: 0.9rem; margin-left: 20px;">
                            <li>Both say "No" (don't mind sharing) ‚Üí Proceed as <strong>Borrower & Co-Borrower</strong> (Joint)</li>
                            <li>Either says "Yes" (wants privacy) ‚Üí Proceed as <strong>Borrower / Borrower</strong> (Separate Applications)</li>
                        </ul>
                    </div>
                </section>

                <section id="manage" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">‚öôÔ∏è</span>
                        <h2 class="section-title">Manage Borrowers in URLA</h2>
                    </div>

                    <p style="color: var(--text-secondary); margin-bottom: 20px;">Access borrower management through the URLA or Loan Summary screen in CLEAR.</p>

                    <ol class="step-list">
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Open Loan in CLEAR</h4>
                                <p>Navigate to the loan and open it in CLEAR 2.0. Go to the URLA or Loan Summary screen.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Access Borrower Dropdown</h4>
                                <p>At the top of the screen, click the dropdown where Borrower names are located. This shows all Borrowers on the loan and options to manage them.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Click Manage Borrowers</h4>
                                <p>Select "Manage Borrowers" to open the management modal. From here you can: Add Borrower, Move/Switch Borrowers, Delete Borrower, or Add New Application.</p>
                            </div>
                        </li>
                    </ol>
                </section>

                <section id="switch" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">üîÑ</span>
                        <h2 class="section-title">Move/Switch Borrower Positions</h2>
                    </div>

                    <ol class="step-list">
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Open Manage Borrowers</h4>
                                <p>Click "Manage Borrowers" from the borrower dropdown to access position controls.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Click Make Primary</h4>
                                <p>To make the Additional Borrower the Primary Borrower, click "Make Primary" next to their name.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Save Changes</h4>
                                <p>Click Save. The Additional Borrower will now be the Primary Borrower.</p>
                            </div>
                        </li>
                    </ol>
                </section>

                <section id="split" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">üìÇ</span>
                        <h2 class="section-title">Split Borrower to New Application</h2>
                    </div>

                    <ol class="step-list">
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Open Manage Borrowers</h4>
                                <p>Click "Manage Borrowers" from the borrower dropdown menu.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Drag and Drop</h4>
                                <p>Drag the Additional Borrower into the "Drag and drop a borrower here to create a new application" section.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Save</h4>
                                <p>Click Save. The Additional Borrower will now be on their own separate Borrower Application.</p>
                            </div>
                        </li>
                    </ol>

                    <div class="info-box tip">
                        <div class="info-box-title">üí° Moving Applications</div>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">You can also move Application 2 to Application 1 by dragging and dropping between applications, then clicking Save.</p>
                    </div>
                </section>

                <section id="delete" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">üóëÔ∏è</span>
                        <h2 class="section-title">Delete a Borrower</h2>
                    </div>

                    <ol class="step-list">
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Open Manage Borrowers</h4>
                                <p>Click "Manage Borrowers" from the borrower dropdown.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Click Minus Icon</h4>
                                <p>Click the minus icon (‚àí) next to the Borrower you want to delete. A warning will appear indicating all information will be deleted.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Confirm Deletion</h4>
                                <p>A confirmation popup will appear. Click "Yes, Continue" to complete the deletion.</p>
                            </div>
                        </li>
                    </ol>

                    <div class="info-box critical">
                        <div class="info-box-title">üö® Surefire Action Required</div>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Removing a Borrower from Clear does NOT remove the Borrower from Surefire. For Surefire updates, please email <strong>CMGmarketing@cmgfi.com</strong></p>
                    </div>
                </section>

                <section id="quickref" class="content-section">
                    <div class="quick-ref">
                        <h3>‚ö° Quick Reference</h3>
                        <div class="quick-ref-grid">
                            <div class="quick-ref-item">
                                <strong>Access Point</strong>
                                <span>URLA / Loan Summary</span>
                            </div>
                            <div class="quick-ref-item">
                                <strong>Primary Role</strong>
                                <span>Loan Officer / PA</span>
                            </div>
                            <div class="quick-ref-item">
                                <strong>Key Action</strong>
                                <span>Manage Borrowers</span>
                            </div>
                            <div class="quick-ref-item">
                                <strong>Surefire Contact</strong>
                                <span>CMGmarketing@cmgfi.com</span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- AI Agents Tab -->
            <div id="agentsContent" class="tab-content">
                <section id="heatmap" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">üéØ</span>
                        <h2 class="section-title">AI Agent Opportunity Heat Map</h2>
                    </div>

                    <p style="color: var(--text-secondary); margin-bottom: 20px;">Click on any tile to view the corresponding agent details and build prompt.</p>

                    <div class="heat-map-grid">
                        <div class="heat-tile high" onclick="scrollToAgent('agent1')">
                            <div class="heat-score">85</div>
                            <div class="heat-name">Privacy Advisor</div>
                            <div class="heat-desc">Decision Support ‚Ä¢ Step 0</div>
                        </div>
                        <div class="heat-tile high" onclick="scrollToAgent('agent2')">
                            <div class="heat-score">82</div>
                            <div class="heat-name">Borrower Setup Agent</div>
                            <div class="heat-desc">Auto-Configure ‚Ä¢ Step 1</div>
                        </div>
                        <div class="heat-tile medium" onclick="scrollToAgent('agent3')">
                            <div class="heat-score">65</div>
                            <div class="heat-name">Surefire Sync Monitor</div>
                            <div class="heat-desc">Monitoring ‚Ä¢ Step 4</div>
                        </div>
                    </div>
                </section>

                <section id="agent1" class="content-section">
                    <div class="agent-card" data-agent="agent1">
                        <div class="agent-header">
                            <div>
                                <div class="agent-title">Privacy Advisor Agent</div>
                                <div class="agent-type">Decision Support / Conversation Analysis</div>
                            </div>
                            <div class="agent-score">
                                <div class="agent-score-value" style="color: var(--accent-amber);">85</div>
                                <div class="agent-score-label">Priority Score</div>
                            </div>
                        </div>

                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">
                            Analyzes borrower communication to automatically detect privacy preferences and recommend joint vs. separate application structure based on conversation context.
                        </p>

                        <div class="agent-flow">
                            <div class="agent-flow-step">üìß Email/Chat Input</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">üîç NLP Analysis</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">üéØ Privacy Detection</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">üìã Recommendation</div>
                        </div>

                        <div class="agent-metrics">
                            <div class="agent-metric">
                                <div class="agent-metric-value">3 min</div>
                                <div class="agent-metric-label">Time Saved</div>
                            </div>
                            <div class="agent-metric">
                                <div class="agent-metric-value">95%</div>
                                <div class="agent-metric-label">Accuracy</div>
                            </div>
                            <div class="agent-metric">
                                <div class="agent-metric-value">Medium</div>
                                <div class="agent-metric-label">Complexity</div>
                            </div>
                        </div>

                        <button class="view-prompt-btn" onclick="openPromptModal('agent1')">‚ú® View AI Prompt to Build This Agent</button>
                    </div>
                </section>

                <section id="agent2" class="content-section">
                    <div class="agent-card" data-agent="agent2">
                        <div class="agent-header">
                            <div>
                                <div class="agent-title">Borrower Setup Automation Agent</div>
                                <div class="agent-type">Data Integration / Auto-Configure</div>
                            </div>
                            <div class="agent-score">
                                <div class="agent-score-value" style="color: var(--accent-amber);">82</div>
                                <div class="agent-score-label">Priority Score</div>
                            </div>
                        </div>

                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">
                            Automatically configures borrower positions, application structure, and credit report type based on privacy decision and relationship details.
                        </p>

                        <div class="agent-flow">
                            <div class="agent-flow-step">üìã Privacy Decision</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">‚öôÔ∏è Configure URLA</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">üìä Set Credit Type</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">‚úì Validate Setup</div>
                        </div>

                        <div class="agent-metrics">
                            <div class="agent-metric">
                                <div class="agent-metric-value">5 min</div>
                                <div class="agent-metric-label">Time Saved</div>
                            </div>
                            <div class="agent-metric">
                                <div class="agent-metric-value">99%</div>
                                <div class="agent-metric-label">Accuracy</div>
                            </div>
                            <div class="agent-metric">
                                <div class="agent-metric-value">Low</div>
                                <div class="agent-metric-label">Complexity</div>
                            </div>
                        </div>

                        <button class="view-prompt-btn" onclick="openPromptModal('agent2')">‚ú® View AI Prompt to Build This Agent</button>
                    </div>
                </section>

                <section id="agent3" class="content-section">
                    <div class="agent-card" data-agent="agent3">
                        <div class="agent-header">
                            <div>
                                <div class="agent-title">Surefire Sync Monitor</div>
                                <div class="agent-type">Monitoring / Alert System</div>
                            </div>
                            <div class="agent-score">
                                <div class="agent-score-value" style="color: var(--accent-blue);">65</div>
                                <div class="agent-score-label">Priority Score</div>
                            </div>
                        </div>

                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">
                            Monitors borrower deletions in CLEAR and automatically alerts marketing team to sync changes with Surefire system.
                        </p>

                        <div class="agent-flow">
                            <div class="agent-flow-step">üóëÔ∏è Delete Event</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">üì° Detect Change</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">üìß Email Alert</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">‚úì Log Action</div>
                        </div>

                        <div class="agent-metrics">
                            <div class="agent-metric">
                                <div class="agent-metric-value">2 min</div>
                                <div class="agent-metric-label">Time Saved</div>
                            </div>
                            <div class="agent-metric">
                                <div class="agent-metric-value">100%</div>
                                <div class="agent-metric-label">Alert Rate</div>
                            </div>
                            <div class="agent-metric">
                                <div class="agent-metric-value">Low</div>
                                <div class="agent-metric-label">Complexity</div>
                            </div>
                        </div>

                        <button class="view-prompt-btn" onclick="openPromptModal('agent3')">‚ú® View AI Prompt to Build This Agent</button>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Prompt Modal -->
    <div class="modal-overlay" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">‚ú® AI Agent Build Prompt</h3>
                <div class="modal-header-buttons">
                    <button class="modal-btn copy" onclick="copyPrompt()">üìã Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">‚úï Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <div class="prompt-section-title">Agent Purpose</div>
                    <div class="prompt-content" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <div class="prompt-section-title">Full Build Prompt</div>
                    <div class="prompt-content" id="promptFull"></div>
                </div>
                <div class="prompt-section">
                    <div class="prompt-section-title">Integration Points</div>
                    <div class="prompt-content" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="copySuccess">‚úì Copied to clipboard!</div>

    <script>
        // Agent Prompts Data
        const agentPrompts = {
            agent1: {
                title: "Privacy Advisor Agent",
                type: "Decision Support",
                complexity: "Medium",
                priority: "High (85)",
                purpose: "Analyzes borrower communication to detect privacy preferences and recommend joint vs. separate application structure.",
                fullPrompt: `You are building a Privacy Advisor Agent for CMG Financial's CLEAR 2.0 LOS.

AGENT NAME: Privacy Advisor Agent
TYPE: Decision Support / NLP Analysis

OBJECTIVE:
Analyze borrower communications (emails, chat transcripts, notes) to detect privacy preferences regarding financial information sharing. Recommend whether to proceed with a Joint Application (Borrower & Co-Borrower) or Separate Applications (Borrower / Borrower).

INPUT DATA SOURCES:
1. Email communications
   - Sender, recipient, subject, body text
2. Chat/conversation transcripts
   - Participant names, message history
3. Loan officer notes
   - Free-text notes about borrower preferences

DECISION LOGIC:
| Signal Detected | Privacy Preference | Recommendation |
|-----------------|-------------------|----------------|
| "keep finances separate" | Private | Separate Applications |
| "don't want them to see" | Private | Separate Applications |
| "share everything" | Open | Joint Application |
| "we're married" + no privacy concern | Open | Joint Application |
| Explicit privacy request | Private | Separate Applications |
| No privacy indicators | Unknown | Prompt LO to ask |

OUTPUT FORMAT:
{
  "recommendation": "joint" | "separate" | "ask_borrower",
  "confidence": 0.0-1.0,
  "detected_signals": ["signal1", "signal2"],
  "reasoning": "Brief explanation",
  "suggested_question": "Question to ask if confidence < 0.7"
}

ERROR HANDLING:
- If no communication provided: Return "ask_borrower" with suggested privacy question
- If conflicting signals: Return lower confidence and recommend verification`,
                integration: `CLEAR 2.0 Integration Points:
- Input: Surefire email history, Clear Notes, Velocify conversation logs
- Output: Loan Summary ‚Üí Borrower Type recommendation
- Trigger: New loan creation with multiple borrowers
- API: POST /api/v1/borrower/privacy-analysis`
            },
            agent2: {
                title: "Borrower Setup Automation Agent",
                type: "Data Integration",
                complexity: "Low",
                priority: "High (82)",
                purpose: "Automatically configures borrower positions, application structure, and credit report type based on privacy decision.",
                fullPrompt: `You are building a Borrower Setup Automation Agent for CMG Financial's CLEAR 2.0 LOS.

AGENT NAME: Borrower Setup Automation Agent
TYPE: Data Integration / Auto-Configure

OBJECTIVE:
Based on the privacy decision and borrower relationship, automatically configure the URLA with correct borrower positions, application structure (joint vs separate), and credit report ordering type.

INPUT DATA SOURCES:
1. Privacy Decision
   - "joint" or "separate"
2. Borrower Information
   - Names, SSNs, contact info, relationship
3. Occupancy Details
   - Intended occupancy type for each borrower

CONFIGURATION RULES:
| Privacy Decision | Occupancy Match | Credit Report Type | Application Structure |
|------------------|-----------------|-------------------|----------------------|
| Joint | Yes | Joint | Borrower & Co-Borrower |
| Separate | N/A | Individual (x2) | Borrower / Borrower |
| Joint | No | ERROR | Cannot proceed - notify LO |

FIELD MAPPING:
- Borrower 1 ‚Üí Position: Primary, App: 1
- Borrower 2 (Joint) ‚Üí Position: Co-Borrower, App: 1
- Borrower 2 (Separate) ‚Üí Position: Primary, App: 2

OUTPUT FORMAT:
{
  "success": true,
  "configuration": {
    "application_count": 1 | 2,
    "credit_report_type": "joint" | "individual",
    "borrower_1": { "position": "primary", "app": 1 },
    "borrower_2": { "position": "co-borrower" | "primary", "app": 1 | 2 }
  },
  "actions_taken": ["Created joint application", "Set credit type to joint"]
}

ERROR HANDLING:
- Occupancy mismatch on joint: Block and alert LO with specific error
- Missing required fields: List missing fields and block configuration`,
                integration: `CLEAR 2.0 Integration Points:
- Input: Privacy Advisor output, URLA Borrower section
- Output: URLA configuration, Credit ordering setup
- Trigger: Privacy decision confirmed
- API: POST /api/v1/borrower/auto-configure`
            },
            agent3: {
                title: "Surefire Sync Monitor",
                type: "Monitoring / Alert",
                complexity: "Low",
                priority: "Medium (65)",
                purpose: "Monitors borrower deletions and automatically alerts marketing team to sync with Surefire.",
                fullPrompt: `You are building a Surefire Sync Monitor Agent for CMG Financial's CLEAR 2.0 LOS.

AGENT NAME: Surefire Sync Monitor
TYPE: Monitoring / Alert System

OBJECTIVE:
Monitor borrower deletion events in CLEAR 2.0 and automatically generate alerts to the marketing team (CMGmarketing@cmgfi.com) to ensure Surefire records are updated accordingly.

INPUT DATA SOURCES:
1. CLEAR Event Log
   - Event type: "borrower_deleted"
   - Loan number, borrower name, deletion timestamp
2. User Context
   - Who performed the deletion
   - Reason (if provided)

MONITORING LOGIC:
1. Listen for "borrower_deleted" events
2. Extract borrower details and loan information
3. Generate formatted email alert
4. Log the alert for audit trail

EMAIL TEMPLATE:
Subject: [Action Required] Surefire Update - Borrower Removed - Loan #{loan_number}

Body:
A borrower has been removed from CLEAR 2.0 and requires Surefire synchronization.

Loan Number: {loan_number}
Removed Borrower: {borrower_name}
Removed By: {user_name}
Timestamp: {timestamp}
Remaining Borrowers: {remaining_list}

Please update Surefire records to reflect this change.

OUTPUT FORMAT:
{
  "alert_sent": true,
  "email_id": "unique_id",
  "recipients": ["CMGmarketing@cmgfi.com"],
  "loan_number": "TEST123456",
  "borrower_removed": "John Smith",
  "logged_at": "2026-01-26T10:30:00Z"
}

ERROR HANDLING:
- Email send failure: Retry 3 times, then create support ticket
- Missing borrower data: Log warning and send partial alert`,
                integration: `CLEAR 2.0 Integration Points:
- Input: CLEAR event bus ‚Üí borrower_deleted events
- Output: Outlook email via Graph API, Audit log entry
- Trigger: Any borrower deletion in Manage Borrowers
- API: Event subscription + POST /api/v1/alerts/surefire-sync`
            }
        };

        // Tab Switching
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(tab + 'Content').classList.add('active');

            document.getElementById('workflowNav').style.display = tab === 'workflow' ? 'block' : 'none';
            document.getElementById('agentsNav').style.display = tab === 'agents' ? 'block' : 'none';
        }

        // Scroll to Agent
        function scrollToAgent(agentId) {
            document.querySelectorAll('.heat-tile').forEach(tile => tile.classList.remove('highlighted'));
            document.querySelectorAll('.agent-card').forEach(card => card.classList.remove('highlighted'));

            event.target.closest('.heat-tile').classList.add('highlighted');

            const agentCard = document.querySelector(`[data-agent="${agentId}"]`);
            if (agentCard) {
                agentCard.classList.add('highlighted');
                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // Modal Functions
        let currentPromptText = '';

        function openPromptModal(agentId) {
            const agent = agentPrompts[agentId];
            document.getElementById('modalTitle').textContent = '‚ú® ' + agent.title + ' - Build Prompt';
            document.getElementById('promptTags').innerHTML = `
                <span class="prompt-tag type">${agent.type}</span>
                <span class="prompt-tag complexity">${agent.complexity}</span>
                <span class="prompt-tag priority">${agent.priority}</span>
            `;
            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptFull').textContent = agent.fullPrompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            currentPromptText = agent.fullPrompt;

            document.getElementById('promptModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').style.display = 'none';
            document.body.style.overflow = '';
        }

        async function copyPrompt() {
            try {
                await navigator.clipboard.writeText(currentPromptText);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy to clipboard');
            }
        }

        // Close modal on outside click
        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });

        // Escape key closes modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closePromptModal();
        });

        // Scroll spy for navigation
        const sections = document.querySelectorAll('.content-section');
        const navItems = document.querySelectorAll('.nav-item');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) {
                    item.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
