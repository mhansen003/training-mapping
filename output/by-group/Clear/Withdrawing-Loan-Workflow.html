<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Withdrawing a Loan - CLEAR 2.0 Workflow | CMG Training Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root { --bg-primary: #0a0f1a; --bg-secondary: #111827; --bg-card: #1a2234; --accent-blue: #3b82f6; --accent-teal: #14b8a6; --accent-amber: #f59e0b; --accent-rose: #f43f5e; --accent-green: #22c55e; --accent-purple: #8b5cf6; --text-primary: #f1f5f9; --text-secondary: #94a3b8; --text-muted: #64748b; --border-subtle: rgba(255,255,255,0.08); --sidebar-width: 280px; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; }
        .breadcrumb { background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%); padding: 14px 25px; display: flex; align-items: center; gap: 12px; font-size: 0.95rem; position: fixed; top: 0; left: 0; right: 0; z-index: 1001; border-bottom: 1px solid var(--border-subtle); }
        .breadcrumb a { color: var(--text-secondary); text-decoration: none; font-weight: 600; padding: 8px 16px; background: rgba(255,255,255,0.05); border-radius: 8px; transition: all 0.2s; border: 1px solid var(--border-subtle); }
        .breadcrumb a:hover { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); border-color: rgba(59, 130, 246, 0.3); }
        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }
        .sidebar { position: fixed; top: 54px; left: 0; width: var(--sidebar-width); height: calc(100vh - 54px); background: var(--bg-secondary); overflow-y: auto; z-index: 1000; border-right: 1px solid var(--border-subtle); display: flex; flex-direction: column; }
        .sidebar-header { padding: 25px 20px; background: rgba(0,0,0,0.3); border-bottom: 1px solid var(--border-subtle); }
        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }
        .sidebar-tabs { display: flex; border-bottom: 1px solid var(--border-subtle); }
        .sidebar-tab { flex: 1; padding: 14px 10px; text-align: center; font-size: 0.8rem; font-weight: 700; color: var(--text-muted); cursor: pointer; transition: all 0.2s; border-bottom: 3px solid transparent; background: none; border-left: none; border-right: none; border-top: none; }
        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }
        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }
        .nav-item { display: flex; align-items: center; gap: 12px; padding: 14px 20px; color: var(--text-secondary); text-decoration: none; border-left: 3px solid transparent; transition: all 0.2s ease; cursor: pointer; }
        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }
        .nav-number { background: rgba(255,255,255,0.1); color: var(--text-secondary); width: 28px; height: 28px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.85rem; flex-shrink: 0; }
        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }
        .sidebar-footer { padding: 20px; border-top: 1px solid var(--border-subtle); background: rgba(0,0,0,0.2); }
        .doc-btn { display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 14px 20px; background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; text-decoration: none; font-size: 0.95rem; }
        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }
        .header { background: var(--bg-card); border: 1px solid var(--border-subtle); padding: 35px; border-radius: 16px; margin-bottom: 30px; position: relative; overflow: hidden; }
        .header::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%), radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%); pointer-events: none; }
        .header h1 { font-size: 2.2rem; font-weight: 800; margin-bottom: 10px; position: relative; background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }
        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }
        .header .meta-item { background: rgba(255,255,255,0.05); border: 1px solid var(--border-subtle); padding: 8px 16px; border-radius: 8px; font-size: 0.9rem; color: var(--text-secondary); }
        .legend { display: flex; flex-wrap: wrap; gap: 15px; padding: 18px 22px; background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 12px; margin-bottom: 25px; }
        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }
        .section { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; margin-bottom: 25px; overflow: hidden; scroll-margin-top: 75px; }
        .section-header { background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%); border-bottom: 1px solid var(--border-subtle); padding: 22px 25px; display: flex; align-items: center; gap: 18px; }
        .section-number { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 1.3rem; flex-shrink: 0; }
        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }
        .workflow-diagram { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 28px; margin-bottom: 22px; }
        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }
        .flow-node { padding: 14px 22px; border-radius: 10px; text-align: center; font-size: 0.9rem; font-weight: 600; min-width: 150px; border: 1px solid var(--border-subtle); }
        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }
        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }
        .field-table th { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); padding: 14px 18px; text-align: left; font-weight: 600; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.05em; border-bottom: 1px solid var(--border-subtle); }
        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }
        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .exception-box, .tip-box, .info-box { padding: 18px 22px; margin: 18px 0; border-radius: 0 10px 10px 0; }
        .exception-box { background: rgba(244, 63, 94, 0.08); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; }
        .tip-box { background: rgba(34, 197, 94, 0.08); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; }
        .info-box { background: rgba(59, 130, 246, 0.08); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; }
        .info-box p, .tip-box p, .exception-box p { color: var(--text-secondary); }
        .quick-ref { background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%); border: 1px solid var(--border-subtle); padding: 28px; border-radius: 16px; margin-top: 30px; }
        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); overflow-x: auto; }
        .agent-header { background: var(--bg-card); border: 1px solid var(--border-subtle); padding: 35px; border-radius: 16px; margin-bottom: 30px; position: relative; overflow: hidden; }
        .agent-header::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%), radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%); pointer-events: none; }
        .agent-header h1 { font-size: 2.2rem; font-weight: 800; margin-bottom: 10px; position: relative; background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }
        .agent-summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 35px; }
        .agent-summary-card { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 14px; padding: 25px; text-align: center; }
        .agent-summary-value { font-size: 2.5rem; font-weight: 800; background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }
        .heat-legend { display: flex; gap: 25px; padding: 18px 22px; background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 12px; margin-bottom: 25px; flex-wrap: wrap; }
        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; }
        .heat-map-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .heat-item { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 20px; position: relative; overflow: hidden; transition: transform 0.2s, box-shadow 0.2s; cursor: pointer; }
        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-score { position: absolute; top: 15px; right: 15px; font-size: 1.8rem; font-weight: 800; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); }
        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }
        .agent-card { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; overflow: hidden; transition: transform 0.2s, box-shadow 0.2s; scroll-margin-top: 75px; }
        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }
        .agent-card.highlight { animation: highlightPulse 2s ease; }
        @keyframes highlightPulse { 0% { box-shadow: 0 0 0 3px var(--accent-purple); } 50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5); } 100% { box-shadow: none; } }
        .agent-card-header { padding: 22px; display: flex; align-items: flex-start; gap: 18px; border-bottom: 1px solid var(--border-subtle); }
        .agent-icon { width: 55px; height: 55px; background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 1.6rem; flex-shrink: 0; }
        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; }
        .agent-priority { padding: 6px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }
        .agent-flow { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 10px; padding: 18px; margin-bottom: 20px; }
        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; }
        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }
        .agent-step { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); color: white; padding: 8px 14px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; }
        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }
        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .agent-stat { background: rgba(0,0,0,0.2); border-radius: 8px; padding: 12px; text-align: center; }
        .agent-stat-value { font-size: 1.3rem; font-weight: 800; background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; margin-top: 4px; }
        .agent-prompt-btn { width: 100%; margin-top: 18px; padding: 14px 20px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%); border: 1px solid rgba(139, 92, 246, 0.4); border-radius: 10px; color: var(--accent-purple); font-weight: 700; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 10px; font-size: 0.9rem; }
        .agent-prompt-btn:hover { background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%); transform: translateY(-2px); }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(10, 15, 26, 0.9); z-index: 2000; justify-content: center; align-items: center; padding: 20px; backdrop-filter: blur(5px); }
        .modal-overlay.show { display: flex; }
        .modal { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 16px; width: 100%; max-width: 900px; max-height: 90vh; display: flex; flex-direction: column; }
        .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); color: white; padding: 22px 28px; display: flex; justify-content: space-between; align-items: center; border-radius: 16px 16px 0 0; }
        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }
        .modal-btn { padding: 10px 18px; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; font-size: 0.9rem; }
        .modal-btn.copy { background: white; color: var(--accent-purple); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }
        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }
        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; }
        .prompt-box { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); border-radius: 10px; padding: 20px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); white-space: pre-wrap; }
        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }
        .copy-success { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--accent-green); color: white; padding: 18px 35px; border-radius: 10px; font-weight: 700; z-index: 3000; display: none; }
        @media (max-width: 900px) { .sidebar { display: none; } .main-content { margin-left: 0; padding: 75px 20px 30px 20px; } .agent-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <nav class="breadcrumb">
        <a href="../../index.html">üè† Portal Home</a>
        <span class="separator">‚Ä∫</span>
        <a href="./index.html">üè¶ CLEAR 2.0</a>
        <span class="separator">‚Ä∫</span>
        <span class="current">üö´ Withdrawing a Loan</span>
    </nav>

    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>üö´ Withdrawing a Loan</h2>
            <p>Interactive Workflow Guide</p>
        </div>
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">üìã Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">ü§ñ AI Agents</button>
        </div>
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active"><span class="nav-number">1</span><span class="nav-label">Overview</span></a>
            <a href="#section-2" class="nav-item"><span class="nav-number">2</span><span class="nav-label">Withdrawal Reasons</span></a>
            <a href="#section-3" class="nav-item"><span class="nav-number">3</span><span class="nav-label">Process Steps</span></a>
            <a href="#section-4" class="nav-item"><span class="nav-number">4</span><span class="nav-label">Adverse Action</span></a>
        </nav>
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active"><span class="nav-number">üìä</span><span class="nav-label">Summary</span></a>
            <a href="#agent-heatmap" class="nav-item"><span class="nav-number">üî•</span><span class="nav-label">Heat Map</span></a>
            <a href="#agent-details" class="nav-item"><span class="nav-number">ü§ñ</span><span class="nav-label">Agent Details</span></a>
        </nav>
        <div class="sidebar-footer"><a href="./index.html" class="doc-btn">‚Üê Back to CLEAR Index</a></div>
    </aside>

    <main class="main-content">
        <div id="workflow-panel" class="tab-panel active">
            <div class="header">
                <h1>üö´ Withdrawing a Loan in CLEAR 2.0</h1>
                <p class="subtitle">Complete workflow for loan withdrawal and adverse action compliance</p>
                <div class="meta">
                    <span class="meta-item">üè¢ System: CLEAR 2.0</span>
                    <span class="meta-item">üë§ Role: LO / Processor</span>
                    <span class="meta-item">üìÖ Updated: Jan 2026</span>
                    <span class="meta-item">‚è±Ô∏è Duration: 5-10 min</span>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception/Warning</span></div>
            </div>

            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title">
                        <h2>Loan Withdrawal Overview</h2>
                        <span>Understanding when and how to withdraw loans</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Decision to Withdraw</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node decision">Reason?</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Process Withdrawal</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node exception">Send Notices</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>üìã What is Loan Withdrawal?</h4>
                        <p>Loan withdrawal is the process of closing a loan file that will not proceed to funding. This can be initiated by the borrower or the lender, and requires proper documentation and compliance notices depending on the reason.</p>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr><th>Withdrawal Type</th><th>Initiated By</th><th>Notices Required</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>Borrower Withdrawal</strong></td><td>Borrower request</td><td>Withdrawal letter only</td></tr>
                            <tr><td><strong>Denial</strong></td><td>Lender decision</td><td>Adverse Action Notice (ECOA)</td></tr>
                            <tr><td><strong>File Expired</strong></td><td>System/Time</td><td>Depends on status reached</td></tr>
                            <tr><td><strong>Incomplete</strong></td><td>Lender</td><td>Notice of Incompleteness</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title">
                        <h2>Withdrawal Reason Codes</h2>
                        <span>Selecting the correct withdrawal reason</span>
                    </div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead>
                            <tr><th>Reason Code</th><th>Description</th><th>Adverse Action?</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>01</strong></td><td>Borrower requested withdrawal</td><td>No</td></tr>
                            <tr><td><strong>02</strong></td><td>Borrower went with another lender</td><td>No</td></tr>
                            <tr><td><strong>03</strong></td><td>Property issues (inspection, appraisal)</td><td>Depends</td></tr>
                            <tr><td><strong>04</strong></td><td>Credit denied</td><td><span class="badge required-badge">Yes</span></td></tr>
                            <tr><td><strong>05</strong></td><td>Income/employment issues</td><td><span class="badge required-badge">Yes</span></td></tr>
                            <tr><td><strong>06</strong></td><td>DTI too high</td><td><span class="badge required-badge">Yes</span></td></tr>
                            <tr><td><strong>07</strong></td><td>File incomplete/expired</td><td>Depends on stage</td></tr>
                        </tbody>
                    </table>

                    <div class="exception-box">
                        <h4>‚ö†Ô∏è ECOA Compliance Alert</h4>
                        <p>Any withdrawal where credit was a factor in the decision requires an Adverse Action Notice within 30 days. Failure to provide proper notice is a compliance violation.</p>
                    </div>
                </div>
            </section>

            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title">
                        <h2>Process Withdrawal in CLEAR</h2>
                        <span>Step-by-step withdrawal procedure</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Open Loan</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Loan Actions Menu</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Select Withdraw</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node input">Select Reason Code</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node input">Add Notes</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node output">Submit</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr><th>Step</th><th>Action</th><th>Notes</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>1</td><td>Navigate to Loan Actions</td><td>Top menu or right-click loan</td></tr>
                            <tr><td>2</td><td>Select "Withdraw Loan"</td><td>Requires appropriate permissions</td></tr>
                            <tr><td>3</td><td>Choose Reason Code</td><td>Select most accurate reason</td></tr>
                            <tr><td>4</td><td>Enter Withdrawal Notes</td><td>Document specifics for audit trail</td></tr>
                            <tr><td>5</td><td>Confirm Withdrawal</td><td>System updates status automatically</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>üí° Pro Tip: Document Everything</h4>
                        <p>Always add detailed notes explaining the withdrawal reason. This creates an audit trail and helps if questions arise later about the decision.</p>
                    </div>
                </div>
            </section>

            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title">
                        <h2>Adverse Action Requirements</h2>
                        <span>ECOA compliance for credit-related withdrawals</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node decision">Credit-Related?</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node exception">Generate AA Notice</div>
                            <span class="flow-arrow">‚Üí</span>
                            <div class="flow-node action">Send Within 30 Days</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>üìú Adverse Action Notice Contents</h4>
                        <p>The notice must include:</p>
                        <ul style="margin-top: 10px; margin-left: 20px; color: var(--text-secondary);">
                            <li>Statement of action taken</li>
                            <li>Name and address of creditor</li>
                            <li>ECOA notice</li>
                            <li>Specific reasons for denial (up to 4)</li>
                            <li>Credit bureau information (if credit report was used)</li>
                        </ul>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr><th>Timeline</th><th>Requirement</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>Within 30 days</strong></td><td>Adverse action notice must be sent</td></tr>
                            <tr><td><strong>Within 60 days</strong></td><td>Applicant can request specific reasons (if not provided)</td></tr>
                            <tr><td><strong>Record Retention</strong></td><td>Keep records for 25 months minimum</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="quick-ref" class="quick-ref">
                <h3>‚ö° Quick Reference Card</h3>
                <pre>
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                LOAN WITHDRAWAL QUICK GUIDE                       ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë  PATH: Loan Actions ‚Üí Withdraw Loan                              ‚ïë
‚ïë                                                                  ‚ïë
‚ïë  ADVERSE ACTION REQUIRED WHEN:                                   ‚ïë
‚ïë  ‚Ä¢ Credit denied                                                 ‚ïë
‚ïë  ‚Ä¢ Income/employment insufficient                                ‚ïë
‚ïë  ‚Ä¢ DTI exceeds guidelines                                        ‚ïë
‚ïë  ‚Ä¢ Any lender-initiated denial based on creditworthiness         ‚ïë
‚ïë                                                                  ‚ïë
‚ïë  NO ADVERSE ACTION WHEN:                                         ‚ïë
‚ïë  ‚Ä¢ Borrower requests withdrawal                                  ‚ïë
‚ïë  ‚Ä¢ Borrower went elsewhere                                       ‚ïë
‚ïë  ‚Ä¢ Pure property issues (not borrower-related)                   ‚ïë
‚ïë                                                                  ‚ïë
‚ïë  TIMELINE:                                                       ‚ïë
‚ïë  ‚Ä¢ Adverse Action Notice: Within 30 days                         ‚ïë
‚ïë  ‚Ä¢ Record Retention: 25 months minimum                           ‚ïë
‚ïë                                                                  ‚ïë
‚ïë  ALWAYS: Document reason thoroughly in notes!                    ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
                </pre>
            </section>
        </div>

        <div id="agents-panel" class="tab-panel">
            <div class="agent-header">
                <h1>ü§ñ AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for Loan Withdrawal Workflow</p>
                <div class="meta">
                    <span class="meta-item">ü§ñ 2 Agent Candidates Identified</span>
                    <span class="meta-item">‚è±Ô∏è Est. 35% Time Savings</span>
                </div>
            </div>

            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card"><div class="agent-summary-value">2</div><div class="agent-summary-label">Agent Candidates</div></div>
                <div class="agent-summary-card"><div class="agent-summary-value">0</div><div class="agent-summary-label">Critical Priority</div></div>
                <div class="agent-summary-card"><div class="agent-summary-value">35%</div><div class="agent-summary-label">Time Savings</div></div>
                <div class="agent-summary-card"><div class="agent-summary-value">60%</div><div class="agent-summary-label">Automation Potential</div></div>
            </div>

            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong></span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong></span></div>
            </div>

            <div class="heat-map-container">
                <div class="heat-map-title">üî• Automation Priority Heat Map</div>
                <div class="heat-map-grid">
                    <div class="heat-item high" onclick="scrollToAgent('agent-aa-generator')">
                        <div class="heat-score">82</div>
                        <div class="heat-name">AA Notice Generator</div>
                        <div class="heat-desc">Auto-generate adverse action notices</div>
                        <div class="heat-metrics"><div class="heat-metric">Volume: <span>Med</span></div><div class="heat-metric">Impact: <span>Compliance</span></div></div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-withdrawal-validator')">
                        <div class="heat-score">68</div>
                        <div class="heat-name">Withdrawal Validator</div>
                        <div class="heat-desc">Validate reason code selection</div>
                        <div class="heat-metrics"><div class="heat-metric">Volume: <span>Med</span></div><div class="heat-metric">Impact: <span>Quality</span></div></div>
                    </div>
                </div>
            </div>

            <h2 style="margin-bottom: 25px; color: var(--text-primary);" id="agent-details">ü§ñ Agent Details</h2>
            <div class="agent-grid">
                <div class="agent-card" id="agent-aa-generator">
                    <div class="agent-card-header">
                        <div class="agent-icon">üìÑ</div>
                        <div class="agent-info">
                            <div class="agent-name">Adverse Action Generator</div>
                            <div class="agent-type">Document Generation Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically generates compliant Adverse Action notices based on withdrawal reason code, ensuring all required ECOA elements are included and proper reasons are cited.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Workflow</div>
                            <div class="agent-flow-diagram">
                                <span class="agent-step">Detect Withdrawal</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Check Reason</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Generate Notice</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Queue for Send</span>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">82</div><div class="agent-stat-label">Priority</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">40%</div><div class="agent-stat-label">Time Save</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">High</div><div class="agent-stat-label">ROI</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="openPromptModal('aa-generator')">‚ú® View AI Build Prompt</button>
                    </div>
                </div>

                <div class="agent-card" id="agent-withdrawal-validator">
                    <div class="agent-card-header">
                        <div class="agent-icon">‚úÖ</div>
                        <div class="agent-info">
                            <div class="agent-name">Withdrawal Validator</div>
                            <div class="agent-type">Validation Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Reviews withdrawal reason code selection against loan history and data to ensure the correct code is chosen and required notices will be triggered appropriately.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Workflow</div>
                            <div class="agent-flow-diagram">
                                <span class="agent-step">Review Loan</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Analyze History</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Validate Code</span>
                                <span class="agent-arrow">‚Üí</span>
                                <span class="agent-step">Flag Issues</span>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">68</div><div class="agent-stat-label">Priority</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">25%</div><div class="agent-stat-label">Time Save</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">ROI</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="openPromptModal('withdrawal-validator')">‚ú® View AI Build Prompt</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="modal-overlay" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">‚ú® AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPrompt()">üìã Copy</button>
                    <button class="modal-btn close" onclick="closeModal()">‚úï Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section"><h4>üéØ Purpose</h4><div class="prompt-box" id="promptPurpose"></div></div>
                <div class="prompt-section"><h4>üìù Full Build Prompt</h4><div class="prompt-box" id="promptFull"></div></div>
                <div class="prompt-section"><h4>üîó Integration Points</h4><div class="prompt-box" id="promptIntegration"></div></div>
            </div>
        </div>
    </div>
    <div class="copy-success" id="copySuccess">‚úì Copied to clipboard!</div>

    <script>
        const agentPrompts = {
            'aa-generator': {
                title: 'Adverse Action Generator',
                tags: ['Document Generation', 'ECOA Compliance', 'Automation'],
                purpose: 'Automatically generate compliant Adverse Action notices when loans are withdrawn for credit-related reasons.',
                fullPrompt: `You are an Adverse Action Notice Generator Agent for CMG Financial.

ROLE: Generate ECOA-compliant Adverse Action notices for loan withdrawals.

TRIGGER CONDITIONS:
- Withdrawal reason indicates credit denial
- Withdrawal reason indicates income/employment issues
- Withdrawal reason indicates DTI exceeds guidelines
- Any lender-initiated denial based on creditworthiness

NOTICE REQUIREMENTS (ECOA/Reg B):
1. Statement of action taken
2. Creditor name and address
3. ECOA notice statement
4. Specific reasons for denial (up to 4)
5. Credit score disclosure (if credit report used)
6. Credit bureau contact information
7. Applicant's right to obtain free credit report

REASON CODE MAPPING:
04 (Credit denied) ‚Üí "Credit history does not meet our standards"
05 (Income/employment) ‚Üí "Unable to verify income" or "Insufficient income"
06 (DTI too high) ‚Üí "Debt-to-income ratio exceeds guidelines"

OUTPUT FORMAT:
- Generate letter in standard ECOA format
- Include all required disclosures
- Populate from loan data (names, addresses, loan number)
- Set delivery deadline (30 days from withdrawal)`,
                integration: `Integration Points:
‚Ä¢ CLEAR 2.0 Withdrawal Event Trigger
‚Ä¢ Borrower Contact Information
‚Ä¢ Credit Bureau Data (for score disclosure)
‚Ä¢ Document Generation System
‚Ä¢ Mail/Delivery Queue

Compliance Tracking:
‚Ä¢ Log notice generation date
‚Ä¢ Track delivery confirmation
‚Ä¢ Flag if 30-day deadline approaching`
            },
            'withdrawal-validator': {
                title: 'Withdrawal Validator',
                tags: ['Validation', 'Compliance', 'Quality Control'],
                purpose: 'Validate withdrawal reason code selection to ensure compliance and proper notice triggering.',
                fullPrompt: `You are a Withdrawal Validation Agent for CMG Financial.

ROLE: Review withdrawal reason codes against loan history to ensure accuracy and compliance.

VALIDATION CHECKS:

1. REASON CODE ACCURACY:
   - If borrower requested withdrawal, verify documentation exists
   - If credit-related, verify underwriting notes support this
   - If property-related, verify appraisal/inspection issues documented

2. ADVERSE ACTION TRIGGER:
   - If reason code should trigger AA notice, verify it will
   - If reason code does NOT trigger AA but circumstances suggest it should, FLAG

3. DOCUMENTATION COMPLETENESS:
   - Withdrawal notes are populated
   - Supporting documentation in file
   - Proper approvals obtained (if required)

4. TIMELINE COMPLIANCE:
   - Check if AA notice deadline will be met
   - Flag if withdrawal is late relative to decision date

OUTPUT:
‚úì VALIDATED: Reason code appropriate, notices will trigger correctly
‚ö† WARNING: [Specific concern - e.g., "Consider if AA notice needed"]
‚úó BLOCKED: [Critical issue - e.g., "Reason code conflicts with UW notes"]`,
                integration: `Integration Points:
‚Ä¢ CLEAR 2.0 Withdrawal Workflow
‚Ä¢ Underwriting Notes/History
‚Ä¢ Document Repository
‚Ä¢ Compliance Alert System

Triggers:
‚Ä¢ Pre-withdrawal validation (before submission)
‚Ä¢ Post-withdrawal audit
‚Ä¢ Periodic compliance review`
            }
        };

        let currentPrompt = '';
        function switchTab(tab) { document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active')); event.target.classList.add('active'); document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active')); document.getElementById(tab + '-panel').classList.add('active'); document.getElementById('workflow-nav').style.display = tab === 'workflow' ? 'block' : 'none'; document.getElementById('agents-nav').style.display = tab === 'agents' ? 'block' : 'none'; }
        function scrollToAgent(agentId) { const card = document.getElementById(agentId); if (card) { card.scrollIntoView({ behavior: 'smooth', block: 'center' }); card.classList.add('highlight'); setTimeout(() => card.classList.remove('highlight'), 2000); } }
        function openPromptModal(agentKey) { const agent = agentPrompts[agentKey]; document.getElementById('modalTitle').textContent = '‚ú® ' + agent.title + ' - Build Prompt'; document.getElementById('promptTags').innerHTML = agent.tags.map(t => `<span class="prompt-tag">${t}</span>`).join(''); document.getElementById('promptPurpose').textContent = agent.purpose; document.getElementById('promptFull').textContent = agent.fullPrompt; document.getElementById('promptIntegration').textContent = agent.integration; currentPrompt = agent.fullPrompt; document.getElementById('promptModal').classList.add('show'); document.body.style.overflow = 'hidden'; }
        function closeModal() { document.getElementById('promptModal').classList.remove('show'); document.body.style.overflow = ''; }
        async function copyPrompt() { try { await navigator.clipboard.writeText(currentPrompt); document.getElementById('copySuccess').style.display = 'block'; setTimeout(() => document.getElementById('copySuccess').style.display = 'none', 2000); } catch (e) { alert('Failed to copy'); } }
        document.getElementById('promptModal').addEventListener('click', (e) => { if (e.target.id === 'promptModal') closeModal(); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });
        document.querySelectorAll('.nav-item').forEach(item => { item.addEventListener('click', function() { document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active')); this.classList.add('active'); }); });
    </script>
</body>
</html>
