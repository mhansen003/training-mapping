<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Search - CLEAR 2.0 Workflow | CMG Training Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root { --bg-primary: #0a0f1a; --bg-secondary: #111827; --bg-card: #1a2234; --accent-blue: #3b82f6; --accent-teal: #14b8a6; --accent-amber: #f59e0b; --accent-rose: #f43f5e; --accent-green: #22c55e; --accent-purple: #8b5cf6; --text-primary: #f1f5f9; --text-secondary: #94a3b8; --text-muted: #64748b; --border-subtle: rgba(255,255,255,0.08); }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg-primary); color: var(--text-primary); min-height: 100vh; display: flex; flex-direction: column; }
        .breadcrumb { background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%); padding: 14px 25px; display: flex; align-items: center; gap: 12px; font-size: 0.95rem; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border-subtle); }
        .breadcrumb a { color: var(--text-secondary); text-decoration: none; font-weight: 600; padding: 8px 16px; background: rgba(255,255,255,0.05); border-radius: 8px; border: 1px solid var(--border-subtle); }
        .breadcrumb a:hover { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }
        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }
        .page-layout { display: flex; flex: 1; overflow: hidden; }
        .sidebar { width: 280px; background: var(--bg-secondary); border-right: 1px solid var(--border-subtle); display: flex; flex-direction: column; position: sticky; top: 52px; height: calc(100vh - 52px); }
        .sidebar-header { padding: 24px 20px; border-bottom: 1px solid var(--border-subtle); }
        .sidebar-title { font-size: 1rem; font-weight: 700; margin-bottom: 4px; }
        .sidebar-subtitle { font-size: 0.8rem; color: var(--text-muted); }
        .tab-switcher { display: flex; padding: 12px; gap: 8px; border-bottom: 1px solid var(--border-subtle); }
        .tab-btn { flex: 1; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; font-size: 0.85rem; background: transparent; color: var(--text-muted); }
        .tab-btn.active { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; }
        .section-nav { flex: 1; overflow-y: auto; padding: 12px; }
        .nav-group { margin-bottom: 20px; }
        .nav-group-title { font-size: 0.7rem; font-weight: 700; text-transform: uppercase; color: var(--text-muted); padding: 8px 12px; }
        .nav-item { display: block; padding: 10px 12px; color: var(--text-secondary); text-decoration: none; font-size: 0.85rem; border-radius: 6px; border-left: 3px solid transparent; }
        .nav-item:hover { background: rgba(255,255,255,0.05); }
        .nav-item.active { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); border-left-color: var(--accent-blue); }
        .main-content { flex: 1; overflow-y: auto; padding: 40px; max-width: 1000px; }
        .content-section { margin-bottom: 50px; }
        .section-header { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid var(--border-subtle); }
        .section-icon { font-size: 2rem; }
        .section-title { font-size: 1.6rem; font-weight: 800; }
        .flow-diagram { display: flex; flex-wrap: wrap; gap: 12px; margin: 25px 0; align-items: center; }
        .flow-node { padding: 14px 20px; border-radius: 10px; font-weight: 600; font-size: 0.9rem; text-align: center; min-width: 120px; }
        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; }
        .flow-arrow { color: var(--text-muted); font-size: 1.5rem; }
        .info-box { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 20px; margin: 20px 0; }
        .info-box.tip { border-left: 4px solid var(--accent-green); }
        .info-box-title { font-weight: 700; margin-bottom: 8px; }
        .field-table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 0.9rem; }
        .field-table th, .field-table td { padding: 14px 16px; text-align: left; border-bottom: 1px solid var(--border-subtle); }
        .field-table th { background: var(--bg-card); font-weight: 700; }
        .field-table td { color: var(--text-secondary); }
        .step-list { counter-reset: step; list-style: none; padding: 0; }
        .step-item { display: flex; gap: 16px; margin-bottom: 20px; padding: 18px; background: var(--bg-card); border-radius: 10px; border: 1px solid var(--border-subtle); }
        .step-item::before { counter-increment: step; content: counter(step); display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); border-radius: 50%; font-weight: 700; flex-shrink: 0; }
        .step-content h4 { font-weight: 700; margin-bottom: 6px; }
        .step-content p { color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .heat-map-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; margin: 20px 0; }
        .heat-tile { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 10px; padding: 16px; cursor: pointer; transition: all 0.3s; position: relative; }
        .heat-tile::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; }
        .heat-tile.medium::before { background: var(--accent-blue); }
        .heat-tile.low::before { background: var(--accent-green); }
        .heat-tile:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0,0,0,0.3); }
        .heat-score { font-size: 1.8rem; font-weight: 800; margin-bottom: 8px; }
        .heat-tile.medium .heat-score { color: var(--accent-blue); }
        .heat-tile.low .heat-score { color: var(--accent-green); }
        .heat-name { font-weight: 700; font-size: 0.9rem; margin-bottom: 4px; }
        .heat-desc { font-size: 0.8rem; color: var(--text-muted); }
        .agent-card { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 14px; padding: 24px; margin-bottom: 20px; }
        .agent-header { display: flex; justify-content: space-between; margin-bottom: 18px; }
        .agent-title { font-size: 1.2rem; font-weight: 700; }
        .agent-type { font-size: 0.8rem; color: var(--text-muted); margin-top: 4px; }
        .agent-score-value { font-size: 2rem; font-weight: 800; }
        .agent-score-label { font-size: 0.75rem; color: var(--text-muted); }
        .agent-flow { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; margin: 18px 0; padding: 16px; background: rgba(0,0,0,0.2); border-radius: 8px; }
        .agent-flow-step { padding: 8px 14px; background: var(--bg-secondary); border-radius: 6px; font-size: 0.8rem; font-weight: 600; }
        .agent-flow-arrow { color: var(--text-muted); }
        .agent-metrics { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin: 18px 0; }
        .agent-metric { text-align: center; padding: 12px; background: rgba(0,0,0,0.2); border-radius: 8px; }
        .agent-metric-value { font-size: 1.1rem; font-weight: 700; color: var(--accent-teal); }
        .agent-metric-label { font-size: 0.75rem; color: var(--text-muted); margin-top: 4px; }
        .view-prompt-btn { width: 100%; padding: 14px; background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); border: none; border-radius: 8px; color: white; font-weight: 700; cursor: pointer; }
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(10, 15, 26, 0.9); z-index: 2000; justify-content: center; align-items: center; padding: 20px; }
        .modal { background: var(--bg-card); border-radius: 16px; width: 100%; max-width: 800px; max-height: 90vh; display: flex; flex-direction: column; }
        .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); color: white; padding: 22px 28px; display: flex; justify-content: space-between; border-radius: 16px 16px 0 0; }
        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-btn { padding: 10px 18px; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; }
        .modal-btn.copy { background: white; color: var(--accent-purple); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }
        .modal-body { padding: 28px; overflow-y: auto; }
        .prompt-section { margin-bottom: 24px; }
        .prompt-section-title { font-weight: 700; color: var(--accent-teal); margin-bottom: 12px; text-transform: uppercase; }
        .prompt-content { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); padding: 18px; border-radius: 10px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; white-space: pre-wrap; color: var(--text-secondary); }
        .prompt-tags { display: flex; gap: 8px; margin-bottom: 20px; }
        .prompt-tag { padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }
        .prompt-tag.type { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); }
        .prompt-tag.complexity { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }
        .prompt-tag.priority { background: rgba(245, 158, 11, 0.15); color: var(--accent-amber); }
        #copySuccess { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--accent-green); color: white; padding: 18px 35px; border-radius: 10px; font-weight: 700; z-index: 3000; display: none; }
        .quick-ref { background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(20, 184, 166, 0.1) 100%); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 24px; margin: 30px 0; }
        .quick-ref h3 { font-size: 1.1rem; font-weight: 700; margin-bottom: 16px; }
        .quick-ref-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; }
        .quick-ref-item { background: rgba(0,0,0,0.2); padding: 14px; border-radius: 8px; }
        .quick-ref-item strong { display: block; font-size: 0.8rem; color: var(--text-muted); margin-bottom: 4px; }
    </style>
</head>
<body>
    <nav class="breadcrumb">
        <a href="../../index.html">üè† Portal Home</a>
        <span class="separator">‚Ä∫</span>
        <a href="./index.html">üè¶ CLEAR 2.0</a>
        <span class="separator">‚Ä∫</span>
        <span class="current">üîç Global Search</span>
    </nav>

    <div class="page-layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">Global Search</div>
                <div class="sidebar-subtitle">CLEAR 2.0 Module</div>
            </div>
            <div class="tab-switcher">
                <button class="tab-btn active" onclick="switchTab('workflow')">üìã Workflow</button>
                <button class="tab-btn" onclick="switchTab('agents')">ü§ñ AI Agents</button>
            </div>
            <nav class="section-nav" id="workflowNav">
                <div class="nav-group">
                    <div class="nav-group-title">Overview</div>
                    <a href="#overview" class="nav-item active">Search Overview</a>
                    <a href="#search-fields" class="nav-item">Searchable Fields</a>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">Features</div>
                    <a href="#using-search" class="nav-item">Using Search</a>
                    <a href="#show-details" class="nav-item">Show All Details</a>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">Reference</div>
                    <a href="#quickref" class="nav-item">Quick Reference</a>
                </div>
            </nav>
            <nav class="section-nav" id="agentsNav" style="display: none;">
                <div class="nav-group">
                    <div class="nav-group-title">Heat Map</div>
                    <a href="#heatmap" class="nav-item active">Priority Overview</a>
                </div>
                <div class="nav-group">
                    <div class="nav-group-title">Agents</div>
                    <a href="#agent1" class="nav-item">Natural Language Search</a>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <div id="workflowContent" class="tab-content active">
                <section id="overview" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">üîç</span>
                        <h2 class="section-title">Global Search in CLEAR 2.0</h2>
                    </div>
                    <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 20px;">
                        Global Search allows you to quickly find loans across your pipeline using various identifiers. Located in the top navigation bar, it searches across loan numbers, borrower names, property addresses, and more.
                    </p>
                    <div class="flow-diagram">
                        <div class="flow-node start">Search Bar</div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="flow-node action">Enter Query</div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="flow-node action">View Results</div>
                        <span class="flow-arrow">‚Üí</span>
                        <div class="flow-node output">Open Loan</div>
                    </div>
                </section>

                <section id="search-fields" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">üìã</span>
                        <h2 class="section-title">Searchable Fields</h2>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Example</th><th>Notes</th></tr></thead>
                        <tbody>
                            <tr><td><strong>Loan Number</strong></td><td>TEST0000100887</td><td>Full or partial loan number</td></tr>
                            <tr><td><strong>Borrower Name</strong></td><td>John Smith</td><td>First name, last name, or both</td></tr>
                            <tr><td><strong>Property Address</strong></td><td>123 Main Street</td><td>Street address or city</td></tr>
                            <tr><td><strong>Email Address</strong></td><td>john@email.com</td><td>Borrower email</td></tr>
                            <tr><td><strong>Phone Number</strong></td><td>555-123-4567</td><td>Borrower phone</td></tr>
                        </tbody>
                    </table>
                </section>

                <section id="using-search" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">‚å®Ô∏è</span>
                        <h2 class="section-title">Using Global Search</h2>
                    </div>
                    <ol class="step-list">
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Locate Search Bar</h4>
                                <p>The Global Search bar is located at the top of CLEAR, labeled "Search Leads and Loans".</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Enter Search Term</h4>
                                <p>Type your search query - loan number, borrower name, address, or other identifier.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <div class="step-content">
                                <h4>Review Results</h4>
                                <p>Results appear as you type. Click on a result to open that loan.</p>
                            </div>
                        </li>
                    </ol>
                </section>

                <section id="show-details" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">üìñ</span>
                        <h2 class="section-title">Show All Details</h2>
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 20px;">
                        Click "Show All Details" in the search results to expand and see additional loan information without opening the full loan file.
                    </p>
                    <div class="info-box tip">
                        <div class="info-box-title">üí° Pro Tip</div>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Use Show All Details when you need to quickly verify loan information or check borrower contact details without navigating away from your current view.</p>
                    </div>
                </section>

                <section id="quickref" class="content-section">
                    <div class="quick-ref">
                        <h3>‚ö° Quick Reference</h3>
                        <div class="quick-ref-grid">
                            <div class="quick-ref-item"><strong>Location</strong><span>Top Navigation Bar</span></div>
                            <div class="quick-ref-item"><strong>Shortcut</strong><span>Click Search Bar</span></div>
                            <div class="quick-ref-item"><strong>Result Limit</strong><span>Top 10 Matches</span></div>
                            <div class="quick-ref-item"><strong>Expand Results</strong><span>Show All Details</span></div>
                        </div>
                    </div>
                </section>
            </div>

            <div id="agentsContent" class="tab-content">
                <section id="heatmap" class="content-section">
                    <div class="section-header">
                        <span class="section-icon">üéØ</span>
                        <h2 class="section-title">AI Agent Opportunity Heat Map</h2>
                    </div>
                    <div class="heat-map-grid">
                        <div class="heat-tile medium" onclick="scrollToAgent('agent1')">
                            <div class="heat-score">55</div>
                            <div class="heat-name">NLP Search Agent</div>
                            <div class="heat-desc">Natural Language ‚Ä¢ Query</div>
                        </div>
                    </div>
                </section>

                <section id="agent1" class="content-section">
                    <div class="agent-card" data-agent="agent1">
                        <div class="agent-header">
                            <div>
                                <div class="agent-title">Natural Language Search Agent</div>
                                <div class="agent-type">NLP / Query Understanding</div>
                            </div>
                            <div class="agent-score">
                                <div class="agent-score-value" style="color: var(--accent-blue);">55</div>
                                <div class="agent-score-label">Priority Score</div>
                            </div>
                        </div>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">
                            Understands natural language queries like "show me loans closing this week" and translates them into system searches.
                        </p>
                        <div class="agent-flow">
                            <div class="agent-flow-step">üí¨ Natural Query</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">ü§ñ NLP Parse</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">üîç Build Filter</div>
                            <span class="agent-flow-arrow">‚Üí</span>
                            <div class="agent-flow-step">üìä Results</div>
                        </div>
                        <div class="agent-metrics">
                            <div class="agent-metric"><div class="agent-metric-value">1 min</div><div class="agent-metric-label">Time Saved</div></div>
                            <div class="agent-metric"><div class="agent-metric-value">80%</div><div class="agent-metric-label">Accuracy</div></div>
                            <div class="agent-metric"><div class="agent-metric-value">High</div><div class="agent-metric-label">Complexity</div></div>
                        </div>
                        <button class="view-prompt-btn" onclick="openPromptModal('agent1')">‚ú® View AI Prompt to Build This Agent</button>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <div class="modal-overlay" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">‚ú® AI Agent Build Prompt</h3>
                <div style="display: flex; gap: 12px;">
                    <button class="modal-btn copy" onclick="copyPrompt()">üìã Copy</button>
                    <button class="modal-btn close" onclick="closePromptModal()">‚úï</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section"><div class="prompt-section-title">Purpose</div><div class="prompt-content" id="promptPurpose"></div></div>
                <div class="prompt-section"><div class="prompt-section-title">Build Prompt</div><div class="prompt-content" id="promptFull"></div></div>
                <div class="prompt-section"><div class="prompt-section-title">Integration</div><div class="prompt-content" id="promptIntegration"></div></div>
            </div>
        </div>
    </div>
    <div id="copySuccess">‚úì Copied!</div>

    <script>
        const agentPrompts = {
            agent1: {
                title: "Natural Language Search Agent", type: "NLP", complexity: "High", priority: "Medium (55)",
                purpose: "Understands natural language queries and translates them into system searches.",
                fullPrompt: `You are building a Natural Language Search Agent for CLEAR 2.0.

AGENT NAME: Natural Language Search Agent
TYPE: NLP / Query Understanding

OBJECTIVE:
Parse natural language queries and convert them into structured search filters.

EXAMPLE QUERIES:
- "loans closing this week" ‚Üí filter: closing_date within 7 days
- "John's purchase loans" ‚Üí filter: borrower contains "John" AND purpose = "Purchase"
- "locked loans expiring tomorrow" ‚Üí filter: lock_status = "Locked" AND lock_expiration = tomorrow

OUTPUT: { "filters": [...], "sort": "...", "confidence": 0.85 }`,
                integration: `Integration: Search API, Filter builder, Pipeline query engine`
            }
        };

        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tab + 'Content').classList.add('active');
            document.getElementById('workflowNav').style.display = tab === 'workflow' ? 'block' : 'none';
            document.getElementById('agentsNav').style.display = tab === 'agents' ? 'block' : 'none';
        }

        function scrollToAgent(id) {
            document.querySelector(`[data-agent="${id}"]`).scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        let currentPromptText = '';
        function openPromptModal(id) {
            const a = agentPrompts[id];
            document.getElementById('modalTitle').textContent = '‚ú® ' + a.title;
            document.getElementById('promptTags').innerHTML = `<span class="prompt-tag type">${a.type}</span><span class="prompt-tag complexity">${a.complexity}</span><span class="prompt-tag priority">${a.priority}</span>`;
            document.getElementById('promptPurpose').textContent = a.purpose;
            document.getElementById('promptFull').textContent = a.fullPrompt;
            document.getElementById('promptIntegration').textContent = a.integration;
            currentPromptText = a.fullPrompt;
            document.getElementById('promptModal').style.display = 'flex';
        }
        function closePromptModal() { document.getElementById('promptModal').style.display = 'none'; }
        async function copyPrompt() {
            await navigator.clipboard.writeText(currentPromptText);
            document.getElementById('copySuccess').style.display = 'block';
            setTimeout(() => document.getElementById('copySuccess').style.display = 'none', 2000);
        }
        document.getElementById('promptModal').onclick = e => { if (e.target.id === 'promptModal') closePromptModal(); };
    </script>
</body>
</html>
