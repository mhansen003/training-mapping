<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Byte - Exporting a Fannie Mae File - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }
        .flow-node.end { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box, .warning-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        .warning-box { background: rgba(245, 158, 11, 0.08); border-color: var(--accent-amber); border: 1px solid rgba(245, 158, 11, 0.2); border-left: 4px solid var(--accent-amber); }
        .warning-box h4 { color: var(--accent-amber); margin-bottom: 10px; font-size: 1rem; }
        .warning-box p, .warning-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Purpose Cards */
        .purpose-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .purpose-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .purpose-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .purpose-card-header h4 { font-size: 1.05rem; }
        .purpose-card-body { padding: 22px; }
        .purpose-card ul { list-style: none; padding: 0; }
        .purpose-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .purpose-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">Exporting a Fannie Mae File</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Fannie Mae Export</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-0" class="nav-item active">
                <span class="nav-number">0</span>
                <span class="nav-label">Acceptable Purpose</span>
            </a>
            <a href="#section-1" class="nav-item">
                <span class="nav-number">1</span>
                <span class="nav-label">Copy Loan</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Open in Byte</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">State Agency Setup</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Export File</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Validation</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Create & Save</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Exporting a Fannie Mae File</h1>
                <p class="subtitle">MISMO 3.4 XML File Export Process for Byte Pro Enterprise</p>
                <div class="meta">
                    <span class="meta-item">System: Byte Pro Enterprise</span>
                    <span class="meta-item">Role: Loan Processor / Closer</span>
                    <span class="meta-item">Updated: Nov 14, 2025</span>
                    <span class="meta-item">Duration: 2-5 min</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 0: Acceptable Purpose -->
            <section id="section-0" class="section">
                <div class="section-header">
                    <div class="section-number">0</div>
                    <div class="section-title"><h2>Acceptable Purpose</h2><span>When to use this export functionality</span></div>
                </div>
                <div class="section-content">
                    <div class="summary-grid">
                        <div class="summary-card"><h4>Use Cases</h4><div class="value">3</div><div class="label">Approved export purposes</div></div>
                        <div class="summary-card"><h4>File Format</h4><div class="value">3.4</div><div class="label">MISMO XML Version</div></div>
                        <div class="summary-card"><h4>Output</h4><div class="value">XML</div><div class="label">Fannie Mae DU Format</div></div>
                    </div>

                    <div class="purpose-grid">
                        <div class="purpose-card">
                            <div class="purpose-card-header"><h4>Approved Export Purposes</h4></div>
                            <div class="purpose-card-body">
                                <ul>
                                    <li><span class="check-icon">1</span> USDA Loans to import to GUS</li>
                                    <li><span class="check-icon">2</span> Brokered Loans to import to Broker's site</li>
                                    <li><span class="check-icon">3</span> State Agency Bond Loans to import to State Agencies site</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Restricted Use</h4>
                        <p>Only use this functionality for the three purposes listed above. Do NOT use this export for standard Fannie Mae submissions - use the direct DU integration instead.</p>
                    </div>
                </div>
            </section>

            <!-- Section 1: Copy Loan -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Copy Loan (If Needed)</h2><span>Duplicate the loan file before export</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node decision">Need to Copy?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Yes - Copy Needed</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Copy Loan in Clear</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">No Copy Needed</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Proceed to Byte</div>
                            </div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Copy Loan in Clear</h4>
                        <p>You can Copy a Loan in Clear using the designated job aid. This is useful when you need to preserve the original loan file while creating a modified version for export.</p>
                    </div>

                    <div class="exception-box">
                        <h4>Cannot Copy in Clear?</h4>
                        <p>If you cannot copy the file in Clear, reach out to <strong>red@cmgfi.com</strong> for assistance.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Open in Byte -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Open Loan in Byte</h2><span>Access the loan in Byte Pro Enterprise</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open Byte Pro Enterprise</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Search for Loan</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Open Loan File</div>
                        </div>
                    </div>

                    <div class="warning-box">
                        <h4>Important Requirement</h4>
                        <p>Exporting a Fannie Mae 3.4 MISMO file <strong>MUST be done within Byte</strong>. This export cannot be performed from Clear or any other system.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: State Agency Setup -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>State Agency Bond Setup</h2><span>Configure mortgage type for State Agency exports</span></div>
                </div>
                <div class="section-content">
                    <div class="decision-tree">
                        <h3>State Agency Bond Decision</h3>
                        <div class="tree-node level-1"><span class="tree-label">Exporting to State Agency Bond Site?</span></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-green); color: white;">YES</span> -> Follow steps below BEFORE export</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--text-muted); color: white;">NO</span> -> Skip to Export File section</div>
                    </div>

                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">State Agency Pre-Export Steps</h3>
                        <div class="flow-row">
                            <div class="flow-node action">Go to Home Screen</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Navigate to Loan Program</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node input">Change Mortgage Type to "State Agency"</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node output">Proceed to Export</div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Critical Post-Export Step</h4>
                        <p>Once the 3.4 file is exported, you <strong>MUST</strong> return the Mortgage Type dropdown field to <strong>Conv, FHA, or VA</strong> as appropriate. Failure to do so will affect subsequent loan processing.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Export Fannie Mae File -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Access Export Screen</h2><span>Navigate to the Fannie Mae export interface</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Open All Screens or Interfaces</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Select "Fannie Mae"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Click "Export Fannie Mae File"</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Navigation Path</th><th>Location</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">All Screens</strong></td><td>Fannie Mae option in screen list</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Interfaces</strong></td><td>Fannie Mae interface option</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Quick Access</h4>
                        <p>The Fannie Mae screen can be found in either "All Screens" or "Interfaces" menu. Both paths lead to the same export functionality.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Validation -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Configure & Validate</h2><span>Set file version and run validation</span></div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead><tr><th>Setting</th><th>Value</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr>
                                <td><strong style="color: var(--text-primary);">File Version</strong></td>
                                <td><span class="badge required-badge">Fannie Mae DU/MISMO 3.4 (XML)</span></td>
                                <td>Ensure this is selected - required format</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="decision-tree">
                        <h3>Validation Level Selection</h3>
                        <div class="tree-node level-1"><span class="tree-label">What type of loan?</span></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-blue); color: white;">USDA / Brokered</span> -> Use <strong>Full Validation</strong></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-amber); color: var(--bg-primary);">Special Features</span> -> Use <strong>Minimum Validation</strong></div>
                    </div>

                    <div class="purpose-grid">
                        <div class="purpose-card">
                            <div class="purpose-card-header"><h4>Full Validation</h4></div>
                            <div class="purpose-card-body">
                                <ul>
                                    <li><span class="check-icon">OK</span> USDA Loans</li>
                                    <li><span class="check-icon">OK</span> Brokered Loans</li>
                                    <li><span class="check-icon">OK</span> Standard conforming loans</li>
                                </ul>
                            </div>
                        </div>
                        <div class="purpose-card">
                            <div class="purpose-card-header" style="background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%);"><h4>Minimum Validation</h4></div>
                            <div class="purpose-card-body">
                                <ul>
                                    <li><span class="check-icon">OK</span> HELOCs</li>
                                    <li><span class="check-icon">OK</span> Interest Only (IO)</li>
                                    <li><span class="check-icon">OK</span> Prepayment Penalties</li>
                                    <li><span class="check-icon">OK</span> Other Fannie Mae unsupported features</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Validation Process</h3>
                        <div class="flow-row">
                            <div class="flow-node action">Click "Validate 1003"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Errors Found?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Yes - Errors</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node exception">Correct Errors</div>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Re-Validate</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">No Errors</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Proceed to Create</div>
                            </div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Validation Errors Must Be Corrected</h4>
                        <p>Validation errors will display if any issues are found. All errors <strong>must be corrected</strong> before creating the file. The system will not allow file creation with outstanding validation errors.</p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Create & Save -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Create File & Save</h2><span>Generate and locate the FNMA file</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action" style="background: linear-gradient(135deg, var(--accent-green), #16a34a);">Click "Create File"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">File Saved to Desktop</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node end">Complete</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>File Output Location</h4>
                        <p>The FNMA file will be saved to the <strong>user's desktop</strong> for use with:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Broker sites</li>
                            <li>USDA GUS system</li>
                            <li>State Agency Bond sites</li>
                        </ul>
                    </div>

                    <div class="tip-box">
                        <h4>File Confirmation</h4>
                        <p>After creation, a dialog will appear asking "Would you like to open that folder now?" Click <strong>Yes</strong> to navigate directly to the saved file, or <strong>No</strong> to close the dialog.</p>
                    </div>

                    <div class="warning-box">
                        <h4>State Agency Bond Post-Export</h4>
                        <p>If you exported for a State Agency Bond Site, remember to:</p>
                        <ol style="margin-top: 10px; margin-left: 20px;">
                            <li>Go to the Home screen</li>
                            <li>Navigate to the Loan Program section</li>
                            <li>Return the Mortgage Type dropdown field to <strong>Conv, FHA, or VA</strong> as appropriate</li>
                        </ol>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
ACCEPTABLE PURPOSES:
  * USDA Loans -> Import to GUS
  * Brokered Loans -> Import to Broker's site
  * State Agency Bond Loans -> Import to State Agencies site

NAVIGATION:
  All Screens OR Interfaces -> Fannie Mae -> Export Fannie Mae File

FILE SETTINGS:
  * File Version: Fannie Mae DU/MISMO 3.4 (XML)
  * Full Validation: USDA, Brokered Loans
  * Minimum Validation: HELOCs, IO, Prepayment Penalties

STATE AGENCY BOND WORKFLOW:
  1. BEFORE Export: Change Mortgage Type to "State Agency"
  2. Export the file
  3. AFTER Export: Change Mortgage Type back to Conv/FHA/VA

VALIDATION:
  1. Click "Validate 1003"
  2. Correct any errors displayed
  3. Re-validate until no errors
  4. Click "Create File"

OUTPUT:
  * File saved to user's desktop
  * Format: [LoanNumber].xml

SUPPORT:
  * Cannot copy file in Clear? Contact: red@cmgfi.com
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for Fannie Mae Export Workflow</p>
                <div class="meta">
                    <span class="meta-item">7 Process Steps Analyzed</span>
                    <span class="meta-item">4 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 60% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">4</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2</div>
                    <div class="agent-summary-label">High Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">60%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">90%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-autovalidate')" title="Click to view agent details">
                        <div class="heat-score">92</div>
                        <div class="heat-name">Auto-Validation Agent</div>
                        <div class="heat-desc">Pre-validate loan data before export</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>5</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-stateagency')" title="Click to view agent details">
                        <div class="heat-score">78</div>
                        <div class="heat-name">State Agency Workflow</div>
                        <div class="heat-desc">Automate mortgage type switching</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>3,6</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-filetracker')" title="Click to view agent details">
                        <div class="heat-score">65</div>
                        <div class="heat-name">Export File Tracker</div>
                        <div class="heat-desc">Track and organize exported files</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>6</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-purposeguard')" title="Click to view agent details">
                        <div class="heat-score">55</div>
                        <div class="heat-name">Purpose Guard Agent</div>
                        <div class="heat-desc">Prevent misuse of export function</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>0</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: Auto-Validation -->
                <div class="agent-card" id="agent-autovalidate">
                    <div class="agent-card-header">
                        <div class="agent-icon">V</div>
                        <div class="agent-info">
                            <div class="agent-name">Auto-Validation Agent</div>
                            <div class="agent-type">Data Quality Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically validates loan data against MISMO 3.4 requirements before the user initiates export. Identifies and flags errors proactively, reducing validation iteration cycles.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Loan Data</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">MISMO Rules</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Validate</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Fix/Proceed</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">2min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">95%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('autovalidate')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: State Agency Workflow -->
                <div class="agent-card" id="agent-stateagency">
                    <div class="agent-card-header">
                        <div class="agent-icon">S</div>
                        <div class="agent-info">
                            <div class="agent-name">State Agency Workflow Agent</div>
                            <div class="agent-type">Process Automation Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automates the mortgage type switching for State Agency Bond exports. Handles the pre-export change to "State Agency" and the post-export reversion to the original loan type.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Detect Bond</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Store Type</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Switch</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Restore</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">1min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Error Free</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('stateagency')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: File Tracker -->
                <div class="agent-card" id="agent-filetracker">
                    <div class="agent-card-header">
                        <div class="agent-icon">F</div>
                        <div class="agent-info">
                            <div class="agent-name">Export File Tracker</div>
                            <div class="agent-type">File Management Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Tracks all exported FNMA files, organizes them by loan number and export purpose, and maintains an audit log. Automatically uploads to the correct destination system.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Monitor Desktop</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Detect Export</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Organize</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Upload</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">30sec</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Tracked</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('filetracker')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 4: Purpose Guard -->
                <div class="agent-card" id="agent-purposeguard">
                    <div class="agent-card-header">
                        <div class="agent-icon">G</div>
                        <div class="agent-info">
                            <div class="agent-name">Purpose Guard Agent</div>
                            <div class="agent-type">Compliance Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Monitors export attempts and validates that the loan meets acceptable use criteria (USDA, Brokered, or State Agency Bond). Prevents misuse of the export function and logs all export activity.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Export Request</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Check Purpose</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Allow/Block</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Log</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">0</div><div class="agent-stat-label">Misuse</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Compliance</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('purposeguard')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Exporting a Fannie Mae File - Workflow Markdown</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">X Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Exporting a Fannie Mae File - Byte Pro Enterprise

## Acceptable Purpose
Only use this functionality for:
- USDA Loans to import to GUS
- Brokered Loans to import to Broker's site
- State Agency Bond Loans to import to State Agencies site

## Copy Loan
- Copy a Loan in Clear using the job aid if needed
- If cannot copy in Clear, contact: red@cmgfi.com

## Open Loan in Byte
- Exporting a Fannie Mae 3.4 MISMO file must be done within Byte
- Open your loan in Byte and follow the procedures

## State Agency Bond Setup (If Applicable)
### Before Export:
1. Go to the Home screen
2. Navigate to the Loan program section
3. Change the Mortgage Type to "State Agency"

### After Export:
- Return the Mortgage Type dropdown to Conv, FHA, or VA as appropriate

## Export Fannie Mae File
### Navigation:
- All Screens -> Fannie Mae
- OR Interfaces -> Fannie Mae
- Click "Export Fannie Mae File"

### Settings:
- File Version: Fannie Mae DU/MISMO 3.4 (XML)

### Validation Levels:
| Level | Use Case |
|-------|----------|
| Full Validation | USDA, Brokered Loans |
| Minimum Validation | HELOCs, IO, Prepayment Penalties, etc. |

### Process:
1. Click "Validate 1003"
2. Correct any validation errors displayed
3. Click "Create File"

## Output
- FNMA file saved to user's desktop
- Use with Broker, USDA GUS, or Bond site

---
Updated: November 14, 2025</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">X Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Scroll spy with isScrolling flag and timeout
        let isScrolling = false;
        let scrollTimeout = null;

        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');

        // Handle nav item clicks
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                isScrolling = true;

                // Clear any existing timeout
                if (scrollTimeout) {
                    clearTimeout(scrollTimeout);
                }

                const targetId = this.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);

                if (targetSection) {
                    // Update active state immediately
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');

                    // Scroll to section
                    targetSection.scrollIntoView({ behavior: 'smooth' });

                    // Reset isScrolling after 1000ms
                    scrollTimeout = setTimeout(() => {
                        isScrolling = false;
                    }, 1000);
                }
            });
        });

        function updateActiveNav() {
            // Skip updating if user initiated scroll via nav click
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        window.addEventListener('scroll', updateActiveNav);

        // Modal functions
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                const content = document.getElementById('docContent').textContent;
                await navigator.clipboard.writeText(content);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // ====== AGENT PROMPT SYSTEM ======
        const agentPrompts = {
            autovalidate: {
                name: 'Auto-Validation Agent',
                tags: ['Data Quality', 'MISMO 3.4', 'Low Complexity', 'Critical Priority'],
                purpose: `This agent proactively validates loan data against MISMO 3.4 XML requirements before the user initiates the export process. It identifies missing fields, data format issues, and eligibility problems, reducing validation iteration cycles from multiple attempts to a single pass.`,
                prompt: `You are building a Data Quality Agent for CMG Financial's Byte Pro Enterprise system.

AGENT NAME: Auto-Validation Agent
TYPE: Data Quality / Pre-Export Validation

OBJECTIVE:
Create an agent that continuously monitors loan data and validates it against MISMO 3.4 requirements, alerting users to issues BEFORE they attempt to export.

INPUT DATA:
1. Loan File Data from Byte
   - Borrower Information (Name, SSN, DOB, etc.)
   - Property Information (Address, Type, Value)
   - Loan Terms (Amount, Rate, Term, Type)
   - Income/Employment Data
   - Asset/Liability Data

2. MISMO 3.4 Validation Rules
   - Required field presence
   - Data format requirements
   - Cross-field validation rules
   - Fannie Mae specific requirements

VALIDATION CATEGORIES:

CRITICAL ERRORS (Block Export):
- Missing required borrower fields
- Invalid SSN format
- Missing property address
- Loan amount/value inconsistencies
- Missing loan purpose

WARNINGS (Allow Export with Caution):
- Incomplete employment history
- Missing contact information
- Non-standard property types
- Edge case DTI/LTV values

VALIDATION OUTPUT:
{
  "status": "READY" | "ERRORS" | "WARNINGS",
  "errorCount": 0,
  "warningCount": 0,
  "errors": [
    {
      "field": "Borrower.SSN",
      "issue": "Invalid format - must be 9 digits",
      "location": "URLA Page 1",
      "fix": "Update SSN to valid 9-digit format"
    }
  ],
  "warnings": [...],
  "readinessScore": 0-100
}

ERROR DISPLAY FORMAT:
======================================
VALIDATION RESULTS
======================================
Status: ERRORS FOUND (Cannot Export)

CRITICAL ERRORS (3):
  1. [Borrower] SSN invalid format
     Location: URLA Page 1 > Borrower Info
     Fix: Enter valid 9-digit SSN

  2. [Property] Address missing
     Location: Home Screen > Property
     Fix: Enter complete property address

  3. [Loan] Purpose not selected
     Location: Home Screen > Loan Info
     Fix: Select Purchase/Refinance/Cash-Out
======================================`,
                integration: `INTEGRATION POINTS:
1. Byte Pro Enterprise API
   - Hook into loan data change events
   - Access current loan file data
   - Display validation panel in UI

2. Validation Rules Engine
   - MISMO 3.4 schema validation
   - Fannie Mae DU requirements
   - Custom CMG business rules

3. User Interface
   - Add "Pre-Validate" button to Fannie Mae screen
   - Show real-time validation status indicator
   - Display clickable error list that navigates to field

DEPLOYMENT:
- Embedded validation service in Byte
- Background validation on loan save
- On-demand full validation before export`
            },
            stateagency: {
                name: 'State Agency Workflow Agent',
                tags: ['Process Automation', 'Workflow', 'Medium Complexity', 'High Priority'],
                purpose: `This agent automates the required mortgage type switching for State Agency Bond exports. It stores the original loan type, switches to "State Agency" before export, and automatically reverts to the original type after successful export completion.`,
                prompt: `You are building a Process Automation Agent for CMG Financial's Byte Pro Enterprise system.

AGENT NAME: State Agency Workflow Agent
TYPE: Process Automation / Workflow Management

OBJECTIVE:
Create an agent that fully automates the State Agency Bond export workflow, eliminating the manual mortgage type switching that users frequently forget to complete.

WORKFLOW SEQUENCE:

1. DETECTION PHASE
   Trigger when user:
   - Selects "Export Fannie Mae File"
   - AND loan is identified as State Agency Bond

   Detection Logic:
   - Check loan program for State Agency indicators
   - Check destination system selection
   - Verify with user if unclear

2. PRE-EXPORT PHASE
   Store Original State:
   {
     "loanNumber": "123456",
     "originalMortgageType": "Conv",
     "exportTimestamp": "2025-11-14T10:30:00Z",
     "targetSystem": "StateAgency"
   }

   Execute Change:
   - Navigate to Home Screen > Loan Program
   - Change Mortgage Type to "State Agency"
   - Save changes
   - Log action

3. EXPORT PHASE
   - Proceed with normal export
   - Monitor for success/failure
   - Capture file output location

4. POST-EXPORT PHASE
   On Success:
   - Navigate to Home Screen > Loan Program
   - Restore Mortgage Type to original value
   - Save changes
   - Log completion
   - Notify user of completion

   On Failure:
   - Still restore original Mortgage Type
   - Alert user to export failure
   - Provide error details

ERROR HANDLING:
- If navigation fails: Retry 3 times, then alert user
- If restore fails: Critical alert + manual intervention flag
- If export fails: Log error, restore type, notify user

AUDIT LOG FORMAT:
[2025-11-14 10:30:15] Loan 123456: State Agency export initiated
[2025-11-14 10:30:16] Loan 123456: Stored original type: Conv
[2025-11-14 10:30:18] Loan 123456: Changed to State Agency
[2025-11-14 10:30:25] Loan 123456: Export completed successfully
[2025-11-14 10:30:27] Loan 123456: Restored to Conv
[2025-11-14 10:30:27] Loan 123456: Workflow complete`,
                integration: `INTEGRATION POINTS:
1. Byte Pro Enterprise UI Automation
   - Hook into Export button click event
   - Automate field navigation and updates
   - Handle save confirmations

2. State Management
   - Store original values in secure session
   - Persist across potential system interruptions
   - Clean up after successful completion

3. Notification System
   - In-app notifications for workflow progress
   - Email confirmation of completed exports
   - Alert on any failures requiring attention

4. Audit & Compliance
   - Full audit trail of all changes
   - Timestamp all actions
   - Retain logs for compliance review

RECOVERY MECHANISM:
If agent is interrupted mid-workflow:
- Check for pending restore operations on login
- Alert user to incomplete workflows
- Provide one-click restore option`
            },
            filetracker: {
                name: 'Export File Tracker',
                tags: ['File Management', 'Audit Trail', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent monitors the user's desktop for newly exported FNMA files, organizes them into a structured folder system by loan number and export date, maintains an audit log, and can optionally auto-upload to the destination system.`,
                prompt: `You are building a File Management Agent for CMG Financial's Byte Pro Enterprise system.

AGENT NAME: Export File Tracker
TYPE: File Management / Audit Trail

OBJECTIVE:
Create an agent that tracks all exported FNMA files, organizes them systematically, and provides an audit trail of all export activity for compliance purposes.

MONITORING BEHAVIOR:
Watch Location: User's Desktop
File Pattern: *.xml files matching FNMA format
Trigger: New file creation matching pattern

ORGANIZATION STRUCTURE:
Desktop/
  FNMA_Exports/
    2025-11/
      123456_USDA_2025-11-14_103025.xml
      123457_Broker_2025-11-14_143522.xml
    2025-12/
      ...
    export_log.csv

FILE NAMING CONVENTION:
{LoanNumber}_{Purpose}_{Date}_{Time}.xml
Example: 123456_USDA_2025-11-14_103025.xml

EXPORT LOG FORMAT (CSV):
Timestamp,LoanNumber,Purpose,FileName,FilePath,FileSize,ExportedBy,Destination
2025-11-14 10:30:25,123456,USDA,123456_USDA_2025-11-14_103025.xml,/Desktop/FNMA_Exports/2025-11/...,45KB,jsmith,GUS
2025-11-14 14:35:22,123457,Broker,123457_Broker_2025-11-14_143522.xml,/Desktop/FNMA_Exports/2025-11/...,52KB,jsmith,BrokerSite

AUTO-UPLOAD INTEGRATION:
{
  "destinations": {
    "USDA": {
      "system": "GUS",
      "uploadMethod": "API",
      "credentials": "secure_vault_ref"
    },
    "Broker": {
      "system": "BrokerPortal",
      "uploadMethod": "SFTP",
      "path": "/incoming/loans/"
    },
    "StateAgency": {
      "system": "StateBondSite",
      "uploadMethod": "WebUpload",
      "url": "https://stateagency.gov/upload"
    }
  }
}

AGENT ACTIONS:
1. Detect new XML file on desktop
2. Parse loan number from filename/content
3. Determine export purpose from loan data
4. Move to organized folder structure
5. Rename with standardized convention
6. Log to export_log.csv
7. (Optional) Trigger auto-upload
8. Notify user of organization/upload`,
                integration: `INTEGRATION POINTS:
1. File System Monitoring
   - Windows File System Watcher API
   - Monitor Desktop folder
   - Filter for XML files

2. Byte Pro Enterprise
   - Query loan data for purpose determination
   - Link to loan record in system
   - Update loan status after upload

3. Destination Systems
   - GUS API for USDA uploads
   - SFTP for broker submissions
   - Web automation for state agencies

4. Audit Dashboard
   - Web UI to view all exports
   - Filter by date, loan, purpose
   - Download audit reports

CLEANUP POLICY:
- Archive files older than 90 days
- Compress archived folders
- Retain audit log indefinitely`
            },
            purposeguard: {
                name: 'Purpose Guard Agent',
                tags: ['Compliance', 'Access Control', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent monitors export attempts and validates that the loan meets one of the three acceptable use criteria (USDA, Brokered, or State Agency Bond). It prevents misuse of the export function and maintains an audit log of all export activity.`,
                prompt: `You are building a Compliance Agent for CMG Financial's Byte Pro Enterprise system.

AGENT NAME: Purpose Guard Agent
TYPE: Compliance / Access Control

OBJECTIVE:
Create an agent that enforces acceptable use policy for the Fannie Mae file export function, ensuring exports are only used for approved purposes.

ACCEPTABLE PURPOSES:
1. USDA Loans - For import to GUS
2. Brokered Loans - For import to Broker's site
3. State Agency Bond Loans - For import to State Agencies site

DETECTION LOGIC:

USDA Loan Detection:
- Loan Type = "USDA" OR
- Loan Program contains "Rural Development" OR
- Investor Code = USDA codes

Brokered Loan Detection:
- Loan Channel = "Broker" OR
- Broker Company populated OR
- Broker License # populated

State Agency Bond Detection:
- Loan Program contains "Bond" OR
- Loan Program contains "State Agency" OR
- State program flags set

VALIDATION FLOW:
1. User clicks "Export Fannie Mae File"
2. Agent evaluates loan against criteria
3. If match found:
   - Log purpose detected
   - Allow export to proceed
   - Record in audit trail
4. If no match:
   - Display warning dialog
   - Request justification
   - Log attempt with reason

WARNING DIALOG:
================================
EXPORT PURPOSE VERIFICATION
================================
This loan does not appear to meet
the acceptable use criteria for
Fannie Mae file export.

Acceptable purposes:
- USDA Loans (GUS import)
- Brokered Loans (Broker site)
- State Agency Bond Loans

Detected Loan Type: Conventional
Detected Channel: Retail

Please select a reason to proceed:
[ ] This is actually a brokered loan
[ ] Other (explain): ___________
[ ] Cancel export

[Proceed with Justification] [Cancel]
================================

AUDIT LOG:
{
  "timestamp": "2025-11-14T10:30:00Z",
  "loanNumber": "123456",
  "user": "jsmith",
  "action": "EXPORT_ATTEMPT",
  "detectedPurpose": "NONE",
  "loanType": "Conventional",
  "channel": "Retail",
  "outcome": "BLOCKED",
  "justification": null
}`,
                integration: `INTEGRATION POINTS:
1. Byte Pro Enterprise
   - Hook into Export button event
   - Read loan characteristics
   - Display warning dialogs

2. Compliance Dashboard
   - View all export attempts
   - Filter by outcome (approved/blocked)
   - Generate compliance reports

3. Alert System
   - Notify compliance team of blocked attempts
   - Weekly summary of export activity
   - Escalation for repeated violations

4. Policy Configuration
   - Admin UI to update acceptable purposes
   - Add/remove detection rules
   - Configure warning messages

REPORTING:
Weekly Export Activity Report:
- Total exports: 45
- USDA: 20 (44%)
- Brokered: 18 (40%)
- State Agency: 5 (11%)
- Blocked: 2 (5%)
- Justified overrides: 0`
            }
        };

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Show agent prompt modal
        let currentPromptContent = '';

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = `${agent.name} - Build Prompt`;

            const tagsHtml = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptTags').innerHTML = tagsHtml;

            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            currentPromptContent = `# ${agent.name}\n\n## Purpose\n${agent.purpose}\n\n## Build Prompt\n${agent.prompt}\n\n## Integration Points\n${agent.integration}`;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            try {
                await navigator.clipboard.writeText(currentPromptContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
