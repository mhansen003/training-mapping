<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Initial Disclosures Checklist - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }
        .badge.best-practice-badge { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Checklist Cards */
        .checklist-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .checklist-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .checklist-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .checklist-card-header h4 { font-size: 1.05rem; }
        .checklist-card-body { padding: 22px; }
        .checklist-card ul { list-style: none; padding: 0; }
        .checklist-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .checklist-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* AI Prompt Modal */
        .prompt-modal .modal {
            max-width: 800px;
        }

        .prompt-modal .modal-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
        }

        .prompt-section {
            margin-bottom: 25px;
        }

        .prompt-section h4 {
            color: var(--accent-purple);
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .prompt-tag {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">Initial Disclosures Checklist</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Initial Disclosures</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-0" class="nav-item active">
                <span class="nav-number">0</span>
                <span class="nav-label">Prerequisites</span>
            </a>
            <a href="#section-1" class="nav-item">
                <span class="nav-number">1</span>
                <span class="nav-label">URLA Screen Setup</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Contact Info</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">SmartFees & Property</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Escrow & Insurance</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">PMI/MIP & 4506-C</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Loan Specific Data</span>
            </a>
            <a href="#section-7" class="nav-item">
                <span class="nav-number">7</span>
                <span class="nav-label">Best Practice Items</span>
            </a>
            <a href="#section-8" class="nav-item">
                <span class="nav-number">8</span>
                <span class="nav-label">Order Disclosures</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Initial Disclosures Checklist</h1>
                <p class="subtitle">Sales Team Pre-Disclosure Requirements Workflow</p>
                <div class="meta">
                    <span class="meta-item">System: Byte / CLEAR</span>
                    <span class="meta-item">Role: Sales Team / LO</span>
                    <span class="meta-item">Updated: Nov 20, 2025</span>
                    <span class="meta-item">Duration: 10-20 min</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 0: Prerequisites -->
            <section id="section-0" class="section">
                <div class="section-header">
                    <div class="section-number">0</div>
                    <div class="section-title"><h2>Prerequisites Check</h2><span>Complete LO Checklist in CLEAR first</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">LO Checklist in CLEAR Complete?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">YES</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Proceed to Disclosures</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">NO</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node exception">Complete CLEAR LO Checklist First</div>
                            </div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>Pre-Disclosure Requirements</h4>
                        <p>Before ordering disclosures, ensure all required Sales Team tasks in the LO Checklist in CLEAR have been completed. This checklist ensures data accuracy and compliance.</p>
                    </div>
                    <div class="summary-grid">
                        <div class="summary-card"><h4>Required Items</h4><div class="value">15+</div><div class="label">Must complete before ordering</div></div>
                        <div class="summary-card"><h4>Best Practices</h4><div class="value">5</div><div class="label">For processing submission</div></div>
                        <div class="summary-card"><h4>Reference Docs</h4><div class="value">8</div><div class="label">Linked resources</div></div>
                    </div>
                </div>
            </section>

            <!-- Section 1: URLA Screen Setup -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Top of URLA Screen Setup</h2><span>LO Comp Plan, Lead Type, and Production Assistant</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Open URLA Screen</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Select Retail LO Comp Plan</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Select Lead Type</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node input">Add Production Assistant(s)</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">URLA Header Complete</div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Status</th><th>Notes</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Retail LO Comp Plan</strong></td><td><span class="badge required-badge">Required</span></td><td>Select correct compensation plan for the loan</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Lead Type</strong></td><td><span class="badge required-badge">Required</span></td><td>Identify the source/type of lead</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Production Assistant</strong></td><td><span class="badge required-badge">Required</span></td><td>Add primary PA and additional PAs if applicable</td></tr>
                        </tbody>
                    </table>
                    <div class="tip-box">
                        <h4>Pro Tip</h4>
                        <p>Double-check the Comp Plan selection before proceeding - incorrect selections can cause issues with commission calculations later in the process.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Contact Information -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Borrower Contact Information</h2><span>Email addresses and phone numbers for e-disclosures</span></div>
                </div>
                <div class="section-content">
                    <div class="decision-tree">
                        <h3>Email Address Decision Tree</h3>
                        <div class="tree-node level-1"><span class="tree-label">Borrower Status?</span></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-green); color: white;">Married</span> -> Can use joint email (preferred: separate emails)</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-blue); color: white;">Joint Unmarried</span> -> MUST have individual email accounts</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-teal); color: white;">Solo Borrower</span> -> Must have own individual email account</div>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Status</th><th>Requirements</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Email Address(es)</strong></td><td><span class="badge required-badge">Required</span></td><td>Complete and accurate; unmarried joint borrowers need separate emails</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Mobile/Home Phone</strong></td><td><span class="badge required-badge">Required</span></td><td>For electronic disclosure verification code delivery</td></tr>
                        </tbody>
                    </table>
                    <div class="exception-box">
                        <h4>Joint Unmarried Exception</h4>
                        <p>Joint Unmarried Borrowers or Borrowers on their own application must have their own individual email accounts. One can use a joint account, but the other must use or create a separate account, OR have documents mailed or signed in person.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: SmartFees & Property -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>SmartFees & Property Details</h2><span>Fee validation and accurate property information</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node decision">SmartFees Notification?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Updated Cert Required</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Run/Re-run SmartFees</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">No Notification</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Proceed</div>
                            </div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>Title Fee Updates</h4>
                        <p>If Title Fees were updated due to a written quote from a Title Company, the written quote must be moved to the Final Document Tree in CLEAR Docs. Reference: <strong>Closing Cost Manual</strong></p>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Property Field</th><th>Status</th><th>Validation Method</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Property Type</strong></td><td><span class="badge required-badge">Required</span></td><td>Verify matches actual property</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Property Address</strong></td><td><span class="badge required-badge">Required</span></td><td>Verify via USPS ZIP Code Lookup</td></tr>
                        </tbody>
                    </table>
                    <div class="exception-box">
                        <h4>Locked Loan Address Changes</h4>
                        <p>If the loan is locked and changes are needed to the property address, those changes must be made in <strong>Optimal Blue (OB)</strong>, not in CLEAR.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Escrow & Insurance -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Proposed Payment & Escrow Setup</h2><span>Insurance, taxes, and HOA/PUD fees</span></div>
                </div>
                <div class="section-content">
                    <div class="checklist-grid">
                        <div class="checklist-card">
                            <div class="checklist-card-header"><h4>Insurance Items</h4></div>
                            <div class="checklist-card-body">
                                <ul>
                                    <li><span class="check-icon">[ ]</span> Estimated Hazard Insurance entered</li>
                                    <li><span class="check-icon">[ ]</span> Flood Insurance (if applicable)</li>
                                </ul>
                            </div>
                        </div>
                        <div class="checklist-card">
                            <div class="checklist-card-header"><h4>Fees & Taxes</h4></div>
                            <div class="checklist-card-body">
                                <ul>
                                    <li><span class="check-icon">[ ]</span> HOA Fee (if applicable)</li>
                                    <li><span class="check-icon">[ ]</span> PUD Fee (if applicable)</li>
                                    <li><span class="check-icon">[ ]</span> Property Taxes (correct amount)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Additional Fields</th><th>Status</th><th>Location</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Source</strong></td><td><span class="badge required-badge">Required</span></td><td>Above Property Information & Gifts section</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Declarations</strong></td><td><span class="badge required-badge">Required</span></td><td>Declarations section - must be completed</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">HMDA / Government Monitoring</strong></td><td><span class="badge required-badge">Required</span></td><td>Government Monitoring section</td></tr>
                        </tbody>
                    </table>
                    <div class="tip-box">
                        <h4>Pro Tip</h4>
                        <p>Reference the <strong>Closing Cost Manual</strong> for detailed guidance on escrow setup and fee calculations.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: PMI/MIP & 4506-C -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>PMI/MIP Details & 4506-C Forms</h2><span>Mortgage insurance and tax transcript authorization</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">PMI/MIP Decision Flow</h3>
                        <div class="flow-row"><div class="flow-node decision">Loan Type?</div></div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Conventional</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node input">MI Factor, Financed/Not Financed</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">FHA</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node input">UFMIP + MIP Populated</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">VA</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node input">Funding Fee (if applicable)</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">USDA</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node input">Guarantee Fee Populated</div>
                            </div>
                        </div>
                    </div>
                    <div class="exception-box">
                        <h4>VA Disabled Veteran Exception</h4>
                        <p>VA Funding Fee is <strong>not applicable</strong> if the Veteran is disabled. If the Certificate of Eligibility (COE) is not in CLEAR Docs, the <strong>maximum Funding Fee</strong> must be disclosed on the Initial Loan Estimate.</p>
                    </div>
                    <div class="decision-tree">
                        <h3>4506-C Form Requirements (Hamburger Menu)</h3>
                        <div class="tree-node level-1"><span class="tree-label">Standard 4506-C</span> -> Required for all loans</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-amber); color: var(--bg-primary);">+ Additional 4506-C</span> -> Name or address changes in last 2 tax years</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-amber); color: var(--bg-primary);">+ Additional 4506-C</span> -> Self-employed: Business Name required</div>
                    </div>
                    <div class="info-box">
                        <h4>Reference Resources</h4>
                        <p>Consult the following for detailed guidance: <strong>Closing Cost Manual</strong>, <strong>PMI Resources</strong>, <strong>IRS 4506-C for Sales</strong></p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Loan Specific Data Entry -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Loan Specific Data Entry</h2><span>Special programs and seller credits validation</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node decision">Seller Credits Listed?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">YES</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Validate with Purchase Agreement</div>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Move Accepted Offer to Final Doc Tree</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">NO</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Proceed to Special Programs</div>
                            </div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Special Program</th><th>Status</th><th>Reference</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">HomeFundIt</strong></td><td><span class="badge optional-badge">If Applicable</span></td><td>HomeFundIt Guide</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Rate Rebound</strong></td><td><span class="badge optional-badge">If Applicable</span></td><td>Rate Rebound Policy</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Temporary Buydown</strong></td><td><span class="badge optional-badge">If Applicable</span></td><td>Temporary Buydown Guide</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">AIO Loan</strong></td><td><span class="badge optional-badge">If Applicable</span></td><td>AIO Loan Guide</td></tr>
                        </tbody>
                    </table>
                    <div class="exception-box">
                        <h4>Pre-Lock Special Programs</h4>
                        <p>If you did not check the special program boxes <strong>before locking</strong>, you need to notify the <strong>RED Team</strong> or <strong>Byte Support</strong> to get them checked.</p>
                    </div>
                    <div class="tip-box">
                        <h4>Conversation Log Notes</h4>
                        <p>Enter notes for the Disclosures Desk in the Conversation Log if applicable. Examples:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Updated Title Fees - quote in CLEAR Docs</li>
                            <li>Borrower signing Disclosures in person</li>
                            <li>Documents need to be sent via mail</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 7: Best Practice Items -->
            <section id="section-7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <div class="section-title"><h2>Best Practice Items</h2><span>Required for Processing Submission</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>Important Notice</h4>
                        <p>While these items are "Best Practice" for ordering disclosures, they <strong>WILL BE REQUIRED</strong> to submit the loan to Processing.</p>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Item</th><th>Status</th><th>Details</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">AUS Findings</strong></td><td><span class="badge best-practice-badge">Best Practice</span></td><td>AUS Findings in loan as applicable; Refer Findings (Govt loans) meet Checklist requirements</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">AUS Ratios Match</strong></td><td><span class="badge best-practice-badge">Best Practice</span></td><td>Ratios from AUS match CLEAR/Byte. Contact SalesTraining@cmgfi.com if not</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Residence History</strong></td><td><span class="badge best-practice-badge">Best Practice</span></td><td>Two years residence (24 months)</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Employment History</strong></td><td><span class="badge best-practice-badge">Best Practice</span></td><td>Two years employment (24 months)</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Assets to Close</strong></td><td><span class="badge best-practice-badge">Best Practice</span></td><td>Sufficient assets listed on URLA; if not, Notes in Conversation Log</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">REOs Complete</strong></td><td><span class="badge best-practice-badge">Best Practice</span></td><td>REOs completed and linked to mortgage debts (REO Job Aid)</td></tr>
                        </tbody>
                    </table>
                    <div class="checklist-grid">
                        <div class="checklist-card">
                            <div class="checklist-card-header"><h4>AUS Resources</h4></div>
                            <div class="checklist-card-body">
                                <ul>
                                    <li><span class="check-icon">-></span> AUS Services Guide</li>
                                    <li><span class="check-icon">-></span> Manual Underwriting Guidelines</li>
                                </ul>
                            </div>
                        </div>
                        <div class="checklist-card">
                            <div class="checklist-card-header"><h4>REO Resources</h4></div>
                            <div class="checklist-card-body">
                                <ul>
                                    <li><span class="check-icon">-></span> REO Job Aid</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 8: Order Disclosures -->
            <section id="section-8" class="section">
                <div class="section-header">
                    <div class="section-number">8</div>
                    <div class="section-title"><h2>Order Disclosures</h2><span>Request LE and TBD submission process</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Order Initial Disclosures Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node decision">Self-Disclosing?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">NO - Request LE</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Press Request LE Button</div>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node decision">Warnings Present?</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">YES</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Self-Disclosure Process</div>
                            </div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>Request LE Process</h4>
                        <p>In CLEAR: Press the <strong>Request LE Button</strong> found in the Disclosure Banner.</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li><strong>Warnings:</strong> Do not have to be resolved, but should be noted</li>
                            <li><strong>Required Items:</strong> Make changes if possible; if not, include a note explaining why</li>
                            <li><strong>Hard Stop:</strong> Contact SalesTraining@cmgfi.com if Required item causes hard stop</li>
                        </ul>
                    </div>
                    <div class="exception-box">
                        <h4>TBD / Credit Only Submission</h4>
                        <p><strong>DO NOT</strong> click Submit to Processing or File Received for TBD/Credit Only loans.</p>
                        <p style="margin-top: 10px;">Follow the <strong>TBD Checklist</strong> for manual handoff to Processing.</p>
                    </div>
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-teal);">Standard vs TBD Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node decision">Submission Type?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Standard</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Request LE</div>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Submit to Processing</div>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Complete</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">TBD/Credit Only</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node exception">DO NOT Submit</div>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Follow TBD Checklist</div>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Manual Handoff</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
INITIAL DISCLOSURES CHECKLIST - QUICK REFERENCE
================================================

BEFORE ORDERING DISCLOSURES:
-----------------------------
[x] LO Checklist in CLEAR complete
[x] Correct Retail LO Comp Plan selected
[x] Lead Type selected
[x] Production Assistant(s) added
[x] Complete email address(es) entered
[x] Mobile/home phone for e-disclosure codes
[x] SmartFees run (if notification present)
[x] Property type and address verified (USPS lookup)
[x] Proposed payment/escrow setup complete
[x] Declarations completed
[x] HMDA/Government Monitoring entered
[x] PMI/MIP details match disclosed terms
[x] 4506-C form(s) created
[x] Seller credits validated with Purchase Agreement

SPECIAL PROGRAMS (If Applicable):
---------------------------------
[ ] HomeFundIt
[ ] Rate Rebound
[ ] Temporary Buydown
[ ] AIO Loan
NOTE: Check boxes BEFORE locking or contact RED Team/Byte Support

BEST PRACTICES (Required for Processing):
-----------------------------------------
[ ] AUS Findings in loan
[ ] AUS Ratios match
[ ] 2 years residence & employment
[ ] Sufficient assets listed
[ ] REOs linked to mortgage debts

ORDER DISCLOSURES:
------------------
Standard: Request LE Button -> Resolve warnings -> Submit
TBD/Credit Only: DO NOT submit -> Follow TBD Checklist

KEY CONTACTS:
-------------
Issues: SalesTraining@cmgfi.com
Support: RED Team or Byte Support
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for Initial Disclosures Workflow</p>
                <div class="meta">
                    <span class="meta-item">9 Process Steps Analyzed</span>
                    <span class="meta-item">5 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 45% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">5</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2</div>
                    <div class="agent-summary-label">High Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">45%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">90%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-checklist')" title="Click to view agent details">
                        <div class="heat-score">95</div>
                        <div class="heat-name">Checklist Validator</div>
                        <div class="heat-desc">Auto-validate all required fields before disclosure</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>0-8</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-address')" title="Click to view agent details">
                        <div class="heat-score">85</div>
                        <div class="heat-name">Address Validator</div>
                        <div class="heat-desc">USPS lookup and auto-correction</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>3</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-pmi')" title="Click to view agent details">
                        <div class="heat-score">78</div>
                        <div class="heat-name">PMI/MIP Calculator</div>
                        <div class="heat-desc">Auto-calculate and validate MI based on loan type</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>5</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-4506c')" title="Click to view agent details">
                        <div class="heat-score">65</div>
                        <div class="heat-name">4506-C Generator</div>
                        <div class="heat-desc">Auto-generate based on borrower history</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>5</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-aus')" title="Click to view agent details">
                        <div class="heat-score">58</div>
                        <div class="heat-name">AUS Ratio Monitor</div>
                        <div class="heat-desc">Compare and flag AUS vs CLEAR ratio mismatches</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>7</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: Checklist Validator -->
                <div class="agent-card" id="agent-checklist">
                    <div class="agent-card-header">
                        <div class="agent-icon">V</div>
                        <div class="agent-info">
                            <div class="agent-name">Disclosure Checklist Validator</div>
                            <div class="agent-type">Validation Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically validates all 15+ required checklist items before allowing disclosure request. Prevents incomplete submissions and reduces kickbacks from Disclosures Desk.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Scan URLA</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Check Fields</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Validate</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Report/Block</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">5min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">98%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('checklist')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: Address Validator -->
                <div class="agent-card" id="agent-address">
                    <div class="agent-card-header">
                        <div class="agent-icon">A</div>
                        <div class="agent-info">
                            <div class="agent-name">USPS Address Validator</div>
                            <div class="agent-type">Data Validation Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Integrates with USPS API to automatically validate and standardize property addresses. Flags discrepancies and suggests corrections before disclosure.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Read Address</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">USPS API</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Compare</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Auto-Fix</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">2min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">99%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('address')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: PMI/MIP Calculator -->
                <div class="agent-card" id="agent-pmi">
                    <div class="agent-card-header">
                        <div class="agent-icon">$</div>
                        <div class="agent-info">
                            <div class="agent-name">PMI/MIP Auto-Calculator</div>
                            <div class="agent-type">Calculation Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically determines and populates correct MI values based on loan type (Conventional PMI, FHA MIP, VA Funding Fee, USDA Guarantee Fee). Handles disabled veteran exceptions.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Detect Loan Type</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Check COE/Docs</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Calculate MI</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Populate</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">3min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Compliance</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('pmi')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 4: 4506-C Generator -->
                <div class="agent-card" id="agent-4506c">
                    <div class="agent-card-header">
                        <div class="agent-icon">T</div>
                        <div class="agent-info">
                            <div class="agent-name">4506-C Form Generator</div>
                            <div class="agent-type">Document Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Analyzes borrower history to determine required 4506-C forms. Auto-generates additional forms for name/address changes and self-employed business names.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Check History</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Identify Need</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Generate Forms</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Stage Docs</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">4min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">95%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('form4506c')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 5: AUS Ratio Monitor -->
                <div class="agent-card" id="agent-aus">
                    <div class="agent-card-header">
                        <div class="agent-icon">R</div>
                        <div class="agent-info">
                            <div class="agent-name">AUS Ratio Monitor</div>
                            <div class="agent-type">Monitoring Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Continuously monitors AUS findings and compares DTI/housing ratios between AUS and CLEAR/Byte. Alerts LO of mismatches before processing submission.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Pull AUS</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Pull CLEAR</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Compare</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Alert LO</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">24/7</div><div class="agent-stat-label">Monitoring</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">-30%</div><div class="agent-stat-label">Errors</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('aus')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Initial Disclosures Checklist - Workflow Markdown</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">X Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent">Loading documentation...</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">X Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout = null;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav clicks - set isScrolling flag
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;

                // Clear any existing timeout
                if (scrollTimeout) clearTimeout(scrollTimeout);

                // Set timeout to re-enable scroll spy after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                    updateActiveNav();
                }, 1000);

                // Update active state immediately on click
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal
        let docContent = `# Initial Disclosures Checklist

## Overview
This checklist ensures all required Sales Team tasks are completed before ordering Initial Disclosures.

## Prerequisites
- Complete LO Checklist in CLEAR

## Required Items Before Ordering Disclosures

### 1. Top of URLA Screen
- Select correct Retail LO Comp Plan and Lead Type
- Add Production Assistant(s)

### 2. Borrower Contact Information
- Complete and accurate email address(es)
  - Married: Can use joint email (separate preferred)
  - Joint Unmarried: MUST have individual emails
- Mobile or home phone for e-disclosure verification

### 3. SmartFees & Property
- Run/re-run SmartFees if notification present
- Verify property type and address via USPS lookup
- Note: Locked loan address changes must be in Optimal Blue

### 4. Proposed Payment & Escrow
- Hazard Insurance (and Flood if applicable)
- HOA/PUD fees if applicable
- Property Taxes
- Source completed
- Declarations completed
- HMDA/Government Monitoring entered

### 5. PMI/MIP & 4506-C
- PMI/MIP details match disclosed terms
- Government loans: FHA MIP, VA Funding Fee, USDA Guarantee Fee
- Create required 4506-C forms
- Additional 4506-C for name/address changes (2 years)
- Additional 4506-C for self-employed business names

### 6. Loan Specific Data Entry
- Validate seller credits with Purchase Agreement
- Special programs: HomeFundIt, Rate Rebound, Temporary Buydown, AIO
- Conversation Log notes for Disclosures Desk

## Best Practice Items (Required for Processing)
- AUS Findings
- AUS Ratios match
- 2 years residence and employment
- Sufficient assets to close
- REOs completed and linked

## Order Disclosures
- Standard: Press Request LE Button
- TBD/Credit Only: Follow TBD Checklist (DO NOT submit)

## Resources
- Closing Cost Manual
- PMI Resources
- IRS 4506-C for Sales
- AUS Services
- Manual Underwriting
- REO Job Aid`;

        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.getElementById('docContent').textContent = docContent;
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(docContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // ====== AGENT PROMPT SYSTEM ======
        const agentPrompts = {
            checklist: {
                name: 'Disclosure Checklist Validator',
                tags: ['Validation', 'Compliance', 'Low Complexity', 'Critical Priority'],
                purpose: `This agent automatically validates all 15+ required checklist items before allowing disclosure request. It prevents incomplete submissions and reduces kickbacks from the Disclosures Desk by ensuring data completeness.`,
                prompt: `You are building a Validation Agent for CMG Financial's Initial Disclosures workflow.

AGENT NAME: Disclosure Checklist Validator
TYPE: Validation / Compliance Agent

OBJECTIVE:
Create an agent that scans all required fields in CLEAR/Byte and validates completeness before allowing the LO to request disclosures.

VALIDATION CHECKLIST:
1. URLA Screen Header
   - Retail LO Comp Plan selected (not blank)
   - Lead Type selected
   - Production Assistant assigned

2. Contact Information
   - Email address present and valid format
   - Phone number present (mobile or home)
   - For joint unmarried: verify separate emails

3. Property & Fees
   - Property Type selected
   - Property Address complete
   - SmartFees run (check timestamp vs. last data change)

4. Escrow Setup
   - Hazard Insurance > $0
   - Property Taxes > $0
   - HOA/PUD if property type requires

5. Loan Details
   - Declarations completed (all questions answered)
   - HMDA data entered
   - PMI/MIP populated based on loan type

6. Documentation
   - 4506-C form created
   - Seller credits validated if present

OUTPUT FORMAT:
{
  "status": "PASS" | "FAIL" | "WARNING",
  "completedItems": 15,
  "totalItems": 17,
  "missingFields": [
    { "field": "Property Tax", "section": "Escrow", "required": true },
    { "field": "HOA Fee", "section": "Escrow", "required": false }
  ],
  "warnings": [
    "SmartFees not run in last 24 hours"
  ],
  "canProceed": true | false
}`,
                integration: `INTEGRATION POINTS:
1. CLEAR/Byte API
   - Read all URLA fields
   - Check document tree for 4506-C
   - Verify SmartFees timestamp

2. UI Integration
   - Block "Request LE" button until validation passes
   - Show validation summary modal
   - Highlight missing fields in red

3. Workflow
   - Run automatically when LO clicks "Request LE"
   - Allow override with manager approval
   - Log all validation attempts for audit`
            },
            address: {
                name: 'USPS Address Validator',
                tags: ['Data Validation', 'API Integration', 'Low Complexity', 'High Priority'],
                purpose: `This agent integrates with USPS Address API to automatically validate and standardize property addresses, flagging discrepancies and suggesting corrections before disclosure.`,
                prompt: `You are building a Data Validation Agent for CMG Financial's Initial Disclosures workflow.

AGENT NAME: USPS Address Validator
TYPE: Data Validation / API Integration Agent

OBJECTIVE:
Create an agent that validates property addresses against USPS database and auto-corrects formatting issues to prevent disclosure errors.

INPUT:
- Street Address
- City
- State
- ZIP Code

VALIDATION PROCESS:
1. Call USPS Address Validation API
2. Compare returned standardized address
3. Identify discrepancies:
   - Street name spelling
   - Directional prefixes/suffixes
   - Unit/Apt format
   - ZIP+4 completion

OUTPUT FORMAT:
{
  "inputAddress": {
    "street": "123 Main Street",
    "city": "Los Angeles",
    "state": "CA",
    "zip": "90001"
  },
  "uspsStandardized": {
    "street": "123 MAIN ST",
    "city": "LOS ANGELES",
    "state": "CA",
    "zip": "90001-1234"
  },
  "isValid": true,
  "corrections": [
    { "field": "street", "from": "Street", "to": "ST" },
    { "field": "zip", "from": "90001", "to": "90001-1234" }
  ],
  "confidence": 0.98,
  "dpvConfirmation": "Y"
}

ERROR HANDLING:
- Address not found: Flag for manual review
- Multiple matches: Present options to LO
- API timeout: Allow bypass with warning`,
                integration: `INTEGRATION POINTS:
1. USPS Web Tools API
   - Address Validation endpoint
   - ZIP Code lookup endpoint

2. CLEAR Property Section
   - Auto-populate on address entry
   - Show "Validated" badge when confirmed
   - Highlight corrections in yellow

3. Optimal Blue Integration
   - Check if loan locked
   - If locked, redirect changes to OB`
            },
            pmi: {
                name: 'PMI/MIP Auto-Calculator',
                tags: ['Calculation', 'Compliance', 'Medium Complexity', 'High Priority'],
                purpose: `This agent automatically determines and populates correct MI values based on loan type, handling Conventional PMI, FHA MIP, VA Funding Fee, and USDA Guarantee Fee with exception handling for disabled veterans.`,
                prompt: `You are building a Calculation Agent for CMG Financial's Initial Disclosures workflow.

AGENT NAME: PMI/MIP Auto-Calculator
TYPE: Calculation / Compliance Agent

OBJECTIVE:
Create an agent that automatically calculates and populates the correct Mortgage Insurance based on loan type, LTV, and borrower eligibility.

DECISION LOGIC:

1. CONVENTIONAL LOANS (LTV > 80%)
   - Calculate PMI based on:
     * FICO score
     * LTV
     * Loan amount
     * Coverage level
   - Determine: Financed vs. Not Financed

2. FHA LOANS
   - UFMIP: 1.75% of base loan (usually financed)
   - Annual MIP: Based on LTV and term
     * LTV <= 90%: 0.50% for <= 15yr, 0.80% for > 15yr
     * LTV > 90%: 0.55% for <= 15yr, 0.85% for > 15yr

3. VA LOANS
   - Check COE in CLEAR Docs
   - Check for disabled veteran status
   - If disabled: Funding Fee = $0
   - If no COE: Use maximum Funding Fee
   - Otherwise: Calculate based on:
     * First use vs. subsequent
     * Down payment percentage
     * Guard/Reserve status

4. USDA LOANS
   - Upfront: 1.00% of loan amount
   - Annual: 0.35% of loan amount

OUTPUT FORMAT:
{
  "loanType": "VA",
  "calculations": {
    "upfrontMI": 0.00,
    "monthlyMI": 0.00,
    "financed": false
  },
  "reasoning": "Disabled veteran - exempt from funding fee",
  "documentation": {
    "coePresent": true,
    "disabledStatus": true
  },
  "warnings": []
}`,
                integration: `INTEGRATION POINTS:
1. CLEAR Docs
   - Scan for COE document
   - Parse VA disability status

2. PMI Resources / Rate Tables
   - Pull current PMI rates
   - Check investor-specific overlays

3. Loan Details Screen
   - Auto-populate MI fields
   - Show calculation breakdown
   - Flag if manual override detected`
            },
            form4506c: {
                name: '4506-C Form Generator',
                tags: ['Document Generation', 'Rules Engine', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent analyzes borrower history to determine required 4506-C forms and auto-generates additional forms for name/address changes in the past 2 years and self-employed business names.`,
                prompt: `You are building a Document Generation Agent for CMG Financial's Initial Disclosures workflow.

AGENT NAME: 4506-C Form Generator
TYPE: Document Generation / Rules Engine

OBJECTIVE:
Create an agent that analyzes borrower information and automatically generates all required 4506-C forms based on IRS requirements.

BUSINESS RULES:

1. STANDARD 4506-C (Always Required)
   - One per borrower
   - Current name and address

2. ADDITIONAL FOR NAME CHANGES
   Trigger: Name changed in last 2 tax years
   - Married name change
   - Legal name change
   - Divorce name reversion
   Action: Generate additional 4506-C with prior name

3. ADDITIONAL FOR ADDRESS CHANGES
   Trigger: Address changed in last 2 tax years
   - Verify via residence history on URLA
   - Each prior address in last 2 years = additional form
   Action: Generate 4506-C for each prior address

4. SELF-EMPLOYED BORROWERS
   Trigger: Self-employed = Yes
   - Business name on Schedule C/K-1
   - Each business entity = additional form
   Action: Generate 4506-C with business name

ANALYSIS INPUT:
- Current name
- Name history (marriage/legal docs)
- Residence history (2 years)
- Employment type
- Business entities (if self-employed)

OUTPUT:
{
  "formsRequired": [
    { "type": "Standard", "name": "John Smith", "address": "123 Main St", "reason": "Primary" },
    { "type": "Prior Address", "name": "John Smith", "address": "456 Oak Ave", "reason": "Resided 2024" },
    { "type": "Business", "name": "Smith Consulting LLC", "address": "123 Main St", "reason": "Self-employed" }
  ],
  "totalForms": 3,
  "generationStatus": "Ready"
}`,
                integration: `INTEGRATION POINTS:
1. URLA Data
   - Parse residence history
   - Check employment section
   - Extract business entities

2. Document Generation
   - Pre-fill 4506-C forms
   - Route to hamburger menu

3. CLEAR Docs
   - Auto-stage generated forms
   - Link to loan file`
            },
            aus: {
                name: 'AUS Ratio Monitor',
                tags: ['Monitoring', 'Comparison', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent continuously monitors AUS findings and compares DTI/housing ratios between AUS and CLEAR/Byte, alerting LOs of mismatches before processing submission.`,
                prompt: `You are building a Monitoring Agent for CMG Financial's Initial Disclosures workflow.

AGENT NAME: AUS Ratio Monitor
TYPE: Monitoring / Comparison Agent

OBJECTIVE:
Create an agent that monitors for ratio discrepancies between AUS findings and CLEAR/Byte calculated values, alerting LOs before submission to prevent processing delays.

MONITORED VALUES:
1. Front-End Ratio (Housing)
   - AUS calculated
   - CLEAR/Byte calculated
   - Threshold: +/- 0.5%

2. Back-End Ratio (Total DTI)
   - AUS calculated
   - CLEAR/Byte calculated
   - Threshold: +/- 0.5%

3. Income Totals
   - AUS recognized income
   - CLEAR entered income

COMPARISON LOGIC:
1. Pull latest AUS findings
2. Pull current CLEAR/Byte ratios
3. Calculate difference
4. Flag if outside threshold

ALERT TRIGGERS:
- DTI difference > 0.5%
- Housing ratio difference > 0.5%
- Income variance > $100/month
- AUS findings changed since last check

OUTPUT FORMAT:
{
  "comparisonDate": "2026-01-27T10:30:00Z",
  "ausSource": "DU",
  "ratios": {
    "frontEnd": { "aus": 28.5, "clear": 28.3, "diff": 0.2, "status": "OK" },
    "backEnd": { "aus": 43.2, "clear": 44.1, "diff": 0.9, "status": "MISMATCH" }
  },
  "income": {
    "aus": 8500, "clear": 8650, "diff": 150, "status": "WARNING"
  },
  "recommendation": "Review income entries - CLEAR shows $150/mo more than AUS",
  "contactSupport": true
}`,
                integration: `INTEGRATION POINTS:
1. AUS Services
   - Pull latest findings
   - Parse ratio data

2. CLEAR/Byte
   - Read calculated ratios
   - Compare income entries

3. Notification System
   - Alert LO via dashboard
   - Email if critical mismatch
   - Suggest: Contact SalesTraining@cmgfi.com`
            }
        };

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Show agent prompt modal
        let currentPromptContent = '';

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = `${agent.name} - Build Prompt`;

            const tagsHtml = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptTags').innerHTML = tagsHtml;

            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            currentPromptContent = `# ${agent.name}\n\n## Purpose\n${agent.purpose}\n\n## Build Prompt\n${agent.prompt}\n\n## Integration Points\n${agent.integration}`;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            try {
                await navigator.clipboard.writeText(currentPromptContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
