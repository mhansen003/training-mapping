<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Important Dates Screen in Byte - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }
        .badge.manual-badge { background: rgba(245, 158, 11, 0.15); color: var(--accent-amber); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box, .warning-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        .warning-box { background: rgba(245, 158, 11, 0.08); border-color: var(--accent-amber); border: 1px solid rgba(245, 158, 11, 0.2); border-left: 4px solid var(--accent-amber); }
        .warning-box h4 { color: var(--accent-amber); margin-bottom: 10px; font-size: 1rem; }
        .warning-box p, .warning-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Section Cards */
        .section-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .section-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .section-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .section-card-header h4 { font-size: 1.05rem; }
        .section-card-body { padding: 22px; }
        .section-card ul { list-style: none; padding: 0; }
        .section-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .section-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }
        .manual-icon { color: var(--accent-amber); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Agent Card Highlight Animation */
        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        /* AI Prompt Modal */
        .prompt-modal .modal {
            max-width: 800px;
        }

        .prompt-modal .modal-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
        }

        .prompt-section {
            margin-bottom: 25px;
        }

        .prompt-section h4 {
            color: var(--accent-purple);
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-box .highlight-text {
            color: var(--accent-amber);
            font-weight: 600;
        }

        .prompt-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .prompt-tag {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .copy-prompt-btn {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 15px;
        }

        .copy-prompt-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.3);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
        .breadcrumb-logo-link { display: inline-flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; flex-shrink: 0; margin-right: 4px; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 24px; width: auto; display: block; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
<a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">Important Dates Screen</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Important Dates</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-0" class="nav-item active">
                <span class="nav-number">0</span>
                <span class="nav-label">Overview</span>
            </a>
            <a href="#section-1" class="nav-item">
                <span class="nav-number">1</span>
                <span class="nav-label">eConsent Dates</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">TRID Dates</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Contract/Contingency</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Key Dates</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Other Dates</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Expiration Dates</span>
            </a>
            <a href="#section-7" class="nav-item">
                <span class="nav-number">7</span>
                <span class="nav-label">Warnings & Hard Stops</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Important Dates Screen in Byte</h1>
                <p class="subtitle">Centralized view of all critical loan dates, expiration tracking, and compliance warnings</p>
                <div class="meta">
                    <span class="meta-item">System: Byte LOS</span>
                    <span class="meta-item">Role: Processing / Underwriting</span>
                    <span class="meta-item">Updated: July 29, 2024</span>
                    <span class="meta-item">Sections: 6</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Hard Stop</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 0: Overview -->
            <section id="section-0" class="section">
                <div class="section-header">
                    <div class="section-number">0</div>
                    <div class="section-title"><h2>Screen Overview</h2><span>Understanding the Important Dates Screen structure</span></div>
                </div>
                <div class="section-content">
                    <div class="summary-grid">
                        <div class="summary-card"><h4>Total Sections</h4><div class="value">6</div><div class="label">Date categories</div></div>
                        <div class="summary-card"><h4>Auto-Populated</h4><div class="value">Most</div><div class="label">From other screens</div></div>
                        <div class="summary-card"><h4>Manual Entry</h4><div class="value">*</div><div class="label">Marked with asterisk</div></div>
                        <div class="summary-card"><h4>Auto-Calculated</h4><div class="value">Exp</div><div class="label">Expiration dates</div></div>
                    </div>

                    <div class="info-box">
                        <h4>Purpose of the Important Dates Screen</h4>
                        <p>The Important Dates Screen is a <strong>singular screen</strong> in Byte where users can access and review all applicable loan dates in one centralized location. Most fields are redisplayed from other areas within the system - if a date is entered on another screen, it will automatically appear in the appropriate field here.</p>
                    </div>

                    <div class="section-cards">
                        <div class="section-card">
                            <div class="section-card-header"><h4>Screen Sections</h4></div>
                            <div class="section-card-body">
                                <ul>
                                    <li><span class="check-icon">1</span> eConsent - DocuTech Only</li>
                                    <li><span class="check-icon">2</span> TRID Dates</li>
                                    <li><span class="check-icon">3</span> Contract Commitment/Contingency</li>
                                    <li><span class="check-icon">4</span> Key Dates</li>
                                    <li><span class="check-icon">5</span> Other Dates</li>
                                    <li><span class="check-icon">6</span> Expiration Dates</li>
                                </ul>
                            </div>
                        </div>
                        <div class="section-card">
                            <div class="section-card-header"><h4>Field Types</h4></div>
                            <div class="section-card-body">
                                <ul>
                                    <li><span class="check-icon">A</span> Auto-populated from other screens</li>
                                    <li><span class="manual-icon">*</span> Manual entry required (asterisk)</li>
                                    <li><span class="check-icon">C</span> Auto-calculated (expiration dates)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="warning-box">
                        <h4>UNDERWRITER REQUIREMENT</h4>
                        <p>Underwriters are <strong>required to manually enter Income and Asset Doc Dates</strong> under the "Expiration Dates" section of the Important Dates screen. These are critical for compliance tracking.</p>
                    </div>
                </div>
            </section>

            <!-- Section 1: eConsent -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>eConsent Dates</h2><span>DocuTech Only - Electronic consent tracking</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>DocuTech Integration</h4>
                        <p>This section is specifically for loans using DocuTech for electronic document delivery. Fields track when borrower consent was obtained and when eConsent packages were sent.</p>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Type</th><th>Source</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Consented Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>DocuTech</td><td>Date borrower provided electronic consent</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">eConsent Package Sent</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>DocuTech</td><td>Date eConsent package was transmitted</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 2: TRID Dates -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>TRID Dates</h2><span>TILA-RESPA Integrated Disclosure compliance dates</span></div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Application Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date application was received</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">LE Due Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Loan Estimate must be delivered by this date (3 business days)</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Initial LE Delivery Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date initial Loan Estimate was delivered</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Verbal ITP Received</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date verbal Intent to Proceed was received</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Intent to Proceed Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date borrower confirmed intent to proceed</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Last LE Delivered Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Most recent LE delivery date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Last LE Received Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date borrower received last LE</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">CD Requested Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date Closing Disclosure was requested</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">CD Delivered Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date CD was delivered to borrower</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">CD Received Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date borrower received CD</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Earliest Closing Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Earliest possible closing (3-day waiting period)</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Scheduled Closing Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Target closing date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">NOV Sent to Borrower</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Notice of Value sent date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Appraisal Delivery Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date appraisal was delivered</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Appraisal Timing Waiver</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Waiver date if applicable</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>TRID Compliance</h4>
                        <p>These dates are critical for TRID compliance. The system tracks the 3-business-day rule for LE delivery and the 3-day waiting period after CD delivery before closing can occur.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Contract Commitment/Contingency -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Contract Commitment/Contingency</h2><span>Manual entry required - Loan approval and contingency tracking</span></div>
                </div>
                <div class="section-content">
                    <div class="warning-box">
                        <h4>* Manual Entry Required</h4>
                        <p>All Commitment/Contingency dates in this section must be <strong>manually entered</strong> on the Important Dates screen. These fields are indicated by the asterisk (*) symbol.</p>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Contract Closing Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Closing date per purchase contract</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Amended Contract Closing Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Amended closing date if changed</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Commitment/Contingency Date 1</strong></td><td><span class="badge manual-badge">Manual *</span></td><td>First contingency date with Type selector (e.g., Loan Approval)</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Commitment/Contingency Date Met 1</strong></td><td><span class="badge manual-badge">Manual *</span></td><td>Date first contingency was satisfied</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Commitment/Contingency Date 2</strong></td><td><span class="badge manual-badge">Manual *</span></td><td>Second contingency date with Type selector (e.g., Appraisal)</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Commitment/Contingency Date Met 2</strong></td><td><span class="badge manual-badge">Manual *</span></td><td>Date second contingency was satisfied</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Commitment/Contingency Date 3</strong></td><td><span class="badge manual-badge">Manual *</span></td><td>Third contingency date with Type selector (e.g., Appraisal Reinspection)</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Commitment/Contingency Date Met 3</strong></td><td><span class="badge manual-badge">Manual *</span></td><td>Date third contingency was satisfied</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Commitment/Contingency Date 4</strong></td><td><span class="badge manual-badge">Manual *</span></td><td>Fourth contingency date with Type selector (e.g., HOI)</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Commitment/Contingency Date Met 4</strong></td><td><span class="badge manual-badge">Manual *</span></td><td>Date fourth contingency was satisfied</td></tr>
                        </tbody>
                    </table>

                    <div class="decision-tree">
                        <h3>Contingency Type Options</h3>
                        <div class="tree-node level-1"><span class="tree-label">Type Dropdown</span></div>
                        <div class="tree-node">Loan Approval - Commitment letter deadline</div>
                        <div class="tree-node">Appraisal - Appraisal contingency deadline</div>
                        <div class="tree-node">Appraisal Reinspection - Re-inspection deadline</div>
                        <div class="tree-node">HOI - Homeowner's Insurance deadline</div>
                    </div>
                </div>
            </section>

            <!-- Section 4: Key Dates -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Key Dates</h2><span>Critical milestone dates for loan processing</span></div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Original Approved Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Initial approval date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Loan Approval Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Final loan approval date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Lock Exp Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Rate lock expiration date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Scheduled Funding Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Expected funding date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Disbursement Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date funds were disbursed</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Signing Time</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Scheduled signing appointment time</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">CD Sent To Title</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date CD was sent to title company</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">CD Approved By Title</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date title company approved CD</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Rescission Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>End of rescission period (refinances)</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 5: Other Dates -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Other Dates</h2><span>Additional tracking dates including QC and government loans</span></div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Case No. Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>FHA/VA case number assignment date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">First Payment</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>First mortgage payment due date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">MI Ordered</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Mortgage Insurance order date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">MI Received</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>MI certificate received date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Selected for QC</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date selected for Quality Control review</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">QC Completed</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>QC review completion date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Declined Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Date loan was declined</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Denial Notice Sent To Bor</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Adverse action notice sent date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">USDA Commitment Submitted For Approval</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>USDA submission date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">USDA Commitment Suspended By USDA</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>USDA suspension date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">USDA Commitment Approval By USDA</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>USDA approval date</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 6: Expiration Dates -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Expiration Dates</h2><span>Auto-calculated expiration tracking with manual UW entry</span></div>
                </div>
                <div class="section-content">
                    <div class="warning-box">
                        <h4>* UNDERWRITER REQUIREMENT</h4>
                        <p>Underwriters are <strong>required to manually enter Income and Asset Doc Dates</strong> under the "Expiration Dates" section. These dates trigger automatic calculation of expiration dates.</p>
                    </div>

                    <div class="info-box">
                        <h4>Expiration Date Calculation</h4>
                        <p>Expiration Dates are <strong>automatically calculated</strong> based on the default calculation period shown next to each field when the document date is entered. The system displays "Plus X Days" to indicate the calculation period.</p>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 25px 0 15px;">UW Section (Underwriting)</h3>
                    <table class="field-table">
                        <thead><tr><th>Document Date</th><th>Type</th><th>Calculation</th><th>Expiration Field</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Credit Docs Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Plus 120 Days</td><td>Credit Docs Exp</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Pre Approval Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Plus 90 Days</td><td>Pre Approval Exp Date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Appraisal Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Plus 180 Days</td><td>Appraisal Exp Date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Asset Doc Date *</strong></td><td><span class="badge manual-badge">Manual *</span></td><td>Plus 120 Days</td><td>Asset Doc Exp Date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Income Doc Date *</strong></td><td><span class="badge manual-badge">Manual *</span></td><td>Plus 120 Days</td><td>Income Doc Exp Date</td></tr>
                        </tbody>
                    </table>

                    <h3 style="color: var(--accent-blue); margin: 25px 0 15px;">Processing Section</h3>
                    <table class="field-table">
                        <thead><tr><th>Document Date</th><th>Type</th><th>Calculation</th><th>Expiration Field</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">CPL Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Plus 30 Days</td><td>CPL Exp Date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Title Doc Date</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Plus 90 Days</td><td>Title Doc Exp Date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Verbal VOE</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Plus 10 Days</td><td>Verbal VOE Exp</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Access to Edit Expiration Dates</h4>
                        <p>The following roles have access to edit all expiration date fields to match investor requirements as needed:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>All Processing</li>
                            <li>All Underwriting</li>
                            <li>Retail Ops Managers</li>
                            <li>Senior Ops Managers</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 7: Warnings & Hard Stops -->
            <section id="section-7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <div class="section-title"><h2>Warnings & Hard Stops</h2><span>System alerts for expiring documents</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Expiration Warning Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node input">User Changes Status</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Check Expiration Dates</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Within 5 Days</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node decision">Pop-Up Warning</div>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">User Can Proceed</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Already Expired</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node exception">HARD STOP</div>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node input">Must Update Dates</div>
                            </div>
                        </div>
                    </div>

                    <div class="warning-box">
                        <h4>Pop-Up Warning (Soft Stop)</h4>
                        <p>If any expiration dates are set to expire <strong>within 5 days</strong> of the Scheduled Closing Date, when the user attempts to move the status, a pop-up will fire to warn the user a document is expiring prior to the scheduled closing date.</p>
                        <p style="margin-top: 10px;"><strong>Note:</strong> This is NOT a hard stop - the user can click OK to close the message and continue. It compares the Scheduled Closing date vs the expiration dates entered.</p>
                    </div>

                    <div class="info-box">
                        <h4>Pop-Up Warning Message Example</h4>
                        <p style="font-family: 'JetBrains Mono', monospace; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin-top: 10px;">
                            IMPDT002 - The Following document/s<br>
                            Credit Docs Date Expires in: 2 Days<br>
                            Asset Doc Date Expires in: 3 Days<br>
                            Income Doc Date Expires in: 5 Days<br><br>
                            is set to expire within 5 days of the scheduled closing date. Please update accordingly.
                        </p>
                    </div>

                    <div class="exception-box">
                        <h4>HARD STOP - Document Expired</h4>
                        <p>If the user changes status to any of these statuses AND a document is expired, a <strong>hard-stop message</strong> will pop up:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Conditions for Review</li>
                            <li>Changes to UW</li>
                            <li>Clear to Close</li>
                            <li>Docs Ordered</li>
                            <li>Docs Back</li>
                            <li>Funds Ordered</li>
                        </ul>
                        <p style="margin-top: 15px;"><strong>Important:</strong> When you see a <strong>(-)</strong> in front of the number, that shows how many days expired that doc is compared to the Scheduled Closing Date.</p>
                        <p style="margin-top: 10px;">The user is <strong>unable to change status</strong> until the expired doc date is updated.</p>
                    </div>

                    <div class="info-box">
                        <h4>Hard Stop Message Example</h4>
                        <p style="font-family: 'JetBrains Mono', monospace; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin-top: 10px;">
                            IMPDT003 - The Following document/s<br>
                            Appraisal Date Expired: -2 Days<br>
                            Asset Doc Date Expired: -3 Days<br>
                            Income Doc Date Expired: -5 Days<br><br>
                            have expired and the loan cannot move forward until the expiration dates has been addressed. The user is unable to change status to Docs Ordered, Docs Out or Funds Ordered until the expiration date is updated
                        </p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
IMPORTANT DATES SCREEN - QUICK REFERENCE
=========================================

SCREEN SECTIONS (6):
1. eConsent - DocuTech Only
2. TRID Dates
3. Contract Commitment/Contingency *
4. Key Dates
5. Other Dates
6. Expiration Dates *

MANUAL ENTRY REQUIRED (*):
- Commitment/Contingency Dates (all 4 pairs)
- Asset Doc Date (UW)
- Income Doc Date (UW)

EXPIRATION CALCULATIONS:
- Credit Docs: +120 days
- Pre Approval: +90 days
- Appraisal: +180 days
- Asset/Income Docs: +120 days
- CPL: +30 days
- Title Doc: +90 days
- Verbal VOE: +10 days

WARNING TRIGGERS:
- Soft Stop: Expires within 5 days of closing
- Hard Stop: Already expired

HARD STOP STATUSES:
- Conditions for Review
- Changes to UW
- Clear to Close
- Docs Ordered
- Docs Back
- Funds Ordered

EDIT ACCESS (Expiration Dates):
- All Processing
- All Underwriting
- Retail Ops Managers
- Senior Ops Managers
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for Important Dates Workflow</p>
                <div class="meta">
                    <span class="meta-item">7 Process Steps Analyzed</span>
                    <span class="meta-item">4 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 35% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">4</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2</div>
                    <div class="agent-summary-label">High Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">35%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">80%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-expiration')" title="Click to view agent details">
                        <div class="heat-score">92</div>
                        <div class="heat-name">Expiration Monitor</div>
                        <div class="heat-desc">Proactive date expiration alerts</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>6-7</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-contingency')" title="Click to view agent details">
                        <div class="heat-score">78</div>
                        <div class="heat-name">Contingency Tracker</div>
                        <div class="heat-desc">Auto-populate from contract docs</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>3</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-doc-date')" title="Click to view agent details">
                        <div class="heat-score">65</div>
                        <div class="heat-name">Doc Date Extractor</div>
                        <div class="heat-desc">Extract dates from scanned docs</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>6</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-compliance')" title="Click to view agent details">
                        <div class="heat-score">58</div>
                        <div class="heat-name">TRID Compliance Check</div>
                        <div class="heat-desc">Validate TRID date requirements</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>2</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: Expiration Monitor -->
                <div class="agent-card" id="agent-expiration">
                    <div class="agent-card-header">
                        <div class="agent-icon"></div>
                        <div class="agent-info">
                            <div class="agent-name">Expiration Monitor Agent</div>
                            <div class="agent-type">Proactive Monitoring Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Monitors all document expiration dates and sends proactive alerts BEFORE the 5-day warning threshold. Prevents hard stops by notifying processors and underwriters when documents need refreshing.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Scan Dates Daily</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Calculate Days Left</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Prioritize Risk</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Send Alerts</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">5min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">90%</div><div class="agent-stat-label">Stop Prevention</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('expiration')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: Contingency Tracker -->
                <div class="agent-card" id="agent-contingency">
                    <div class="agent-card-header">
                        <div class="agent-icon"></div>
                        <div class="agent-info">
                            <div class="agent-name">Contingency Tracker Agent</div>
                            <div class="agent-type">Document Extraction Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Extracts commitment and contingency dates from purchase contracts and addendums. Auto-populates the manual entry fields, reducing data entry errors and ensuring contract compliance.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Read Contract</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Extract Dates</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Map to Fields</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Auto-Fill</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">8min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">95%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('contingency')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: Doc Date Extractor -->
                <div class="agent-card" id="agent-doc-date">
                    <div class="agent-card-header">
                        <div class="agent-icon"></div>
                        <div class="agent-info">
                            <div class="agent-name">Doc Date Extractor Agent</div>
                            <div class="agent-type">OCR/AI Extraction Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Scans income and asset documents to extract document dates automatically. Assists underwriters by pre-populating the required Asset Doc Date and Income Doc Date fields.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Scan Document</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">OCR Process</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Find Date</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Suggest Entry</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">3min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">88%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('docdate')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 4: TRID Compliance -->
                <div class="agent-card" id="agent-compliance">
                    <div class="agent-card-header">
                        <div class="agent-icon"></div>
                        <div class="agent-info">
                            <div class="agent-name">TRID Compliance Check Agent</div>
                            <div class="agent-type">Validation Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Validates TRID date requirements in real-time. Ensures 3-business-day LE delivery, proper CD waiting periods, and flags potential compliance issues before they become problems.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Check Dates</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Apply Rules</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Validate</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Flag Issues</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">2min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Coverage</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('compliance')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Important Dates Screen - Workflow Markdown</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent">Loading documentation...</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout = null;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav item clicks
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                isScrolling = true;

                // Clear any existing timeout
                if (scrollTimeout) clearTimeout(scrollTimeout);

                // Update active state immediately
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Scroll to section
                const targetId = this.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth' });
                }

                // Reset isScrolling after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal functions
        const docMarkdown = `# Important Dates Screen in Byte

## Overview
The Important Dates Screen is a singular screen in Byte where users can access and review all applicable loan dates.

## Screen Sections (6)
1. **eConsent** - DocuTech Only
2. **TRID Dates** - Compliance tracking
3. **Contract Commitment/Contingency** - Manual entry required (*)
4. **Key Dates** - Milestone tracking
5. **Other Dates** - QC, Government loans
6. **Expiration Dates** - Auto-calculated with manual UW entry (*)

## Required Entry
- Most fields auto-populate from other screens
- Manual fields indicated by asterisk (*)
- Section headers indicate manual entry requirements

## UNDERWRITER REQUIREMENT
Underwriters must manually enter:
- Income Doc Date
- Asset Doc Date

## Expiration Date Calculations
| Document | Calculation |
|----------|-------------|
| Credit Docs | +120 Days |
| Pre Approval | +90 Days |
| Appraisal | +180 Days |
| Asset/Income Docs | +120 Days |
| CPL | +30 Days |
| Title Doc | +90 Days |
| Verbal VOE | +10 Days |

## System Warnings

### Pop-Up Warning (Soft Stop)
- Triggers when docs expire within 5 days of closing
- User can proceed by clicking OK
- Message: IMPDT002

### Hard Stop
- Triggers when docs are already expired
- Blocks status changes to:
  - Conditions for Review
  - Changes to UW
  - Clear to Close
  - Docs Ordered
  - Docs Back
  - Funds Ordered
- (-) indicates days past expiration
- Message: IMPDT003

## Edit Access (Expiration Dates)
- All Processing
- All Underwriting
- Retail Ops Managers
- Senior Ops Managers

---
Updated: July 29, 2024`;

        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.getElementById('docContent').textContent = docMarkdown;
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(docMarkdown);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // ====== AGENT PROMPT SYSTEM ======
        const agentPrompts = {
            expiration: {
                name: 'Expiration Monitor Agent',
                tags: ['Monitoring', 'Alerts', 'Low Complexity', 'Critical Priority'],
                purpose: `This agent proactively monitors all document expiration dates across the loan pipeline and sends alerts BEFORE the system's 5-day warning threshold, preventing hard stops and ensuring smooth loan processing.`,
                prompt: `You are building a Proactive Monitoring Agent for CMG Financial's Byte LOS Important Dates Screen.

AGENT NAME: Expiration Monitor Agent
TYPE: Real-time Monitoring / Proactive Alerts

OBJECTIVE:
Create an agent that continuously monitors document expiration dates and sends early warnings to processors and underwriters, preventing the system's hard stops that block loan progression.

MONITORING SCHEDULE:
- Daily scan at 6:00 AM for all active loans
- Real-time check when loan status changes
- Weekly summary report every Monday

ALERT THRESHOLDS:
| Days to Expiration | Alert Level | Action |
|--------------------|-------------|--------|
| 14+ days           | Green       | No alert |
| 10-14 days         | Yellow      | Email summary |
| 5-10 days          | Orange      | Email + Dashboard flag |
| 1-5 days           | Red         | Email + SMS + Dashboard |
| 0 or less          | Critical    | Escalation to manager |

DOCUMENTS TO MONITOR:
- Credit Docs (120-day expiration)
- Pre Approval (90-day expiration)
- Appraisal (180-day expiration)
- Asset Doc Date (120-day expiration)
- Income Doc Date (120-day expiration)
- CPL (30-day expiration)
- Title Doc (90-day expiration)
- Verbal VOE (10-day expiration)

ALERT MESSAGE FORMAT:
{
  "loanNumber": "123456789",
  "borrowerName": "John Smith",
  "processor": "Jane Doe",
  "scheduledClosing": "2026-02-15",
  "expiringDocs": [
    {
      "document": "Income Doc",
      "expirationDate": "2026-02-10",
      "daysRemaining": 7,
      "alertLevel": "Orange"
    }
  ],
  "recommendedAction": "Request updated income documentation"
}

PRIORITY SCORING:
Score = (1 / daysRemaining) * documentWeight * closingProximity
- Higher score = more urgent
- Sort alerts by score descending`,
                integration: `INTEGRATION POINTS:
1. Byte LOS Database
   - Query Important Dates table daily
   - Subscribe to loan status change events
   - Read Scheduled Closing Date for comparison

2. Notification Services
   - Email via SendGrid/internal SMTP
   - SMS via Twilio for critical alerts
   - Dashboard widget in Byte

3. Escalation Workflow
   - Auto-assign tasks when docs expire
   - Notify branch manager for critical loans
   - Track alert acknowledgment

4. Reporting
   - Weekly expiration forecast
   - Monthly compliance metrics
   - Processor performance dashboard

TECHNICAL REQUIREMENTS:
- Process 10,000+ loans in < 5 minutes
- 99.9% uptime for monitoring service
- Audit trail of all alerts sent`
            },
            contingency: {
                name: 'Contingency Tracker Agent',
                tags: ['Document Extraction', 'OCR', 'Medium Complexity', 'High Priority'],
                purpose: `This agent extracts commitment and contingency dates from purchase contracts and addendums, automatically populating the manual entry fields in the Contract Commitment/Contingency section.`,
                prompt: `You are building a Document Extraction Agent for CMG Financial's Byte LOS Important Dates Screen.

AGENT NAME: Contingency Tracker Agent
TYPE: Document AI / Field Extraction

OBJECTIVE:
Create an agent that reads purchase contracts and extracts key contingency dates, then auto-populates the manual entry fields in Byte's Important Dates screen.

TARGET FIELDS TO EXTRACT:
1. Contract Closing Date
2. Loan Approval Contingency Date
3. Appraisal Contingency Date
4. Appraisal Reinspection Date
5. HOI (Homeowner's Insurance) Date
6. Any other dated contingencies

DOCUMENT TYPES TO PROCESS:
- Purchase Agreement/Contract
- Addendums to Purchase Contract
- Counter Offers
- Amendment forms

EXTRACTION PATTERNS:
Look for these common patterns:
- "Loan approval contingency expires on [DATE]"
- "Appraisal contingency: [DATE]"
- "Closing shall occur on or before [DATE]"
- "Buyer shall have until [DATE] to..."
- "This contingency expires [DATE]"

OUTPUT FORMAT:
{
  "loanNumber": "123456789",
  "sourceDocument": "Purchase_Contract.pdf",
  "extractedDates": [
    {
      "field": "Contract Closing Date",
      "value": "2026-02-28",
      "confidence": 0.95,
      "sourceText": "Closing shall occur on February 28, 2026",
      "pageNumber": 3
    },
    {
      "field": "Commitment/Contingency Date 1",
      "type": "Loan Approval",
      "value": "2026-02-14",
      "confidence": 0.92,
      "sourceText": "Loan approval contingency expires February 14, 2026"
    }
  ],
  "needsReview": false
}

CONFIDENCE THRESHOLDS:
- >= 0.90: Auto-populate field
- 0.70-0.89: Populate with review flag
- < 0.70: Manual review required

DATE FORMAT HANDLING:
- "February 28, 2026" -> 2026-02-28
- "2/28/26" -> 2026-02-28
- "28th day of February" -> 2026-02-28`,
                integration: `INTEGRATION POINTS:
1. Document Management System
   - Watch folder for new contracts
   - Process on document upload
   - Support PDF, DOCX, TIF formats

2. Byte LOS
   - API to update Important Dates fields
   - Flag fields as "AI-populated" for audit
   - User confirmation workflow

3. OCR/AI Services
   - Azure Form Recognizer or AWS Textract
   - Custom NER model for date extraction
   - Confidence scoring

4. Audit Trail
   - Log all extractions with source reference
   - Track user confirmations/overrides
   - Compliance reporting

WORKFLOW:
1. Contract uploaded to loan file
2. Agent triggers extraction
3. Dates extracted with confidence scores
4. High-confidence dates auto-populated
5. Low-confidence dates queued for review
6. User confirms or corrects
7. Audit trail updated`
            },
            docdate: {
                name: 'Doc Date Extractor Agent',
                tags: ['OCR', 'AI Extraction', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent scans income and asset documents (paystubs, bank statements, tax returns) to extract document dates, assisting underwriters with the required Asset Doc Date and Income Doc Date manual entries.`,
                prompt: `You are building an OCR/AI Extraction Agent for CMG Financial's Byte LOS Important Dates Screen.

AGENT NAME: Doc Date Extractor Agent
TYPE: Document AI / Date Extraction

OBJECTIVE:
Create an agent that scans income and asset documentation to extract the "as of" dates or statement dates, then suggests these dates for the required UW manual entry fields.

TARGET DOCUMENTS:
INCOME DOCUMENTS:
- Paystubs (pay period end date)
- W-2s (tax year)
- Tax Returns (filing date or tax year)
- 1099s (tax year)
- VOE forms (date verified)

ASSET DOCUMENTS:
- Bank Statements (statement date)
- Investment Statements (as of date)
- Retirement Account Statements (quarter end)
- VOD forms (date verified)

DATE EXTRACTION RULES:
| Document Type | Date to Extract | Priority |
|---------------|-----------------|----------|
| Paystub | Pay Period Ending | 1st |
| Paystub | Pay Date | 2nd |
| Bank Statement | Statement Ending Date | 1st |
| Bank Statement | Statement Date | 2nd |
| Tax Return | Date Signed | 1st |
| Tax Return | Tax Year + Filing Date | 2nd |

EXTRACTION LOCATIONS:
Paystubs:
- Header area: "Pay Period: XX/XX/XXXX - XX/XX/XXXX"
- "Pay Date:", "Check Date:", "Period Ending:"

Bank Statements:
- Header: "Statement Period: XX/XX - XX/XX/XXXX"
- "As of:", "Statement Date:", "Ending Balance as of:"

OUTPUT FORMAT:
{
  "documentType": "Paystub",
  "employer": "ABC Company",
  "borrowerName": "John Smith",
  "extractedDate": "2026-01-15",
  "dateType": "Pay Period Ending",
  "confidence": 0.94,
  "recommendation": "Income Doc Date",
  "sourceLocation": "Page 1, Top Right"
}

MULTIPLE DOCUMENT HANDLING:
When multiple docs of same type exist:
- Use MOST RECENT date for expiration tracking
- Flag if docs span > 60 days (may need refresh)`,
                integration: `INTEGRATION POINTS:
1. Document Classification
   - Auto-classify uploaded docs
   - Route to appropriate extractor
   - Handle multi-page documents

2. OCR Pipeline
   - Pre-process images (deskew, denoise)
   - Run OCR with layout detection
   - Apply date extraction model

3. Byte LOS
   - Suggest values for Asset Doc Date
   - Suggest values for Income Doc Date
   - Underwriter approval workflow

4. Quality Assurance
   - Flag low-confidence extractions
   - Learn from UW corrections
   - Monthly accuracy reporting

ACCURACY TARGETS:
- 95%+ for typed documents
- 85%+ for handwritten dates
- 90%+ overall with manual review`
            },
            compliance: {
                name: 'TRID Compliance Check Agent',
                tags: ['Validation', 'Compliance', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent validates TRID date requirements in real-time, ensuring proper 3-business-day LE delivery, CD waiting periods, and flagging potential compliance issues before they become problems.`,
                prompt: `You are building a Validation Agent for CMG Financial's Byte LOS Important Dates Screen.

AGENT NAME: TRID Compliance Check Agent
TYPE: Rules Engine / Real-time Validation

OBJECTIVE:
Create an agent that continuously validates TRID date requirements and flags potential compliance issues in real-time, before they become regulatory problems.

TRID RULES TO VALIDATE:

1. LOAN ESTIMATE (LE) RULES:
- Initial LE must be delivered within 3 BUSINESS days of application
- LE must be received 7 BUSINESS days before consummation
- Revised LE requires valid change circumstance

2. CLOSING DISCLOSURE (CD) RULES:
- CD must be received 3 BUSINESS days before consummation
- Certain changes require new 3-day waiting period:
  * APR increases > 0.125% (regular) or > 0.25% (irregular)
  * Loan product changes
  * Prepayment penalty added
- Sunday delivery = received Monday

3. INTENT TO PROCEED:
- Must be received before fees charged (except credit report)
- Verbal ITP acceptable but must be documented

VALIDATION CHECKS:
{
  "loanNumber": "123456789",
  "checks": [
    {
      "rule": "LE_3_DAY_DELIVERY",
      "status": "PASS",
      "applicationDate": "2026-01-15",
      "leDeliveredDate": "2026-01-17",
      "businessDays": 2,
      "deadline": "2026-01-20"
    },
    {
      "rule": "CD_3_DAY_WAITING",
      "status": "WARNING",
      "cdDeliveredDate": "2026-02-10",
      "scheduledClosing": "2026-02-12",
      "businessDays": 2,
      "requiredDays": 3,
      "earliestClosing": "2026-02-13"
    }
  ],
  "overallStatus": "NEEDS_ATTENTION"
}

BUSINESS DAY CALCULATION:
- Exclude Sundays
- Exclude Federal holidays
- Include Saturdays (for most purposes)`,
                integration: `INTEGRATION POINTS:
1. Byte LOS Integration
   - Real-time field monitoring
   - Trigger validation on date changes
   - Display warnings in UI

2. Holiday Calendar
   - Federal holiday database
   - State-specific holidays (if applicable)
   - Annual update process

3. Alert System
   - Dashboard warnings
   - Email notifications
   - Compliance officer escalation

4. Audit Trail
   - Log all validations
   - Track override reasons
   - Regulatory exam support

COMPLIANCE DASHBOARD:
- Green: All TRID dates compliant
- Yellow: Approaching deadlines
- Red: Potential violations
- Pipeline-wide compliance score`
            }
        };

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Show agent prompt modal
        let currentPromptContent = '';

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = `${agent.name} - Build Prompt`;

            const tagsHtml = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptTags').innerHTML = tagsHtml;

            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            currentPromptContent = `# ${agent.name}\n\n## Purpose\n${agent.purpose}\n\n## Build Prompt\n${agent.prompt}\n\n## Integration Points\n${agent.integration}`;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            try {
                await navigator.clipboard.writeText(currentPromptContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
