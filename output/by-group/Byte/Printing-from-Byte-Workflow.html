<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Printing from Byte - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Output Options Grid */
        .output-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 22px 0; }

        .output-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .output-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .output-card-header h4 { font-size: 1.05rem; }
        .output-card-body { padding: 18px; }
        .output-card p { color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Agent Card Highlight Animation */
        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        /* AI Prompt Modal */
        .prompt-modal .modal {
            max-width: 800px;
        }

        .prompt-modal .modal-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
        }

        .prompt-section {
            margin-bottom: 25px;
        }

        .prompt-section h4 {
            color: var(--accent-purple);
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .prompt-tag {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .copy-prompt-btn {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 15px;
        }

        .copy-prompt-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.3);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
        .breadcrumb-logo-link { display: inline-flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; flex-shrink: 0; margin-right: 4px; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 24px; width: auto; display: block; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
<a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">Printing from Byte</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Printing from Byte</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Access Print</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Search Documents</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Select Document</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Output Options</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Document Storage</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Printing from Byte</h1>
                <p class="subtitle">Document Generation & Output Workflow Guide</p>
                <div class="meta">
                    <span class="meta-item">System: Byte LOS</span>
                    <span class="meta-item">Role: Loan Officer / Processor</span>
                    <span class="meta-item">Updated: Nov 18, 2022</span>
                    <span class="meta-item">Duration: 2-5 min</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 1: Access Print -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Access Print Function</h2><span>Navigate to the Print icon from the Main Screen</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open Loan in Byte</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Locate Top Navigation Bar</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Click Print Icon</div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>Navigation Tip</h4>
                        <p>The Print icon is located in the top navigation bar of the Main Screen within a loan file. Look for the printer icon among the toolbar icons.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Search Documents -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Search for Documents</h2><span>Find the appropriate document based on AUS status</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Click Search Radio Button</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">AUS Run?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">No AUS</span>
                                <div class="flow-node input">Enter "Pre-Qual"</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">AUS Accept/Approve</span>
                                <div class="flow-node input">Enter "Preliminary"</div>
                            </div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Click Search Button</div>
                        </div>
                    </div>

                    <div class="decision-tree">
                        <h3>Document Selection Decision Tree</h3>
                        <div class="tree-node level-1">
                            <span class="tree-label">Was AUS run on this loan?</span>
                        </div>
                        <div class="tree-node">
                            <strong>NO - AUS was NOT run:</strong> Search for "Pre-Qual" to find Pre-Qualification letters
                        </div>
                        <div class="tree-node">
                            <strong>YES - AUS was run with Accept/Approve:</strong> Search for "Preliminary" to find Pre-Approval letters
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>AUS Status</th>
                                <th>Search Term</th>
                                <th>Document Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>No AUS Run</td>
                                <td><strong>"Pre-Qual"</strong></td>
                                <td>Pre-Qualification Letter</td>
                                <td>Basic qualification without automated underwriting</td>
                            </tr>
                            <tr>
                                <td>DU Accept / LPA Approve</td>
                                <td><strong>"Preliminary"</strong></td>
                                <td>Preliminary Preapproval Letter</td>
                                <td>Full preapproval backed by AUS findings</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Pro Tip</h4>
                        <p>Available documents include variations for different channels:</p>
                        <ul style="margin-top: 10px; padding-left: 20px;">
                            <li>Retail Pre-Qual Letter - CMG</li>
                            <li>Retail Pre-Qual Letter - Divmo</li>
                            <li>Retail Pre-Qual - CMG - No Address</li>
                            <li>JV Pre-Qual Letter GRC - WHF</li>
                            <li>JV Pre-Qual Letter</li>
                            <li>JV TX Conditional Pre-Qualification</li>
                            <li>Retail TX Conditional Pre-Qualification</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 3: Select Document -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Select Document to Print</h2><span>Choose the appropriate document from search results</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Review Available Documents</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Check Desired Document</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Document Added to Selected List</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Document Selection Interface</h4>
                        <p>The Print dialog shows two panels:</p>
                        <ul style="margin-top: 10px; padding-left: 20px;">
                            <li><strong>Available Documents (Left):</strong> Documents matching your search criteria</li>
                            <li><strong>Selected Documents (Right):</strong> Documents queued for output</li>
                        </ul>
                        <p style="margin-top: 10px;">Click the checkbox next to a document name to move it to the Selected Documents panel.</p>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Column</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Document Name</td>
                                <td>Full name of the document template</td>
                            </tr>
                            <tr>
                                <td>Size</td>
                                <td>Paper size (typically "Letter")</td>
                            </tr>
                            <tr>
                                <td>Form No</td>
                                <td>Internal form reference number</td>
                            </tr>
                            <tr>
                                <td>Applicable</td>
                                <td>Indicates if document applies to current loan type</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 4: Output Options -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Choose Output Method</h2><span>Select how to output the document</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node decision">Select Output Method</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Print</span>
                                <div class="flow-node action">Hard Copy Print</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Preview</span>
                                <div class="flow-node action">View on Screen</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">EMail</span>
                                <div class="flow-node action">Send via Email</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">PDF</span>
                                <div class="flow-node action">Save as PDF</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Store</span>
                                <div class="flow-node action">Document Storage</div>
                            </div>
                        </div>
                    </div>

                    <div class="output-grid">
                        <div class="output-card">
                            <div class="output-card-header">
                                <h4>Print</h4>
                            </div>
                            <div class="output-card-body">
                                <p>Sends the document directly to your configured printer for a hard copy output.</p>
                            </div>
                        </div>
                        <div class="output-card">
                            <div class="output-card-header">
                                <h4>Preview</h4>
                            </div>
                            <div class="output-card-body">
                                <p>Opens a preview window to view the document on screen before committing to an output method.</p>
                            </div>
                        </div>
                        <div class="output-card">
                            <div class="output-card-header">
                                <h4>EMail</h4>
                            </div>
                            <div class="output-card-body">
                                <p>Attaches the document to a new email for sending directly to borrowers or other parties.</p>
                            </div>
                        </div>
                        <div class="output-card">
                            <div class="output-card-header">
                                <h4>PDF</h4>
                            </div>
                            <div class="output-card-body">
                                <p>Saves the document as a PDF file to your local computer or network location.</p>
                            </div>
                        </div>
                        <div class="output-card">
                            <div class="output-card-header">
                                <h4>Store</h4>
                            </div>
                            <div class="output-card-body">
                                <p>Saves the document to Byte's Document Storage for record-keeping and future retrieval.</p>
                            </div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Data To Print Option</h4>
                        <p>The "Data To Print" dropdown (defaulted to "All Data") allows you to control which data fields populate in the document. In most cases, "All Data" is the appropriate selection.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Document Storage -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Document Storage & Signatures</h2><span>Store documents and attach signatures</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Click "Store" Button</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Document Saved to Storage</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Attach LO Signature</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node start">Complete</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>Signature Feature</h4>
                        <p>Once a document is stored in Document Storage, the Loan Officer can attach their digital signature to the document. This is particularly useful for Pre-Qualification and Pre-Approval letters that require LO signature before sending to the borrower or real estate agent.</p>
                    </div>

                    <div class="exception-box">
                        <h4>Important Note</h4>
                        <p>The signature attachment feature is only available <strong>after</strong> the document has been stored in Document Storage. You cannot add a signature during the initial print/preview process.</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <div id="quick-ref" class="quick-ref">
                <h3>Quick Reference Guide</h3>
                <pre>
PRINTING FROM BYTE - QUICK REFERENCE
====================================

STEP 1: ACCESS PRINT
- Open loan in Byte
- Click Print icon in top navigation bar

STEP 2: SEARCH FOR DOCUMENTS
- Select "Search" radio button
- Enter search term based on AUS status:
  * No AUS run     -> "Pre-Qual"
  * AUS Accept/Approve -> "Preliminary"
- Click "Search" button

STEP 3: SELECT DOCUMENT
- Check the desired document from results
- Document moves to "Selected Documents" panel

STEP 4: CHOOSE OUTPUT METHOD
+----------+--------------------------------+
| Option   | Description                    |
+----------+--------------------------------+
| Print    | Hard copy to printer           |
| Preview  | View document on screen        |
| EMail    | Send as email attachment       |
| PDF      | Save as PDF file               |
| Store    | Save to Document Storage       |
+----------+--------------------------------+

STEP 5: SIGNATURES (Optional)
- Store document first
- Then attach LO signature from Document Storage

DOCUMENT TYPES:
---------------
Pre-Qual Documents (No AUS):
- Retail Pre-Qual Letter - CMG
- Retail Pre-Qual Letter - Divmo
- JV Pre-Qual Letter
- JV Pre-Qual Letter GRC - WHF

Preliminary Documents (AUS Accept/Approve):
- Retail Preliminary Preapproval Letter
- JV Preliminary Preapproval Letter
                </pre>
            </div>

        </div>

        <!-- ==================== AI AGENTS TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation potential for Document Printing workflow</p>
            </div>

            <!-- Summary Stats -->
            <div id="agent-summary" class="agent-summary" style="scroll-margin-top: 75px;">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">3</div>
                    <div class="agent-summary-label">Potential Agents</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">65%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2-3 min</div>
                    <div class="agent-summary-label">Time Savings/Document</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">Low</div>
                    <div class="agent-summary-label">Implementation Complexity</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div>Critical (9-10)</div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div>High (7-8)</div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div>Medium (5-6)</div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div>Low (1-4)</div>
            </div>

            <!-- Heat Map -->
            <div id="agent-heatmap" class="heat-map-container" style="scroll-margin-top: 75px;">
                <h3 class="heat-map-title">Automation Priority Heat Map</h3>
                <div class="heat-map-grid">
                    <div class="heat-item high" onclick="scrollToAgent('agent-smartdoc')" title="Click to view agent details">
                        <div class="heat-score">8</div>
                        <div class="heat-name">Smart Document Selector</div>
                        <div class="heat-desc">Auto-select documents based on AUS status</div>
                        <div class="heat-metrics">
                            <span class="heat-metric">Time: <span>45s saved</span></span>
                            <span class="heat-metric">Error: <span>-80%</span></span>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-autoemail')" title="Click to view agent details">
                        <div class="heat-score">6</div>
                        <div class="heat-name">Auto-Email Distributor</div>
                        <div class="heat-desc">Smart routing to borrowers/agents</div>
                        <div class="heat-metrics">
                            <span class="heat-metric">Time: <span>90s saved</span></span>
                            <span class="heat-metric">Error: <span>-60%</span></span>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-signature')" title="Click to view agent details">
                        <div class="heat-score">5</div>
                        <div class="heat-name">Signature Automation</div>
                        <div class="heat-desc">Auto-apply LO signature on store</div>
                        <div class="heat-metrics">
                            <span class="heat-metric">Time: <span>30s saved</span></span>
                            <span class="heat-metric">Error: <span>-40%</span></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <div id="agent-details" style="scroll-margin-top: 75px;">
                <h3 class="heat-map-title">Agent Implementation Details</h3>
                <div class="agent-grid">
                    <!-- Agent 1: Smart Document Selector -->
                    <div class="agent-card" id="agent-smartdoc">
                        <div class="agent-card-header">
                            <div class="agent-icon">D</div>
                            <div class="agent-info">
                                <div class="agent-name">Smart Document Selector</div>
                                <div class="agent-type">Document Intelligence</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically determines the correct document type (Pre-Qual vs Preliminary) based on the loan's AUS status and pre-selects the appropriate letter template, eliminating manual search and decision-making.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Workflow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Read AUS Status</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Determine Doc Type</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Pre-Select Document</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">45s</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">80%</div>
                                    <div class="agent-stat-label">Error Reduction</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('smartdoc')">View Build Prompt</button>
                        </div>
                    </div>

                    <!-- Agent 2: Auto-Email Distributor -->
                    <div class="agent-card" id="agent-autoemail">
                        <div class="agent-card-header">
                            <div class="agent-icon">E</div>
                            <div class="agent-info">
                                <div class="agent-name">Auto-Email Distributor</div>
                                <div class="agent-type">Communication Agent</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically routes printed documents to the appropriate recipients (borrower, real estate agent, processor) based on document type and loan stage, with customized email templates.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Workflow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Identify Doc Type</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Lookup Recipients</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Send Email</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">90s</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">60%</div>
                                    <div class="agent-stat-label">Error Reduction</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Med</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('autoemail')">View Build Prompt</button>
                        </div>
                    </div>

                    <!-- Agent 3: Signature Automation -->
                    <div class="agent-card" id="agent-signature">
                        <div class="agent-card-header">
                            <div class="agent-icon">S</div>
                            <div class="agent-info">
                                <div class="agent-name">Signature Automation</div>
                                <div class="agent-type">Process Automation</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically applies the Loan Officer's digital signature when documents are stored, streamlining the workflow and ensuring all required letters are properly signed before distribution.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Workflow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Detect Store Action</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Apply LO Signature</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Confirm Storage</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">30s</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">40%</div>
                                    <div class="agent-stat-label">Error Reduction</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="showAgentPrompt('signature')">View Build Prompt</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Printing from Byte - Workflow Documentation</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Printing from Byte

## Overview
This guide covers how to print documents from the Byte Loan Origination System, including Pre-Qualification and Preliminary Pre-Approval letters.

## Step 1: Access Print Function
1. Open the loan in Byte
2. Navigate to the Main Screen
3. Click the Print icon in the top navigation bar

## Step 2: Search for Documents
1. Click the "Search" radio button
2. Enter your search term:
   - "Pre-Qual" if AUS was NOT run
   - "Preliminary" if AUS was run and you have an Accept/Approve finding
3. Click the Search button

## Step 3: Select Document
1. Review the available documents in the left panel
2. Check the checkbox next to your desired document
3. Document will appear in the "Selected Documents" panel

## Step 4: Choose Output Method
Select one of the following output options:
- **Print**: Send to printer for hard copy
- **Preview**: View document on screen
- **EMail**: Send as email attachment
- **PDF**: Save as PDF file
- **Store**: Save to Document Storage

## Step 5: Signatures (Optional)
1. Use "Store" to save document to Document Storage
2. Open Document Storage
3. Attach LO signature to the stored document

## Document Types

### Pre-Qualification Letters (No AUS)
- Retail Pre-Qual Letter - CMG
- Retail Pre-Qual Letter - Divmo
- Retail Pre-Qual - CMG - No Address
- JV Pre-Qual Letter
- JV Pre-Qual Letter GRC - WHF
- JV TX Conditional Pre-Qualification
- Retail TX Conditional Pre-Qualification

### Preliminary Pre-Approval Letters (AUS Accept/Approve)
- Retail Preliminary Preapproval Letter
- JV Preliminary Preapproval Letter

---
Last Updated: November 18, 2022</pre>
            </div>
        </div>
    </div>

    <!-- Agent Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy All</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div id="promptTags" class="prompt-tags"></div>
                <div class="prompt-section">
                    <h4>Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Copy Success Toast -->
    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <script>
        // Scroll-spy with isScrolling flag and 1000ms timeout
        let isScrolling = false;
        let scrollTimeout = null;

        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling protection
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav clicks - set isScrolling flag
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);

                if (targetSection) {
                    isScrolling = true;

                    // Update active state immediately
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');

                    // Scroll to section
                    targetSection.scrollIntoView({ behavior: 'smooth' });

                    // Clear any existing timeout
                    if (scrollTimeout) clearTimeout(scrollTimeout);

                    // Reset isScrolling after 1000ms
                    scrollTimeout = setTimeout(() => {
                        isScrolling = false;
                    }, 1000);
                }
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal
        let docContent = '';

        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // ====== AGENT PROMPT SYSTEM ======
        const agentPrompts = {
            smartdoc: {
                name: 'Smart Document Selector',
                tags: ['Document Intelligence', 'Low Complexity', 'High Priority'],
                purpose: `This agent automatically determines the correct document type based on the loan's AUS status and pre-selects the appropriate letter template, eliminating manual search and decision-making for Loan Officers.`,
                prompt: `You are building a Document Intelligence Agent for CMG Financial's Byte LOS printing system.

AGENT NAME: Smart Document Selector
TYPE: Document Intelligence / Auto-Selection

OBJECTIVE:
Create an agent that reads the loan's AUS status and automatically searches for and pre-selects the correct document template when the Print function is opened.

INPUT DATA:
1. Loan AUS Status
   - DU Finding: Accept, Approve, Refer, etc.
   - LPA Finding: Accept, Approve, Caution, etc.
   - No AUS run: Empty/null finding

2. Loan Channel
   - Retail
   - JV (Joint Venture)
   - Wholesale

3. Property State
   - Check for state-specific documents (TX Conditional, etc.)

DECISION LOGIC:
+------------------+------------------------+
| AUS Status       | Document Search Term   |
+------------------+------------------------+
| No AUS Run       | "Pre-Qual"             |
| DU Accept        | "Preliminary"          |
| DU Approve       | "Preliminary"          |
| LPA Accept       | "Preliminary"          |
| LPA Approve      | "Preliminary"          |
| DU Refer         | "Pre-Qual" (fallback)  |
| LPA Caution      | "Pre-Qual" (fallback)  |
+------------------+------------------------+

CHANNEL PRIORITIZATION:
For Retail channel, prefer documents with "Retail" in name
For JV channel, prefer documents with "JV" in name
For TX properties, check for "TX Conditional" variants

OUTPUT:
- Auto-populate search field with correct term
- Execute search automatically
- Pre-check the highest-priority matching document
- Display confirmation message to user`,
                integration: `INTEGRATION POINTS:

1. Byte LOS API
   - Read AUS findings from loan record
   - Access channel/branch information
   - Get property state

2. Print Dialog Hook
   - Intercept Print button click
   - Pre-populate search before dialog renders
   - Auto-execute search on dialog open

3. User Preferences
   - Allow LO to set default channel preference
   - Remember last-used document per AUS status
   - Option to disable auto-selection

4. Audit Trail
   - Log which document was auto-selected
   - Record if user changed selection
   - Track accuracy metrics

IMPLEMENTATION:
- Low complexity - simple if/else logic
- Can be implemented as Byte customization
- No external API dependencies
- Estimated dev time: 2-4 hours`
            },
            autoemail: {
                name: 'Auto-Email Distributor',
                tags: ['Communication', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent automatically routes printed documents to the appropriate recipients based on document type and loan stage, with customized email templates for each recipient type.`,
                prompt: `You are building a Communication Agent for CMG Financial's Byte LOS printing system.

AGENT NAME: Auto-Email Distributor
TYPE: Communication / Routing Agent

OBJECTIVE:
Create an agent that automatically determines the correct recipients for a printed document and sends it via email with appropriate messaging.

RECIPIENT LOGIC BY DOCUMENT TYPE:

Pre-Qual Letters:
- Primary: Borrower email
- CC: Real Estate Agent (if on file)
- CC: Loan Officer (for records)

Preliminary Pre-Approval Letters:
- Primary: Real Estate Agent
- CC: Borrower
- CC: Loan Officer

EMAIL TEMPLATE STRUCTURE:
{
  "subject": "[CMG Financial] {DocumentType} for {BorrowerName}",
  "body": "
    Dear {RecipientName},

    Please find attached the {DocumentType} for {BorrowerName}.

    {ConditionalMessage based on document type}

    If you have any questions, please contact me at:
    {LOName} | {LOPhone} | {LOEmail}
    NMLS# {LONMLS}

    Best regards,
    {LOSignature}
  ",
  "attachment": "{GeneratedPDF}"
}

CONDITIONAL MESSAGES:
- Pre-Qual: "This letter confirms the borrower's preliminary qualification based on the information provided."
- Preliminary: "This pre-approval is based on a Desktop Underwriter/Loan Product Advisor analysis and is subject to final underwriting review."

RECIPIENT LOOKUP:
1. Borrower email from loan contacts
2. Real Estate Agent from loan contacts
3. LO email from user profile`,
                integration: `INTEGRATION POINTS:

1. Byte Contact Records
   - Lookup borrower email
   - Lookup real estate agent email
   - Handle multiple borrowers (co-borrowers)

2. Email Service
   - Use Byte's built-in email function
   - Or integrate with SendGrid/Mailgun for tracking
   - Support HTML email templates

3. Template Management
   - Store templates in Byte or external CMS
   - Allow branch-level customization
   - Support LO signature blocks

4. Tracking & Compliance
   - Log all emails sent
   - Track open/click rates
   - Maintain audit trail for compliance

5. Error Handling
   - Handle missing email addresses
   - Prompt for manual entry if needed
   - Queue failed sends for retry

IMPLEMENTATION:
- Medium complexity
- Requires email service integration
- Template system needed
- Estimated dev time: 1-2 days`
            },
            signature: {
                name: 'Signature Automation',
                tags: ['Process Automation', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent automatically applies the Loan Officer's digital signature when documents are stored, streamlining the workflow and ensuring all required letters are properly signed before distribution.`,
                prompt: `You are building a Process Automation Agent for CMG Financial's Byte LOS printing system.

AGENT NAME: Signature Automation Agent
TYPE: Process Automation / Digital Signature

OBJECTIVE:
Create an agent that automatically applies the LO's digital signature to documents when they are stored to Document Storage, eliminating the manual step of opening storage and attaching signature.

TRIGGER CONDITIONS:
- User clicks "Store" button in Print dialog
- Document type requires signature (Pre-Qual, Preliminary)
- LO has digital signature on file

SIGNATURE WORKFLOW:
1. Intercept "Store" action
2. Check if document type requires signature
3. Retrieve LO's digital signature from profile
4. Apply signature to designated signature field
5. Store signed document
6. Confirm completion to user

DOCUMENT TYPES REQUIRING SIGNATURE:
+--------------------------------+------------------+
| Document Type                  | Signature Req    |
+--------------------------------+------------------+
| Pre-Qual Letter (all variants) | YES              |
| Preliminary Pre-Approval       | YES              |
| Disclosure documents           | NO (separate)    |
| Internal worksheets            | NO               |
+--------------------------------+------------------+

SIGNATURE PLACEMENT:
- Use document's designated signature field
- If no field, place at bottom-right of first page
- Apply date stamp alongside signature

ERROR HANDLING:
- No signature on file: Prompt LO to upload
- Signature field not found: Manual fallback
- Storage failure: Retry with notification`,
                integration: `INTEGRATION POINTS:

1. Byte Digital Signature Store
   - Retrieve LO signature image
   - Support multiple signature formats
   - Handle signature expiration/renewal

2. Document Storage API
   - Intercept store operation
   - Apply signature overlay
   - Save to correct folder

3. User Profile
   - Store signature preferences
   - Auto-sign toggle setting
   - Signature position preferences

4. Audit & Compliance
   - Log all auto-signatures
   - Timestamp each signature
   - Maintain signature audit trail

SECURITY CONSIDERATIONS:
- Signature only applied by authenticated user
- Cannot sign on behalf of another LO
- Audit trail cannot be modified

IMPLEMENTATION:
- Low complexity
- Leverage existing Byte signature feature
- Simple trigger/action pattern
- Estimated dev time: 4-8 hours`
            }
        };

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                // Remove any existing highlights
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                // Scroll to the agent card
                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                // Add highlight animation
                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                // Remove highlight after animation
                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Show agent prompt modal
        let currentPromptContent = '';

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            // Set modal title
            document.getElementById('promptModalTitle').textContent = `${agent.name} - Build Prompt`;

            // Set tags
            const tagsHtml = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptTags').innerHTML = tagsHtml;

            // Set content sections
            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            // Store for copy function
            currentPromptContent = `# ${agent.name}\n\n## Purpose\n${agent.purpose}\n\n## Build Prompt\n${agent.prompt}\n\n## Integration Points\n${agent.integration}`;

            // Show modal
            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            try {
                await navigator.clipboard.writeText(currentPromptContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        // Close prompt modal on escape or outside click
        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
