<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verbal Verification of Employment - Self Employed - Byte Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box, .warning-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        .warning-box { background: rgba(245, 158, 11, 0.08); border-color: var(--accent-amber); border: 1px solid rgba(245, 158, 11, 0.2); border-left: 4px solid var(--accent-amber); }
        .warning-box h4 { color: var(--accent-amber); margin-bottom: 10px; font-size: 1rem; }
        .warning-box p, .warning-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Method Cards */
        .method-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .method-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .method-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .method-card-header h4 { font-size: 1.05rem; }
        .method-card-body { padding: 22px; }
        .method-card ul { list-style: none; padding: 0; }
        .method-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: flex-start; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .method-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; flex-shrink: 0; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal {
            max-width: 800px;
        }

        .prompt-modal .modal-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
        }

        .prompt-section {
            margin-bottom: 25px;
        }

        .prompt-section h4 {
            color: var(--accent-purple);
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .prompt-tag {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .copy-prompt-btn {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 15px;
        }

        .copy-prompt-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.3);
        }

        /* Responsive */
        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
        .breadcrumb-logo-link { display: inline-flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; flex-shrink: 0; margin-right: 4px; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 24px; width: auto; display: block; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
<a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">VVOE - Self Employed</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>VVOE Self-Employed</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Access Screen</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Basic Info Entry</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Verification Methods</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">CPA Letter</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Business License</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Business Reference</span>
            </a>
            <a href="#section-7" class="nav-item">
                <span class="nav-number">7</span>
                <span class="nav-label">Phone Verification</span>
            </a>
            <a href="#section-8" class="nav-item">
                <span class="nav-number">8</span>
                <span class="nav-label">Complete & Notes</span>
            </a>
            <a href="#section-9" class="nav-item">
                <span class="nav-number">9</span>
                <span class="nav-label">Print & Store</span>
            </a>
            <a href="#section-10" class="nav-item">
                <span class="nav-number">10</span>
                <span class="nav-label">Document Mgmt</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Summary
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Verbal Verification of Employment - Self Employed</h1>
                <p class="subtitle">Complete VVOE Process for Self-Employed Borrowers in Byte</p>
                <div class="meta">
                    <span class="meta-item">System: Byte</span>
                    <span class="meta-item">Role: Processor</span>
                    <span class="meta-item">Updated: Aug 12, 2025</span>
                    <span class="meta-item">Duration: 10-20 min</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 1: Access Screen -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Access the VVOE Screen</h2><span>Navigate to Verbal Verification - Self Employment</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start VVOE Process</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open VA Services Menu</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Select "Verbal Verification - Self Employment"</div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>Important Note</h4>
                        <p>This job aid is specifically for <strong>Self-Employed borrowers</strong>. For non-self-employed verification, please refer to the standard Verbal Verification of Employment job aid.</p>
                    </div>
                    <div class="tip-box">
                        <h4>Investor Guidelines</h4>
                        <p>Always refer to Investor guidelines for Self-Employment Verbal VOE timing requirements before proceeding.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Basic Info Entry -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Enter Basic Information</h2><span>Complete processor and borrower details</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node input">Enter Name in "VOE Completed By" Field</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter Borrower's Name</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter Business Name</div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                                <th>Required</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>VOE Completed By</strong></td>
                                <td>Enter your name (the processor completing the verification)</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Borrower's Name</strong></td>
                                <td>Full legal name of the self-employed borrower</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                            <tr>
                                <td><strong>Business Name</strong></td>
                                <td>Legal name of the borrower's business entity</td>
                                <td><span class="badge required-badge">Required</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 3: Verification Methods Overview -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Choose Verification Method</h2><span>Select ONE method to verify self-employment</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node decision">Select ONE Verification Method</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Option 1</span>
                                <div class="flow-node action">CPA Letter</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Option 2</span>
                                <div class="flow-node action">Business License</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Option 3</span>
                                <div class="flow-node action">Business Reference</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Option 4</span>
                                <div class="flow-node action">Business Phone Verification</div>
                            </div>
                        </div>
                    </div>
                    <div class="method-cards">
                        <div class="method-card">
                            <div class="method-card-header">
                                <h4>CPA Letter</h4>
                            </div>
                            <div class="method-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Requires CPA contact and verification</li>
                                    <li><span class="check-icon">+</span> 3rd party lookup of CPA required</li>
                                    <li><span class="check-icon">+</span> Most common for tax-documented income</li>
                                </ul>
                            </div>
                        </div>
                        <div class="method-card">
                            <div class="method-card-header">
                                <h4>Business License</h4>
                            </div>
                            <div class="method-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Verify Active/In Good Standing status</li>
                                    <li><span class="check-icon">+</span> Upload license copy to file</li>
                                    <li><span class="check-icon">+</span> Escalate if Inactive status</li>
                                </ul>
                            </div>
                        </div>
                        <div class="method-card">
                            <div class="method-card-header">
                                <h4>Business Reference</h4>
                            </div>
                            <div class="method-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Third-party confirms business existence</li>
                                    <li><span class="check-icon">+</span> Document referring party details</li>
                                    <li><span class="check-icon">+</span> 3rd party lookup required</li>
                                </ul>
                            </div>
                        </div>
                        <div class="method-card">
                            <div class="method-card-header">
                                <h4>Phone Verification</h4>
                            </div>
                            <div class="method-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Reverse phone lookup required</li>
                                    <li><span class="check-icon">+</span> Must call and verify business active</li>
                                    <li><span class="check-icon">+</span> Document address confirmation</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="warning-box">
                        <h4>Important</h4>
                        <p>You must complete <strong>ONE</strong> of the four verification methods. All supporting documentation must be merged with the Verbal Verification of Employment into a single document in Stored Documents.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: CPA Letter Method -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>CPA Letter Verification</h2><span>Complete if using CPA Letter method</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Check "CPA Letter" Box</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter CPA Letter Date</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter Name of CPA</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node input">Enter Verbal Verification Date</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter CPA Phone #</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Internet Search CPA</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Print Search to Stored Docs</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Check "3rd Party Lookup" Box</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Proceed to Notes</div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>CPA Letter</strong></td>
                                <td>Check this box to indicate CPA Letter method</td>
                                <td>[Checked]</td>
                            </tr>
                            <tr>
                                <td><strong>Date of CPA Letter</strong></td>
                                <td>Date the CPA letter was issued</td>
                                <td>07/31/2025</td>
                            </tr>
                            <tr>
                                <td><strong>Name of CPA</strong></td>
                                <td>Full name of the Certified Public Accountant</td>
                                <td>Michelle McKean</td>
                            </tr>
                            <tr>
                                <td><strong>Date of Verbal Verification with CPA</strong></td>
                                <td>Date you contacted and verified with the CPA</td>
                                <td>08/07/2025</td>
                            </tr>
                            <tr>
                                <td><strong>CPA Phone #</strong></td>
                                <td>Phone number used to contact the CPA</td>
                                <td>555-555-5555</td>
                            </tr>
                            <tr>
                                <td><strong>3rd Party Lookup of CPA</strong></td>
                                <td>Check after uploading internet search results</td>
                                <td>[Checked]</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="tip-box">
                        <h4>Best Practice</h4>
                        <p>Perform an internet search of the CPA to verify their credentials and print the results directly to Stored Documents before checking the 3rd Party Lookup box.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Business License Method -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Business License Verification</h2><span>Complete if using Business License method</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Check "Business License" Box</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Check License Status</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Active/In Good Standing</span>
                                <div class="flow-node output">Select Active Status</div>
                                <span class="flow-arrow" style="transform: rotate(90deg);">-></span>
                                <div class="flow-node action">Upload License Copy</div>
                                <span class="flow-arrow" style="transform: rotate(90deg);">-></span>
                                <div class="flow-node output">Proceed to Notes</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Inactive/Not in Good Standing</span>
                                <div class="flow-node exception">Select Inactive Status</div>
                                <span class="flow-arrow" style="transform: rotate(90deg);">-></span>
                                <div class="flow-node exception">ESCALATE to Loan Team</div>
                            </div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Status</th>
                                <th>Action Required</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Active/In Good Standing</strong></td>
                                <td>Select status, upload license copy to Stored Documents, proceed</td>
                            </tr>
                            <tr>
                                <td><strong>Inactive/Not in Good Standing</strong></td>
                                <td>Select status, <span class="badge required-badge">ESCALATE</span> to loan team immediately</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="exception-box">
                        <h4>Escalation Required</h4>
                        <p>If the Business License status shows <strong>Inactive/Not in Good Standing</strong>, you must escalate to the loan team immediately. Do not proceed with the verification until guidance is received.</p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Business Reference Method -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Business Reference Verification</h2><span>Complete if using Business Reference method</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Check "Business Reference" Box</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter Date of Document</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter Referring Party Name & Relation</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Search Referring Party</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Print Results to Stored Docs</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Check "3rd Party Lookup" Box</div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Business Reference</strong></td>
                                <td>Check this box to indicate Reference method</td>
                                <td>[Checked]</td>
                            </tr>
                            <tr>
                                <td><strong>Date of Document</strong></td>
                                <td>Date the reference was confirmed</td>
                                <td>08/06/2025</td>
                            </tr>
                            <tr>
                                <td><strong>Referring Party</strong></td>
                                <td>Name and relationship of the referring party</td>
                                <td>Andy Smith / current client</td>
                            </tr>
                            <tr>
                                <td><strong>3rd Party Lookup</strong></td>
                                <td>Check after uploading search results of referring entity</td>
                                <td>[Checked]</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 7: Business Phone Verification Method -->
            <section id="section-7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <div class="section-title"><h2>Business Phone Verification</h2><span>Complete if using Phone Verification method</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node input">Enter Business Phone Number</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter Business Address</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Perform Reverse Phone Lookup</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Print Results to Stored Docs</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Check "Reverse Phone Look-up" Box</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Call Verified Phone Number</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Confirm Business Active?</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Check "Number Called & Verified" Box</div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                                <th>Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Business Phone</strong></td>
                                <td>Verified phone number for the business</td>
                                <td>555-555-5555</td>
                            </tr>
                            <tr>
                                <td><strong>Business Address</strong></td>
                                <td>Verified physical address of the business</td>
                                <td>123 Main Street Smalltown USA</td>
                            </tr>
                            <tr>
                                <td><strong>Reverse Phone Look-up Uploaded</strong></td>
                                <td>Check after uploading reverse lookup results</td>
                                <td>[Checked]</td>
                            </tr>
                            <tr>
                                <td><strong>Number Called & Verified</strong></td>
                                <td>Check after calling and confirming business is active</td>
                                <td>[Checked]</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="info-box">
                        <h4>Verification Steps</h4>
                        <p>You must perform <strong>both</strong> a reverse phone lookup AND call the number to verify business existence. Both checkboxes must be marked.</p>
                    </div>
                </div>
            </section>

            <!-- Section 8: Complete & Notes -->
            <section id="section-8" class="section">
                <div class="section-header">
                    <div class="section-number">8</div>
                    <div class="section-title"><h2>Complete Verification</h2><span>Add notes and completion date</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node input">Enter Notes (if applicable)</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter Date Verification Completed</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Additional SE Income?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Yes</span>
                                <div class="flow-node action">Complete Sections 2-4</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">No</span>
                                <div class="flow-node output">Proceed to Print</div>
                            </div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Notes Section</strong></td>
                                <td>Enter any applicable notes about the verification process</td>
                            </tr>
                            <tr>
                                <td><strong>Date Verification Completed</strong></td>
                                <td>Enter the date you completed this verification (e.g., 08/06/2025)</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="tip-box">
                        <h4>Multiple Self-Employment Income Sources</h4>
                        <p>If the borrower has additional self-employed income requiring verbal verification, repeat the process using <strong>Verification sections 2-4</strong> on the screen. You can document up to 4 separate self-employment verifications.</p>
                    </div>
                </div>
            </section>

            <!-- Section 9: Print & Store -->
            <section id="section-9" class="section">
                <div class="section-header">
                    <div class="section-number">9</div>
                    <div class="section-title"><h2>Print and Store Document</h2><span>Generate and save the VVOE</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Click Print Icon</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Check "Verbal Verification-Self Employment"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Store"</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node decision">Password Protect?</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Select "No"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter File Name</div>
                        </div>
                    </div>
                    <div class="summary-grid">
                        <div class="summary-card">
                            <h4>Step 7</h4>
                            <div class="value">Print</div>
                            <p class="label">Click Print Icon</p>
                        </div>
                        <div class="summary-card">
                            <h4>Step 8</h4>
                            <div class="value">Select</div>
                            <p class="label">Check VVOE-SE Box</p>
                        </div>
                        <div class="summary-card">
                            <h4>Step 9</h4>
                            <div class="value">Store</div>
                            <p class="label">Click Store Button</p>
                        </div>
                        <div class="summary-card">
                            <h4>Step 10-11</h4>
                            <div class="value">Name</div>
                            <p class="label">No Password, Enter Name</p>
                        </div>
                    </div>
                    <div class="warning-box">
                        <h4>Do Not Password Protect</h4>
                        <p>When storing the document, do <strong>NOT</strong> password protect it. The file name you enter will display as the description in Stored Documents.</p>
                    </div>
                </div>
            </section>

            <!-- Section 10: Document Management -->
            <section id="section-10" class="section">
                <div class="section-header">
                    <div class="section-number">10</div>
                    <div class="section-title"><h2>Document Management</h2><span>Status, type, and merge documents</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Navigate to Stored Documents</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Status the Document</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Update Type to "Verbal VOE"</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node input">Add Expiration Date</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Tag VVOE Condition</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Merge Supporting Docs</div>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node output">Verification Complete</div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Step</th>
                                <th>Field/Action</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>12</td>
                                <td>Navigate to Stored Documents</td>
                                <td>Open Stored Documents screen</td>
                            </tr>
                            <tr>
                                <td>13</td>
                                <td>Status</td>
                                <td>Approved</td>
                            </tr>
                            <tr>
                                <td>14</td>
                                <td>Type</td>
                                <td>Verbal Verification of Employment</td>
                            </tr>
                            <tr>
                                <td>15</td>
                                <td>Expires</td>
                                <td>Per investor guideline (e.g., 08/19/2025)</td>
                            </tr>
                            <tr>
                                <td>16</td>
                                <td>Condition</td>
                                <td>Tag the VVOE condition</td>
                            </tr>
                            <tr>
                                <td>17</td>
                                <td>Merge</td>
                                <td>Merge all supporting documentation</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="exception-box">
                        <h4>Critical: Merge All Documentation</h4>
                        <p>All verification methods used must be uploaded to the loan file:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>3rd party lookup of CPA</li>
                            <li>Business License copy</li>
                            <li>Business Reference documentation</li>
                            <li>Business Phone reverse lookup</li>
                        </ul>
                        <p style="margin-top: 10px;"><strong>All documentation supporting the Verbal Method must be merged with the Verbal Verification of Employment into a single document in Stored Documents.</strong></p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <div id="quick-ref" class="quick-ref">
                <h3>Quick Reference - VVOE Self-Employed Checklist</h3>
                <pre>
VERBAL VERIFICATION OF EMPLOYMENT - SELF EMPLOYED
==================================================

PRE-REQUISITES:
[ ] Refer to Investor guidelines for timing requirements
[ ] Confirm borrower is self-employed (not W-2)

BASIC INFORMATION:
[ ] VOE Completed By: [Your Name]
[ ] Borrower's Name: [Full Legal Name]
[ ] Business Name: [Business Entity Name]

VERIFICATION METHODS (Choose ONE):
----------------------------------

1. CPA LETTER:
   [ ] Check CPA Letter box
   [ ] Date of CPA Letter
   [ ] Name of CPA
   [ ] Date of Verbal Verification with CPA
   [ ] CPA Phone #
   [ ] Internet search CPA -> Print to Stored Docs
   [ ] Check "3rd Party Lookup of CPA" box

2. BUSINESS LICENSE:
   [ ] Check Business License box
   [ ] Select Status: Active/In Good Standing
   [ ] If INACTIVE -> ESCALATE to loan team
   [ ] Upload copy to Stored Documents

3. BUSINESS REFERENCE:
   [ ] Check Business Reference box
   [ ] Date of Document (reference confirmation)
   [ ] Referring Party name and relation
   [ ] Search referring party -> Print to Stored Docs
   [ ] Check "3rd Party Lookup" box

4. BUSINESS PHONE VERIFICATION:
   [ ] Enter Business Phone Number
   [ ] Enter Business Address
   [ ] Reverse phone search -> Print to Stored Docs
   [ ] Check "Reverse Phone Look-up" box
   [ ] Call number, confirm business active
   [ ] Check "Number Called & Verified" box

COMPLETION:
[ ] Enter applicable Notes
[ ] Enter Date Verification Completed
[ ] Repeat for additional SE income (Sections 2-4)

PRINT & STORE:
[ ] Click Print icon
[ ] Select "Verbal Verification-Self Employment"
[ ] Click Store
[ ] Do NOT password protect
[ ] Enter file name/description

DOCUMENT MANAGEMENT:
[ ] Navigate to Stored Documents
[ ] Status: Approved
[ ] Type: Verbal Verification of Employment
[ ] Category: INC
[ ] Add expiration date per investor guideline
[ ] Tag VVOE condition
[ ] MERGE all supporting docs with VVOE

==================================================
Updated: 8/12/2025
Contact: training@cmgfi.com
                </pre>
            </div>
        </div>

        <!-- ==================== AGENTS TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Agent Header -->
            <div class="agent-header" id="agent-summary">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation potential for VVOE Self-Employed workflow</p>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">4</div>
                    <p class="agent-summary-label">Agent Opportunities</p>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">65%</div>
                    <p class="agent-summary-label">Automation Potential</p>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">12min</div>
                    <p class="agent-summary-label">Est. Time Savings</p>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2</div>
                    <p class="agent-summary-label">High Priority</p>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div>
                    <span>Critical (9-10)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div>
                    <span>High (7-8)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div>
                    <span>Medium (5-6)</span>
                </div>
                <div class="heat-legend-item">
                    <div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div>
                    <span>Low (1-4)</span>
                </div>
            </div>

            <!-- Heat Map -->
            <div class="heat-map-container">
                <h3 class="heat-map-title">Automation Priority Heat Map</h3>
                <div class="heat-map-grid">
                    <div class="heat-item high" onclick="scrollToAgent('agent-autolookup')">
                        <div class="heat-score">8</div>
                        <div class="heat-name">Auto 3rd Party Lookup</div>
                        <div class="heat-desc">Automated CPA/business verification searches</div>
                        <div class="heat-metrics">
                            <span class="heat-metric">Time: <span>5min</span></span>
                            <span class="heat-metric">Freq: <span>High</span></span>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-docmerge')">
                        <div class="heat-score">8</div>
                        <div class="heat-name">Document Merge Agent</div>
                        <div class="heat-desc">Auto-merge supporting docs with VVOE</div>
                        <div class="heat-metrics">
                            <span class="heat-metric">Time: <span>4min</span></span>
                            <span class="heat-metric">Freq: <span>High</span></span>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-validation')">
                        <div class="heat-score">6</div>
                        <div class="heat-name">Validation Agent</div>
                        <div class="heat-desc">Pre-submission completeness check</div>
                        <div class="heat-metrics">
                            <span class="heat-metric">Time: <span>2min</span></span>
                            <span class="heat-metric">Freq: <span>Med</span></span>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-expiry')">
                        <div class="heat-score">5</div>
                        <div class="heat-name">Expiration Tracker</div>
                        <div class="heat-desc">Monitor VVOE expiration dates</div>
                        <div class="heat-metrics">
                            <span class="heat-metric">Time: <span>1min</span></span>
                            <span class="heat-metric">Freq: <span>Low</span></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Cards -->
            <div id="agent-details">
                <h3 class="heat-map-title">Agent Implementation Details</h3>
                <div class="agent-grid">
                    <!-- Agent 1: Auto 3rd Party Lookup -->
                    <div class="agent-card" id="agent-autolookup">
                        <div class="agent-card-header">
                            <div class="agent-icon">S</div>
                            <div class="agent-info">
                                <div class="agent-name">Auto 3rd Party Lookup Agent</div>
                                <div class="agent-type">Web Automation</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically performs internet searches for CPA verification, business license validation, and referring party lookups. Captures results and stores directly to loan file.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Workflow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Extract Name</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Web Search</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Capture Results</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Store to Docs</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">5min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">90%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Med</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="openPromptModal('autolookup')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- Agent 2: Document Merge Agent -->
                    <div class="agent-card" id="agent-docmerge">
                        <div class="agent-card-header">
                            <div class="agent-icon">M</div>
                            <div class="agent-info">
                                <div class="agent-name">Document Merge Agent</div>
                                <div class="agent-type">Document Processing</div>
                            </div>
                            <span class="agent-priority high">High</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Automatically identifies all VVOE supporting documents, merges them into a single PDF, and updates document status and metadata in Stored Documents.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Workflow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Find VVOE Docs</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Merge PDFs</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Update Status</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Tag Condition</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">4min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">99%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="openPromptModal('docmerge')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- Agent 3: Validation Agent -->
                    <div class="agent-card" id="agent-validation">
                        <div class="agent-card-header">
                            <div class="agent-icon">V</div>
                            <div class="agent-info">
                                <div class="agent-name">VVOE Validation Agent</div>
                                <div class="agent-type">Quality Assurance</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Validates VVOE completeness before submission. Checks all required fields, verifies supporting documentation is present, and flags missing items.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Workflow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Read VVOE</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Check Fields</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Verify Docs</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Report Issues</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">2min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">95%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="openPromptModal('validation')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>

                    <!-- Agent 4: Expiration Tracker -->
                    <div class="agent-card" id="agent-expiry">
                        <div class="agent-card-header">
                            <div class="agent-icon">E</div>
                            <div class="agent-info">
                                <div class="agent-name">Expiration Tracker Agent</div>
                                <div class="agent-type">Monitoring</div>
                            </div>
                            <span class="agent-priority medium">Medium</span>
                        </div>
                        <div class="agent-card-body">
                            <p class="agent-description">Monitors VVOE expiration dates based on investor guidelines and sends proactive alerts when documents are approaching expiration.</p>
                            <div class="agent-flow">
                                <div class="agent-flow-title">Agent Workflow</div>
                                <div class="agent-flow-diagram">
                                    <span class="agent-step">Scan Loans</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Check Dates</span>
                                    <span class="agent-arrow">-></span>
                                    <span class="agent-step">Send Alerts</span>
                                </div>
                            </div>
                            <div class="agent-stats">
                                <div class="agent-stat">
                                    <div class="agent-stat-value">1min</div>
                                    <div class="agent-stat-label">Time Saved</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">100%</div>
                                    <div class="agent-stat-label">Accuracy</div>
                                </div>
                                <div class="agent-stat">
                                    <div class="agent-stat-value">Low</div>
                                    <div class="agent-stat-label">Complexity</div>
                                </div>
                            </div>
                            <button class="agent-prompt-btn" onclick="openPromptModal('expiry')">
                                View Build Prompt
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>VVOE Self-Employed - Workflow Summary</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent">VERBAL VERIFICATION OF EMPLOYMENT - SELF EMPLOYED
==================================================

PURPOSE:
Qualifying income from employment and/or self-employment requires a
Verbal Verification of Employment (VVOE) to be performed by the
Processor prior to closing. This guide is for Self-Employed borrowers.

VERIFICATION METHODS (Choose ONE):
1. CPA Letter - Contact CPA, perform 3rd party lookup
2. Business License - Verify Active/In Good Standing status
3. Business Reference - Third-party business confirmation
4. Business Phone - Reverse lookup and call verification

KEY REQUIREMENTS:
- All supporting documentation must be merged with VVOE
- Set appropriate expiration date per investor guidelines
- Tag the VVOE condition
- Do NOT password protect stored documents

ESCALATION:
If Business License shows Inactive/Not in Good Standing,
escalate to loan team immediately.

Updated: 8/12/2025
Contact: training@cmgfi.com</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav clicks with scroll flag
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);

                // Update active state immediately
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Reset flag after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Agent nav scroll spy
        const agentSections = document.querySelectorAll('#agents-panel > div[id]');
        const agentNavItems = document.querySelectorAll('#agents-nav .nav-item');

        function updateAgentNav() {
            if (isScrolling) return;

            let current = '';
            agentSections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            agentNavItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        agentNavItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);

                agentNavItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        // Scroll to agent from heat map
        function scrollToAgent(agentId) {
            const agent = document.getElementById(agentId);
            if (agent) {
                agent.scrollIntoView({ behavior: 'smooth', block: 'center' });
                agent.classList.add('highlight');
                setTimeout(() => agent.classList.remove('highlight'), 2000);
            }
        }

        // Modal functions
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // ====== AGENT PROMPT SYSTEM ======
        const agentPrompts = {
            autolookup: {
                name: 'Auto 3rd Party Lookup Agent',
                tags: ['Web Automation', 'Search Integration', 'Medium Complexity', 'High Priority'],
                purpose: `This agent automatically performs internet searches for CPA verification, business entity validation, and referring party lookups. It captures search results as PDF screenshots and stores them directly to the loan file, eliminating manual browser work.`,
                prompt: `You are building a Web Automation Agent for CMG Financial's Byte LOS VVOE Self-Employed workflow.

AGENT NAME: Auto 3rd Party Lookup Agent
TYPE: Web Automation / Search Integration

OBJECTIVE:
Create an agent that automatically performs verification searches and captures results for VVOE documentation.

INPUT PARAMETERS:
1. Search Type (CPA, Business, Reference)
2. Entity Name to search
3. Additional context (phone, address, license number)
4. Loan Number for storage

SEARCH WORKFLOWS:

CPA VERIFICATION:
1. Extract CPA name from VVOE form
2. Search state CPA licensing board
3. Search general web for CPA practice
4. Capture results as PDF
5. Store to loan file with timestamp

BUSINESS LICENSE:
1. Extract business name and state
2. Search Secretary of State database
3. Capture license status and details
4. Flag if Inactive status detected
5. Store results to loan file

BUSINESS REFERENCE:
1. Extract referring party name
2. Search business registries
3. Search LinkedIn/professional networks
4. Capture verification results
5. Store to loan file

OUTPUT FORMAT:
{
  "searchType": "CPA|Business|Reference",
  "entityName": "...",
  "searchResults": [
    { "source": "State Board", "status": "Active", "url": "..." }
  ],
  "pdfPath": "stored_documents/...",
  "timestamp": "ISO8601",
  "flags": ["warning if any"]
}`,
                integration: `INTEGRATION POINTS:
1. Byte VVOE Form
   - Read entity names from form fields
   - Trigger search on field completion

2. Browser Automation
   - Puppeteer/Playwright for web searches
   - PDF capture of search results
   - Screenshot fallback for complex pages

3. Stored Documents
   - API integration for document upload
   - Auto-naming convention: "3rdParty_[Type]_[Date].pdf"
   - Update checkbox fields after upload

DEPLOYMENT:
- Background service with queue processing
- Manual trigger button on VVOE screen
- Batch processing for multiple verifications`
            },
            docmerge: {
                name: 'Document Merge Agent',
                tags: ['Document Processing', 'PDF Manipulation', 'Low Complexity', 'High Priority'],
                purpose: `This agent identifies all VVOE supporting documents in Stored Documents, merges them into a single PDF in the correct order, updates document metadata, and tags the appropriate condition.`,
                prompt: `You are building a Document Processing Agent for CMG Financial's Byte LOS.

AGENT NAME: Document Merge Agent
TYPE: Document Processing / PDF Manipulation

OBJECTIVE:
Automatically merge all VVOE supporting documentation into a single PDF and properly categorize it.

INPUT PARAMETERS:
1. Loan Number
2. VVOE Type (Self-Employed)
3. Verification Method Used (CPA, License, Reference, Phone)

DOCUMENT IDENTIFICATION:
Search Stored Documents for:
- "Verbal Verification - Self Employment" (base document)
- "3rd Party Lookup" documents
- Business License copies
- Reverse Phone Lookup results
- CPA verification results

MERGE ORDER:
1. Verbal Verification form (cover page)
2. Supporting verification documents
3. 3rd party lookup results
4. Additional evidence

PROCESSING STEPS:
1. Query Stored Documents for VVOE-related files
2. Sort by document type and date
3. Merge PDFs in correct order
4. Generate combined PDF
5. Upload merged document
6. Update document metadata:
   - Status: Approved
   - Type: Verbal Verification of Employment
   - Category: INC
   - Expiration: [Calculate per investor]
7. Tag VVOE condition
8. Archive individual source documents

OUTPUT:
{
  "mergedDocument": "path/to/merged.pdf",
  "pageCount": 8,
  "sourceDocs": ["doc1.pdf", "doc2.pdf", ...],
  "metadata": {
    "status": "Approved",
    "type": "Verbal Verification of Employment",
    "expiration": "2025-08-19"
  },
  "conditionTagged": true
}`,
                integration: `INTEGRATION POINTS:
1. Stored Documents API
   - Query documents by loan number
   - Filter by document type/naming
   - Upload merged result

2. PDF Processing
   - PyPDF2 or similar for merging
   - Maintain page quality
   - Add page numbers if needed

3. Byte Condition System
   - API to tag conditions
   - Auto-select VVOE condition

TECHNICAL REQUIREMENTS:
- Handle various PDF formats
- Maintain document quality
- Support large file sizes
- Audit trail of merged sources`
            },
            validation: {
                name: 'VVOE Validation Agent',
                tags: ['Quality Assurance', 'Form Validation', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent performs pre-submission validation of VVOE forms, checking all required fields are complete, supporting documentation exists, and flags any missing or invalid entries before the processor submits.`,
                prompt: `You are building a Quality Assurance Agent for CMG Financial's Byte LOS.

AGENT NAME: VVOE Validation Agent
TYPE: Quality Assurance / Form Validation

OBJECTIVE:
Validate VVOE Self-Employed forms for completeness and accuracy before submission.

VALIDATION RULES:

REQUIRED FIELDS (All Methods):
- VOE Completed By: Not empty
- Borrower Name: Not empty
- Business Name: Not empty
- Date Verification Completed: Valid date

CPA LETTER METHOD:
- CPA Letter checkbox: Checked
- Date of CPA Letter: Valid date, not future
- Name of CPA: Not empty
- Date of Verbal Verification: Valid date
- CPA Phone #: Valid phone format
- 3rd Party Lookup checkbox: Checked
- Supporting doc exists in Stored Documents

BUSINESS LICENSE METHOD:
- Business License checkbox: Checked
- Status selected: Active or Inactive
- If Inactive: Flag for escalation
- License document uploaded

BUSINESS REFERENCE METHOD:
- Business Reference checkbox: Checked
- Date of Document: Valid date
- Referring Party: Name and relation provided
- 3rd Party Lookup checkbox: Checked
- Supporting doc exists

PHONE VERIFICATION METHOD:
- Business Phone: Valid format
- Business Address: Not empty
- Reverse Lookup checkbox: Checked
- Number Called checkbox: Checked
- Lookup document uploaded

OUTPUT FORMAT:
{
  "isValid": true|false,
  "method": "CPA|License|Reference|Phone",
  "errors": [
    { "field": "...", "error": "...", "severity": "error|warning" }
  ],
  "warnings": [...],
  "missingDocs": [...],
  "readyForSubmission": true|false
}`,
                integration: `INTEGRATION POINTS:
1. Byte VVOE Form
   - Read all form field values
   - Real-time validation on change
   - Submit button gating

2. Stored Documents
   - Check for required supporting docs
   - Verify document names/types match

3. User Interface
   - Display validation results
   - Highlight missing/invalid fields
   - Block submission until resolved

DEPLOYMENT:
- Client-side validation script
- Server-side confirmation
- Pre-submit hook integration`
            },
            expiry: {
                name: 'Expiration Tracker Agent',
                tags: ['Monitoring', 'Alerts', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent monitors VVOE expiration dates across all loans in the pipeline and sends proactive alerts to processors when documents are approaching or have exceeded their expiration dates based on investor guidelines.`,
                prompt: `You are building a Monitoring Agent for CMG Financial's loan pipeline.

AGENT NAME: Expiration Tracker Agent
TYPE: Monitoring / Alerting

OBJECTIVE:
Track VVOE expiration dates and send proactive alerts to prevent stale documentation.

MONITORING PARAMETERS:

ALERT THRESHOLDS:
- 14 days before expiration: Yellow alert
- 7 days before expiration: Orange alert
- 3 days before expiration: Red alert
- Expired: Critical alert

INVESTOR GUIDELINES:
(Configure per investor)
- Fannie Mae: 10 business days before closing
- Freddie Mac: 10 business days before closing
- FHA: 10 calendar days before closing
- VA: 10 business days before closing

DATA SOURCES:
1. Stored Documents - VVOE expiration field
2. Loan Details - Expected closing date
3. Investor Code - Guideline lookup

DAILY SCAN PROCESS:
1. Query all loans with VVOE documents
2. Calculate days until expiration
3. Compare against investor guidelines
4. Generate alert queue
5. Send notifications

ALERT FORMAT:
{
  "loanNumber": "...",
  "borrowerName": "...",
  "vvoeExpiration": "2025-08-19",
  "closingDate": "2025-08-25",
  "daysRemaining": 6,
  "alertLevel": "orange",
  "processor": "processor@cmgfi.com",
  "action": "VVOE refresh required before closing"
}

NOTIFICATION CHANNELS:
- Email to assigned processor
- Dashboard widget
- Pipeline report flag`,
                integration: `INTEGRATION POINTS:
1. Byte Stored Documents
   - Query expiration dates
   - Filter by document type

2. Loan Pipeline
   - Get expected closing dates
   - Get assigned processor

3. Email/Notification System
   - Send alert emails
   - Dashboard integration

4. Reporting
   - Daily expiration report
   - Pipeline risk summary

DEPLOYMENT:
- Daily scheduled job (6 AM)
- On-demand pipeline scan
- Real-time closing date change trigger`
            }
        };

        let currentPromptKey = '';

        function openPromptModal(promptKey) {
            currentPromptKey = promptKey;
            const prompt = agentPrompts[promptKey];
            if (!prompt) return;

            document.getElementById('promptModalTitle').textContent = prompt.name + ' - Build Prompt';
            document.getElementById('promptTags').innerHTML = prompt.tags.map(t => `<span class="prompt-tag">${t}</span>`).join('');
            document.getElementById('promptPurpose').textContent = prompt.purpose;
            document.getElementById('promptContent').textContent = prompt.prompt;
            document.getElementById('promptIntegration').textContent = prompt.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            const prompt = agentPrompts[currentPromptKey];
            if (!prompt) return;

            const fullPrompt = `${prompt.name}\n\n${prompt.purpose}\n\n${prompt.prompt}\n\n${prompt.integration}`;
            try {
                await navigator.clipboard.writeText(fullPrompt);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy.');
            }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
