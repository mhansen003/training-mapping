<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Byte UCD Process - Workflow Guide</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Portal Comparison Cards */
        .portal-comparison { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .portal-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .portal-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .portal-card-header h4 { font-size: 1.05rem; }
        .portal-card-body { padding: 22px; }
        .portal-card ul { list-style: none; padding: 0; }
        .portal-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .portal-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">UCD Process</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>UCD Process</h2>
            <p>Uniform Closing Dataset Workflow</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Upload Closing Disclosure</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Split the CD</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Delivery Destination</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Extract UCD XML</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Fannie Mae Portal</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Freddie Mac Portal</span>
            </a>
            <a href="#section-7" class="nav-item">
                <span class="nav-number">7</span>
                <span class="nav-label">Corrections & Re-submission</span>
            </a>
            <a href="#section-8" class="nav-item">
                <span class="nav-number">8</span>
                <span class="nav-label">Common Errors</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Documentation
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Uniform Closing Dataset (UCD) Process</h1>
                <p class="subtitle">Complete workflow for UCD submission to Fannie Mae and Freddie Mac</p>
                <div class="meta">
                    <span class="meta-item">System: Byte</span>
                    <span class="meta-item">Role: Funder / Funding Assistant</span>
                    <span class="meta-item">Updated: Nov 24, 2025</span>
                    <span class="meta-item">Loan Type: Agency Conventional Only</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 1: Upload Closing Disclosure -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Upload the Buyer's Closing Disclosure</h2><span>Prepare the CD before UCD processing</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start UCD Process</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open Stored Documents</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Doc Folder</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node decision">Approved CD in File?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">YES</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Confirm it's Buyer's CD</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">NO</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Split from Pre-Funding Package</div>
                            </div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>Key Requirement</h4>
                        <p>The Buyer's Closing Disclosure <strong>must</strong> be separated from the complete Pre-Funding Package before initiating UCD.</p>
                    </div>
                    <div class="tip-box">
                        <h4>Pro Tip</h4>
                        <p>If an Approved Closing Disclosure is already in the file, confirm it's the buyer's version and proceed directly to "Delivery Destination".</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Split the Closing Disclosure -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Split the Closing Disclosure</h2><span>Extract CD from Pre-Funding Package if needed</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Open Pre-Funding Package</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Ctrl+Click to Select CD Pages</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Choose Print</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Select BytePro Print to Loan File 11</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Print to Stored Docs</div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Action</th><th>Status</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Label Document</strong></td><td><span class="badge required-badge">Required</span></td><td>Name as "Closing Disclosure"</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Set Status - Package Approved</strong></td><td><span class="badge required-badge">Required</span></td><td>Update document status to "Approved"</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Set Status - Package Not Reviewed</strong></td><td><span class="badge optional-badge">Conditional</span></td><td>Maintain status as "Not Reviewed"</td></tr>
                        </tbody>
                    </table>
                    <div class="exception-box">
                        <h4>Important: Single PDF Requirement</h4>
                        <p>Byte only allows <strong>one document</strong> to be selected for upload. All pages of the Final Closing Disclosure must be in one PDF. If pages are separate, merge them using Stored Documents before proceeding.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Delivery Destination -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Configure Delivery Destination</h2><span>Set up UCD submission parameters in Byte</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node decision">Loan in Funded Status?</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Navigate to UCD Screen</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Select Delivery Destination</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Set Split CD = NO</div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Options</th><th>Notes</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Delivery Destination</strong></td><td>Fannie Mae / Freddie Mac</td><td>Enables remaining UCD fields</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Split Closing Disclosure?</strong></td><td>Select NO</td><td>Required setting for all submissions</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Closing Disclosure</strong></td><td>Select Document</td><td>Click to choose from Stored Documents</td></tr>
                        </tbody>
                    </table>
                    <div class="info-box">
                        <h4>UCD Process Trigger</h4>
                        <p>The UCD process begins on <strong>Agency Conventional loans only</strong> after the Funder has placed the loan in Funded status. Selecting either Fannie Mae or Freddie Mac enables the remaining fields in the UCD menu for data entry.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Extract UCD XML File -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Extract the UCD XML File</h2><span>Generate XML using the Extract Tool</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Open Extract Tool</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter Byte Credentials</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click OK</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node input">Add Loan Number(s)</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Select UCD-FNMA or UCD-FHLMC</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Click RUN</div>
                        </div>
                    </div>
                    <div class="summary-grid">
                        <div class="summary-card">
                            <h4>Extract Tool Name</h4>
                            <div class="value" style="font-size: 1.2rem;">Fannie Mae Shortcut</div>
                            <div class="label">Works for BOTH Fannie and Freddie</div>
                        </div>
                        <div class="summary-card">
                            <h4>Credentials</h4>
                            <div class="value" style="font-size: 1.2rem;">Byte Login</div>
                            <div class="label">Same as your Byte username/password</div>
                        </div>
                        <div class="summary-card">
                            <h4>File Location</h4>
                            <div class="value" style="font-size: 1.2rem;">Desktop</div>
                            <div class="label">FannieMaeExtract folder</div>
                        </div>
                    </div>
                    <div class="decision-tree">
                        <h3>Multiple Loan Number Entry</h3>
                        <div class="tree-node level-1"><span class="tree-label">Click PasteIT Button</span></div>
                        <div class="tree-node">Paste multiple loan numbers in the field</div>
                        <div class="tree-node">Click Close</div>
                        <div class="tree-node">Select Fannie or Freddie</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-green); color: white;">Click RUN</span> - Repeat process for the other agency</div>
                    </div>
                    <div class="tip-box">
                        <h4>Tool Updates</h4>
                        <p>The Extract Tool is updated frequently. Users will receive email notifications when updates are needed. Make sure to check for updates regularly.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Fannie Mae Portal -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Fannie Mae Portal Submission</h2><span>Upload UCD XML to Fannie Mae</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Open FNMA UCD Portal</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Launch App</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Sign On</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Click Submit a UCD</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Browse to BytePro Temp Folder</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Select XML File</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Click Upload</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Status?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Successful</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Click Print</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Not Successful</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node exception">Review Error Messages</div>
                            </div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Step</th><th>Location</th><th>Action</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Portal URL</strong></td><td>singlefamily.fanniemae.com</td><td>Navigate to UCD Collection Solution</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">File Path</strong></td><td>C:\temp\BytePro Enterprise\Temp</td><td>Select the .ucd.xml file</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Print Findings</strong></td><td>Byte Loan File</td><td>BytePro Print to Loan File 11</td></tr>
                        </tbody>
                    </table>
                    <div class="decision-tree">
                        <h3>Save UCD Findings to Byte</h3>
                        <div class="tree-node level-1"><span class="tree-label">Select BytePro Print to Loan File 11</span></div>
                        <div class="tree-node">Update status to <strong>Approved</strong></div>
                        <div class="tree-node">Label as <strong>UCD Findings</strong></div>
                        <div class="tree-node">Add <strong>UW method</strong> to the description</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-rose); color: white;">Only save if submission is SUCCESSFUL!</span></div>
                    </div>
                    <div class="info-box">
                        <h4>Enter UCD Submission Date in Byte</h4>
                        <p>Once successful, return to UCD screen in Byte. Click the radio button next to <strong>UCD Submission Date Fannie</strong> to enter today's date. Enter the <strong>Fannie UCD Casefile ID</strong>.</p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Freddie Mac Portal -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Freddie Mac Portal Submission</h2><span>Upload UCD XML to Freddie Mac</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Open Loan Advisor Suite</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Log In</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Sign On</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Open Loan Closing Advisor</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Assess File</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Browse & Select XML</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Click Assess File</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Submission Status?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Satisfied</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Click Batch ID to Review</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Not Satisfied</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node exception">Check Data Quality Results</div>
                            </div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Step</th><th>Location</th><th>Action</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Portal URL</strong></td><td>las.freddiemac.com/lsp_public</td><td>Access Loan Advisor Single Sign On</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Tool</strong></td><td>Loan Closing Advisor</td><td>Click OPEN button</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">File Path</strong></td><td>C:\temp\BytePro Enterprise\Temp</td><td>Same folder as Fannie submission</td></tr>
                        </tbody>
                    </table>
                    <div class="info-box">
                        <h4>Enter UCD Submission Date in Byte</h4>
                        <p>The <strong>UCD Submission Date Freddie</strong> should automatically add today's date. If it doesn't auto-populate, enter the <strong>Freddie UCD Batch ID</strong> to trigger the date.</p>
                    </div>
                    <div class="exception-box">
                        <h4>Required: Both Submissions</h4>
                        <p>Two submissions are required for every loan - one to <strong>Fannie Mae</strong> and one to <strong>Freddie Mac</strong>. The status must always display as <strong>Satisfied</strong> to proceed.</p>
                    </div>
                </div>
            </section>

            <!-- Section 7: Corrections & Re-submission -->
            <section id="section-7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <div class="section-title"><h2>UCD Corrections & Re-submission</h2><span>Process for updated Closing Disclosures</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node decision">CD Updated After Submission?</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Update CD in Stored Docs</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Re-Extract UCD XML</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Submit to BOTH Portals</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Replace IDs in Byte</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Update Submission Dates</div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Step</th><th>Action</th><th>Notes</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">1. Ensure Updated CD</strong></td><td>Label as "Closing Disclosure"</td><td>Mark Approved if package reviewed</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">2. Re-Extract XML</strong></td><td>Run for BOTH agencies</td><td>Replaces old XML with corrected version</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">3. Fannie Mae</strong></td><td>Replace previous Casefile ID</td><td>Use new ID from updated submission</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">4. Freddie Mac</strong></td><td>Replace previous Batch ID</td><td>Use new ID from updated submission</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">5. Update Dates</strong></td><td>Click radio buttons</td><td>Enter today's date for both agencies</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">6. Print Findings</strong></td><td>Save to Stored Documents</td><td>Set Approved, label as UCD Findings</td></tr>
                        </tbody>
                    </table>
                    <div class="tip-box">
                        <h4>Best Practice</h4>
                        <p>When re-submitting, always add the correct <strong>UW method</strong> in the description to maintain proper audit trail and documentation standards.</p>
                    </div>
                </div>
            </section>

            <!-- Section 8: Common Errors -->
            <section id="section-8" class="section">
                <div class="section-header">
                    <div class="section-number">8</div>
                    <div class="section-title"><h2>Common Errors & Resolution</h2><span>Troubleshooting Fannie Mae and Freddie Mac errors</span></div>
                </div>
                <div class="section-content">
                    <div class="portal-comparison">
                        <div class="portal-card">
                            <div class="portal-card-header"><h4>Fannie Mae Errors</h4></div>
                            <div class="portal-card-body">
                                <ul>
                                    <li><span class="x-icon">1011</span> File too large (>30MB) - Resave CD, recreate XML</li>
                                    <li><span class="x-icon">C48</span> QM/SH fail - Email team lead & processing manager</li>
                                    <li><span class="x-icon">2002</span> Invalid zip code - Request UW review</li>
                                </ul>
                            </div>
                        </div>
                        <div class="portal-card">
                            <div class="portal-card-header"><h4>Freddie Mac Errors</h4></div>
                            <div class="portal-card-body">
                                <ul>
                                    <li><span class="x-icon">CRIT0202</span> Reg Z fail - Email team lead & processing manager</li>
                                    <li><span class="x-icon">CRIT0065</span> Missing credit data - Update CD Page 3 Section L</li>
                                    <li><span class="x-icon">30MB</span> File size exceeded - Resave CD from package</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Error Code</th><th>Cause</th><th>Resolution Steps</th></tr></thead>
                        <tbody>
                            <tr>
                                <td><strong style="color: var(--accent-rose);">Message 1011</strong></td>
                                <td>Final CD HUD document too large</td>
                                <td>1. Upload new CD copy 2. Create new XML 3. Re-submit</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--accent-rose);">Message C48</strong></td>
                                <td>QM/SH (Qualified Mortgage/Safe Harbor) fail</td>
                                <td>1. Email team lead/manager 2. Email processing manager 3. Correct fail 4. Re-submit</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--accent-rose);">Message 2002</strong></td>
                                <td>Zip code not accurate / data mismatch</td>
                                <td>1. Request UW review 2. Confirm accurate info 3. Create new XML 4. Re-submit</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--accent-rose);">CRIT0202</strong></td>
                                <td>Reg Z fail (Points & Fees > 3%)</td>
                                <td>1. Email team lead/manager 2. Review and correct 3. Create new XML 4. Re-submit</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--accent-rose);">CRIT0065</strong></td>
                                <td>Missing data for credits/adjustments</td>
                                <td>1. Request Closer update CD Page 3 Section L 2. Update Paid By and Paid By Name fields 3. Re-submit</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--accent-rose);">File Size Exceeded</strong></td>
                                <td>Submission exceeded 30 MB limit</td>
                                <td>1. Resave CD from Funding Package 2. Create new XML 3. Re-submit</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="exception-box">
                        <h4>Freddie Mac Status Key</h4>
                        <p>Freddie Mac errors display as <strong>"Not Satisfied"</strong>. Locate the <strong>Data Quality</strong> section and click <strong>Results</strong> to view details. Expand the Red Circle to see full fail details.</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
UCD PROCESS OVERVIEW
====================
Applies To: Agency Conventional Loans ONLY
Trigger: After loan placed in FUNDED status
Required: Submissions to BOTH Fannie Mae AND Freddie Mac

WORKFLOW STEPS
==============
1. Separate Buyer's Closing Disclosure from Pre-Funding Package
2. Open UCD Screen in Byte -> Select Delivery Destination
3. Set Split Closing Disclosure = NO
4. Select Document (single PDF only)
5. Run Extract Tool (Fannie Mae Shortcut) for BOTH agencies
6. Upload to Fannie Mae Portal -> Enter Casefile ID in Byte
7. Upload to Freddie Mac Portal -> Enter Batch ID in Byte
8. Save UCD Findings to Stored Documents (if SUCCESSFUL)

KEY PORTALS
===========
Fannie Mae: singlefamily.fanniemae.com/applications-technology/uniform-closing-dataset-collection-solution
Freddie Mac: las.freddiemac.com/lsp_public

FILE LOCATIONS
==============
Extract Tool: Fannie Mae Shortcut (Desktop)
XML Output: C:\temp\BytePro Enterprise Local\Temp

BYTE FIELDS TO UPDATE
=====================
- Delivery Destination: Fannie Mae or Freddie Mac
- Split Closing Disclosure: NO
- UCD Submission Date Fannie: [Today's Date]
- UCD Submission Date Freddie: [Today's Date]
- Fannie UCD Casefile ID: [From Portal]
- Freddie UCD Batch ID: [From Portal]

COMMON ERROR QUICK FIX
======================
- File too large (1011/30MB): Resave CD, recreate XML
- QM/SH fail (C48): Escalate to team lead
- Reg Z fail (CRIT0202): Escalate to team lead
- Missing credits (CRIT0065): Update CD Page 3 Section L
- Zip code error (2002): Request UW review
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for UCD Process Workflow</p>
                <div class="meta">
                    <span class="meta-item">8 Process Steps Analyzed</span>
                    <span class="meta-item">5 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 60% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">5</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2</div>
                    <div class="agent-summary-label">Critical Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">60%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">90%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-ucd-autosubmit')" title="Click to view agent details">
                        <div class="heat-score">95</div>
                        <div class="heat-name">UCD Auto-Submit</div>
                        <div class="heat-desc">End-to-end automated portal submission</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>5-6</span></div>
                        </div>
                    </div>
                    <div class="heat-item critical" onclick="scrollToAgent('agent-cd-validator')" title="Click to view agent details">
                        <div class="heat-score">92</div>
                        <div class="heat-name">CD Pre-Validator</div>
                        <div class="heat-desc">Validate CD before XML extraction</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>1-2</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-error-resolver')" title="Click to view agent details">
                        <div class="heat-score">85</div>
                        <div class="heat-name">Error Auto-Resolver</div>
                        <div class="heat-desc">Smart error diagnosis and routing</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>8</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-status-monitor')" title="Click to view agent details">
                        <div class="heat-score">78</div>
                        <div class="heat-name">UCD Status Monitor</div>
                        <div class="heat-desc">Track submission status across portals</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>5-6</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-batch-processor')" title="Click to view agent details">
                        <div class="heat-score">65</div>
                        <div class="heat-name">Batch UCD Processor</div>
                        <div class="heat-desc">Process multiple loans simultaneously</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>4</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: UCD Auto-Submit -->
                <div class="agent-card" id="agent-ucd-autosubmit">
                    <div class="agent-card-header">
                        <div class="agent-icon">R</div>
                        <div class="agent-info">
                            <div class="agent-name">UCD Auto-Submit Agent</div>
                            <div class="agent-type">RPA Automation Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automates the complete UCD submission workflow to both Fannie Mae and Freddie Mac portals. Handles login, file upload, status verification, and Byte field updates without human intervention.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Extract XML</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Login Portals</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Upload Files</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Update Byte</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">15min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">99%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('ucdautosubmit')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: CD Pre-Validator -->
                <div class="agent-card" id="agent-cd-validator">
                    <div class="agent-card-header">
                        <div class="agent-icon">V</div>
                        <div class="agent-info">
                            <div class="agent-name">CD Pre-Validator Agent</div>
                            <div class="agent-type">Document Validation Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Validates Closing Disclosure documents before UCD extraction to prevent common errors. Checks file size, page count, required fields, and data consistency against known error patterns.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Scan CD</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Check Rules</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Flag Issues</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Report</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">80%</div><div class="agent-stat-label">Error Prevented</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">2sec</div><div class="agent-stat-label">Scan Time</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('cdvalidator')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: Error Auto-Resolver -->
                <div class="agent-card" id="agent-error-resolver">
                    <div class="agent-card-header">
                        <div class="agent-icon">E</div>
                        <div class="agent-info">
                            <div class="agent-name">Error Auto-Resolver Agent</div>
                            <div class="agent-type">Decision Support Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically diagnoses UCD submission errors, identifies root causes, and either auto-resolves simple issues or routes complex problems to the appropriate team member with detailed context.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Parse Error</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Match Pattern</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Auto-Fix/Route</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Notify</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">60%</div><div class="agent-stat-label">Auto-Resolved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">5min</div><div class="agent-stat-label">Avg Resolution</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('errorresolver')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 4: UCD Status Monitor -->
                <div class="agent-card" id="agent-status-monitor">
                    <div class="agent-card-header">
                        <div class="agent-icon">M</div>
                        <div class="agent-info">
                            <div class="agent-name">UCD Status Monitor Agent</div>
                            <div class="agent-type">Monitoring Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Continuously monitors UCD submission status across both Fannie Mae and Freddie Mac portals. Alerts funders to status changes, pending actions, and approaching deadlines.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Poll Portals</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Compare Status</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Detect Change</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Alert</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">24/7</div><div class="agent-stat-label">Monitoring</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">5min</div><div class="agent-stat-label">Check Interval</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('statusmonitor')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 5: Batch UCD Processor -->
                <div class="agent-card" id="agent-batch-processor">
                    <div class="agent-card-header">
                        <div class="agent-icon">B</div>
                        <div class="agent-info">
                            <div class="agent-name">Batch UCD Processor Agent</div>
                            <div class="agent-type">Batch Processing Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Processes multiple UCD submissions in parallel. Identifies all funded loans needing UCD submission, batches them for efficient processing, and tracks completion status for each loan.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Query Funded</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Batch Loans</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Parallel Process</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Report</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">50+</div><div class="agent-stat-label">Loans/Hour</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">90%</div><div class="agent-stat-label">Efficiency</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('batchprocessor')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>UCD Process - Workflow Documentation</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># UCD Process - Workflow Documentation

## Overview
The Uniform Closing Dataset (UCD) process is required for all Agency Conventional loans after the loan is placed in Funded status. Submissions must be made to BOTH Fannie Mae AND Freddie Mac.

## Prerequisites
- Loan must be in FUNDED status
- Buyer's Closing Disclosure separated from Pre-Funding Package
- Access to Byte, Fannie Mae Portal, and Freddie Mac Portal
- Extract Tool (Fannie Mae Shortcut) installed

## Workflow Steps

### Step 1: Upload Closing Disclosure
1. Open Stored Documents in Byte
2. Click the Doc Folder
3. Check for an Approved Closing Disclosure
4. If already present, confirm it's the buyer's version
5. If not present, split from Pre-Funding Package

### Step 2: Split the Closing Disclosure
1. Open Pre-Funding Package from Stored Documents
2. Use Ctrl+Click to select CD pages
3. Choose Print
4. Select BytePro Print to Loan File 11
5. Label as "Closing Disclosure"
6. Set status to Approved (if package was reviewed)

### Step 3: Configure Delivery Destination
1. Navigate to UCD screen in Byte
2. Select Delivery Destination (Fannie Mae or Freddie Mac)
3. Set Split Closing Disclosure = NO
4. Click Select Document and choose the CD

### Step 4: Extract UCD XML File
1. Open Extract Tool (Fannie Mae Shortcut)
2. Enter Byte credentials
3. Add loan number(s)
4. Select UCD-FNMA or UCD-FHLMC
5. Click RUN
6. Repeat for other agency

### Step 5: Fannie Mae Portal Submission
1. Navigate to singlefamily.fanniemae.com
2. Click Launch App and Sign On
3. Click Submit a UCD
4. Browse to BytePro Enterprise > Temp folder
5. Select and Upload XML file
6. Verify Successful status
7. Print findings to Byte
8. Enter Casefile ID and Submission Date in Byte

### Step 6: Freddie Mac Portal Submission
1. Navigate to las.freddiemac.com/lsp_public
2. Log in and open Loan Closing Advisor
3. Click Assess File
4. Browse and select XML file
5. Click Assess File to process
6. Verify Satisfied status
7. Enter Batch ID in Byte (date auto-populates)

### Step 7: Corrections & Re-submission
If CD is updated after initial submission:
1. Update CD in Stored Documents
2. Re-extract XML for BOTH agencies
3. Resubmit to both portals
4. Replace Casefile ID and Batch ID in Byte
5. Update submission dates
6. Save new UCD Findings

### Step 8: Common Errors
**Fannie Mae:**
- 1011: File too large - resave CD
- C48: QM/SH fail - escalate
- 2002: Zip code invalid - UW review

**Freddie Mac:**
- CRIT0202: Reg Z fail - escalate
- CRIT0065: Missing credits - update CD Page 3 Section L
- 30MB exceeded: Resave CD

## Key Contacts
- Team Lead/Manager: For QM/Reg Z failures
- Processing Manager: For compliance issues
- Underwriter: For data verification</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Nav click handler with scroll lock
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);

                // Update active state immediately
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Release scroll lock after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal functions
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                const content = document.getElementById('docContent').textContent;
                await navigator.clipboard.writeText(content);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // ====== AGENT PROMPT SYSTEM ======
        const agentPrompts = {
            ucdautosubmit: {
                name: 'UCD Auto-Submit Agent',
                tags: ['RPA Automation', 'Portal Integration', 'Medium Complexity', 'Critical Priority'],
                purpose: `This agent automates the complete UCD submission workflow to both Fannie Mae and Freddie Mac portals, handling login, file upload, status verification, and Byte field updates without human intervention.`,
                prompt: `You are building an RPA Automation Agent for CMG Financial's Byte UCD submission process.

AGENT NAME: UCD Auto-Submit Agent
TYPE: RPA / Browser Automation

OBJECTIVE:
Create an agent that automates the end-to-end UCD submission process to both Fannie Mae and Freddie Mac portals after XML files are extracted.

WORKFLOW STEPS:

1. PRE-SUBMISSION VALIDATION
   - Verify XML files exist in BytePro Temp folder
   - Confirm file naming convention matches loan number
   - Check file size < 30MB

2. FANNIE MAE SUBMISSION
   - Navigate to singlefamily.fanniemae.com
   - Authenticate using stored credentials
   - Click "Submit a UCD"
   - Upload XML file from temp folder
   - Wait for processing completion
   - Capture: Submission Status, Casefile ID
   - If Successful: Proceed to print findings
   - If Failed: Log error details for resolution

3. FREDDIE MAC SUBMISSION
   - Navigate to las.freddiemac.com
   - Authenticate using stored credentials
   - Open Loan Closing Advisor
   - Click Assess File and upload XML
   - Wait for assessment completion
   - Capture: Submission Status, Batch ID
   - Verify status = "Satisfied"

4. BYTE UPDATE
   - Navigate to UCD screen in Byte for loan
   - Enter Fannie UCD Casefile ID
   - Enter Freddie UCD Batch ID
   - Click radio buttons to set submission dates
   - Save changes

5. DOCUMENTATION
   - Print UCD Findings from both portals
   - Upload to Stored Documents via BytePro Print
   - Set status to Approved
   - Label as "UCD Findings"

OUTPUT:
{
  "loanNumber": "RSR0000000000",
  "fannieMae": {
    "status": "Successful",
    "casefileId": "1234567890",
    "submissionDate": "2025-11-24"
  },
  "freddieMac": {
    "status": "Satisfied",
    "batchId": "12345678",
    "submissionDate": "2025-11-24"
  },
  "byteUpdated": true,
  "findingsSaved": true
}`,
                integration: `INTEGRATION POINTS:

1. Browser Automation (Playwright/Puppeteer)
   - Session management for portal logins
   - File upload handling
   - Wait conditions for async operations

2. Byte API/RPA
   - Navigate to loan UCD screen
   - Update field values
   - Trigger print operations

3. Credential Management
   - Secure storage for portal credentials
   - Byte credentials (separate from portal)
   - Rotation/refresh handling

4. Error Handling
   - Screenshot on failure
   - Retry logic (max 3 attempts)
   - Escalation to human queue

5. Logging & Audit
   - Timestamp all actions
   - Store submission confirmations
   - Track success/failure rates

DEPLOYMENT:
- Scheduled: Run hourly for funded loans queue
- On-demand: Trigger for individual loan
- Batch: Process multiple loans in sequence`
            },
            cdvalidator: {
                name: 'CD Pre-Validator Agent',
                tags: ['Document Validation', 'Error Prevention', 'Low Complexity', 'Critical Priority'],
                purpose: `This agent validates Closing Disclosure documents before UCD extraction to prevent common submission errors by checking file size, page count, required fields, and data consistency.`,
                prompt: `You are building a Document Validation Agent for CMG Financial's UCD process.

AGENT NAME: CD Pre-Validator Agent
TYPE: Document Analysis / Validation

OBJECTIVE:
Validate Closing Disclosure documents before UCD XML extraction to catch issues that would cause Fannie Mae or Freddie Mac rejection.

VALIDATION RULES:

1. FILE CHECKS
   - File size < 30MB (30,720 KB)
   - Format = PDF (not password protected)
   - Single consolidated document (not split pages)
   - All pages readable/not corrupted

2. PAGE STRUCTURE
   - Verify all 5 CD pages present
   - Page order: Closing Info -> Loan Terms -> Projected Payments -> Costs -> Calculations
   - No duplicate pages
   - No extra non-CD pages included

3. CRITICAL FIELD VALIDATION
   Page 1:
   - Closing Date populated
   - Loan Amount present
   - Property Address complete with ZIP
   - Borrower name(s) present

   Page 3 Section L (Credits):
   - Paid By field populated
   - Paid By Name field populated
   - (Prevents CRIT0065 error)

4. DATA CONSISTENCY CHECKS
   - ZIP code valid US format (5 digits)
   - Loan amount > $0
   - Interest rate within valid range
   - Points & Fees < 3% of loan (Reg Z check)

5. PATTERN MATCHING (Known Errors)
   - Check for QM/SH flags that cause C48
   - Verify data matches DU/LP submission

OUTPUT:
{
  "loanNumber": "RSR0000000000",
  "validationStatus": "PASS" | "WARN" | "FAIL",
  "fileSize": "2.5 MB",
  "pageCount": 5,
  "checks": [
    { "rule": "File Size", "status": "PASS", "detail": "2.5 MB < 30 MB" },
    { "rule": "Page Count", "status": "PASS", "detail": "5 pages found" },
    { "rule": "Section L Credits", "status": "FAIL", "detail": "Paid By Name missing" }
  ],
  "recommendation": "Update CD Page 3 Section L before extraction"
}`,
                integration: `INTEGRATION POINTS:

1. PDF Processing Library
   - PyPDF2 or pdf.js for parsing
   - OCR fallback for scanned documents
   - Page extraction and analysis

2. Byte Stored Documents API
   - Access CD document
   - Read document metadata
   - Flag validation status

3. Rules Engine
   - Configurable validation rules
   - Version control for rule updates
   - Agency-specific requirements

4. User Interface
   - Pre-extraction validation button
   - Traffic light status indicator
   - Detailed issue report

TRIGGER POINTS:
- Before Extract Tool execution
- On CD document upload
- Scheduled scan of pending UCD queue`
            },
            errorresolver: {
                name: 'Error Auto-Resolver Agent',
                tags: ['Decision Support', 'Error Handling', 'Medium Complexity', 'High Priority'],
                purpose: `This agent automatically diagnoses UCD submission errors, identifies root causes, and either auto-resolves simple issues or routes complex problems to the appropriate team member with detailed context.`,
                prompt: `You are building a Decision Support Agent for CMG Financial's UCD error handling.

AGENT NAME: Error Auto-Resolver Agent
TYPE: Decision Support / Automated Resolution

OBJECTIVE:
Diagnose UCD submission errors, determine root cause, and either auto-resolve or route to appropriate team member with full context.

ERROR CLASSIFICATION:

CATEGORY A: AUTO-RESOLVABLE
-------------------------------
| Error Code | Root Cause | Auto-Fix |
|------------|------------|----------|
| 1011 | File > 30MB | Compress PDF, re-extract |
| File Size Exceeded | Same as 1011 | Same fix |

CATEGORY B: SEMI-AUTOMATED
-------------------------------
| Error Code | Root Cause | Action |
|------------|------------|--------|
| 2002 | ZIP mismatch | Query correct ZIP, suggest update |
| CRIT0065 | Missing credits | Identify fields, draft email to Closer |

CATEGORY C: ESCALATION REQUIRED
-------------------------------
| Error Code | Root Cause | Route To |
|------------|------------|----------|
| C48 | QM/SH fail | Team Lead + Processing Manager |
| CRIT0202 | Reg Z fail | Team Lead + Processing Manager |

RESOLUTION WORKFLOW:

1. PARSE ERROR
   - Extract error code from portal response
   - Match against known error database
   - Classify severity (Fatal/Warning/Info)

2. DIAGNOSE ROOT CAUSE
   - Analyze loan data against error pattern
   - Identify specific field/value causing issue
   - Cross-reference with CD document

3. ATTEMPT AUTO-RESOLUTION
   If Category A:
   - Execute automated fix
   - Re-generate XML
   - Re-submit to portal
   - Verify resolution

4. ROUTE IF NEEDED
   If Category B/C:
   - Generate detailed incident report
   - Identify correct recipient
   - Include: Loan #, Error, Root Cause, Suggested Fix
   - Create task in workflow system
   - Set SLA based on severity

OUTPUT:
{
  "loanNumber": "RSR0000000000",
  "error": {
    "code": "CRIT0202",
    "message": "Reg Z Total Points And Fees > 3%",
    "portal": "Freddie Mac"
  },
  "diagnosis": {
    "rootCause": "Points & Fees calculation exceeds QM threshold",
    "affectedField": "Total Points and Fees Amount",
    "currentValue": "$15,234",
    "threshold": "$12,000 (3% of $400,000)"
  },
  "resolution": {
    "category": "C",
    "action": "ESCALATE",
    "routeTo": ["team_lead", "processing_manager"],
    "priority": "HIGH"
  }
}`,
                integration: `INTEGRATION POINTS:

1. Error Pattern Database
   - Known error codes and solutions
   - Historical resolution data
   - Success rate tracking

2. Portal API/Scraping
   - Capture error responses
   - Parse error messages
   - Extract relevant details

3. Notification System
   - Email templates by error type
   - Slack/Teams integration
   - Priority-based routing

4. Task Management
   - Create resolution tasks
   - Set due dates by SLA
   - Track completion status

5. Feedback Loop
   - Learn from resolutions
   - Update pattern database
   - Improve auto-resolution rate`
            },
            statusmonitor: {
                name: 'UCD Status Monitor Agent',
                tags: ['Monitoring', 'Notifications', 'Low Complexity', 'High Priority'],
                purpose: `This agent continuously monitors UCD submission status across both Fannie Mae and Freddie Mac portals, alerting funders to status changes, pending actions, and approaching deadlines.`,
                prompt: `You are building a Monitoring Agent for CMG Financial's UCD submission tracking.

AGENT NAME: UCD Status Monitor Agent
TYPE: Real-time Monitoring / Alerting

OBJECTIVE:
Monitor UCD submission status across both portals and alert funders to changes, issues, or required actions.

MONITORING SCOPE:

1. SUBMISSION STATUS TRACKING
   Fannie Mae Statuses:
   - Successful (target)
   - Not Successful (alert)
   - Pending (watch)

   Freddie Mac Statuses:
   - Satisfied (target)
   - Not Satisfied (alert)
   - Processing (watch)

2. ALERT TRIGGERS
   - Status change from Pending to any final state
   - Submission stuck in Pending > 30 minutes
   - New error messages detected
   - Missing submission (funded loan without UCD)
   - Approaching deadlines

3. DASHBOARD METRICS
   - Total submissions today
   - Success rate (target: 95%+)
   - Pending queue count
   - Average processing time
   - Error breakdown by code

4. NOTIFICATION RULES

   IMMEDIATE ALERTS:
   - Submission failed
   - Critical error detected

   DAILY DIGEST:
   - Summary of all submissions
   - Outstanding items requiring action
   - Success/failure statistics

MONITORING SCHEDULE:
- Check portals every 5 minutes during business hours
- Every 15 minutes after hours
- Immediate webhook if available

OUTPUT:
{
  "timestamp": "2025-11-24T14:30:00Z",
  "summary": {
    "totalSubmissions": 45,
    "successful": 42,
    "failed": 2,
    "pending": 1
  },
  "alerts": [
    {
      "loanNumber": "RSR0000000000",
      "portal": "Fannie Mae",
      "previousStatus": "Pending",
      "currentStatus": "Not Successful",
      "errorCode": "C48",
      "alertSent": true
    }
  ],
  "pendingWatch": [
    {
      "loanNumber": "RSR0000000001",
      "submittedAt": "2025-11-24T14:00:00Z",
      "waitTime": "30 minutes"
    }
  ]
}`,
                integration: `INTEGRATION POINTS:

1. Portal Polling
   - Scheduled API/scrape of both portals
   - Session management for authentication
   - Rate limiting to avoid blocks

2. Database
   - Store submission history
   - Track status changes
   - Maintain alert log

3. Notification Services
   - Email for detailed alerts
   - SMS for critical issues
   - Slack/Teams for team visibility

4. Dashboard
   - Real-time status display
   - Filterable by funder/date/status
   - Drill-down to individual loans

5. Byte Integration
   - Cross-reference with loan status
   - Identify missing UCD submissions
   - Update tracking fields`
            },
            batchprocessor: {
                name: 'Batch UCD Processor Agent',
                tags: ['Batch Processing', 'Efficiency', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent processes multiple UCD submissions in parallel, identifying all funded loans needing UCD submission, batching them for efficient processing, and tracking completion status for each loan.`,
                prompt: `You are building a Batch Processing Agent for CMG Financial's UCD workflow.

AGENT NAME: Batch UCD Processor Agent
TYPE: Batch Automation / Queue Management

OBJECTIVE:
Efficiently process multiple UCD submissions in parallel, maximizing throughput while managing portal rate limits.

BATCH PROCESSING WORKFLOW:

1. QUEUE IDENTIFICATION
   Query Byte for loans matching:
   - Status = "Funded"
   - Loan Type = "Agency Conventional"
   - UCD Submission Date Fannie = NULL OR
   - UCD Submission Date Freddie = NULL
   - Closing Disclosure = Present & Approved

2. BATCH CREATION
   - Group loans by priority (funding date)
   - Maximum batch size: 25 loans
   - Separate Fannie/Freddie queues

3. PARALLEL PROCESSING
   - Concurrent extractions (up to 5 simultaneous)
   - Staggered portal submissions (rate limit: 10/min)
   - Independent tracking per loan

4. PROGRESS TRACKING
   For each loan:
   - CD Validation: Pass/Fail
   - XML Extraction: Complete/Error
   - Fannie Submission: Pending/Success/Failed
   - Freddie Submission: Pending/Success/Failed
   - Byte Update: Complete/Error

5. COMPLETION REPORTING
   - Per-loan status
   - Batch success rate
   - Failed items with reasons
   - Time to complete

CONFIGURATION:
{
  "maxBatchSize": 25,
  "concurrentExtractions": 5,
  "submissionRateLimit": 10,
  "retryAttempts": 3,
  "retryDelayMs": 30000
}

OUTPUT:
{
  "batchId": "BATCH-2025-11-24-001",
  "startTime": "2025-11-24T08:00:00Z",
  "endTime": "2025-11-24T08:45:00Z",
  "totalLoans": 25,
  "results": {
    "successful": 23,
    "failed": 1,
    "skipped": 1
  },
  "details": [
    {
      "loanNumber": "RSR0000000000",
      "status": "COMPLETE",
      "fannieCasefileId": "1234567890",
      "freddieBatchId": "12345678"
    },
    {
      "loanNumber": "RSR0000000001",
      "status": "FAILED",
      "error": "CD validation failed - file too large"
    }
  ],
  "averageProcessingTime": "1.8 minutes"
}`,
                integration: `INTEGRATION POINTS:

1. Byte Query API
   - Identify eligible loans
   - Filter by status/type
   - Sort by priority

2. Queue Management
   - Redis or similar for job queue
   - Priority scheduling
   - Retry handling

3. Worker Pool
   - Multiple extraction workers
   - Submission rate limiter
   - Health monitoring

4. Progress Dashboard
   - Real-time batch status
   - Individual loan tracking
   - Estimated completion time

5. Scheduling
   - Cron-based batch initiation
   - Off-peak processing option
   - Manual batch trigger

DEPLOYMENT:
- Morning batch: 8:00 AM (previous day funded)
- Midday batch: 12:00 PM (catch-up)
- End of day: 5:00 PM (same-day funded)
- On-demand for urgent items`
            }
        };

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Show agent prompt modal
        let currentPromptContent = '';

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = agent.name + ' - Build Prompt';

            const tagsHtml = agent.tags.map(tag => '<span class="prompt-tag">' + tag + '</span>').join('');
            document.getElementById('promptTags').innerHTML = tagsHtml;

            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            currentPromptContent = '# ' + agent.name + '\n\n## Purpose\n' + agent.purpose + '\n\n## Build Prompt\n' + agent.prompt + '\n\n## Integration Points\n' + agent.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            try {
                await navigator.clipboard.writeText(currentPromptContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
