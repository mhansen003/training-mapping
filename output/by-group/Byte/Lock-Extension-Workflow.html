<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Byte Lock Extension Request - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }
        .flow-node.end { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }
        .badge.auto-badge { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box, .warning-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        .warning-box { background: rgba(245, 158, 11, 0.08); border-color: var(--accent-amber); border: 1px solid rgba(245, 158, 11, 0.2); border-left: 4px solid var(--accent-amber); }
        .warning-box h4 { color: var(--accent-amber); margin-bottom: 10px; font-size: 1rem; }
        .warning-box p, .warning-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Process Cards */
        .process-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .process-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .process-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .process-card-header h4 { font-size: 1.05rem; }
        .process-card-body { padding: 22px; }
        .process-card ul { list-style: none; padding: 0; }
        .process-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .process-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }
        .step-num { background: var(--accent-blue); color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; flex-shrink: 0; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Agent Card Highlight Animation */
        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        /* AI Prompt Modal */
        .prompt-modal .modal {
            max-width: 800px;
        }

        .prompt-modal .modal-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
        }

        .prompt-section {
            margin-bottom: 25px;
        }

        .prompt-section h4 {
            color: var(--accent-purple);
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .prompt-tag {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">Lock Extension Request</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Lock Extension</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Access Pricing Menu</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Launch Optimal Blue</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Submit Change Request</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Calculate Extension Cost</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Apply & Confirm</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Data Sync to Byte</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Lock Extension Request</h1>
                <p class="subtitle">Requesting a Lock Extension through Byte and Optimal Blue</p>
                <div class="meta">
                    <span class="meta-item">System: Byte + Optimal Blue</span>
                    <span class="meta-item">Role: Loan Officer</span>
                    <span class="meta-item">Doc ID: RET036/092520</span>
                    <span class="meta-item">Duration: 2-5 min</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 1: Access Pricing Menu -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Access Pricing and Lock Request</h2><span>Navigate to the lock request interface in Byte</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start in Byte</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open Loan File</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Pricing and Lock Request" Menu</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Navigation Path</h4>
                        <p>In BytePro Enterprise, locate the <strong>Pricing and Lock Request</strong> menu in the left navigation panel under the loan file. This is found in the Interfaces section.</p>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Interface Element</th><th>Location</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Pricing and Lock Request</strong></td><td>Left Menu Panel</td><td>Main entry point for lock operations</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Product and Pricing Interface</strong></td><td>Center Panel</td><td>Contains Optimal Blue integration</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Lock Extension Fields (1-6)</strong></td><td>Top Right</td><td>Displays current extension history</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Grace 7 Day Extension</strong></td><td>Right Side</td><td>Special grace period option</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Free 1 Day Extension</strong></td><td>Right Side</td><td>No-cost single day extension</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Pro Tip</h4>
                        <p>Check the <strong>Lock Extension 1-6</strong> fields at the top of the screen to see any previous extension history before requesting a new extension.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Launch Optimal Blue -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Launch Optimal Blue</h2><span>Open the pricing engine in a new browser window</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Locate "Product and Pricing Interface"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Select "Optimal Blue" from dropdown</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Submit as Loan Officer"</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node output">Optimal Blue Opens in Browser</div>
                        </div>
                    </div>

                    <div class="summary-grid">
                        <div class="summary-card">
                            <h4>Submit Options</h4>
                            <div class="value">3</div>
                            <div class="label">Submit to OB | Submit as LO | What If</div>
                        </div>
                        <div class="summary-card">
                            <h4>Auto-Login</h4>
                            <div class="value">Yes</div>
                            <div class="label">Uses your Optimal Blue credentials</div>
                        </div>
                        <div class="summary-card">
                            <h4>Loan ID Sync</h4>
                            <div class="value">Auto</div>
                            <div class="label">Loan ID transfers automatically</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Optimal Blue User Information</h4>
                        <p>The interface displays your <strong>Optimal Blue User Name</strong> and <strong>Optimal Blue Loan ID</strong>. These are automatically synced from Byte. If you see "There is no active lock request for this loan," proceed with the extension request anyway.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Submit Change Request -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Submit Change Request</h2><span>Initiate the lock extension request in Optimal Blue</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Change Request Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node action">Click "Change Request" Icon</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">"Submit a change request" Screen Opens</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node decision">Select Change Type</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Lock Extension</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Continue to Step 4</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Profile Change</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node exception">Different Workflow</div>
                            </div>
                        </div>
                    </div>

                    <div class="process-cards">
                        <div class="process-card">
                            <div class="process-card-header"><h4>Change Request Options</h4></div>
                            <div class="process-card-body">
                                <ul>
                                    <li><span class="step-num">1</span>Lock Extension - Extend the current lock period</li>
                                    <li><span class="step-num">2</span>Profile Change - Modify loan parameters</li>
                                </ul>
                            </div>
                        </div>
                        <div class="process-card">
                            <div class="process-card-header"><h4>Required Selection</h4></div>
                            <div class="process-card-body">
                                <ul>
                                    <li><span class="check-icon">*</span>Select Lien Position (First Lien)</li>
                                    <li><span class="check-icon">*</span>Select "Lock Extension" radio button</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>Finding the Change Request Icon</h4>
                        <p>The <strong>Change Request</strong> icon is located on the Product Search tab toolbar in Optimal Blue. It appears as a small icon in the row of action buttons next to the loan information bar.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Calculate Extension Cost -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Calculate Extension Cost</h2><span>Enter extension days and review pricing impact</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node input">Enter Lock Extension Days</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Calculate Cost"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Cost & Final Price Displayed</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Status</th><th>Example</th><th>Notes</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Select Lien</strong></td><td><span class="badge required-badge">Required</span></td><td>First Lien</td><td>Dropdown selection - typically First Lien</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Enter lock extension days</strong></td><td><span class="badge required-badge">Required</span></td><td>5</td><td>Number of days to extend the lock</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Request Cost</strong></td><td><span class="badge calculated-badge">Calculated</span></td><td>-0.100</td><td>Price adjustment for extension</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Final Price</strong></td><td><span class="badge calculated-badge">Calculated</span></td><td>100.413</td><td>New price after applying extension cost</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">New Expiration Date</strong></td><td><span class="badge auto-badge">Auto</span></td><td>11/20/2017</td><td>New lock expiration date</td></tr>
                        </tbody>
                    </table>

                    <div class="warning-box">
                        <h4>Cost Calculation Examples</h4>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li><strong>1-day extension:</strong> Cost -0.020, Final Price 97.156</li>
                            <li><strong>5-day extension:</strong> Cost -0.100, Final Price 100.413 (reflects cost of actual days)</li>
                        </ul>
                        <p style="margin-top: 10px;">The cost shown reflects the <strong>actual days</strong> being extended. Always verify the final price before proceeding.</p>
                    </div>

                    <div class="info-box">
                        <h4>Cost Lookup Option</h4>
                        <p>Use the <strong>Cost Lookup</strong> button next to Calculate Cost to view the extension cost schedule without committing to the request.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Apply & Confirm -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Apply & Confirm Extension</h2><span>Submit the extension request and confirm</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Review Cost & Final Price</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Apply Change"</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node decision">Confirmation Pop-up</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Click OK</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Extension Processed</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Click Cancel</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node exception">Return to Edit</div>
                            </div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Confirmation Message</h4>
                        <p>A pop-up window will appear asking: <strong>"Are you sure you want to proceed with your lock extension?"</strong></p>
                        <p style="margin-top: 10px;">Click <strong>OK</strong> to proceed or <strong>Cancel</strong> to return and modify the request.</p>
                    </div>

                    <div class="tip-box">
                        <h4>Before Clicking OK</h4>
                        <p>Double-check the following before confirming:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Number of extension days is correct</li>
                            <li>Final price is acceptable</li>
                            <li>New expiration date meets your closing timeline</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 6: Data Sync to Byte -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Data Sync to Byte</h2><span>Confirm data transfer and close browser</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node output">System Processes Request</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">"Change request submitted" Pop-up</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Close"</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node output">ByteSoftware Confirmation</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Close Browser Window</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node end">Complete</div>
                        </div>
                    </div>

                    <div class="process-cards">
                        <div class="process-card">
                            <div class="process-card-header"><h4>Success Messages</h4></div>
                            <div class="process-card-body">
                                <ul>
                                    <li><span class="check-icon">1.</span>"The change request has been submitted and data was pushed to your LOS."</li>
                                    <li><span class="check-icon">2.</span>"Please continue your work on this loan within your LOS."</li>
                                    <li><span class="check-icon">3.</span>"The loan data has been imported into BytePro."</li>
                                </ul>
                            </div>
                        </div>
                        <div class="process-card">
                            <div class="process-card-header"><h4>Next Steps in Byte</h4></div>
                            <div class="process-card-body">
                                <ul>
                                    <li><span class="step-num">1</span>Close the internet browser window</li>
                                    <li><span class="step-num">2</span>Press Save button in BytePro toolbar</li>
                                    <li><span class="step-num">3</span>Verify updated loan data in Byte</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Important: Save in Byte</h4>
                        <p>To view the updated loan data in BytePro, press the <strong>Save button</strong> on the BytePro toolbar. This refreshes the loan record with the new lock extension information.</p>
                    </div>

                    <div class="tip-box">
                        <h4>Verification</h4>
                        <p>After saving, check the <strong>Lock Extension</strong> fields (1-6) on the Pricing and Lock Request screen to confirm the extension was recorded properly.</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
LOCK EXTENSION REQUEST - QUICK STEPS
=====================================

1. ACCESS: Byte > Open Loan > Pricing and Lock Request Menu

2. LAUNCH: Product and Pricing Interface > Optimal Blue > Submit as Loan Officer

3. REQUEST: Click Change Request Icon > Select "Lock Extension"

4. CALCULATE:
   - Select Lien (First Lien)
   - Enter extension days (e.g., 5)
   - Click "Calculate Cost"
   - Review: Cost + Final Price + New Expiration Date

5. APPLY: Click "Apply Change" > Confirm OK on pop-up

6. COMPLETE:
   - Click "Close" on confirmation
   - Close browser window
   - Press SAVE in BytePro toolbar to refresh data

COST REFERENCE:
---------------
1 day  = ~-0.020 price adjustment
5 days = ~-0.100 price adjustment
(Actual costs vary - always use Calculate Cost)

FIELDS UPDATED IN BYTE:
-----------------------
* Lock Extension 1-6 (incremental)
* Original Lock Date
* Lock Requestor
* New Expiration Date

TROUBLESHOOTING:
----------------
* "No active lock request" message is normal - proceed anyway
* If browser doesn't open, check pop-up blockers
* If data doesn't sync, manually refresh Byte
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for Lock Extension Workflow</p>
                <div class="meta">
                    <span class="meta-item">6 Process Steps Analyzed</span>
                    <span class="meta-item">4 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 60% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">4</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2</div>
                    <div class="agent-summary-label">High Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">60%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">90%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-autoextend')" title="Click to view agent details">
                        <div class="heat-score">92</div>
                        <div class="heat-name">Auto Lock Extension</div>
                        <div class="heat-desc">Proactively request extensions before expiration</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>All</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-expiration')" title="Click to view agent details">
                        <div class="heat-score">85</div>
                        <div class="heat-name">Expiration Monitor</div>
                        <div class="heat-desc">Alert when locks are approaching expiration</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>Pre</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-costopt')" title="Click to view agent details">
                        <div class="heat-score">78</div>
                        <div class="heat-name">Cost Optimizer</div>
                        <div class="heat-desc">Recommend optimal extension days vs relock</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>4</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-datasync')" title="Click to view agent details">
                        <div class="heat-score">62</div>
                        <div class="heat-name">Data Sync Validator</div>
                        <div class="heat-desc">Verify extension data synced correctly to Byte</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>6</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: Auto Lock Extension -->
                <div class="agent-card" id="agent-autoextend">
                    <div class="agent-card-header">
                        <div class="agent-icon">*</div>
                        <div class="agent-info">
                            <div class="agent-name">Auto Lock Extension Agent</div>
                            <div class="agent-type">Process Automation Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically initiates lock extension requests when loans approach expiration without closing. Monitors pipeline, calculates optimal extension duration, and executes the full workflow through Byte and Optimal Blue APIs.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Monitor Pipeline</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Detect Expiring</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Request Extension</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Notify LO</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">5min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Automation</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('autoextend')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: Expiration Monitor -->
                <div class="agent-card" id="agent-expiration">
                    <div class="agent-card-header">
                        <div class="agent-icon">!</div>
                        <div class="agent-info">
                            <div class="agent-name">Lock Expiration Monitor</div>
                            <div class="agent-type">Monitoring Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Continuously monitors all locked loans and sends proactive alerts at 7, 5, 3, and 1 day intervals before expiration. Includes closing timeline analysis to prioritize urgent cases.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Scan Locks</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Calculate Days</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Check Timeline</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Send Alert</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">24/7</div><div class="agent-stat-label">Monitoring</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">0</div><div class="agent-stat-label">Missed Locks</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('expiration')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: Cost Optimizer -->
                <div class="agent-card" id="agent-costopt">
                    <div class="agent-card-header">
                        <div class="agent-icon">$</div>
                        <div class="agent-info">
                            <div class="agent-name">Extension Cost Optimizer</div>
                            <div class="agent-type">Decision Support Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Analyzes current rates, extension costs, and loan parameters to recommend whether to extend the lock or relock at current market rates. Calculates breakeven points and total cost comparisons.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Get Current Rates</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Calculate Costs</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Compare Options</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Recommend</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">$500</div><div class="agent-stat-label">Avg Savings</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">95%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('costopt')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 4: Data Sync Validator -->
                <div class="agent-card" id="agent-datasync">
                    <div class="agent-card-header">
                        <div class="agent-icon">~</div>
                        <div class="agent-info">
                            <div class="agent-name">Data Sync Validator</div>
                            <div class="agent-type">Quality Assurance Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically verifies that lock extension data properly synced from Optimal Blue to Byte. Detects discrepancies and triggers manual review or automatic correction workflows.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Detect Extension</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Compare OB/Byte</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Validate Fields</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Report/Fix</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">99%</div><div class="agent-stat-label">Detection</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Auto</div><div class="agent-stat-label">Correction</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('datasync')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Lock Extension - Workflow Markdown</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Lock Extension Request Workflow

## Overview
Process for requesting a lock extension through Byte and Optimal Blue integration.

## Steps

### 1. Access Pricing and Lock Request
- Open loan file in Byte
- Navigate to Pricing and Lock Request menu
- Locate Product and Pricing Interface section

### 2. Launch Optimal Blue
- Select "Optimal Blue" from dropdown
- Click "Submit as Loan Officer"
- System opens Optimal Blue in browser with auto-login

### 3. Submit Change Request
- Click Change Request icon on Product Search tab
- Select "Lock Extension" radio button
- Select Lien position (typically First Lien)

### 4. Calculate Extension Cost
- Enter number of extension days
- Click "Calculate Cost"
- Review: Request cost, Final price, New expiration date

### 5. Apply and Confirm
- Click "Apply Change"
- Confirm OK on pop-up dialog
- Wait for system processing

### 6. Data Sync to Byte
- Click "Close" on confirmation pop-up
- Close browser window
- Press Save in BytePro to refresh loan data
- Verify extension recorded in Lock Extension fields

## Key Fields
- Lock Extension 1-6: Tracks extension history
- Original Lock Date: Initial lock date
- Lock Requestor: User who requested lock
- Grace 7 Day Extension: Special grace period option
- Free 1 Day Extension: No-cost single day option

## Cost Reference
- Extension costs vary by duration
- Always use Calculate Cost for accurate pricing
- Consider relock vs extension economics

## Document ID: RET036/092520</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout = null;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav item clicks
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;

                // Clear any existing timeout
                if (scrollTimeout) clearTimeout(scrollTimeout);

                // Set timeout to re-enable scroll spy after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                    updateActiveNav();
                }, 1000);

                // Update active state immediately
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Documentation Modal
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // ====== AGENT PROMPT SYSTEM ======
        const agentPrompts = {
            autoextend: {
                name: 'Auto Lock Extension Agent',
                tags: ['Process Automation', 'Byte API', 'Optimal Blue', 'Critical Priority'],
                purpose: `This agent automatically initiates lock extension requests when loans approach expiration without a scheduled closing. It monitors the pipeline, calculates optimal extension duration based on closing timeline, and executes the full Byte-to-Optimal Blue workflow without manual intervention.`,
                prompt: `You are building a Process Automation Agent for CMG Financial's Byte LOS and Optimal Blue integration.

AGENT NAME: Auto Lock Extension Agent
TYPE: Process Automation / Workflow Execution

OBJECTIVE:
Create an agent that automatically requests lock extensions for loans approaching expiration, eliminating manual intervention and preventing costly lock expirations.

TRIGGER CONDITIONS:
1. Lock expires within 5 business days
2. Loan status is NOT "Closed" or "Cancelled"
3. No extension already pending
4. Closing date is AFTER current lock expiration

WORKFLOW STEPS:
1. Query Byte for loans with expiring locks
2. For each qualifying loan:
   - Calculate days needed (closing date - today + buffer)
   - Connect to Optimal Blue via Byte integration
   - Submit Change Request > Lock Extension
   - Enter calculated extension days
   - Click Calculate Cost
   - If cost acceptable (< threshold), Apply Change
   - Confirm extension
   - Log action and notify LO

DECISION LOGIC:
+------------------------------------------+
| IF closing_date > lock_expiration        |
| AND lock_expires_in <= 5 days            |
| THEN request_extension                    |
+------------------------------------------+
| Extension Days = closing_date - today + 3|
| (3-day buffer for funding delays)        |
+------------------------------------------+

COST THRESHOLD:
- Auto-approve if cost < 0.250 points
- If cost >= 0.250, alert LO for manual decision
- Compare extension cost vs current market relock

OUTPUT:
{
  "loan_number": "12345",
  "original_expiration": "2026-02-01",
  "new_expiration": "2026-02-15",
  "extension_days": 14,
  "cost": -0.280,
  "action": "extended" | "pending_approval" | "skipped",
  "reason": "string"
}`,
                integration: `INTEGRATION POINTS:

1. Byte LOS API
   - Query loans by lock expiration date range
   - Access loan status and closing date fields
   - Trigger Pricing and Lock Request screen

2. Optimal Blue API / Browser Automation
   - Option A: Direct API if available
   - Option B: RPA via Puppeteer/Playwright
   - Execute change request workflow
   - Capture confirmation responses

3. Notification System
   - Email LO when extension auto-processed
   - Alert LO when manual approval needed
   - Daily summary of all extensions

4. Logging & Audit
   - Record all extension requests
   - Track costs incurred
   - Report on prevented expirations

DEPLOYMENT:
- Scheduled job runs 3x daily (9am, 1pm, 5pm)
- Or event-driven on loan status changes
- Dashboard for monitoring agent activity`
            },
            expiration: {
                name: 'Lock Expiration Monitor',
                tags: ['Monitoring', 'Alerts', 'Pipeline Management', 'High Priority'],
                purpose: `This agent continuously monitors all locked loans and sends proactive alerts at configurable intervals before expiration. It analyzes closing timelines to prioritize urgent cases and helps prevent costly lock expirations.`,
                prompt: `You are building a Monitoring Agent for CMG Financial's lock management process.

AGENT NAME: Lock Expiration Monitor
TYPE: Real-time Monitoring / Alert System

OBJECTIVE:
Monitor all locked loans in the pipeline and send proactive alerts to Loan Officers at strategic intervals before lock expiration, prioritized by closing timeline risk.

ALERT SCHEDULE:
+------------------+---------------------------+
| Days to Expire   | Alert Type                |
+------------------+---------------------------+
| 7 days           | Informational             |
| 5 days           | Action Recommended        |
| 3 days           | Urgent - Extension Needed |
| 1 day            | Critical - Immediate      |
| 0 days (today)   | EXPIRED - Emergency       |
+------------------+---------------------------+

PRIORITY SCORING:
Calculate risk score based on:
- Days until lock expiration (weight: 40%)
- Days until scheduled closing (weight: 30%)
- Loan amount (higher = higher priority) (weight: 20%)
- Previous extensions used (weight: 10%)

ALERT MESSAGE FORMAT:
Subject: [URGENCY] Lock Expiring: [Borrower] - [Days] days remaining

Body:
Lock Expiration Alert
--------------------
Loan: [Loan Number]
Borrower: [Name]
Lock Expires: [Date] ([X] days)
Scheduled Closing: [Date] ([Y] days)
Current Rate: [Rate]%
Extensions Used: [N] of 6

Risk Assessment: [HIGH/MEDIUM/LOW]
Recommendation: [Extend/Relock/Monitor]

[Link to Loan] [Request Extension]

MONITORING QUERY:
SELECT loan_number, borrower_name, lock_expiration_date,
       scheduled_closing_date, locked_rate, extension_count
FROM loans
WHERE lock_status = 'Locked'
  AND lock_expiration_date <= DATEADD(day, 7, GETDATE())
  AND loan_status NOT IN ('Closed', 'Cancelled', 'Suspended')
ORDER BY lock_expiration_date ASC`,
                integration: `INTEGRATION POINTS:

1. Byte Database / API
   - Read-only access to loan pipeline
   - Lock status and expiration dates
   - Closing timeline information

2. Notification Channels
   - Email (primary)
   - SMS for critical/expired (Twilio)
   - Byte internal notifications
   - Teams/Slack webhooks

3. Dashboard
   - Real-time expiration calendar view
   - Pipeline risk heat map
   - Extension history tracking

4. LO Preferences
   - Customize alert thresholds
   - Set quiet hours
   - Choose notification channels
   - Snooze individual loans

SCHEDULING:
- Full scan: Every 4 hours
- Urgent scan (<=3 days): Every hour
- Critical scan (<=1 day): Every 30 minutes`
            },
            costopt: {
                name: 'Extension Cost Optimizer',
                tags: ['Decision Support', 'Cost Analysis', 'Rate Comparison', 'High Priority'],
                purpose: `This agent analyzes current market rates, extension costs, and loan parameters to recommend whether to extend the existing lock or relock at current rates. It calculates breakeven points and provides total cost comparisons.`,
                prompt: `You are building a Decision Support Agent for CMG Financial's lock extension process.

AGENT NAME: Extension Cost Optimizer
TYPE: Decision Support / Cost Analysis

OBJECTIVE:
Analyze whether extending a lock or relocking at current market rates is more cost-effective for each loan, providing clear recommendations with financial justification.

ANALYSIS INPUTS:
1. Current Lock Details
   - Locked rate
   - Lock expiration date
   - Extension cost per day/period
   - Extensions already used (max 6)

2. Current Market Rates
   - Today's rate for same product
   - Rate trend (improving/worsening)

3. Loan Parameters
   - Loan amount
   - Loan term
   - Product type

COST COMPARISON MODEL:
+----------------------------------------+
| EXTENSION COST                         |
| = Extension points * Loan Amount       |
| Example: -0.100 * $400,000 = $400      |
+----------------------------------------+
| RELOCK COST                            |
| = (New Rate - Old Rate) * Loan * Term  |
| + Any relock fees                      |
| Example: 0.125% higher over 30 years   |
| = Significant long-term cost           |
+----------------------------------------+

DECISION LOGIC:
IF extension_cost < relock_lifetime_cost THEN
  Recommend: EXTEND
  Reason: "Extension saves $X over loan life"
ELSE IF current_rate < locked_rate THEN
  Recommend: RELOCK
  Reason: "Better rate available, saves $X/month"
ELSE
  Recommend: EXTEND
  Reason: "Rates have increased, protect current rate"

OUTPUT FORMAT:
{
  "loan_number": "12345",
  "recommendation": "EXTEND" | "RELOCK",
  "confidence": 0.0-1.0,
  "analysis": {
    "locked_rate": 6.250,
    "current_rate": 6.500,
    "extension_cost_points": -0.100,
    "extension_cost_dollars": 400,
    "rate_difference": 0.250,
    "monthly_payment_difference": 62,
    "lifetime_cost_difference": 22320,
    "breakeven_months": 6.5
  },
  "summary": "Extending is recommended. The -0.100 extension cost
              ($400) is significantly less than the $22,320
              lifetime cost of relocking at today's higher rate."
}`,
                integration: `INTEGRATION POINTS:

1. Optimal Blue Rate API
   - Real-time rate quotes
   - Same product comparison
   - Historical rate trends

2. Byte Loan Data
   - Current lock details
   - Loan amount and terms
   - Extension cost schedule

3. User Interface
   - "Analyze Options" button on extension screen
   - Side-by-side comparison display
   - One-click apply recommendation

4. Reporting
   - Track recommendations vs actual decisions
   - Measure cost savings achieved
   - Improve model based on outcomes

CALCULATION ACCURACY:
- Use actual rate sheets, not estimates
- Include all fees in comparison
- Account for MI differences if applicable
- Consider borrower's likely refi timeline`
            },
            datasync: {
                name: 'Data Sync Validator',
                tags: ['QA', 'Data Integrity', 'Error Detection', 'Medium Priority'],
                purpose: `This agent automatically verifies that lock extension data properly synced from Optimal Blue to Byte after each extension request. It detects discrepancies and triggers correction workflows.`,
                prompt: `You are building a Quality Assurance Agent for CMG Financial's Byte and Optimal Blue integration.

AGENT NAME: Data Sync Validator
TYPE: Quality Assurance / Data Integrity

OBJECTIVE:
Verify that lock extension data accurately transfers from Optimal Blue to Byte after each extension request, detecting and correcting any sync failures.

VALIDATION CHECKS:
1. Extension Recorded
   - Lock Extension field (1-6) populated in Byte
   - Extension date matches OB confirmation

2. Pricing Updated
   - Final price matches OB calculation
   - Rate adjustment applied correctly

3. Expiration Date
   - New lock expiration in Byte matches OB
   - Calendar days calculated correctly

4. Audit Trail
   - Extension logged in lock history
   - User/timestamp recorded

COMPARISON QUERY:
Compare Optimal Blue Response:
{
  "extension_days": 5,
  "cost": -0.100,
  "final_price": 100.413,
  "new_expiration": "2026-02-15"
}

With Byte Fields:
- Lock Extension [N]: Should show 5 days
- Price: Should show 100.413
- Lock Expiration Date: Should show 2026-02-15

DISCREPANCY HANDLING:
+------------------+-------------------------+
| Issue            | Action                  |
+------------------+-------------------------+
| Missing data     | Trigger manual re-sync  |
| Price mismatch   | Alert Secondary team    |
| Date mismatch    | Auto-correct if <1 day  |
| Complete failure | Escalate + rollback OB  |
+------------------+-------------------------+

OUTPUT:
{
  "loan_number": "12345",
  "sync_status": "SUCCESS" | "DISCREPANCY" | "FAILED",
  "checked_at": "2026-01-27T14:30:00Z",
  "fields_validated": 4,
  "discrepancies": [
    {
      "field": "lock_expiration_date",
      "optimal_blue": "2026-02-15",
      "byte": "2026-02-14",
      "action_taken": "auto_corrected"
    }
  ]
}`,
                integration: `INTEGRATION POINTS:

1. Event Trigger
   - Listen for OB extension confirmations
   - Or scheduled scan of recent extensions

2. Byte API
   - Read lock fields after extension
   - Write corrections if authorized
   - Access audit log

3. Optimal Blue Records
   - Query extension history
   - Get confirmation details
   - Compare timestamps

4. Alert System
   - Notify LO of sync issues
   - Escalate to IT if pattern detected
   - Daily sync health report

TIMING:
- Initial check: 5 minutes after extension
- Retry check: 15 minutes if initial fails
- Final check: 1 hour with escalation

METRICS:
- Sync success rate target: 99.5%
- Auto-correction rate tracking
- Mean time to detect issues`
            }
        };

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Show agent prompt modal
        let currentPromptContent = '';

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = `${agent.name} - Build Prompt`;

            const tagsHtml = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptTags').innerHTML = tagsHtml;

            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            currentPromptContent = `# ${agent.name}\n\n## Purpose\n${agent.purpose}\n\n## Build Prompt\n${agent.prompt}\n\n## Integration Points\n${agent.integration}`;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            try {
                await navigator.clipboard.writeText(currentPromptContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
