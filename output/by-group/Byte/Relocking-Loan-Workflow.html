<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relocking a Loan in Byte and Optimal Blue - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }
        .badge.system-badge { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box, .warning-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        .warning-box { background: rgba(245, 158, 11, 0.08); border-color: var(--accent-amber); border: 1px solid rgba(245, 158, 11, 0.2); border-left: 4px solid var(--accent-amber); }
        .warning-box h4 { color: var(--accent-amber); margin-bottom: 10px; font-size: 1rem; }
        .warning-box p, .warning-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Step Cards */
        .step-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .step-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .step-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .step-card-header h4 { font-size: 1.05rem; }
        .step-card-body { padding: 22px; }
        .step-card ul { list-style: none; padding: 0; }
        .step-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .step-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">Relocking a Loan</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Relocking a Loan</h2>
            <p>Byte & Optimal Blue Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Access Pricing</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Open Optimal Blue</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Change Request</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Select Rate</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Submit Change</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Confirmation</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Relocking a Loan in Byte and Optimal Blue</h1>
                <p class="subtitle">Complete Process Workflow for Relock Requests</p>
                <div class="meta">
                    <span class="meta-item">System: Byte + Optimal Blue</span>
                    <span class="meta-item">Role: Loan Officer</span>
                    <span class="meta-item">Updated: Nov 9, 2020</span>
                    <span class="meta-item">Duration: 5-10 min</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Important Policy Notice -->
            <div class="warning-box">
                <h4>Relock Policy Overview</h4>
                <p><strong>Relocks are allowed on expired locks only.</strong> The new pricing is based on the worse case between the original lock date and current market. Final pricing includes all prior extensions and/or relock fees. See the Retail Lock Policy for additional information on pricing and policies.</p>
            </div>

            <!-- Section 1: Access Pricing -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Access Pricing and Lock Request</h2><span>Navigate to the pricing menu in Byte</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open Loan in Byte</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Pricing and Lock Request" Menu</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Menu Item</th><th>Location</th><th>Action</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Pricing and Lock Request</strong></td><td>Byte Main Menu</td><td>Click to expand</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Product and Pricing Interface</strong></td><td>Within Pricing Menu</td><td>View interface options</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Submit as Loan Officer</strong></td><td>Interface area</td><td>Click to launch Optimal Blue</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Pro Tip</h4>
                        <p>Ensure the loan is in the correct status before attempting a relock. The lock must be <strong>expired</strong> for the relock option to be available.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Open Optimal Blue -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Open Optimal Blue</h2><span>System launches with your credentials</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Click "Submit as Loan Officer"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Optimal Blue Opens in Browser</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Auto-Login with Credentials</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Automatic Authentication</h4>
                        <p>Optimal Blue opens in an internet browser window, entering the site with the User's credentials automatically. No manual login is required.</p>
                    </div>

                    <div class="summary-grid">
                        <div class="summary-card">
                            <h4>Browser Launch</h4>
                            <div class="value">Auto</div>
                            <div class="label">Opens automatically</div>
                        </div>
                        <div class="summary-card">
                            <h4>Credentials</h4>
                            <div class="value">SSO</div>
                            <div class="label">Single sign-on</div>
                        </div>
                        <div class="summary-card">
                            <h4>Loan Data</h4>
                            <div class="value">Sync</div>
                            <div class="label">Auto-populated</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 3: Change Request -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Submit Change Request</h2><span>Initiate the relock process</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Navigate to Product Search Tab</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Change Request Icon</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Change Request Screen Opens</div>
                        </div>
                    </div>

                    <div class="decision-tree">
                        <h3>Change Request Types Available</h3>
                        <div class="tree-node level-1"><span class="tree-label">Select Type of Change Request</span></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--text-muted); color: white;">Lock Extension</span> -> Extend current lock period</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--text-muted); color: white;">Float Down</span> -> Request lower rate on active lock</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--text-muted); color: white;">Profile Change</span> -> Modify loan parameters</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-green); color: white;">Relock</span> -> <strong>Selected by default</strong> for expired locks</div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Status</th><th>Notes</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Relock</strong></td><td><span class="badge system-badge">Default</span></td><td>Selected by default when lock is expired</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Select Lien</strong></td><td><span class="badge required-badge">Required</span></td><td>First Lien is the most common selection</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Select Rate and Price</strong></td><td><span class="badge required-badge">Required</span></td><td>Click to proceed to rate selection</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Quick Action</h4>
                        <p>On the Change Request screen, the <strong>Relock button will be selected by default</strong>. Simply verify the lien position and click <strong>"Select Rate and Price"</strong> to proceed.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Select Rate -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Select Lock Period and Rate</h2><span>Choose from available pricing options</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Click "Select Rate and Price"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Search Results Screen</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Select Lock Period</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">v</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node input">Select Desired Rate</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Select Button</div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Important Restriction</h4>
                        <p><strong>The relock term cannot exceed the original lock term.</strong> If the original lock was 30 days, you cannot select a 45-day or 60-day lock period for the relock.</p>
                    </div>

                    <div class="step-cards">
                        <div class="step-card">
                            <div class="step-card-header"><h4>Search Results Display</h4></div>
                            <div class="step-card-body">
                                <ul>
                                    <li><span class="check-icon">*</span> View Pricing for lock period options (10, 21, 30 days)</li>
                                    <li><span class="check-icon">*</span> Rate column shows available interest rates</li>
                                    <li><span class="check-icon">*</span> Discount/Rebate columns show pricing adjustments</li>
                                    <li><span class="check-icon">*</span> Price column shows final pricing</li>
                                </ul>
                            </div>
                        </div>
                        <div class="step-card">
                            <div class="step-card-header"><h4>Selection Criteria</h4></div>
                            <div class="step-card-body">
                                <ul>
                                    <li><span class="check-icon">*</span> Compare rates across lock periods</li>
                                    <li><span class="check-icon">*</span> Consider Mortgage Coach options</li>
                                    <li><span class="check-icon">*</span> Review discount/rebate impact</li>
                                    <li><span class="check-icon">*</span> Click select button for chosen rate</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Relock Fee Reference</h4>
                        <p>See the <strong>Retail Lock Policy</strong> for current Relock Fees. These fees are automatically included in the pricing displayed.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Submit Change -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Review and Submit Change Request</h2><span>Verify details and submit the relock</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node output">Submit Change Request Screen</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Review Changes</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Submit"</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Information Type</th><th>Display</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Original Value</strong></td><td>Standard text</td><td>Previous lock information</td></tr>
                            <tr><td><strong style="color: var(--accent-rose);">Change Request Value</strong></td><td><span style="color: var(--accent-rose);">Red text</span></td><td>New/revised information highlighted in red</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Total Adjustments</strong></td><td>Bottom of screen</td><td>Sum of all pricing adjustments</td></tr>
                        </tbody>
                    </table>

                    <div class="decision-tree">
                        <h3>Review Checklist</h3>
                        <div class="tree-node level-1"><span class="tree-label">Before Clicking Submit</span></div>
                        <div class="tree-node">Verify the new rate matches your selection</div>
                        <div class="tree-node">Confirm the lock period is correct</div>
                        <div class="tree-node">Review Total Adjustments at the bottom</div>
                        <div class="tree-node">Check that all revised information (in red) is accurate</div>
                    </div>

                    <div class="warning-box">
                        <h4>Final Pricing Includes</h4>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Worse case pricing between original lock date and current market</li>
                            <li>All prior lock extensions</li>
                            <li>All relock fees</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 6: Confirmation -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Relock Confirmation</h2><span>Pending status until Lock Desk confirms</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Submit Relock Request</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Status: Pending</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Lock Desk Review</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">v</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Lock Desk Confirms</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Byte Updated</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node start">Complete</div>
                        </div>
                    </div>

                    <div class="summary-grid">
                        <div class="summary-card">
                            <h4>Initial Status</h4>
                            <div class="value" style="font-size: 1.5rem;">Pending</div>
                            <div class="label">Awaiting Lock Desk</div>
                        </div>
                        <div class="summary-card">
                            <h4>Next Step</h4>
                            <div class="value" style="font-size: 1.5rem;">Review</div>
                            <div class="label">Lock Desk confirms</div>
                        </div>
                        <div class="summary-card">
                            <h4>Final Update</h4>
                            <div class="value" style="font-size: 1.5rem;">Byte</div>
                            <div class="label">Auto-synced</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>What Happens Next</h4>
                        <p>Your Relock request will be <strong>Pending</strong> until the Lock Desk confirms the change. This will be updated in Byte once the change is confirmed. No further action is required from the Loan Officer until confirmation.</p>
                    </div>

                    <div class="tip-box">
                        <h4>Pro Tip</h4>
                        <p>You can check the status of your relock request in Byte under the Pricing and Lock Request section. The status will update automatically once the Lock Desk processes your request.</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
RELOCK A LOAN IN BYTE AND OPTIMAL BLUE
=======================================

PREREQUISITES:
- Lock must be EXPIRED (relocks not allowed on active locks)
- User must have Loan Officer credentials for Optimal Blue

STEP-BY-STEP:
1. In Byte: Pricing and Lock Request > Submit as Loan Officer
2. Optimal Blue opens in browser (auto-login)
3. Product Search tab > Click Change Request icon
4. Relock selected by default > Click "Select Rate and Price"
5. Choose lock period and rate from Search Results
6. Review Submit Change Request screen (changes shown in RED)
7. Click Submit > Status becomes "Pending"
8. Lock Desk confirms > Byte updates automatically

KEY RESTRICTIONS:
* Relock term CANNOT exceed original lock term
* Pricing = Worse case of original date vs current market
* Final price includes ALL prior extensions + relock fees

REFERENCE:
* See Retail Lock Policy for relock fees and policies
* Contact: TRAINING@CMGFI.COM
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for Loan Relock Workflow</p>
                <div class="meta">
                    <span class="meta-item">6 Process Steps Analyzed</span>
                    <span class="meta-item">4 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 35% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">4</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">1</div>
                    <div class="agent-summary-label">High Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">35%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">75%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item high" onclick="scrollToAgent('agent-expiration')" title="Click to view agent details">
                        <div class="heat-score">85</div>
                        <div class="heat-name">Lock Expiration Monitor</div>
                        <div class="heat-desc">Alert LOs before locks expire</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>Pre-1</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-ratecompare')" title="Click to view agent details">
                        <div class="heat-score">68</div>
                        <div class="heat-name">Relock Rate Comparator</div>
                        <div class="heat-desc">Compare original vs current market</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>4</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-autosubmit')" title="Click to view agent details">
                        <div class="heat-score">62</div>
                        <div class="heat-name">Auto-Submit Relock</div>
                        <div class="heat-desc">One-click relock submission</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>3-5</span></div>
                        </div>
                    </div>
                    <div class="heat-item low" onclick="scrollToAgent('agent-statustrack')" title="Click to view agent details">
                        <div class="heat-score">45</div>
                        <div class="heat-name">Status Tracker</div>
                        <div class="heat-desc">Real-time relock status updates</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Low</span></div>
                            <div class="heat-metric">Step: <span>6</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: Lock Expiration Monitor -->
                <div class="agent-card" id="agent-expiration">
                    <div class="agent-card-header">
                        <div class="agent-icon">!</div>
                        <div class="agent-info">
                            <div class="agent-name">Lock Expiration Monitor</div>
                            <div class="agent-type">Proactive Alert Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Monitors lock expiration dates across the pipeline and proactively alerts Loan Officers before locks expire, enabling timely relock decisions and preventing costly delays.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Scan Locks</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Check Dates</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Alert LO</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Track Action</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">24/7</div><div class="agent-stat-label">Monitoring</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">3 Day</div><div class="agent-stat-label">Early Alert</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('expiration')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: Relock Rate Comparator -->
                <div class="agent-card" id="agent-ratecompare">
                    <div class="agent-card-header">
                        <div class="agent-icon">$</div>
                        <div class="agent-info">
                            <div class="agent-name">Relock Rate Comparator</div>
                            <div class="agent-type">Analysis Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically compares original lock pricing against current market rates, calculates the worse-case pricing, and presents optimal relock options with fee breakdowns.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Get Original</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Get Current</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Compare</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Recommend</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">2min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('ratecompare')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: Auto-Submit Relock -->
                <div class="agent-card" id="agent-autosubmit">
                    <div class="agent-card-header">
                        <div class="agent-icon">></div>
                        <div class="agent-info">
                            <div class="agent-name">Auto-Submit Relock Agent</div>
                            <div class="agent-type">Process Automation Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Streamlines the relock submission process by pre-filling fields, navigating through Optimal Blue screens, and submitting the relock request with minimal LO interaction.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Open OB</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Pre-fill</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Select Rate</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Submit</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">5min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">1-Click</div><div class="agent-stat-label">User Action</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('autosubmit')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 4: Status Tracker -->
                <div class="agent-card" id="agent-statustrack">
                    <div class="agent-card-header">
                        <div class="agent-icon">?</div>
                        <div class="agent-info">
                            <div class="agent-name">Relock Status Tracker</div>
                            <div class="agent-type">Notification Agent</div>
                        </div>
                        <span class="agent-priority low">Low</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Monitors pending relock requests and notifies Loan Officers immediately when the Lock Desk confirms or rejects the request, eliminating manual status checking.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Monitor</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Detect Change</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Notify LO</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Log</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">Real</div><div class="agent-stat-label">Time Updates</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Push</div><div class="agent-stat-label">Notifications</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('statustrack')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Relocking a Loan - Workflow Markdown</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">X Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Relocking a Loan in Byte and Optimal Blue

## Overview
Relocks are allowed on expired locks only. The new pricing is based on the worse case between the original lock date and current market. Final pricing includes all prior extensions and/or relock fees.

## Prerequisites
- Lock must be EXPIRED
- User must have Loan Officer credentials for Optimal Blue

## Step-by-Step Process

### Step 1: Access Pricing and Lock Request
1. Open the loan in Byte
2. Click the "Pricing and Lock Request" menu
3. In the Product and Pricing Interface area, click "Submit as Loan Officer"

### Step 2: Open Optimal Blue
- Optimal Blue opens in an internet browser window
- System enters with the User's credentials automatically

### Step 3: Submit Change Request
1. Navigate to the Product Search tab
2. Click the Change Request icon
3. On the Change Request screen, Relock is selected by default
4. Verify lien position (First Lien is most common)
5. Click "Select Rate and Price"

### Step 4: Select Lock Period and Rate
1. View available lock periods (10, 21, 30 days)
2. Review rates and pricing in the Search Results screen
3. Select desired lock period and rate
4. **Important:** Relock term cannot exceed original lock term

### Step 5: Review and Submit
1. Review the Submit Change Request screen
2. Original values shown in standard text
3. New/revised information displayed in RED
4. Review Total Adjustments at bottom
5. Click "Submit" to proceed

### Step 6: Confirmation
- Status becomes "Pending"
- Lock Desk reviews and confirms
- Byte updates automatically once confirmed

## Key Restrictions
- Relock term CANNOT exceed original lock term
- Pricing = Worse case of original date vs current market
- Final price includes ALL prior extensions + relock fees

## Reference
See Retail Lock Policy for relock fees and policies.

Contact: TRAINING@CMGFI.COM
Updated: 11/9/2020</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">X Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout = null;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav item clicks with isScrolling flag
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                isScrolling = true;

                // Clear any existing timeout
                if (scrollTimeout) clearTimeout(scrollTimeout);

                // Update active state immediately
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Scroll to section
                const targetId = this.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth' });
                }

                // Reset isScrolling after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                const content = document.getElementById('docContent').textContent;
                await navigator.clipboard.writeText(content);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // ====== AGENT PROMPT SYSTEM ======
        const agentPrompts = {
            expiration: {
                name: 'Lock Expiration Monitor',
                tags: ['Monitoring', 'Alerts', 'Low Complexity', 'High Priority'],
                purpose: `This agent proactively monitors lock expiration dates across the LO's pipeline and sends alerts 3 days, 1 day, and day-of before locks expire, enabling timely relock decisions.`,
                prompt: `You are building a Proactive Alert Agent for CMG Financial's Byte LOS system.

AGENT NAME: Lock Expiration Monitor
TYPE: Monitoring / Alert Agent

OBJECTIVE:
Create an agent that monitors all locked loans in the pipeline, tracks expiration dates, and sends proactive alerts to Loan Officers before locks expire, preventing costly relock fees and delays.

MONITORING RULES:
1. Alert 3 days before expiration - "Heads Up"
2. Alert 1 day before expiration - "Action Needed"
3. Alert on expiration day - "URGENT"
4. Alert if expired without action - "Lock Expired - Relock Required"

DATA SOURCES:
- Byte LOS lock database
- Optimal Blue lock confirmations
- LO assignment records

ALERT FORMAT:
{
  "alertType": "EXPIRATION_WARNING",
  "urgency": "HIGH" | "MEDIUM" | "LOW",
  "loanNumber": "string",
  "borrowerName": "string",
  "lockExpirationDate": "date",
  "daysRemaining": number,
  "currentRate": "rate",
  "message": "string",
  "actions": ["View Loan", "Start Relock", "Contact Lock Desk"]
}

NOTIFICATION CHANNELS:
- Email (all alerts)
- SMS (1-day and same-day only)
- Byte dashboard notification
- Push notification (mobile app)`,
                integration: `INTEGRATION POINTS:
1. Byte LOS Database
   - Query lock status and expiration dates
   - Monitor for status changes

2. Notification Services
   - SendGrid for email
   - Twilio for SMS
   - Push notifications

3. LO Calendar Integration
   - Add expiration reminders to calendar
   - Block time for relock decisions

TECHNICAL REQUIREMENTS:
- Check locks every 4 hours
- Support 10,000+ active locks
- Respect LO quiet hours (no alerts 8pm-7am)`
            },
            ratecompare: {
                name: 'Relock Rate Comparator',
                tags: ['Analysis', 'Rate Comparison', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent automatically compares original lock pricing against current market rates, calculates worse-case pricing per policy, and presents the most cost-effective relock options.`,
                prompt: `You are building an Analysis Agent for CMG Financial's relock process.

AGENT NAME: Relock Rate Comparator
TYPE: Rate Analysis / Decision Support

OBJECTIVE:
Create an agent that compares original lock pricing vs current market rates, applies worse-case pricing rules, calculates total relock costs including fees, and recommends optimal relock terms.

PRICING LOGIC:
Per Retail Lock Policy:
- Relock price = WORSE CASE of:
  a) Original lock date pricing
  b) Current market pricing
- Add: All prior extension fees
- Add: Relock fee per policy

COMPARISON OUTPUT:
{
  "loanNumber": "string",
  "originalLock": {
    "date": "date",
    "rate": "percent",
    "term": "days",
    "price": "points"
  },
  "currentMarket": {
    "date": "today",
    "rate": "percent",
    "availableTerms": [10, 21, 30],
    "price": "points"
  },
  "relockAnalysis": {
    "worseCase": "original" | "current",
    "baseRate": "percent",
    "extensionFees": "amount",
    "relockFee": "amount",
    "totalAdjustment": "points",
    "recommendation": "string"
  }
}

RECOMMENDATION LOGIC:
- If original rate better: "Current market improved; original pricing applies"
- If current rate better: "Market has worsened; current pricing applies"
- Include break-even analysis for different terms`,
                integration: `INTEGRATION POINTS:
1. Optimal Blue API
   - Fetch original lock data
   - Get current market rates

2. Retail Lock Policy Engine
   - Current relock fee schedule
   - Extension fee history

3. Byte LOS
   - Pull loan details
   - Display comparison in UI

DISPLAY:
- Side-by-side rate comparison table
- Cost breakdown visualization
- One-click "Apply Recommendation"`
            },
            autosubmit: {
                name: 'Auto-Submit Relock Agent',
                tags: ['Automation', 'Process', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent automates the multi-step relock submission process in Optimal Blue, reducing 6+ manual steps to a single confirmation click.`,
                prompt: `You are building a Process Automation Agent for CMG Financial's relock workflow.

AGENT NAME: Auto-Submit Relock Agent
TYPE: RPA / Process Automation

OBJECTIVE:
Create an agent that automates the relock submission process in Optimal Blue, handling navigation, field population, rate selection, and submission with minimal LO interaction.

AUTOMATION STEPS:
1. Launch Optimal Blue from Byte
2. Navigate to Product Search > Change Request
3. Verify Relock is selected
4. Set lien position (default: First Lien)
5. Click "Select Rate and Price"
6. Present rate options to LO for selection
7. LO confirms selection
8. Auto-populate Submit Change Request form
9. Submit request

USER INTERACTION POINTS:
- Rate/term selection (required human decision)
- Final submit confirmation
All other steps automated

PRE-FLIGHT CHECKS:
- Verify lock is expired (relock eligible)
- Confirm loan data synced
- Check LO has OB credentials
- Validate no pending requests

ERROR HANDLING:
- OB session timeout: Re-authenticate
- Data mismatch: Alert LO, pause automation
- Rate unavailable: Show alternatives
- Submission failure: Retry with backoff`,
                integration: `INTEGRATION POINTS:
1. Byte LOS
   - Trigger automation from loan screen
   - "One-Click Relock" button

2. Optimal Blue
   - Browser automation (Playwright/Puppeteer)
   - Or: OB API if available

3. Audit Trail
   - Log all automated actions
   - Capture screenshots at each step
   - Store for compliance review

DEPLOYMENT:
- Browser extension for LO workstations
- Or: Server-side RPA with virtual browser`
            },
            statustrack: {
                name: 'Relock Status Tracker',
                tags: ['Notifications', 'Status', 'Low Complexity', 'Low Priority'],
                purpose: `This agent monitors pending relock requests and immediately notifies Loan Officers when the Lock Desk confirms or rejects the request.`,
                prompt: `You are building a Notification Agent for CMG Financial's lock desk operations.

AGENT NAME: Relock Status Tracker
TYPE: Status Monitoring / Push Notification

OBJECTIVE:
Create an agent that monitors pending relock requests and sends real-time notifications to Loan Officers when status changes occur (confirmed, rejected, or requires action).

STATUS TYPES:
1. PENDING - Awaiting Lock Desk review
2. CONFIRMED - Relock approved and active
3. REJECTED - Relock denied (with reason)
4. NEEDS_INFO - Lock Desk requests additional info

NOTIFICATION FORMAT:
{
  "type": "RELOCK_STATUS_UPDATE",
  "loanNumber": "string",
  "borrowerName": "string",
  "previousStatus": "PENDING",
  "newStatus": "CONFIRMED",
  "timestamp": "datetime",
  "details": {
    "newRate": "6.25%",
    "newLockExpiration": "date",
    "confirmedBy": "Lock Desk Agent Name"
  },
  "actions": ["View in Byte", "Download Confirmation"]
}

POLLING FREQUENCY:
- Check every 2 minutes during business hours
- Every 15 minutes after hours

NOTIFICATION CHANNELS:
- Push notification (immediate)
- Email summary (if multiple updates)
- Byte dashboard badge update`,
                integration: `INTEGRATION POINTS:
1. Byte LOS
   - Monitor lock status field
   - Subscribe to status change events

2. Lock Desk System
   - Access confirmation records
   - Pull rejection reasons

3. Notification Services
   - Real-time push via WebSocket
   - Email via SendGrid
   - SMS for urgent rejections

SCALABILITY:
- Support 1000+ concurrent pending requests
- Sub-second notification delivery
- Batch processing for bulk updates`
            }
        };

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Show agent prompt modal
        let currentPromptContent = '';

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = agent.name + ' - Build Prompt';

            const tagsHtml = agent.tags.map(tag => '<span class="prompt-tag">' + tag + '</span>').join('');
            document.getElementById('promptTags').innerHTML = tagsHtml;

            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            currentPromptContent = '# ' + agent.name + '\n\n## Purpose\n' + agent.purpose + '\n\n## Build Prompt\n' + agent.prompt + '\n\n## Integration Points\n' + agent.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            try {
                await navigator.clipboard.writeText(currentPromptContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
