<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Byte Conventional PMI Quote - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* MI Comparison Cards */
        .mi-comparison { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .mi-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .mi-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .mi-card-header h4 { font-size: 1.05rem; }
        .mi-card-body { padding: 22px; }
        .mi-card ul { list-style: none; padding: 0; }
        .mi-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .mi-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
        .breadcrumb-logo-link { display: inline-flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; flex-shrink: 0; margin-right: 4px; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 24px; width: auto; display: block; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
<a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">Conventional PMI Quote</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Conventional PMI Quote</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-0" class="nav-item active">
                <span class="nav-number">0</span>
                <span class="nav-label">PMI Overview</span>
            </a>
            <a href="#section-1" class="nav-item">
                <span class="nav-number">1</span>
                <span class="nav-label">Monthly PMI</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Split Premium</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Single Premium</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Optimal Blue</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Accept & Print</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Import to Byte</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Conventional Private Mortgage Insurance Quote</h1>
                <p class="subtitle">Complete Guide to Ordering and Managing PMI in Byte</p>
                <div class="meta">
                    <span class="meta-item">System: Byte / Optimal Blue</span>
                    <span class="meta-item">Role: Loan Officer / Processor</span>
                    <span class="meta-item">Updated: May 27, 2022</span>
                    <span class="meta-item">Duration: 3-5 min per quote</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 0: PMI Overview -->
            <section id="section-0" class="section">
                <div class="section-header">
                    <div class="section-number">0</div>
                    <div class="section-title"><h2>Private Mortgage Insurance Overview</h2><span>Understanding PMI requirements and options</span></div>
                </div>
                <div class="section-content">
                    <div class="summary-grid">
                        <div class="summary-card"><h4>LTV Threshold</h4><div class="value">>80%</div><div class="label">PMI required above this</div></div>
                        <div class="summary-card"><h4>Auto Drop-Off</h4><div class="value">78%</div><div class="label">PMI terminates automatically</div></div>
                        <div class="summary-card"><h4>Request Cancel</h4><div class="value">80%</div><div class="label">Borrower can request removal</div></div>
                        <div class="summary-card"><h4>MI Providers</h4><div class="value">6</div><div class="label">Companies to compare</div></div>
                    </div>

                    <div class="info-box">
                        <h4>When is PMI Required?</h4>
                        <p>PMI is required on any <strong>Conventional (Fannie Mae, Freddie Mac)</strong> loan with less than a 20% down payment. The fee varies based on LTV, credit score, location, and other factors.</p>
                    </div>

                    <div class="decision-tree">
                        <h3>PMI Cancellation Requirements</h3>
                        <div class="tree-node level-1"><span class="tree-label">Can Borrower Request Cancellation at 80%?</span></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-green); color: white;">YES</span> if all conditions met:</div>
                        <div class="tree-node">- Borrower is NOT delinquent</div>
                        <div class="tree-node">- No 2nd mortgages exist</div>
                        <div class="tree-node">- Balance is at/below 80% of <strong>original value</strong></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-rose); color: white;">NOTE</span> A new appraisal CANNOT be used to reach 80%</div>
                    </div>

                    <div class="mi-comparison">
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Monthly Non-Refundable</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Added to monthly payment</li>
                                    <li><span class="check-icon">+</span> No upfront cost</li>
                                    <li><span class="x-icon">-</span> Not refundable</li>
                                    <li><span class="check-icon">+</span> Most common option</li>
                                </ul>
                            </div>
                        </div>
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Split Premium Non-Refundable</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Lower monthly rates</li>
                                    <li><span class="check-icon">+</span> Upfront premium at closing</li>
                                    <li><span class="x-icon">-</span> Cash needed at closing</li>
                                    <li><span class="check-icon">+</span> Sharp discount on monthly</li>
                                </ul>
                            </div>
                        </div>
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Single Premium Non-Refundable</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> One-time payment</li>
                                    <li><span class="check-icon">+</span> Can be financed</li>
                                    <li><span class="check-icon">+</span> Lower monthly payment</li>
                                    <li><span class="x-icon">-</span> Not refundable</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>CMG Policy Restrictions</h4>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>CMG only offers <strong>Non-Refundable</strong> PMI</li>
                            <li>Level Annual and Standard Annual MI premium types are <strong>NOT allowed</strong></li>
                            <li>All MI should be quoted and ordered through the system for best pricing (except AIO loans)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 1: Borrower Paid Monthly -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Borrower Paid Monthly PMI</h2><span>Order monthly non-refundable MI quote in Byte</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Go to Home Screen</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Loan Info Section</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Quote" (PMI Type)</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Status</th><th>Value</th><th>Notes</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Base LTV</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Calculated</td><td>System pulls from loan data</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Coverage %</strong></td><td><span class="badge required-badge">Required</span></td><td>25-30%</td><td>Enter percentage of coverage</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">PMI Type</strong></td><td><span class="badge required-badge">Required</span></td><td>Monthly Non-Refundable</td><td>Select from dropdown</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">MI Companies</strong></td><td><span class="badge required-badge">Required</span></td><td>Select All</td><td>Arch MI, Essent, Enact, MGIC, National MI, Radian</td></tr>
                        </tbody>
                    </table>

                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Quote Process Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node input">Enter Coverage %</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Select PMI Type</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Check All MI Companies</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node action">Click "Submit"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Quote Results Display</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Select Lowest Price</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node action">Click "Accept Quote"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Premium in URLA Lender Loan Info</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>Best Practice</h4>
                        <p>Always select <strong>ALL MI Companies</strong> to compare quotes and find the lowest price. The best rate will vary based on the borrower's profile.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Split Premium -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Borrower Paid Split Premium</h2><span>Upfront + monthly combination for lower payments</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>Split Premium Benefits</h4>
                        <p>Split premium allows the homeowner to pay a portion of the insurance in a <strong>lump sum at closing</strong>. The remaining amount is then paid in monthly installments. The borrower gets a sharp discount on their monthly PMI since a portion was paid upfront.</p>
                    </div>

                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Home Screen > Loan Info</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Quote"</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Status</th><th>Typical Value</th><th>Notes</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Coverage %</strong></td><td><span class="badge required-badge">Required</span></td><td>25%</td><td>Per guidelines in SharePoint</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">PMI Type</strong></td><td><span class="badge required-badge">Required</span></td><td>Split Prem. Non-Refundable</td><td>Select from dropdown</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">UFMIP Percent</strong></td><td><span class="badge required-badge">Required</span></td><td>1.00%</td><td>Typically 1% upfront</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">UFMIP Financing</strong></td><td><span class="badge optional-badge">Optional</span></td><td>Financed</td><td>Can be cash or financed</td></tr>
                        </tbody>
                    </table>

                    <div class="summary-grid" style="grid-template-columns: repeat(2, 1fr);">
                        <div class="summary-card">
                            <h4>Upfront Payment</h4>
                            <div class="value">1%</div>
                            <div class="label">Disclosed on Loan Estimate</div>
                        </div>
                        <div class="summary-card">
                            <h4>Monthly Addition</h4>
                            <div class="value">~0.05%</div>
                            <div class="label">Added to payment</div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Important Note</h4>
                        <p>Some MI Companies may not offer Split Premium. If a company returns an error, it means they don't support this product type for the given scenario.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Single Premium -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Borrower Paid Single Premium</h2><span>One-time payment option for lowest monthly cost</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>When to Use Single Premium</h4>
                        <p>Single premium may be a good choice for borrowers who want to keep the monthly payment low by making one, upfront MI payment at closing or by <strong>financing it as part of the mortgage loan</strong>.</p>
                    </div>

                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Home Screen > Loan Info</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Quote"</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node input">Enter Coverage %</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Select "Single Prem. Non-Refundable"</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node action">Select MI Companies</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Submit"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Compare Quotes</div>
                        </div>
                    </div>

                    <div class="mi-comparison">
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Single Premium - Cash</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Paid at closing</li>
                                    <li><span class="check-icon">+</span> No monthly MI</li>
                                    <li><span class="check-icon">+</span> Lower overall cost</li>
                                    <li><span class="x-icon">-</span> Requires cash to close</li>
                                </ul>
                            </div>
                        </div>
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Single Premium - Financed</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Added to loan amount</li>
                                    <li><span class="check-icon">+</span> No monthly MI</li>
                                    <li><span class="x-icon">-</span> Increases loan balance</li>
                                    <li><span class="check-icon">+</span> Per guidelines</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>Coverage Information</h4>
                        <p>The percentage of coverage needed is available in the <strong>guidelines for each product in SharePoint</strong>. Always verify the correct coverage before quoting.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Optimal Blue BESTX -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>BESTX MI Quotes in Optimal Blue</h2><span>Access MI comparison through Pricing & Lock Request</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>About BESTX MI</h4>
                        <p>Optimal Blue has partnered with all <strong>six mortgage insurance companies</strong> to create an easy way to compare MI provider premium quotes for the most common MI types in one step. BESTX MI is the most efficient way for loan officers to find the mortgage insurance option that best meets their borrowers' needs.</p>
                    </div>

                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Optimal Blue Access Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Left Navigation</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Pricing and Lock Request"</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node action">Products & Pricing Interface</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Submit as Loan Officer"</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node output">Optimal Blue Opens in Browser</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Submit"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Pricing Screen</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node action">Click MI Icon (Links Column)</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">MI Quote Interface</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Status</th><th>Notes</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">MI Provider</strong></td><td><span class="badge calculated-badge">Default</span></td><td>Best Ex (All Providers) - displays best price</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">HTI without MI</strong></td><td><span class="badge required-badge">Required</span></td><td>Get 1st Ratio from Byte</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Multiple Borrowers</strong></td><td><span class="badge optional-badge">Conditional</span></td><td>Check if more than one borrower</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">FICO (Borrower 1)</strong></td><td><span class="badge required-badge">Required</span></td><td>Middle score</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">FICO (Borrower 2)</strong></td><td><span class="badge optional-badge">Conditional</span></td><td>Lower of two middle scores</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Self-Employed</strong></td><td><span class="badge calculated-badge">Auto</span></td><td>Pulls from URLA</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Foreclosure (7 Yrs)</strong></td><td><span class="badge optional-badge">Optional</span></td><td>Check if applicable</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Bankruptcy (7 Yrs)</strong></td><td><span class="badge optional-badge">Optional</span></td><td>Check if applicable</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">AU Result</strong></td><td><span class="badge optional-badge">Optional</span></td><td>If DU/LPA already run</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Coverage Type</strong></td><td><span class="badge optional-badge">Optional</span></td><td>Standard GSE default; change for non-standard</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>BESTX Advantage</h4>
                        <p>The lowest price will be <strong>highlighted in green</strong> and that Company will be in the first column. This makes it easy to quickly identify the best option for your borrower.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Accept & Print -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Accept Quote & Print</h2><span>Select best option and print to loan file</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Quote Selection Process</h3>
                        <div class="flow-row">
                            <div class="flow-node input">Review All Quotes</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Identify Lowest Price (Green)</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Check Box Next to Quote</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node action">Click "Accept Quote"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Quote Accepted</div>
                        </div>
                    </div>

                    <div class="decision-tree">
                        <h3>Print Rate Quote Options</h3>
                        <div class="tree-node level-1"><span class="tree-label">Click "Print Quote"</span></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-blue); color: white;">BytePro Print to Loan File</span> - Saves to loan file</div>
                        <div class="tree-node">Type: <strong>MI Rate Quote</strong></div>
                        <div class="tree-node">Other Types Available: MI Conditional Commitment, MI Modification</div>
                    </div>

                    <div class="info-box">
                        <h4>Quote Results Fields</h4>
                        <p>The quote results display key information including: Monthly Premium, Monthly P&I, P&I + MI Premium, Monthly Premium Rate, Quote ID, Contact info, Provider Info, and Master Policy Number.</p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Import to Byte -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Import MI Quote to Byte</h2><span>Pull the accepted quote into the loan file</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Import Process</h3>
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Copy Quote ID from Optimal Blue</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node action">Byte Top Navigation: "Interfaces"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Mortgage Insurance"</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node decision">Choose MI Company</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Paste Rate Quote ID</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Get Quote"</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow down">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node input">Select PMI Type (dropdown)</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "Submit"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">MI Pulled into Byte</div>
                        </div>
                    </div>

                    <div class="summary-grid" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                        <div class="summary-card" style="background: rgba(59, 130, 246, 0.1);">
                            <h4 style="color: var(--accent-blue);">Arch MI</h4>
                            <div class="label">Provider Option</div>
                        </div>
                        <div class="summary-card">
                            <h4>Enact</h4>
                            <div class="label">Provider Option</div>
                        </div>
                        <div class="summary-card">
                            <h4>Essent MI</h4>
                            <div class="label">Provider Option</div>
                        </div>
                        <div class="summary-card">
                            <h4>MGIC</h4>
                            <div class="label">Provider Option</div>
                        </div>
                        <div class="summary-card">
                            <h4>National MI</h4>
                            <div class="label">Provider Option</div>
                        </div>
                        <div class="summary-card">
                            <h4>Radian</h4>
                            <div class="label">Provider Option</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>Verification</h4>
                        <p>After import, the monthly MI amount can be viewed in the <strong>URLA Lender Loan Info screen</strong>. This confirms the premium has been successfully pulled into the loan file.</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
PMI REQUIREMENTS:
- Required on Conventional loans with LTV > 80%
- Auto drops at 78% LTV | Request cancel at 80% LTV
- CMG only offers Non-Refundable PMI

PMI TYPES:
1. Monthly Non-Refundable: Added to monthly payment
2. Split Premium: 1% upfront + ~0.05% monthly
3. Single Premium: One-time payment (cash or financed)

BYTE QUICK ACCESS:
- Home Screen > Loan Info > PMI Type > Quote

OPTIMAL BLUE ACCESS:
- Left Nav > Pricing and Lock Request > Submit as Loan Officer
- Pricing Screen > MI Icon (Links Column)

IMPORT TO BYTE:
- Interfaces > Mortgage Insurance > Choose Company
- Paste Quote ID > Get Quote > Select PMI Type > Submit

MI COMPANIES (Select All for Best Price):
[x] Arch MI    [x] Essent MI    [x] Enact
[x] MGIC       [x] National MI  [x] Radian

VIEW RESULTS: URLA Lender Loan Info screen

NOTE: Level Annual and Standard Annual MI types NOT allowed at CMG
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for Conventional PMI Quote Workflow</p>
                <div class="meta">
                    <span class="meta-item">7 Process Steps Analyzed</span>
                    <span class="meta-item">5 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 50% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">5</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2</div>
                    <div class="agent-summary-label">High Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">50%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">90%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-autoselect')" title="Click to view agent details">
                        <div class="heat-score">95</div>
                        <div class="heat-name">MI Auto-Select Agent</div>
                        <div class="heat-desc">Automatically select lowest price quote</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>5</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-coverage')" title="Click to view agent details">
                        <div class="heat-score">85</div>
                        <div class="heat-name">Coverage Calculator</div>
                        <div class="heat-desc">Auto-determine required coverage %</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>1-3</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-recommend')" title="Click to view agent details">
                        <div class="heat-score">78</div>
                        <div class="heat-name">PMI Type Recommender</div>
                        <div class="heat-desc">Suggest optimal MI type for borrower</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>0</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-import')" title="Click to view agent details">
                        <div class="heat-score">65</div>
                        <div class="heat-name">Auto-Import Agent</div>
                        <div class="heat-desc">One-click import from OB to Byte</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>6</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-cancel')" title="Click to view agent details">
                        <div class="heat-score">55</div>
                        <div class="heat-name">PMI Cancel Monitor</div>
                        <div class="heat-desc">Alert when PMI cancellation eligible</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>Post-Close</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: MI Auto-Select -->
                <div class="agent-card" id="agent-autoselect">
                    <div class="agent-card-header">
                        <div class="agent-icon">$</div>
                        <div class="agent-info">
                            <div class="agent-name">MI Auto-Select Agent</div>
                            <div class="agent-type">Decision Automation Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically identifies and selects the lowest-priced MI quote from all providers, eliminating manual comparison. Validates selection against CMG policy restrictions before acceptance.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Receive Quotes</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Compare Prices</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Validate Policy</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Auto-Select</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">2min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('autoselect')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: Coverage Calculator -->
                <div class="agent-card" id="agent-coverage">
                    <div class="agent-card-header">
                        <div class="agent-icon">%</div>
                        <div class="agent-info">
                            <div class="agent-name">Coverage Calculator Agent</div>
                            <div class="agent-type">Rules Engine Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically determines required MI coverage percentage based on loan product, LTV, and guidelines from SharePoint. Eliminates manual lookup and ensures compliance.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Read Loan Data</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Lookup Guidelines</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Calculate Coverage</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Pre-fill Field</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">3min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">99%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('coverage')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: PMI Type Recommender -->
                <div class="agent-card" id="agent-recommend">
                    <div class="agent-card-header">
                        <div class="agent-icon">?</div>
                        <div class="agent-info">
                            <div class="agent-name">PMI Type Recommender</div>
                            <div class="agent-type">Advisory Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Analyzes borrower profile, cash reserves, and loan scenario to recommend the optimal PMI type (Monthly, Split, or Single Premium). Provides cost comparison and reasoning.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Analyze Profile</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Run Cost Models</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Compare Options</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Recommend</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">5min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">$150</div><div class="agent-stat-label">Avg Savings</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('recommend')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 4: Auto-Import -->
                <div class="agent-card" id="agent-import">
                    <div class="agent-card-header">
                        <div class="agent-icon">=></div>
                        <div class="agent-info">
                            <div class="agent-name">Auto-Import Agent</div>
                            <div class="agent-type">Integration Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically transfers accepted MI quote from Optimal Blue to Byte without manual copy/paste of Quote ID. One-click integration eliminates data entry errors.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Accept in OB</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Capture Quote ID</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Call Byte API</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Confirm Import</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">1min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">0</div><div class="agent-stat-label">Errors</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('import')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 5: PMI Cancel Monitor -->
                <div class="agent-card" id="agent-cancel">
                    <div class="agent-card-header">
                        <div class="agent-icon">!</div>
                        <div class="agent-info">
                            <div class="agent-name">PMI Cancel Monitor</div>
                            <div class="agent-type">Monitoring Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Monitors serviced loans and alerts borrowers/servicers when PMI cancellation eligibility is reached (78% auto-drop or 80% request threshold). Ensures regulatory compliance.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Monitor LTV</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Check Threshold</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Validate Criteria</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Send Alert</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">24/7</div><div class="agent-stat-label">Monitoring</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">$100+</div><div class="agent-stat-label">Mo. Savings</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('cancel')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Conventional PMI Quote - Workflow Markdown</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Conventional Private Mortgage Insurance Quote

## Overview
PMI is required on any Conventional (Fannie Mae, Freddie Mac) loan with less than a 20% down payment.

### PMI Requirements
- **LTV Threshold:** > 80% requires PMI
- **Auto Drop-Off:** 78% LTV (automatic)
- **Request Cancel:** 80% LTV (borrower request)

### Cancellation Requirements
- Borrower is not delinquent
- No 2nd mortgages exist
- Balance at/below 80% of ORIGINAL value
- Note: New appraisal CANNOT be used

## PMI Types (CMG Approved)

### 1. Monthly Non-Refundable
- Added to monthly payment
- Most common option
- Not eligible for refund

### 2. Split Premium Non-Refundable
- Lower monthly rates
- Upfront premium at closing (typically 1%)
- Remaining paid monthly (~0.05%)

### 3. Single Premium Non-Refundable
- One-time payment at closing
- Can be paid in cash or financed
- No monthly MI payment

**Note:** CMG does NOT allow Level Annual or Standard Annual MI types.

## Quoting Process

### In Byte (Home Screen)
1. Go to Loan Info section
2. Locate PMI Type field (2nd column)
3. Click "Quote" button
4. Enter Coverage percentage
5. Select PMI Type
6. Check all MI Companies
7. Click Submit
8. Review quotes, select lowest price
9. Click "Accept Quote"

### In Optimal Blue (BESTX)
1. Left Navigation > Pricing and Lock Request
2. Click "Submit as Loan Officer"
3. Optimal Blue opens in browser
4. Fill required fields, click Submit
5. Click MI icon in Links Column
6. Enter HTI without MI
7. Check applicable boxes
8. Click "Order Quotes"
9. Select lowest price (highlighted green)

## Import to Byte
1. Copy Quote ID from Optimal Blue
2. Byte > Interfaces > Mortgage Insurance
3. Choose MI Company
4. Paste Rate Quote ID
5. Click "Get Quote"
6. Select PMI Type
7. Click Submit

## MI Providers
- Arch MI
- Essent MI
- Enact
- MGIC
- National MI
- Radian

## View Results
URLA Lender Loan Info screen</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav clicks with scroll flag
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);

                // Remove active from all, add to clicked
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Reset flag after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                const content = document.getElementById('docContent').textContent;
                await navigator.clipboard.writeText(content);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // ====== AGENT PROMPT SYSTEM ======
        const agentPrompts = {
            autoselect: {
                name: 'MI Auto-Select Agent',
                tags: ['Decision Automation', 'Quote Comparison', 'Low Complexity', 'Critical Priority'],
                purpose: `This agent automatically identifies and selects the lowest-priced MI quote from all six providers, eliminating manual comparison time and ensuring the borrower always gets the best available rate while validating against CMG policy restrictions.`,
                prompt: `You are building a Decision Automation Agent for CMG Financial's Byte/Optimal Blue MI quoting system.

AGENT NAME: MI Auto-Select Agent
TYPE: Decision Automation / Quote Comparison

OBJECTIVE:
Create an agent that automatically identifies and selects the lowest-priced MI quote from all providers when quote results are returned.

INPUT DATA:
1. MI Quote Results Array
   - Company: Provider name (Arch MI, Essent, Enact, MGIC, National MI, Radian)
   - UFMIP: Upfront premium percentage
   - Monthly: Monthly premium amount
   - Renewal: Renewal premium
   - Coverage: Coverage percentage
   - Quote ID: Unique identifier

DECISION LOGIC:
1. Filter out any quotes with errors or missing data
2. For Monthly PMI: Sort by Monthly Premium (ascending)
3. For Single Premium: Sort by UFMIP (ascending)
4. For Split Premium: Calculate total cost (UFMIP + Monthly*12) and sort
5. Validate winner against CMG policy (Non-Refundable only)
6. Auto-check the checkbox for lowest valid quote

OUTPUT:
{
  "selectedQuote": {
    "company": "Arch MI",
    "premium": "$44.63",
    "quoteId": "M169252234SC3F3C",
    "savings": "$16.37/mo vs highest"
  },
  "alternateRecommendation": null,
  "policyValidation": "PASS"
}

VALIDATION RULES:
- Must be Non-Refundable type
- Cannot be Level Annual or Standard Annual
- Quote must be valid (not error state)`,
                integration: `INTEGRATION POINTS:
1. Optimal Blue Quote Results Screen
   - Hook into results table rendering
   - Auto-highlight lowest price row
   - Add "Auto-Selected" badge

2. Byte MI Quote Dialog
   - Same logic for Byte native quotes
   - Pre-check lowest price option

3. Logging
   - Track auto-selections for audit
   - Log any manual overrides

DEPLOYMENT:
- Browser extension or embedded script
- Activate on quote results display
- User can override selection`
            },
            coverage: {
                name: 'Coverage Calculator Agent',
                tags: ['Rules Engine', 'Guidelines Lookup', 'Medium Complexity', 'High Priority'],
                purpose: `This agent automatically determines the required MI coverage percentage based on the loan product, LTV ratio, and investor guidelines from SharePoint, eliminating manual lookup and ensuring compliance with all applicable requirements.`,
                prompt: `You are building a Rules Engine Agent for CMG Financial's MI quoting system.

AGENT NAME: Coverage Calculator Agent
TYPE: Rules Engine / Guidelines Lookup

OBJECTIVE:
Create an agent that automatically determines the required MI coverage percentage based on loan parameters and investor guidelines.

INPUT PARAMETERS:
1. Loan Data
   - Loan Type (Conventional - FNMA/FHLMC)
   - LTV Ratio
   - Loan Amount
   - Loan Purpose (Purchase/Refi/Cash-Out)
   - Property Type
   - Occupancy Type

2. Guidelines Source
   - SharePoint document library
   - Product-specific coverage tables

COVERAGE RULES (Standard GSE):
LTV Range    | Required Coverage
-------------|------------------
80.01-85%    | 12%
85.01-90%    | 25%
90.01-95%    | 30%
95.01-97%    | 35%

SPECIAL CASES:
- High Balance: May have different requirements
- Investment Property: Higher coverage minimums
- Multi-Unit: Adjusted coverage tables
- Non-QM: Per specific product guidelines

OUTPUT:
{
  "requiredCoverage": 25,
  "source": "FNMA Selling Guide 2024",
  "confidence": "HIGH",
  "notes": "Standard coverage for 88% LTV primary residence"
}

VALIDATION:
- Cross-reference with SharePoint guidelines
- Flag if coverage seems unusual
- Provide guideline citation`,
                integration: `INTEGRATION POINTS:
1. Byte Home Screen
   - Auto-populate Coverage field when Quote clicked
   - Tooltip showing how coverage was determined

2. Optimal Blue
   - Pre-fill coverage in MI Quote interface
   - Show calculation breakdown

3. SharePoint Integration
   - API connection to guidelines library
   - Cache coverage tables locally
   - Auto-update when guidelines change

MAINTENANCE:
- Monitor for guideline updates
- Alert when rules change
- Audit trail of applied rules`
            },
            recommend: {
                name: 'PMI Type Recommender',
                tags: ['Advisory', 'Cost Analysis', 'Medium Complexity', 'High Priority'],
                purpose: `This agent analyzes the borrower's financial profile, cash reserves, and loan scenario to recommend the optimal PMI type (Monthly, Split, or Single Premium) with a full cost comparison and reasoning for the recommendation.`,
                prompt: `You are building an Advisory Agent for CMG Financial's MI selection process.

AGENT NAME: PMI Type Recommender
TYPE: Advisory / Cost Analysis

OBJECTIVE:
Create an agent that recommends the optimal PMI type based on borrower profile and provides cost comparison analysis.

INPUT PARAMETERS:
1. Borrower Profile
   - Available cash for closing
   - Monthly budget constraints
   - Expected loan duration (how long until refi/sell)
   - Risk tolerance

2. Loan Scenario
   - Loan Amount: $400,000
   - LTV: 90%
   - Term: 30 years
   - Rate: 6.25%

3. MI Quote Data
   - Monthly Premium: $185/month
   - Single Premium: $8,500 (or 2.125%)
   - Split Premium: $4,000 upfront + $92/month

ANALYSIS MODEL:
1. Calculate break-even point for each option
2. Project total cost over expected holding period
3. Consider opportunity cost of upfront cash
4. Factor in tax deductibility (if applicable)

RECOMMENDATION LOGIC:
IF expected_hold < 3 years:
  RECOMMEND Monthly (lowest upfront, easy to stop)
ELIF cash_constrained AND hold > 5 years:
  RECOMMEND Split (balance of upfront and savings)
ELIF sufficient_cash AND hold > 7 years:
  RECOMMEND Single (lowest total cost)

OUTPUT:
{
  "recommendation": "Split Premium",
  "reasoning": "With 5+ year expected hold and moderate cash reserves, split premium provides optimal balance. Break-even vs monthly at 3.2 years.",
  "costComparison": {
    "monthly_5yr": "$11,100",
    "split_5yr": "$9,520",
    "single_5yr": "$8,500"
  },
  "savings": "$1,580 over monthly option",
  "caveats": ["Upfront portion non-refundable if refi/sell early"]
}`,
                integration: `INTEGRATION POINTS:
1. MI Quote Screen
   - "Get Recommendation" button
   - Display recommendation card with reasoning
   - Show cost comparison chart

2. Loan Officer Interface
   - Present recommendation to share with borrower
   - Generate borrower-facing comparison PDF

3. CRM Integration
   - Log recommendation and outcome
   - Track which recommendations were followed
   - Learn from conversion data

PRESENTATION:
- Visual cost comparison graph
- Clear recommendation with rationale
- Easy override for LO judgment`
            },
            import: {
                name: 'Auto-Import Agent',
                tags: ['Integration', 'Data Transfer', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent automatically transfers the accepted MI quote from Optimal Blue to Byte without requiring manual copy/paste of the Quote ID, providing one-click integration that eliminates data entry errors.`,
                prompt: `You are building an Integration Agent for CMG Financial's Byte/Optimal Blue systems.

AGENT NAME: Auto-Import Agent
TYPE: System Integration / Data Transfer

OBJECTIVE:
Create an agent that automatically transfers accepted MI quotes from Optimal Blue to Byte without manual Quote ID copy/paste.

WORKFLOW:
1. TRIGGER: User clicks "Accept Quote" in Optimal Blue
2. CAPTURE: Extract Quote ID and MI details from accepted quote
3. CALL: Byte Mortgage Insurance API
4. IMPORT: Pull quote into loan file
5. CONFIRM: Display success message with imported details

DATA TO TRANSFER:
{
  "quoteId": "M169252234SC3F3C",
  "provider": "Arch MI",
  "pmiType": "Monthly Non-Refundable",
  "monthlyPremium": 44.63,
  "coverage": 25,
  "masterPolicyNumber": "15162-1-0"
}

API SEQUENCE:
1. POST /byte/interfaces/mortgage-insurance/select-provider
   Body: { provider: "Arch MI" }

2. POST /byte/interfaces/mortgage-insurance/get-quote
   Body: { quoteId: "M169252234SC3F3C" }

3. POST /byte/interfaces/mortgage-insurance/submit
   Body: { pmiType: "Monthly Non-Refundable" }

ERROR HANDLING:
- If API fails: Display Quote ID for manual entry
- If quote expired: Prompt to re-quote
- If mismatch: Alert user to verify

SUCCESS CONFIRMATION:
"MI Quote imported successfully. View in URLA Lender Loan Info."`,
                integration: `INTEGRATION POINTS:
1. Optimal Blue Extension
   - Add "Import to Byte" button next to Accept Quote
   - Show import progress indicator
   - Confirm successful transfer

2. Byte API
   - Authenticated API calls
   - Handle session management
   - Error recovery

3. Audit Trail
   - Log all import attempts
   - Track success/failure rates
   - Alert on repeated failures

SECURITY:
- Use existing session tokens
- No credential storage
- Audit all data transfers`
            },
            cancel: {
                name: 'PMI Cancel Monitor',
                tags: ['Monitoring', 'Compliance', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent monitors serviced loans and alerts borrowers and servicers when PMI cancellation eligibility is reached at the 78% automatic drop-off threshold or 80% request threshold, ensuring regulatory compliance with the Homeowners Protection Act.`,
                prompt: `You are building a Monitoring Agent for CMG Financial's servicing system.

AGENT NAME: PMI Cancel Monitor
TYPE: Monitoring / Compliance

OBJECTIVE:
Create an agent that monitors loan balances and alerts when PMI cancellation thresholds are reached.

MONITORING THRESHOLDS:
1. AUTOMATIC TERMINATION (78% LTV)
   - PMI must be canceled automatically
   - Based on original value
   - Borrower must be current

2. BORROWER REQUEST (80% LTV)
   - Borrower can request cancellation
   - Must meet eligibility requirements

ELIGIBILITY REQUIREMENTS:
- Borrower is NOT delinquent (current on payments)
- No subordinate liens (2nd mortgages)
- Property value = ORIGINAL value (no new appraisal)
- Good payment history (no 30-day lates in 12 months)

MONITORING DATA:
{
  "loanNumber": "1234567890",
  "originalValue": 450000,
  "originalLoanAmount": 405000,
  "currentBalance": 351000,
  "currentLTV": 78.0,
  "paymentStatus": "Current",
  "subordinateLiens": false,
  "lastPaymentDate": "2026-01-15"
}

ALERT TRIGGERS:
1. LTV reaches 80%:
   "PMI Cancellation Eligible: Loan #1234567890 has reached 80% LTV.
    Borrower may request PMI cancellation if current on payments."

2. LTV reaches 78%:
   "AUTOMATIC PMI TERMINATION: Loan #1234567890 has reached 78% LTV.
    PMI must be terminated per HPA requirements."

OUTPUT:
{
  "alert_type": "PMI_CANCEL_ELIGIBLE",
  "loan_number": "1234567890",
  "current_ltv": 80.0,
  "threshold": 80,
  "eligible": true,
  "blockers": [],
  "action_required": "Notify borrower of cancellation option"
}`,
                integration: `INTEGRATION POINTS:
1. Servicing System
   - Nightly batch scan of loan balances
   - Real-time update on payment posting
   - Integration with payment history

2. Notification System
   - Borrower email/letter generation
   - Servicer task queue
   - Compliance tracking

3. Compliance Reporting
   - HPA compliance dashboard
   - Audit trail of all notifications
   - Escalation for missed cancellations

REGULATORY:
- Homeowners Protection Act of 1998
- State-specific requirements
- Investor overlay requirements`
            }
        };

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Show agent prompt modal
        let currentPromptContent = '';

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = `${agent.name} - Build Prompt`;

            const tagsHtml = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptTags').innerHTML = tagsHtml;

            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            currentPromptContent = `# ${agent.name}\n\n## Purpose\n${agent.purpose}\n\n## Build Prompt\n${agent.prompt}\n\n## Integration Points\n${agent.integration}`;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            try {
                await navigator.clipboard.writeText(currentPromptContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
