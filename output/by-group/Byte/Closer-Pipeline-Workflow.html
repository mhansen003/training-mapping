<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Byte Closer Pipelines - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }
        .badge.priority-badge { background: rgba(245, 158, 11, 0.15); color: var(--accent-amber); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Pipeline Cards */
        .pipeline-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .pipeline-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .pipeline-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .pipeline-card-header h4 { font-size: 1.05rem; }
        .pipeline-card-body { padding: 22px; }
        .pipeline-card ul { list-style: none; padding: 0; }
        .pipeline-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .pipeline-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* AI Prompt Modal */
        .prompt-modal .modal {
            max-width: 800px;
        }

        .prompt-modal .modal-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
        }

        .prompt-section {
            margin-bottom: 25px;
        }

        .prompt-section h4 {
            color: var(--accent-purple);
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .prompt-tag {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">Closer Pipelines</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Closer Pipelines</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-0" class="nav-item active">
                <span class="nav-number">0</span>
                <span class="nav-label">Overview</span>
            </a>
            <a href="#section-1" class="nav-item">
                <span class="nav-number">1</span>
                <span class="nav-label">Retail Closer</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">CD Requested</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Revised CD</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Fee Reconciliation</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Pipeline Columns</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Byte Closer Pipelines</h1>
                <p class="subtitle">Quick Reference Guide for Daily Pipeline Management</p>
                <div class="meta">
                    <span class="meta-item">System: Byte LOS</span>
                    <span class="meta-item">Role: Closer</span>
                    <span class="meta-item">Updated: May 20, 2020</span>
                    <span class="meta-item">Review: Daily</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Priority/Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 0: Overview -->
            <section id="section-0" class="section">
                <div class="section-header">
                    <div class="section-number">0</div>
                    <div class="section-title"><h2>Pipeline Overview</h2><span>Understanding Closer pipelines in Byte</span></div>
                </div>
                <div class="section-content">
                    <p style="color: var(--text-secondary); margin-bottom: 20px; line-height: 1.7;">
                        Closers have several pipelines to review on a daily basis. This quick reference guide details the pipelines utilized and information provided on each pipeline. Understanding when and how to use each pipeline ensures compliance and efficient loan processing.
                    </p>
                    <div class="summary-grid">
                        <div class="summary-card"><h4>Pipelines</h4><div class="value">4</div><div class="label">Primary closer pipelines</div></div>
                        <div class="summary-card"><h4>Priority Focus</h4><div class="value">COC</div><div class="label">Changed Circumstance loans</div></div>
                        <div class="summary-card"><h4>Review Frequency</h4><div class="value">Daily</div><div class="label">All pipelines must be reviewed</div></div>
                        <div class="summary-card"><h4>Compliance Driver</h4><div class="value">CD</div><div class="label">Closing Disclosure timing</div></div>
                    </div>
                    <div class="info-box">
                        <h4>Key Concept: CD Triangle</h4>
                        <p>The CD triangle indicator appears on loans that require redisclosure due to fee changes. Always review these loans carefully to ensure fee reconciliation accuracy before redisclosure.</p>
                    </div>
                </div>
            </section>

            <!-- Section 1: Retail Closer Pipeline -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Retail Closer Pipeline</h2><span>Primary pipeline for assigned loans</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Open Byte</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Navigate to Retail Closer</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">View Assigned Loans</div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>Pipeline Purpose</h4>
                        <p>Displays current, active loans that have been assigned a Closer including those requiring:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Closing Disclosure (CD) preparation</li>
                            <li>Changed Circumstance (COC) requests</li>
                            <li>Closing document requests</li>
                        </ul>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Column</th><th>Description</th><th>Action Required</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Loan Number</strong></td><td>Unique loan identifier</td><td>Click to open loan file</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Borrower</strong></td><td>Primary borrower name</td><td>Reference for communication</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Closer</strong></td><td>Assigned closer name</td><td>Filter by your name</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Loan Status</strong></td><td>Current loan status (Approved, etc.)</td><td>Monitor status changes</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Disbursement Date</strong></td><td>Target funding date</td><td>Prioritize by urgency</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Closing Date</strong></td><td>Scheduled closing date</td><td>Ensure docs ready</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">CD Requested</strong></td><td>CD request status indicator</td><td>Process pending requests</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 2: Retail CD Requested Pipeline -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Retail CD Requested Pipeline</h2><span>Loans submitted for Closing Disclosure</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node input">CD Request Submitted</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">COC Required?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Yes - COC on CD</span>
                                <span class="flow-arrow" style="transform: rotate(90deg);">-></span>
                                <div class="flow-node exception">PRIORITY Review</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">No COC</span>
                                <span class="flow-arrow" style="transform: rotate(90deg);">-></span>
                                <div class="flow-node action">Standard Processing</div>
                            </div>
                        </div>
                    </div>
                    <div class="exception-box">
                        <h4>COMPLIANCE PRIORITY</h4>
                        <p><strong>Loans with a COC on CD must be reviewed as a priority to remain in compliance.</strong> Changed circumstance disclosures have strict timing requirements under TRID regulations.</p>
                    </div>
                    <div class="info-box">
                        <h4>Pipeline Purpose</h4>
                        <p>Displays loans submitted for CD, with or without a changed circumstance request. This pipeline is critical for tracking disclosure deadlines and ensuring timely CD delivery.</p>
                    </div>
                    <div class="pipeline-grid">
                        <div class="pipeline-card">
                            <div class="pipeline-card-header"><h4>Standard CD Request</h4></div>
                            <div class="pipeline-card-body">
                                <ul>
                                    <li><span class="check-icon">+</span> Initial CD preparation</li>
                                    <li><span class="check-icon">+</span> Standard 3-day waiting period</li>
                                    <li><span class="check-icon">+</span> Normal priority processing</li>
                                </ul>
                            </div>
                        </div>
                        <div class="pipeline-card">
                            <div class="pipeline-card-header" style="background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%);"><h4>COC on CD Request</h4></div>
                            <div class="pipeline-card-body">
                                <ul>
                                    <li><span class="x-icon">!</span> Changed Circumstance present</li>
                                    <li><span class="x-icon">!</span> Compliance deadline applies</li>
                                    <li><span class="x-icon">!</span> PRIORITY review required</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 3: Retail Revised CD Pipeline -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Retail Revised CD Pipeline</h2><span>Loans requiring redisclosure</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Revised CD Review Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node input">CD Triangle Alert</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Review Fee Reconciliation</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow" style="transform: rotate(90deg);">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node decision">Fees Reconciled Correctly?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Yes</span>
                                <span class="flow-arrow" style="transform: rotate(90deg);">-></span>
                                <div class="flow-node action">Proceed to Redisclosure</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">No - Fee Decreases Reconciled</span>
                                <span class="flow-arrow" style="transform: rotate(90deg);">-></span>
                                <div class="flow-node exception">Correct Before Redisclosure</div>
                            </div>
                        </div>
                    </div>
                    <div class="exception-box">
                        <h4>ACCURACY WARNING</h4>
                        <p>Fees may have been reconciled incorrectly (fee decreases reconciled). <strong>ALL loans should be reviewed for accuracy prior to redisclosure.</strong></p>
                    </div>
                    <div class="info-box">
                        <h4>Pipeline Purpose</h4>
                        <p>Displays loans with a CD triangle that currently require redisclosure due to fees being reconciled. The CD triangle is a visual indicator that action is required.</p>
                    </div>
                    <div class="decision-tree">
                        <h3>COC Start Date Check</h3>
                        <div class="tree-node level-1"><span class="tree-label">COC Start Date Present?</span></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-green); color: white;">Yes</span> -> Follow standard COC timing requirements</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-rose); color: white;">Missing</span> -> Review the loan to determine when the COC must be disclosed</div>
                    </div>
                    <div class="tip-box">
                        <h4>Best Practice</h4>
                        <p>If a COC Start Date is missing, review the loan file thoroughly to determine the appropriate disclosure deadline. Document your findings in the loan notes.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Fee Reconciliation Pipeline -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Fee Reconciliation Pipeline</h2><span>Loans requiring fee review</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node input">CD Triangle - Fee Reconciliation</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Review Fee Changes</div>
                        </div>
                        <div class="flow-row"><span class="flow-arrow" style="transform: rotate(90deg);">|</span></div>
                        <div class="flow-row">
                            <div class="flow-node decision">Fee Change Type?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Requires Redisclosure</span>
                                <span class="flow-arrow" style="transform: rotate(90deg);">-></span>
                                <div class="flow-node action">Prepare Revised CD</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">Prepaid Items (Tax/Ins)</span>
                                <span class="flow-arrow" style="transform: rotate(90deg);">-></span>
                                <div class="flow-node output">Submit to Underwriter</div>
                            </div>
                        </div>
                    </div>
                    <div class="info-box">
                        <h4>Pipeline Purpose</h4>
                        <p>Displays loans with a CD triangle that require fee reconciliation. The reconciliation may or may not require redisclosure depending on the fee type and tolerance category.</p>
                    </div>
                    <table class="field-table">
                        <thead><tr><th>Fee Type</th><th>Requires Redisclosure?</th><th>Action</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Zero Tolerance Fees</strong></td><td><span class="badge required-badge">Yes</span></td><td>Always redisclose if increased</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">10% Tolerance Fees</strong></td><td><span class="badge priority-badge">If Exceeded</span></td><td>Redisclose if cumulative > 10%</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Prepaid Items (Taxes)</strong></td><td><span class="badge optional-badge">No</span></td><td>Submit to underwriter</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Prepaid Items (Insurance)</strong></td><td><span class="badge optional-badge">No</span></td><td>Submit to underwriter</td></tr>
                        </tbody>
                    </table>
                    <div class="tip-box">
                        <h4>Closing Agent Communication</h4>
                        <p>While redisclosure is not required for prepaid items, determine if the closing agent needs to be aware of any fee changes. Proactive communication prevents closing day surprises.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Pipeline Columns Reference -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Pipeline Columns Reference</h2><span>Key data fields across all pipelines</span></div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead><tr><th>Column Name</th><th>Pipeline(s)</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">File Name</strong></td><td>All</td><td>Loan file identifier</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Borrower</strong></td><td>All</td><td>Primary borrower name</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Branch</strong></td><td>All</td><td>Originating branch location</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Closer</strong></td><td>All</td><td>Assigned closer</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Funder</strong></td><td>All</td><td>Assigned funder</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Loan Status</strong></td><td>All</td><td>Current loan status</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Loan Processor</strong></td><td>Fee Recon</td><td>Processing contact</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">State</strong></td><td>All</td><td>Property state</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Loan Purpose</strong></td><td>CD Requested, Revised CD</td><td>Purchase/Refinance/Cash-Out</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Mortgage Type</strong></td><td>CD Requested, Revised CD</td><td>Conventional/FHA/VA/USDA</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Lock Exp</strong></td><td>CD Requested</td><td>Rate lock expiration date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">COC Start Date</strong></td><td>Revised CD</td><td>Changed circumstance start date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">CoC Req'd</strong></td><td>Fee Recon</td><td>COC request date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">CD Requested</strong></td><td>Retail Closer</td><td>CD request indicator</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Sched Closing Date</strong></td><td>Revised CD</td><td>Scheduled closing date</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Lock Exp Date</strong></td><td>Revised CD</td><td>Lock expiration date</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
CLOSER PIPELINES OVERVIEW
=========================

RETAIL CLOSER
- All assigned loans requiring CD, COC, or closing docs
- Primary daily workflow pipeline

RETAIL CD REQUESTED
- Loans submitted for Closing Disclosure
- PRIORITY: COC on CD loans (compliance requirement)

RETAIL REVISED CD
- Loans with CD triangle requiring redisclosure
- VERIFY: Fee reconciliation accuracy before redisclosure
- CHECK: COC Start Date - determine timing if missing

FEE RECONCILIATION
- Loans with CD triangle for fee review
- MAY or MAY NOT require redisclosure
- Prepaid items (tax/insurance) -> Submit to underwriter
- NOTIFY closing agent of any fee changes

DAILY CHECKLIST
---------------
[ ] Review Retail Closer pipeline
[ ] Process CD Requested - prioritize COC loans
[ ] Check Revised CD for fee accuracy
[ ] Review Fee Reconciliation items
[ ] Communicate changes to closing agents

QUESTIONS? EMAIL TRAINING@CMGFI.COM
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for Closer Pipeline Workflow</p>
                <div class="meta">
                    <span class="meta-item">5 Process Steps Analyzed</span>
                    <span class="meta-item">4 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 35% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">4</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2</div>
                    <div class="agent-summary-label">High Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">35%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">90%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-coc')" title="Click to view agent details">
                        <div class="heat-score">95</div>
                        <div class="heat-name">COC Priority Alert</div>
                        <div class="heat-desc">Auto-flag and prioritize COC compliance items</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>2</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-fee')" title="Click to view agent details">
                        <div class="heat-score">88</div>
                        <div class="heat-name">Fee Reconciliation Validator</div>
                        <div class="heat-desc">Auto-validate fee changes and flag errors</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>3-4</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-closing')" title="Click to view agent details">
                        <div class="heat-score">75</div>
                        <div class="heat-name">Closing Agent Notifier</div>
                        <div class="heat-desc">Auto-communicate fee changes to title/settlement</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>4</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-dashboard')" title="Click to view agent details">
                        <div class="heat-score">62</div>
                        <div class="heat-name">Pipeline Dashboard</div>
                        <div class="heat-desc">Unified view with AI-driven prioritization</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>All</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: COC Priority Alert -->
                <div class="agent-card" id="agent-coc">
                    <div class="agent-card-header">
                        <div class="agent-icon">!</div>
                        <div class="agent-info">
                            <div class="agent-name">COC Priority Alert Agent</div>
                            <div class="agent-type">Compliance Monitoring Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically monitors the CD Requested pipeline for loans with Changed Circumstance (COC) flags. Sends priority alerts to closers, calculates compliance deadlines, and escalates when deadlines approach.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Scan Pipeline</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Detect COC</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Calculate Deadline</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Alert Closer</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">5min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">99%</div><div class="agent-stat-label">Compliance</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('coc')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: Fee Reconciliation Validator -->
                <div class="agent-card" id="agent-fee">
                    <div class="agent-card-header">
                        <div class="agent-icon">$</div>
                        <div class="agent-info">
                            <div class="agent-name">Fee Reconciliation Validator</div>
                            <div class="agent-type">Data Validation Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically validates fee reconciliation accuracy before redisclosure. Detects incorrectly reconciled fee decreases, checks tolerance thresholds, and flags discrepancies for manual review.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Extract Fees</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Compare LE vs CD</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Check Tolerances</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Report</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">10min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">98%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('fee')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: Closing Agent Notifier -->
                <div class="agent-card" id="agent-closing">
                    <div class="agent-card-header">
                        <div class="agent-icon">@</div>
                        <div class="agent-info">
                            <div class="agent-name">Closing Agent Notifier</div>
                            <div class="agent-type">Communication Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically generates and sends fee change notifications to closing agents/title companies when prepaid items or other fees are adjusted. Prevents closing day surprises through proactive communication.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Detect Change</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Draft Message</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Lookup Contact</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Send Email</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">3min</div><div class="agent-stat-label">Per Loan</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Consistent</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('closing')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 4: Unified Pipeline Dashboard -->
                <div class="agent-card" id="agent-dashboard">
                    <div class="agent-card-header">
                        <div class="agent-icon">#</div>
                        <div class="agent-info">
                            <div class="agent-name">Unified Pipeline Dashboard</div>
                            <div class="agent-type">Analytics Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Consolidates all four closer pipelines into a single AI-prioritized dashboard. Uses machine learning to rank loans by urgency, compliance risk, and closing date proximity.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Aggregate Pipelines</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">ML Scoring</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Rank by Priority</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Display</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">15min</div><div class="agent-stat-label">Daily Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">+20%</div><div class="agent-stat-label">Efficiency</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('dashboard')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Closer Pipelines - Workflow Markdown</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">X Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Byte Closer Pipelines - Quick Reference Guide

## Overview
Closers have several pipelines to review on a daily basis. This guide details the pipelines utilized and information provided on each.

## 1. Retail Closer Pipeline
**Purpose:** Displays current, active loans assigned to a Closer
- Loans requiring CD preparation
- Changed Circumstance (COC) requests
- Closing document requests

## 2. Retail CD Requested Pipeline
**Purpose:** Loans submitted for Closing Disclosure
- With or without changed circumstance request
- **PRIORITY:** Loans with COC on CD must be reviewed first for compliance

## 3. Retail Revised CD Pipeline
**Purpose:** Loans with CD triangle requiring redisclosure
- Due to fees being reconciled
- **WARNING:** Fees may be reconciled incorrectly (fee decreases)
- Review ALL loans for accuracy prior to redisclosure
- If COC Start Date is missing, determine disclosure timing

## 4. Fee Reconciliation Pipeline
**Purpose:** Loans with CD triangle for fee reconciliation
- May or may not require redisclosure
- Prepaid items (taxes, insurance) -> Submit to underwriter
- Notify closing agent of any fee changes

## Daily Checklist
- [ ] Review Retail Closer pipeline
- [ ] Process CD Requested - prioritize COC loans
- [ ] Check Revised CD for fee accuracy
- [ ] Review Fee Reconciliation items
- [ ] Communicate changes to closing agents

## Contact
Questions? Email TRAINING@CMGFI.COM</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">X Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Scroll spy with click debounce
        let isScrolling = false;

        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Improved scroll spy with click debounce
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');

        // Handle nav item clicks
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                isScrolling = true;

                // Update active state immediately on click
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Scroll to section
                const targetId = this.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth' });
                }

                // Reset isScrolling after animation completes
                setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        function updateActiveNav() {
            // Skip if user clicked a nav item recently
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        window.addEventListener('scroll', updateActiveNav);

        // Modal
        let docContent = '';

        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            docContent = document.getElementById('docContent').textContent;
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(docContent || document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // ====== AGENT PROMPT SYSTEM ======
        const agentPrompts = {
            coc: {
                name: 'COC Priority Alert Agent',
                tags: ['Compliance', 'Monitoring', 'Low Complexity', 'Critical Priority'],
                purpose: `This agent automatically monitors the CD Requested pipeline for loans with Changed Circumstance (COC) flags, calculates compliance deadlines, and sends priority alerts to closers to ensure TRID compliance.`,
                prompt: `You are building a Compliance Monitoring Agent for CMG Financial's Byte LOS system.

AGENT NAME: COC Priority Alert Agent
TYPE: Compliance Monitoring / Alert System

OBJECTIVE:
Create an agent that continuously monitors the Retail CD Requested pipeline for loans with Changed Circumstance (COC) indicators, calculates disclosure deadlines, and alerts closers with prioritized action items.

MONITORING RULES:
1. SCAN FREQUENCY: Every 15 minutes during business hours
2. DETECTION CRITERIA:
   - COC on CD flag = true
   - COC Start Date present or missing
   - Loan status = "CD Requested"

DEADLINE CALCULATION:
- If COC Start Date present: Calculate days remaining
- If COC Start Date missing: Flag as "URGENT - Date Needed"
- TRID requires COC disclosure within 3 business days

ALERT LEVELS:

Level     | Condition              | Action

CRITICAL  | < 24 hours remaining   | Immediate alert + escalate
HIGH      | 24-48 hours remaining  | Priority alert
MEDIUM    | 48-72 hours remaining  | Standard alert
INFO      | > 72 hours remaining   | Dashboard display only


OUTPUT FORMAT:
{
  "alertLevel": "CRITICAL",
  "loanNumber": "RWE00000XXXX",
  "borrowerName": "John Smith",
  "cocStartDate": "2026-01-25",
  "deadlineDate": "2026-01-28",
  "hoursRemaining": 18,
  "closerAssigned": "Jane Doe",
  "actionRequired": "Process COC redisclosure immediately"
}`,
                integration: `INTEGRATION POINTS:
1. Byte Pipeline API
   - Query Retail CD Requested pipeline
   - Filter by COC indicators
   - Extract loan details

2. Notification Services
   - Email alerts to assigned closer
   - Dashboard notification badge
   - SMS for critical alerts (optional)

3. Escalation Path
   - Auto-escalate to supervisor if deadline < 24 hours
   - Log all alerts for audit trail

TECHNICAL REQUIREMENTS:
- Response time < 5 seconds per scan
- Support concurrent monitoring of 1000+ loans
- Maintain alert history for 90 days`
            },
            fee: {
                name: 'Fee Reconciliation Validator',
                tags: ['Data Validation', 'Compliance', 'Medium Complexity', 'High Priority'],
                purpose: `This agent automatically validates fee reconciliation accuracy by comparing LE fees to CD fees, checking tolerance thresholds, detecting incorrectly reconciled fee decreases, and flagging discrepancies before redisclosure.`,
                prompt: `You are building a Data Validation Agent for CMG Financial's Byte LOS system.

AGENT NAME: Fee Reconciliation Validator
TYPE: Data Validation / Compliance Check

OBJECTIVE:
Create an agent that validates fee reconciliation accuracy before redisclosure by comparing Loan Estimate (LE) fees to Closing Disclosure (CD) fees, applying TRID tolerance rules, and flagging errors.

VALIDATION RULES:

1. ZERO TOLERANCE FEES (0% variance allowed)
   - Lender fees and charges
   - Transfer taxes
   - Fees paid to affiliates

   IF CD_fee > LE_fee THEN FLAG: "Zero tolerance exceeded"

2. 10% CUMULATIVE TOLERANCE
   - Recording fees
   - Third-party fees (borrower cannot shop)

   IF SUM(CD_fees - LE_fees) > 10% of SUM(LE_fees)
   THEN FLAG: "10% tolerance exceeded"

3. NO TOLERANCE (borrower can shop)
   - Services borrower can shop for
   - IF borrower used provider from list: 10% applies
   - IF borrower selected own provider: No limit

4. PREPAID ITEMS
   - Taxes, Insurance, Interest
   - No tolerance limit
   - STILL FLAG for closing agent notification

INCORRECT RECONCILIATION DETECTION:

Issue                    | Detection Rule

Fee decrease reconciled  | CD_fee < LE_fee AND marked as "reconciled"
Wrong tolerance applied  | Zero tolerance fee in 10% bucket
Missing COC for increase | Fee increased but no COC triggered


OUTPUT FORMAT:
{
  "loanNumber": "RWE00000XXXX",
  "validationStatus": "ERRORS_FOUND",
  "errors": [
    {
      "feeType": "Appraisal Fee",
      "toleranceCategory": "Zero",
      "leFee": 450.00,
      "cdFee": 500.00,
      "variance": 50.00,
      "variancePercent": 11.1,
      "issue": "Zero tolerance exceeded - cure required"
    }
  ],
  "warnings": [
    {
      "feeType": "Homeowner's Insurance",
      "category": "Prepaid",
      "change": "+$125",
      "note": "Notify closing agent"
    }
  ],
  "canRedisclose": false,
  "actionRequired": "Correct fee reconciliation before redisclosure"
}`,
                integration: `INTEGRATION POINTS:
1. Byte Fee Data
   - Extract LE fees (all versions)
   - Extract CD fees (current)
   - Map to TRID tolerance categories

2. Reconciliation Screen
   - Add "Validate" button
   - Display error summary
   - Block redisclosure if errors

3. Audit Trail
   - Log all validations
   - Track corrections made
   - Report on error rates

BUSINESS RULES ENGINE:
- Configurable tolerance thresholds
- State-specific rules support
- Investor overlay integration`
            },
            closing: {
                name: 'Closing Agent Notifier',
                tags: ['Communication', 'Automation', 'Low Complexity', 'High Priority'],
                purpose: `This agent automatically generates and sends fee change notifications to closing agents and title companies when prepaid items or other fees are adjusted, ensuring proactive communication and preventing closing day surprises.`,
                prompt: `You are building a Communication Agent for CMG Financial's Byte LOS system.

AGENT NAME: Closing Agent Notifier
TYPE: Automated Communication / Integration

OBJECTIVE:
Create an agent that automatically detects fee changes and sends professional notifications to closing agents/title companies, keeping all parties informed and preventing last-minute issues.

TRIGGER CONDITIONS:
1. Fee Reconciliation completed
2. Prepaid items changed (taxes, insurance)
3. Any fee variance > $50
4. Closing date change
5. Cash to close change > $100

NOTIFICATION TEMPLATE:

Subject: Fee Update - [Borrower Name] - [Loan #] - Closing [Date]

Body:

LOAN UPDATE NOTIFICATION

Borrower: [Full Name]
Property: [Address]
Loan Number: [#]
Scheduled Closing: [Date/Time]

FEE CHANGES:

 Fee Type         Previous   Current    Change   

 Property Taxes   $2,400     $2,650     +$250    
 Homeowner's Ins  $1,200     $1,325     +$125    


IMPACT:
- New Cash to Close: $XX,XXX
- Change from Previous: +$XXX

Please update your settlement figures accordingly.

Questions? Contact:
[Closer Name]
[Phone] | [Email]


RECIPIENT LOOKUP:
- Primary: Closing Agent email from loan file
- CC: Settlement company general inbox
- CC: Closer (for tracking)

DELIVERY TRACKING:
{
  "notificationId": "NOT-2026-001234",
  "loanNumber": "RWE00000XXXX",
  "sentTo": "closing@titleco.com",
  "sentAt": "2026-01-27T10:30:00Z",
  "openedAt": null,
  "status": "delivered"
}`,
                integration: `INTEGRATION POINTS:
1. Byte Loan File
   - Extract closing agent contact info
   - Get fee change details
   - Pull property and borrower data

2. Email Service
   - SendGrid or internal SMTP
   - Branded HTML templates
   - Delivery tracking

3. Logging & Audit
   - Store all notifications in loan file
   - Track open/read receipts
   - Escalate if not acknowledged

AUTOMATION TRIGGER:
- Webhook on fee reconciliation save
- Or: Scheduled scan every 30 minutes
- Manual trigger button for closer`
            },
            dashboard: {
                name: 'Unified Pipeline Dashboard',
                tags: ['Analytics', 'ML Scoring', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent consolidates all four closer pipelines into a single AI-prioritized dashboard, using machine learning to rank loans by urgency, compliance risk, and closing date proximity for maximum efficiency.`,
                prompt: `You are building an Analytics Agent for CMG Financial's Byte LOS system.

AGENT NAME: Unified Pipeline Dashboard Agent
TYPE: Data Aggregation / ML Prioritization

OBJECTIVE:
Create an agent that aggregates loans from all four closer pipelines (Retail Closer, CD Requested, Revised CD, Fee Reconciliation) into a single prioritized view using AI-driven scoring.

DATA AGGREGATION:
1. Retail Closer Pipeline -> All assigned loans
2. CD Requested Pipeline -> Pending CD loans
3. Revised CD Pipeline -> Redisclosure needed
4. Fee Reconciliation Pipeline -> Fee review needed

ML PRIORITY SCORING MODEL:

Input Features:
- Days to closing (urgency)
- COC flag (compliance risk)
- Fee variance amount (financial risk)
- Lock expiration (rate risk)
- Days since last touch (staleness)
- Pipeline count (workload indicator)

Scoring Formula (weighted):
Priority_Score =
  (Urgency_Factor  0.30) +
  (Compliance_Risk  0.25) +
  (Financial_Risk  0.20) +
  (Rate_Risk  0.15) +
  (Staleness  0.10)

Score Ranges:

Score     | Priority | Color

90-100    | Critical | Red
70-89     | High     | Orange
50-69     | Medium   | Yellow
0-49      | Low      | Green


DASHBOARD OUTPUT:
{
  "closer": "Jane Doe",
  "totalLoans": 45,
  "byPriority": {
    "critical": 3,
    "high": 8,
    "medium": 20,
    "low": 14
  },
  "loans": [
    {
      "rank": 1,
      "loanNumber": "RWE00000XXXX",
      "borrower": "John Smith",
      "priorityScore": 95,
      "pipeline": "CD Requested",
      "daysToClose": 2,
      "flags": ["COC", "Lock Expiring"],
      "recommendedAction": "Process COC redisclosure immediately"
    },
    // ... more loans
  ],
  "dailyGoals": {
    "cdToProcess": 5,
    "feesToReconcile": 3,
    "closingsToday": 2
  }
}`,
                integration: `INTEGRATION POINTS:
1. Byte Pipeline APIs
   - Real-time data from all 4 pipelines
   - Unified data model
   - Incremental refresh (every 5 min)

2. ML Model Service
   - Python/TensorFlow for scoring model
   - Train on historical loan outcomes
   - Retrain monthly

3. Dashboard UI
   - React/Vue single-page app
   - Drag-and-drop priority override
   - One-click actions (open loan, send email)

4. Analytics & Reporting
   - Track efficiency metrics
   - Compare AI recommendations vs closer actions
   - Measure time-to-close improvements

DEPLOYMENT:
- Embedded in Byte as iframe
- Or: Standalone web app with Byte API
- Mobile-responsive for on-the-go access`
            }
        };

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                // Remove any existing highlights
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                // Scroll to the agent card
                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                // Add highlight animation
                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                // Remove highlight after animation
                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Show agent prompt modal
        let currentPromptContent = '';

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            // Set modal title
            document.getElementById('promptModalTitle').textContent = `${agent.name} - Build Prompt`;

            // Set tags
            const tagsHtml = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptTags').innerHTML = tagsHtml;

            // Set content sections
            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            // Store for copy function
            currentPromptContent = `# ${agent.name}\n\n## Purpose\n${agent.purpose}\n\n## Build Prompt\n${agent.prompt}\n\n## Integration Points\n${agent.integration}`;

            // Show modal
            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            try {
                await navigator.clipboard.writeText(currentPromptContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        // Close prompt modal on escape or outside click
        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
