<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Byte Funding Assistant Manual - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* MI Comparison Cards */
        .mi-comparison { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .mi-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .mi-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .mi-card-header h4 { font-size: 1.05rem; }
        .mi-card-body { padding: 22px; }
        .mi-card ul { list-style: none; padding: 0; }
        .mi-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .mi-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }
        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .prompt-box { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); border-radius: 10px; padding: 20px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); white-space: pre-wrap; word-wrap: break-word; }
        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        /* Region Codes */
        .region-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin: 18px 0;
        }
        .region-item {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            padding: 12px 16px;
            display: flex;
            gap: 12px;
            align-items: center;
        }
        .region-code {
            background: var(--accent-blue);
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
        }
        .region-name { color: var(--text-secondary); font-size: 0.9rem; }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">Funding Assistant Manual</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Funding Assistant</h2>
            <p>BytePro Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-0" class="nav-item active">
                <span class="nav-number">0</span>
                <span class="nav-label">BytePro Intro</span>
            </a>
            <a href="#section-1" class="nav-item">
                <span class="nav-number">1</span>
                <span class="nav-label">Getting Started</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Home Screen</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Conversation Log</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Stored Documents</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Warehouse Process</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Document Review</span>
            </a>
            <a href="#section-7" class="nav-item">
                <span class="nav-number">7</span>
                <span class="nav-label">UCD Process</span>
            </a>
            <a href="#section-8" class="nav-item">
                <span class="nav-number">8</span>
                <span class="nav-label">Resubmission</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Byte Funding Assistant Manual</h1>
                <p class="subtitle">Complete Workflow Guide for Funders in BytePro Enterprise</p>
                <div class="meta">
                    <span class="meta-item">System: BytePro Enterprise</span>
                    <span class="meta-item">Role: Funder / Funding Assistant</span>
                    <span class="meta-item">Updated: April 3, 2024</span>
                    <span class="meta-item">Contact: training@cmgfi.com</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 0: BytePro Introduction -->
            <section id="section-0" class="section">
                <div class="section-header">
                    <div class="section-number">0</div>
                    <div class="section-title"><h2>BytePro Introduction</h2><span>Overview of CMG's processing system</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>What is BytePro?</h4>
                        <p>BytePro is CMG's processing system utilized by Sales, Disclosure Coordinators, Underwriters, Processors, Closers, and Funders.</p>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 22px 0 15px;">Key Features</h3>
                    <div class="summary-grid">
                        <div class="summary-card">
                            <h4>Multi-Loan View</h4>
                            <div class="value">10</div>
                            <div class="label">Loans viewable at once</div>
                        </div>
                        <div class="summary-card">
                            <h4>Document Storage</h4>
                            <div class="value">Direct</div>
                            <div class="label">Store in loan file</div>
                        </div>
                        <div class="summary-card">
                            <h4>Overview Pane</h4>
                            <div class="value">Visible</div>
                            <div class="label">Always accessible</div>
                        </div>
                        <div class="summary-card">
                            <h4>Menus</h4>
                            <div class="value">Custom</div>
                            <div class="label">Expandable categories</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>Pro Tip: Mouse-Over Feature</h4>
                        <p>Icons display tooltips when the mouse hovers over them - use this to quickly identify functions!</p>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 22px 0 15px;">Retail File Designations</h3>
                    <div class="region-grid">
                        <div class="region-item"><span class="region-code">RWE</span><span class="region-name">Western</span></div>
                        <div class="region-item"><span class="region-code">RCE</span><span class="region-name">Central</span></div>
                        <div class="region-item"><span class="region-code">REA</span><span class="region-name">Eastern</span></div>
                        <div class="region-item"><span class="region-code">RNE</span><span class="region-name">Northeast</span></div>
                        <div class="region-item"><span class="region-code">RMA</span><span class="region-name">Mid-Atlantic</span></div>
                        <div class="region-item"><span class="region-code">RSR</span><span class="region-name">San Ramon</span></div>
                        <div class="region-item"><span class="region-code">RSP</span><span class="region-name">Southeast Peninsula</span></div>
                        <div class="region-item"><span class="region-code">RSC</span><span class="region-name">SouthCoast</span></div>
                        <div class="region-item"><span class="region-code">RNM</span><span class="region-name">Northeast Midwest</span></div>
                        <div class="region-item"><span class="region-code">RTS</span><span class="region-name">Tri-State</span></div>
                        <div class="region-item"><span class="region-code">RWL</span><span class="region-name">Westlake</span></div>
                        <div class="region-item"><span class="region-code">RSW</span><span class="region-name">Southwest</span></div>
                        <div class="region-item"><span class="region-code">RNT</span><span class="region-name">Northwest</span></div>
                    </div>
                </div>
            </section>

            <!-- Section 1: Getting Started -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Getting Started</h2><span>Login and setup favorites</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Login Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click BytePro Icon</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter Credentials</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Change Password</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Pipeline View</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Format</th><th>Example</th><th>Notes</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">User Name</strong></td><td>FirstnameLastname</td><td>JaneDoe</td><td>No spaces, case sensitive</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Default Password</strong></td><td>Lowercase</td><td>Cmg12345</td><td>Must change on first login</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Connection</strong></td><td>Dropdown</td><td>Production</td><td>Select Production environment</td></tr>
                        </tbody>
                    </table>

                    <div class="decision-tree">
                        <h3>Setting Up Favorites</h3>
                        <div class="tree-node level-1"><span class="tree-label">Step 1</span> Open a loan file</div>
                        <div class="tree-node"><span class="tree-label">Step 2</span> Click down-facing triangle on menu bar</div>
                        <div class="tree-node"><span class="tree-label">Step 3</span> Click "Customize Toolbar"</div>
                        <div class="tree-node"><span class="tree-label">Step 4</span> Check boxes for Main Toolbar and/or Overview Toolbar</div>
                        <div class="tree-node"><span class="tree-label">Step 5</span> Use blue arrows to reorder priority</div>
                    </div>

                    <div class="tip-box">
                        <h4>Pro Tip: Password Change</h4>
                        <p>To change password after initial login: <strong>Tools > Change Login Password</strong></p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Home Screen -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Home Screen & Overview</h2><span>Navigate the Byte interface</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>Byte Screen Layout</h4>
                        <p>Byte is broken into three main sections: <strong>Screen Menu</strong>, <strong>Main Window</strong>, and <strong>Overview Panel</strong>. The Divider Bar between sections is moveable.</p>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 22px 0 15px;">Information to Review</h3>
                    <div class="summary-grid">
                        <div class="summary-card">
                            <h4>Lock Expiration</h4>
                            <div class="label">Critical date tracking</div>
                        </div>
                        <div class="summary-card">
                            <h4>Loan Program</h4>
                            <div class="label">Product type</div>
                        </div>
                        <div class="summary-card">
                            <h4>Loan Amount</h4>
                            <div class="label">Total financing</div>
                        </div>
                        <div class="summary-card">
                            <h4>Price/Value</h4>
                            <div class="label">Property valuation</div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Warning Signs</h4>
                        <p>Review the top boxes for warning signs (red X or yellow exclamation). These warnings indicate that a specific item needs attention from a CMG employee.</p>
                    </div>

                    <div class="tip-box">
                        <h4>Quick Info Feature</h4>
                        <p>To view loan information without opening the file: <strong>Right-click on loan > Quick Info</strong>. This provides easy access to status, alerts, processing log, conversations, parties, field notes, and loan information.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Conversation Log -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Conversation Log</h2><span>Document communications and notes</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Adding Notes Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node action">Click Conversation Log</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click New Item</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Append Notes</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Type Note</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Click OK</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>When to Use Conversation Log</h4>
                        <p>Refer to this screen first to review notes for the loan or if information is missing or questions arise.</p>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 22px 0 15px;">Funder Notes to Add</h3>
                    <table class="field-table">
                        <thead><tr><th>Note Type</th><th>Purpose</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Wire Confirmation Email</strong></td><td>Document wire transfer confirmation</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Pre-Funding Email</strong></td><td>Track pre-funding communications</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Loan Disbursement</strong></td><td>Record disbursement details</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>External Sharing</h4>
                        <p>To share notes externally with the Portal, flag the note with <strong>Purple flag</strong>.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Stored Documents -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Stored Documents & Audit Log</h2><span>Manage loan file documents</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>Stored Documents Screen</h4>
                        <p>Contains all file documents, disclosures, etc. Access via <strong>General menu</strong>, <strong>All Screens menu</strong>, or the <strong>Filing Cabinet icon</strong>.</p>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 22px 0 15px;">Document Management Features</h3>
                    <div class="mi-comparison">
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Document Operations</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">></span> Search for Documents</li>
                                    <li><span class="check-icon">></span> Upload & Assign Categories</li>
                                    <li><span class="check-icon">></span> Preview within Stored Documents</li>
                                    <li><span class="check-icon">></span> View in Pop-Up Window</li>
                                    <li><span class="check-icon">></span> Create Annotations</li>
                                </ul>
                            </div>
                        </div>
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Document Statuses</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">></span> Approved Noted</li>
                                    <li><span class="check-icon">></span> Inactive Status</li>
                                    <li><span class="check-icon">></span> Duplicate Status</li>
                                    <li><span class="check-icon">></span> Incomplete Status</li>
                                    <li><span class="check-icon">></span> Print / Split / Merge</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="decision-tree">
                        <h3>Audit Log Access</h3>
                        <div class="tree-node level-1"><span class="tree-label">Navigate</span> All Screens > Audit > Get Audit Log</div>
                        <div class="tree-node"><span class="tree-label">Purpose</span> View who has made changes to the loan</div>
                        <div class="tree-node"><span class="tree-label">Feature</span> Sort by any column headers</div>
                    </div>
                </div>
            </section>

            <!-- Section 5: Warehouse Process -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Warehouse Process</h2><span>Prepare and send warehouse documents</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Warehouse Document Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node start">Receive Report</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Select Warehouse Bank</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Review Stacking Order</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Gather Documents</div>
                        </div>
                        <div class="flow-row" style="margin-top: 20px;">
                            <div class="flow-node action">Export as PDF</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Name File</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Email to Warehouse</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Complete</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Stacking Order Selection</h4>
                        <p>Choose the requested bank from the <strong>Stack Order/Bundle</strong> drop-down. Refer to the <strong>Funding List email</strong> to determine the warehouse bank associated with the loan.</p>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 22px 0 15px;">Export Process</h3>
                    <table class="field-table">
                        <thead><tr><th>Step</th><th>Action</th><th>Details</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">1</strong></td><td>Select Documents</td><td>Hold Shift and select all required documents</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">2</strong></td><td>Export</td><td>Click Export > Export as PDF</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">3</strong></td><td>PDF Options</td><td>Check "Save all documents to a single PDF file"</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">4</strong></td><td>Name File</td><td>Format: lastnameloannumber-warehousebank (e.g., smith4567-NP)</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">5</strong></td><td>Email</td><td>Send to warehouses@cmgfi.com, CC Funder</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Merging PDFs</h4>
                        <p>To combine PDF documents: Hold <strong>Shift</strong> to highlight documents > Right-click > <strong>Combine supported files in Acrobat</strong></p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Document Review -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Document Review Checklist</h2><span>Verify warehouse documents</span></div>
                </div>
                <div class="section-content">
                    <h3 style="color: var(--accent-blue); margin: 0 0 15px;">Wire Instructions</h3>
                    <div class="info-box">
                        <h4>Verification Required</h4>
                        <p>Confirm <strong>account name</strong>, <strong>account number</strong>, and <strong>ABA</strong> match the Title and Escrow screen in Byte.</p>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 22px 0 15px;">Closing Protection Letter (CPL)</h3>
                    <table class="field-table">
                        <thead><tr><th>Item</th><th>Requirement</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Mortgagee Clause</strong></td><td>CMG Mortgage, Inc., ISAOA ATIMA<br>3160 Crow Canyon Road, Suite #400<br>San Ramon, CA 94583</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Names</strong></td><td>Must match names on the loan</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Address</strong></td><td>Must match Byte</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Closing Agent</strong></td><td>Must match Title and Escrow</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">CPL Date</strong></td><td>Within 30 days (same escrow/title) or 14 days (different)</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Loan Number</strong></td><td>Must match</td></tr>
                        </tbody>
                    </table>

                    <h3 style="color: var(--accent-blue); margin: 22px 0 15px;">AUS Findings</h3>
                    <div class="info-box">
                        <h4>Verification Points</h4>
                        <p>Confirm information in <strong>Summary</strong>, <strong>Mortgage Information</strong>, and <strong>Property Information</strong> sections match the Overview Panel of Byte.</p>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 22px 0 15px;">Additional Documents</h3>
                    <div class="mi-comparison">
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Final 1003 Loan Application</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">></span> Interest rate matches Byte</li>
                                    <li><span class="check-icon">></span> All co-borrower applications included</li>
                                    <li><span class="check-icon">></span> Marked "Approved" in Stored Documents</li>
                                </ul>
                            </div>
                        </div>
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Credit Report & Appraisal</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">></span> CreditPlus header, dated within 120 days</li>
                                    <li><span class="check-icon">></span> E&O expiration on/after funding</li>
                                    <li><span class="check-icon">></span> "As is" box checked in Reconciliation</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Appraisal Subject To Repairs</h4>
                        <p>If marked "subject to the following repairs or alteration," confirm a <strong>final inspection</strong> is in Stored Documents.</p>
                    </div>
                </div>
            </section>

            <!-- Section 7: UCD Process -->
            <section id="section-7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <div class="section-title"><h2>Uniform Closing Dataset (UCD)</h2><span>GSE compliance process for Fannie/Freddie</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>What is UCD?</h4>
                        <p>The Uniform Closing Dataset is a regulatory process by the Federal Housing Finance Agency to house Closing Disclosure data. <strong>Applies to Conventional First Mortgage Loans through Fannie Mae and Freddie Mac only.</strong></p>
                    </div>

                    <div class="exception-box">
                        <h4>Not Applicable</h4>
                        <p>Second Mortgages, AIOs, and Non-Agency Loans are NOT currently applicable for UCD.</p>
                    </div>

                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">UCD Upload Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node start">Loan Funded</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Separate Buyer/Seller CD</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Print to Loan File</div>
                        </div>
                        <div class="flow-row" style="margin-top: 20px;">
                            <div class="flow-node action">Open UCD Screen</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Select Delivery Destination</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Select Documents</div>
                        </div>
                        <div class="flow-row" style="margin-top: 20px;">
                            <div class="flow-node action">Set Signature Types</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Create File</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">ISGN Submission</div>
                        </div>
                    </div>

                    <h3 style="color: var(--accent-blue); margin: 22px 0 15px;">CD Signature Types</h3>
                    <table class="field-table">
                        <thead><tr><th>Type</th><th>Definition</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">No Signature Line</strong></td><td>No area on document for Borrower or Seller to sign</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Wet</strong></td><td>Borrower/Seller wrote a live ink signature on the document</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Digital</strong></td><td>Signature through E-signing (document shows e-sign note)</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Image</strong></td><td>Picture of the Borrower or Seller signature</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Text</strong></td><td>Typed representation of signature</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Other</strong></td><td>Other signature method</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Single PDF Requirement</h4>
                        <p>Byte only allows one document to be selected for upload. All pages of the Final Closing Disclosure <strong>must be in one PDF</strong>. Use merge function if needed.</p>
                    </div>
                </div>
            </section>

            <!-- Section 8: Resubmission -->
            <section id="section-8" class="section">
                <div class="section-header">
                    <div class="section-number">8</div>
                    <div class="section-title"><h2>UCD Resubmission Process</h2><span>Handle post-funding CD changes</span></div>
                </div>
                <div class="section-content">
                    <div class="exception-box">
                        <h4>When Resubmission is Required</h4>
                        <p>If there are any changes requested that impact the Final Closing Disclosure <strong>post funding</strong>, the Funder is responsible to upload an updated Final CD and remove the UCD Submission date.</p>
                    </div>

                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Resubmission Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node exception">Error Notification</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Remove UCD Submission Date</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Remove Casefile ID</div>
                        </div>
                        <div class="flow-row" style="margin-top: 20px;">
                            <div class="flow-node action">Upload Updated CD</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Reselect Documents</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Create New File</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Resubmit</div>
                        </div>
                    </div>

                    <div class="decision-tree">
                        <h3>Resubmission Steps</h3>
                        <div class="tree-node level-1"><span class="tree-label">Step 1</span> Remove date in UCD Submission Date field (Fannie/Freddie)</div>
                        <div class="tree-node"><span class="tree-label">Step 2</span> Remove Fannie UCD Casefile ID or Freddie UCD Batch ID</div>
                        <div class="tree-node"><span class="tree-label">Step 3</span> Upload updated Borrower and/or Seller CD documents</div>
                        <div class="tree-node"><span class="tree-label">Step 4</span> Follow standard UCD process to create new file</div>
                    </div>

                    <div class="info-box">
                        <h4>Timeline</h4>
                        <p>The Funder will be contacted by leadership if they need to correct a specific error. <strong>Resubmission should be completed as soon as possible.</strong></p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
BYTE LOGIN:
  User: FirstnameLastname (no spaces)
  Default Password: Cmg12345
  Change Password: Tools > Change Login Password

NAVIGATION:
  Quick Info: Right-click loan > Quick Info
  Stored Documents: Filing Cabinet icon
  Conversation Log: All Screens > Conversation Log

WAREHOUSE PROCESS:
  1. Select Stack Order/Bundle (per Funding List email)
  2. Review Warehouse Required Documents PDF
  3. Export as single PDF: lastname-loannumber-bank
  4. Email: warehouses@cmgfi.com (CC Funder)

DOCUMENT REVIEW CHECKLIST:
  [ ] Wire Instructions - ABA, Account match Title/Escrow
  [ ] CPL - Mortgagee clause, names, dates correct
  [ ] AUS Findings - Match Byte Overview Panel
  [ ] Final 1003 - Interest rate matches, all borrowers
  [ ] Credit Report - CreditPlus, within 120 days
  [ ] Appraisal - "As is" checked, final inspection if needed
  [ ] E&O - Expiration on/after funding

UCD PROCESS (Agency Conventional Only):
  1. Fund loan > Open UCD Screen
  2. Set Delivery Destination (Fannie/Freddie)
  3. Split CD? = Yes (Purchase) / No (Refinance)
  4. Select Borrower & Seller CDs (single PDFs)
  5. Set CD Signature Types
  6. Click Create File
  7. Set UCDXML Ready for Upload date

SIGNATURE TYPES:
  No Signature Line | Wet | Digital | Image | Text | Other

CONTACTS:
  Training: training@cmgfi.com
  Warehouse: warehouses@cmgfi.com
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for Funding Assistant Workflow</p>
                <div class="meta">
                    <span class="meta-item">9 Process Steps Analyzed</span>
                    <span class="meta-item">6 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 45% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">6</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2</div>
                    <div class="agent-summary-label">Critical Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">45%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">90%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-docverify')" title="Click to view agent details">
                        <div class="heat-score">96</div>
                        <div class="heat-name">Document Verification</div>
                        <div class="heat-desc">Auto-verify CPL, Wire, AUS against Byte</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Critical</span></div>
                            <div class="heat-metric">Step: <span>6</span></div>
                        </div>
                    </div>
                    <div class="heat-item critical" onclick="scrollToAgent('agent-ucd')" title="Click to view agent details">
                        <div class="heat-score">92</div>
                        <div class="heat-name">UCD Auto-Processor</div>
                        <div class="heat-desc">Automate CD upload and signature typing</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Critical</span></div>
                            <div class="heat-metric">Step: <span>7</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-warehouse')" title="Click to view agent details">
                        <div class="heat-score">85</div>
                        <div class="heat-name">Warehouse Bundle Builder</div>
                        <div class="heat-desc">Auto-compile and email warehouse packages</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>5</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-status')" title="Click to view agent details">
                        <div class="heat-score">78</div>
                        <div class="heat-name">Status Alert Monitor</div>
                        <div class="heat-desc">Track loan status and alert on issues</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>2</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-convo')" title="Click to view agent details">
                        <div class="heat-score">65</div>
                        <div class="heat-name">Conversation Log Assistant</div>
                        <div class="heat-desc">Auto-generate standard funding notes</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>3</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-resubmit')" title="Click to view agent details">
                        <div class="heat-score">58</div>
                        <div class="heat-name">UCD Resubmission Helper</div>
                        <div class="heat-desc">Guide through resubmission workflow</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>8</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: Document Verification -->
                <div class="agent-card" id="agent-docverify">
                    <div class="agent-card-header">
                        <div class="agent-icon"></div>
                        <div class="agent-info">
                            <div class="agent-name">Document Verification Agent</div>
                            <div class="agent-type">Validation Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically extracts and verifies CPL, Wire Instructions, and AUS Findings against Byte data. Flags mismatches and generates exception reports for funder review.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Extract PDF Data</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Query Byte API</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Compare Fields</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Flag Exceptions</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">8min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">99%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('docverify')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: UCD Auto-Processor -->
                <div class="agent-card" id="agent-ucd">
                    <div class="agent-card-header">
                        <div class="agent-icon"></div>
                        <div class="agent-info">
                            <div class="agent-name">UCD Auto-Processor</div>
                            <div class="agent-type">Process Automation Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automates the UCD process by detecting funded loans, separating CDs, identifying signature types, and preparing files for ISGN submission with minimal funder intervention.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Detect Funded</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Split CDs</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Detect Sig Type</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Create File</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">10min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">95%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('ucd')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: Warehouse Bundle Builder -->
                <div class="agent-card" id="agent-warehouse">
                    <div class="agent-card-header">
                        <div class="agent-icon"></div>
                        <div class="agent-info">
                            <div class="agent-name">Warehouse Bundle Builder</div>
                            <div class="agent-type">Document Assembly Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically identifies required warehouse documents based on bank, compiles into properly named PDF bundle, and drafts email to warehouse team with appropriate CC recipients.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Read Bank Req</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Match Docs</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Build PDF</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Draft Email</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">5min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Consistency</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('warehouse')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 4: Status Alert Monitor -->
                <div class="agent-card" id="agent-status">
                    <div class="agent-card-header">
                        <div class="agent-icon"></div>
                        <div class="agent-info">
                            <div class="agent-name">Status Alert Monitor</div>
                            <div class="agent-type">Monitoring Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Monitors loan pipeline for warning indicators, lock expirations, and status changes. Proactively alerts funders of items requiring attention before they become critical.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Scan Pipeline</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Check Warnings</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Priority Sort</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Alert Funder</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">24/7</div><div class="agent-stat-label">Monitoring</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">-50%</div><div class="agent-stat-label">Missed Items</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('status')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 5: Conversation Log Assistant -->
                <div class="agent-card" id="agent-convo">
                    <div class="agent-card-header">
                        <div class="agent-icon"></div>
                        <div class="agent-info">
                            <div class="agent-name">Conversation Log Assistant</div>
                            <div class="agent-type">Content Generation Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Auto-generates standardized conversation log entries for common funding events like wire confirmations, pre-funding emails, and disbursements using templates and loan data.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Trigger Event</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Select Template</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Merge Data</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Add Note</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">2min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Consistent</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('convo')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 6: UCD Resubmission Helper -->
                <div class="agent-card" id="agent-resubmit">
                    <div class="agent-card-header">
                        <div class="agent-icon"></div>
                        <div class="agent-info">
                            <div class="agent-name">UCD Resubmission Helper</div>
                            <div class="agent-type">Guided Workflow Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Guides funders through UCD resubmission process when errors are flagged, automatically clearing old submission data and staging updated documents for re-creation.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Error Alert</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Clear Fields</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Stage Docs</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Guide User</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">3min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">0</div><div class="agent-stat-label">Errors</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('resubmit')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Funding Assistant Manual - Workflow Markdown</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Byte Funding Assistant Manual - Quick Reference

## Login
- User: FirstnameLastname (no spaces)
- Default Password: Cmg12345
- Change: Tools > Change Login Password

## Navigation
- Quick Info: Right-click loan > Quick Info
- Stored Documents: Filing Cabinet icon
- Conversation Log: All Screens > Conversation Log

## Warehouse Process
1. Select Stack Order/Bundle (per Funding List email)
2. Review Warehouse Required Documents PDF
3. Export as single PDF: lastname-loannumber-bank
4. Email: warehouses@cmgfi.com (CC Funder)

## Document Review Checklist
- [ ] Wire Instructions - ABA, Account match Title/Escrow
- [ ] CPL - Mortgagee clause, names, dates correct
- [ ] AUS Findings - Match Byte Overview Panel
- [ ] Final 1003 - Interest rate matches, all borrowers
- [ ] Credit Report - CreditPlus, within 120 days
- [ ] Appraisal - "As is" checked, final inspection if needed
- [ ] E&O - Expiration on/after funding

## UCD Process (Agency Conventional Only)
1. Fund loan > Open UCD Screen
2. Set Delivery Destination (Fannie/Freddie)
3. Split CD? = Yes (Purchase) / No (Refinance)
4. Select Borrower & Seller CDs (single PDFs)
5. Set CD Signature Types
6. Click Create File
7. Set UCDXML Ready for Upload date

## CD Signature Types
- No Signature Line
- Wet (live ink)
- Digital (e-sign)
- Image
- Text
- Other

## Contacts
- Training: training@cmgfi.com
- Warehouse: warehouses@cmgfi.com</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav clicks
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                navItems.forEach(n => n.classList.remove('active'));
                this.classList.add('active');

                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Agent scroll with highlight
        function scrollToAgent(agentId) {
            const agent = document.getElementById(agentId);
            if (agent) {
                agent.scrollIntoView({ behavior: 'smooth', block: 'center' });
                agent.classList.add('highlight');
                setTimeout(() => agent.classList.remove('highlight'), 2000);
            }
        }

        // Modal functions
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeDocModal();
                closePromptModal();
            }
        });

        document.getElementById('docModal').addEventListener('click', (e) => {
            if (e.target.id === 'docModal') closeDocModal();
        });

        // Agent Prompt System
        const agentPrompts = {
            docverify: {
                name: 'Document Verification Agent',
                tags: ['Validation', 'OCR', 'Critical Priority', 'BytePro Integration'],
                purpose: 'Automatically extracts data from CPL, Wire Instructions, and AUS Findings PDFs using OCR, then validates against Byte loan data to identify mismatches before warehouse submission.',
                prompt: `You are building a Document Verification Agent for CMG Financial's Byte Funding workflow.

AGENT NAME: Document Verification Agent
TYPE: Validation / OCR Processing

OBJECTIVE:
Create an agent that automatically verifies warehouse documents against Byte loan data, flagging discrepancies for funder review.

DOCUMENTS TO VERIFY:
1. Closing Protection Letter (CPL)
   - Mortgagee Clause: CMG Mortgage, Inc., ISAOA ATIMA
   - Address: 3160 Crow Canyon Road, Suite #400, San Ramon, CA 94583
   - Names match loan parties
   - Date within 30/14 days of closing

2. Wire Instructions
   - Account Name matches Title/Escrow screen
   - Account Number matches Title/Escrow screen
   - ABA Routing matches Title/Escrow screen

3. AUS Findings
   - Summary section matches Byte Overview
   - Mortgage Information matches Byte
   - Property Information matches Byte

VALIDATION RULES:
- Exact match required for financial data
- Fuzzy match (95%+) acceptable for names
- Date validations per CPL rules
- Flag all mismatches with severity level

OUTPUT FORMAT:
{
  "verified": true/false,
  "documents": [
    { "type": "CPL", "status": "PASS/FAIL", "issues": [...] }
  ],
  "summary": "X of Y documents verified"
}`,
                integration: `INTEGRATION POINTS:
1. BytePro API - Read loan data, Title/Escrow screen
2. Stored Documents - Access uploaded PDFs
3. OCR Service - Extract text from documents
4. Alert System - Notify funder of issues`
            },
            ucd: {
                name: 'UCD Auto-Processor',
                tags: ['Process Automation', 'GSE Compliance', 'Critical Priority'],
                purpose: 'Automates the Uniform Closing Dataset process for Agency Conventional loans, from detecting funded status through file creation for ISGN submission.',
                prompt: `You are building a UCD Auto-Processor Agent for CMG Financial's Byte system.

AGENT NAME: UCD Auto-Processor
TYPE: Process Automation / Compliance

OBJECTIVE:
Automate the UCD process for Conventional First Mortgage Loans (Fannie/Freddie only).

PROCESS STEPS:
1. Detect when loan status changes to "Funded"
2. Verify loan is Agency Conventional (skip if Non-Agency, AIO, 2nd Mortgage)
3. Locate Buyer and Seller Closing Disclosures in Stored Documents
4. Verify each CD is a single merged PDF
5. Analyze signature pages to determine Signature Type
6. Populate UCD screen fields
7. Set Delivery Destination (Fannie or Freddie)
8. Create UCD file
9. Set UCDXML Ready for Upload date

SIGNATURE TYPE DETECTION:
- Wet: Ink stroke patterns detected
- Digital: E-sign provider metadata present
- Image: Embedded image signature
- Text: Typed name in signature field
- No Signature Line: No signature area found

ERROR HANDLING:
- If CD not single PDF: Attempt auto-merge or flag for manual
- If signature type unclear: Flag for funder confirmation
- If UCD errors on create: Display error message`,
                integration: `INTEGRATION POINTS:
1. BytePro Status Screen - Monitor for Funded status
2. Stored Documents - Locate and validate CDs
3. UCD Screen API - Populate fields, create file
4. ISGN Integration - Prepare for submission`
            },
            warehouse: {
                name: 'Warehouse Bundle Builder',
                tags: ['Document Assembly', 'Automation', 'High Priority'],
                purpose: 'Automatically compiles warehouse document packages based on bank requirements, creates properly formatted PDFs, and drafts submission emails.',
                prompt: `You are building a Warehouse Bundle Builder Agent for CMG Financial.

AGENT NAME: Warehouse Bundle Builder
TYPE: Document Assembly / Email Automation

OBJECTIVE:
Automate warehouse document package creation and email drafting.

PROCESS:
1. Read Funding List email to identify warehouse bank
2. Load bank-specific document requirements
3. Match required documents to Stored Documents
4. Flag any missing documents
5. Export selected documents as single PDF
6. Name file: lastnameloannumber-bankcode
7. Draft email to warehouses@cmgfi.com
8. CC assigned Funder
9. Attach PDF bundle

WAREHOUSE BANKS & REQUIREMENTS:
- ArcLight/Merchants: Wire Instructions, CPL, DU/LP/GUS Findings, Final 1003, etc.
- Ameris Bank: Wire Instructions, DU/LP/GUS Findings
- Bank United: No docs required
- NexBank: Wire Instructions, CPL, DU/LP/GUS Findings, Final 1003, Appraisal
- NorthPointe Conforming: 1008, DU/LP/GUS Findings, MI Cert, Credit Report, etc.
- NorthPointe Non-Conforming: 1008, CMG Loan Approval, MI Cert, Credit Report, etc.

FILE NAMING: {lastName}{loanNumber}-{bankCode}
Example: Smith4567-NP`,
                integration: `INTEGRATION POINTS:
1. Funding List Email Parser
2. Warehouse Requirements Database
3. Stored Documents API
4. PDF Merge Service
5. Email Draft System (Outlook)`
            },
            status: {
                name: 'Status Alert Monitor',
                tags: ['Monitoring', 'Alerts', 'High Priority'],
                purpose: 'Continuously monitors the funding pipeline for warning indicators, expiring locks, and status issues, proactively alerting funders before problems become critical.',
                prompt: `You are building a Status Alert Monitor Agent for CMG Financial's Byte system.

AGENT NAME: Status Alert Monitor
TYPE: Monitoring / Alert System

OBJECTIVE:
Proactively monitor loan pipeline and alert funders of items requiring attention.

MONITORING TRIGGERS:
1. Warning Icons (Red X, Yellow Exclamation) on loan
2. Lock Expiration approaching (3 days, 1 day, expired)
3. Status stuck in same state > 24 hours
4. Missing required documents for current status
5. Retail Closer screen needs attention flags

ALERT PRIORITIES:
- CRITICAL: Lock expires today, blocking issues
- HIGH: Lock expires in 1-3 days, warning icons
- MEDIUM: Status unchanged > 24 hours
- LOW: Informational updates

OUTPUT FORMAT:
Daily digest email + real-time critical alerts
{
  "critical": [...],
  "high": [...],
  "actionRequired": X loans,
  "clearToFund": Y loans
}`,
                integration: `INTEGRATION POINTS:
1. BytePro Pipeline API
2. Status Screen Data
3. Lock Desk Integration
4. Email/Slack Alert System
5. Dashboard Widget`
            },
            convo: {
                name: 'Conversation Log Assistant',
                tags: ['Content Generation', 'Templates', 'Medium Priority'],
                purpose: 'Automatically generates standardized conversation log entries for common funding events using templates merged with loan data.',
                prompt: `You are building a Conversation Log Assistant for CMG Financial's Byte system.

AGENT NAME: Conversation Log Assistant
TYPE: Content Generation / Templating

OBJECTIVE:
Auto-generate consistent conversation log notes for standard funding events.

TEMPLATES:
1. Wire Confirmation
   "Wire confirmed sent to {TitleCompany} on {Date} at {Time}. Amount: {WireAmount}. Reference: {RefNumber}"

2. Pre-Funding Email
   "Pre-funding package sent to {Recipient} on {Date}. Included: {DocumentList}"

3. Loan Disbursement
   "Loan disbursed on {FundingDate}. Net wire: {Amount}. Warehouse: {WarehouseBank}"

4. Document Request
   "Requested {DocumentType} from {Party}. Due by {DueDate}."

TRIGGER EVENTS:
- Wire sent (auto-detect from wire system)
- Email sent with specific subject lines
- Status change to specific values
- Manual trigger by funder`,
                integration: `INTEGRATION POINTS:
1. BytePro Conversation Log API
2. Wire System Integration
3. Email Tracking (sent items)
4. Template Database
5. Loan Data Merge`
            },
            resubmit: {
                name: 'UCD Resubmission Helper',
                tags: ['Guided Workflow', 'Error Recovery', 'Medium Priority'],
                purpose: 'Guides funders through the UCD resubmission process when errors occur, automating field clearing and document staging.',
                prompt: `You are building a UCD Resubmission Helper Agent for CMG Financial.

AGENT NAME: UCD Resubmission Helper
TYPE: Guided Workflow / Error Recovery

OBJECTIVE:
Streamline UCD resubmission when post-funding CD changes are required.

TRIGGER:
Leadership notification of UCD error requiring resubmission

AUTOMATED STEPS:
1. Clear UCD Submission Date (Fannie/Freddie)
2. Clear Fannie UCD Casefile ID or Freddie UCD Batch ID
3. Identify which CD needs updating (Borrower/Seller/Both)
4. Stage updated CD documents
5. Guide funder through re-selection
6. Validate before new file creation

USER GUIDANCE:
- Step-by-step checklist overlay
- Highlight fields to update
- Confirm actions before executing
- Provide rollback option

ERROR PREVENTION:
- Verify new CD is different from old
- Ensure single PDF format
- Validate signature type selection`,
                integration: `INTEGRATION POINTS:
1. UCD Screen API
2. Stored Documents
3. Error Notification System
4. Guided UI Overlay
5. Audit Trail Logging`
            }
        };

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = agent.name + ' - Build Prompt';
            document.getElementById('promptTags').innerHTML = agent.tags.map(t => `<span class="prompt-tag">${t}</span>`).join('');
            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            const content = document.getElementById('promptContent').textContent;
            try {
                await navigator.clipboard.writeText(content);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });
    </script>
</body>
</html>
