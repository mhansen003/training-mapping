<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ValueLink Appraisal Ordering - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* MI Comparison Cards */
        .mi-comparison { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .mi-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .mi-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .mi-card-header h4 { font-size: 1.05rem; }
        .mi-card-body { padding: 22px; }
        .mi-card ul { list-style: none; padding: 0; }
        .mi-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .mi-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* Prompt Modal */
        .prompt-modal .modal { max-width: 800px; }
        .prompt-modal .modal-header { background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%); }

        .prompt-section { margin-bottom: 25px; }
        .prompt-section h4 { color: var(--accent-purple); font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .prompt-tag { background: rgba(139, 92, 246, 0.15); color: var(--accent-purple); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">ValueLink Appraisal Ordering</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>ValueLink Ordering</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-1" class="nav-item active">
                <span class="nav-number">1</span>
                <span class="nav-label">Add Credentials</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Create Order</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Place Order</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Notifications</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Review Progress</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Changes & Updates</span>
            </a>
            <a href="#section-7" class="nav-item">
                <span class="nav-number">7</span>
                <span class="nav-label">Completed Orders</span>
            </a>
            <a href="#section-8" class="nav-item">
                <span class="nav-number">8</span>
                <span class="nav-label">Reminders</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>ValueLink Appraisal Ordering</h1>
                <p class="subtitle">Complete workflow for ordering appraisals through BytePro integrated with ValueLink</p>
                <div class="meta">
                    <span class="meta-item">System: BytePro + ValueLink</span>
                    <span class="meta-item">Role: Loan Team</span>
                    <span class="meta-item">Updated: Aug 12, 2025</span>
                    <span class="meta-item">Duration: 5-10 min</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 1: Adding ValueLink Credentials -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Adding ValueLink Credentials</h2><span>First-time setup for appraisal ordering</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Log on to BytePro</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open Loan File</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Click Interfaces</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Appraisal</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Select ValueLink Software Enhanced</div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Prerequisites Required</h4>
                        <p>If initial disclosures and Intent to Proceed have <strong>not been received</strong>, BytePro will not let you proceed to the appraisal ordering screen.</p>
                    </div>

                    <div class="info-box">
                        <h4>First-Time Credential Setup</h4>
                        <p>Click <strong>Defaults</strong> in the ValueLink Software Enhanced window and enter your:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>ValueLink Username</li>
                            <li>ValueLink Password</li>
                        </ul>
                        <p style="margin-top: 10px;">Click OK, then close and relaunch ValueLink Software Enhanced. These credentials are only required once.</p>
                    </div>

                    <div class="tip-box">
                        <h4>Need Credentials?</h4>
                        <p>Contact <strong>AppraiserSetup@cmgfi.com</strong> if you did not receive your login credentials. Make sure the Subject Line states "ValueLink Credentials".</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Creating the Order -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Creating the Order</h2><span>Configure appraisal order details</span></div>
                </div>
                <div class="section-content">
                    <div class="exception-box">
                        <h4>Critical: Order Placement Location</h4>
                        <p>ValueLink orders are placed in <strong>Byte ONLY</strong> and not on the ValueLink website. Tracking and pricing is not accurate when placed on the website.</p>
                    </div>

                    <div class="summary-grid">
                        <div class="summary-card"><h4>Order Fields</h4><div class="value">6</div><div class="label">Configuration items</div></div>
                        <div class="summary-card"><h4>Payment Options</h4><div class="value">3</div><div class="label">Collection methods</div></div>
                        <div class="summary-card"><h4>Products</h4><div class="value">25+</div><div class="label">Appraisal types</div></div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Status</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Product</strong></td><td><span class="badge required-badge">Required</span></td><td>Choose per AUS findings, property type and value</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Branch</strong></td><td><span class="badge required-badge">Required</span></td><td>Determines panel of appraisers</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Payment Method</strong></td><td><span class="badge required-badge">Required</span></td><td>How appraisal fee will be collected</td></tr>
                            <tr><td>Additional Items</td><td><span class="badge optional-badge">Optional</span></td><td>Form 1007, Form 216, Rush Fee, Complex Fee, etc.</td></tr>
                            <tr><td>Select Documents</td><td><span class="badge optional-badge">Optional</span></td><td>Purchase contract, floor plans, condo questionnaire</td></tr>
                            <tr><td>Entry Contact Party</td><td><span class="badge optional-badge">Optional</span></td><td>Borrower, agent, or custom contact info</td></tr>
                        </tbody>
                    </table>

                    <div class="decision-tree">
                        <h3>Payment Method Decision</h3>
                        <div class="tree-node level-1"><span class="tree-label">Payment Method Options</span></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-green); color: white;">Pay Before Proceeding</span> -> Appraisal on hold until payment is received</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-amber); color: var(--bg-primary);">Invoice at Closing</span> -> No upfront payment; invoiced at loan closing</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-blue); color: white;">Proceed Without Payment</span> -> Order proceeds without waiting for payment</div>
                    </div>

                    <div class="exception-box">
                        <h4>Fee Responsibility Notice</h4>
                        <p>If using "Invoice at Closing" or "Proceed without Payment" and the appraisal fee is not collected from the borrower, and the loan does not close within <strong>90 days of application</strong>, the unpaid appraisal fees will be charged to the <strong>Loan Officer</strong>.</p>
                        <p style="margin-top: 10px;">*Unless the loan is still considered active (has a projected funding/closing date in sight).</p>
                    </div>

                    <div class="tip-box">
                        <h4>Document Upload Tip</h4>
                        <p>Ensure documents do <strong>not contain special characters</strong> in the filename such as *&lt;?#$" - remove these prior to uploading.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Placing the Order -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Placing the Order</h2><span>Submit and confirm the appraisal order</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Click "Create Order Out"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Enter Due Date</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "New Order"</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node output">Order Confirmation Displays</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action" style="background: linear-gradient(135deg, var(--accent-rose), #dc2626);">SAVE LOAN FILE</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node start">Complete</div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>CRITICAL: Save Loan File</h4>
                        <p>You <strong>MUST SAVE THE LOAN FILE</strong> at this point to ensure the order is sent to ValueLink!</p>
                    </div>

                    <div class="info-box">
                        <h4>Rush Fee Reminder</h4>
                        <p>A due date of only a few days requires a rush fee. Use <strong>Additional Items > Rush Fee</strong> if required.</p>
                    </div>

                    <div class="tip-box">
                        <h4>Confirmation</h4>
                        <p>You will see a confirmation with an order number, and you will receive an email confirmation as well.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Notifications -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Notifications</h2><span>Email alerts throughout the process</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>Notification Source</h4>
                        <p>Notifications come from the CMG appraisal team at <strong>notifications@valuelinkams.com</strong></p>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Notification Type</th><th>Recipients</th><th>Trigger</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Order Created</strong></td><td>All loan team members</td><td>When New Order button is clicked</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Accepted by Vendor</strong></td><td>All loan team members</td><td>When appraiser accepts the order</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Payment Request</strong></td><td>Borrower</td><td>Sent every 24 hours until payment received</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Inspection Scheduled</strong></td><td>All loan team members</td><td>When appraiser schedules inspection</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Inspection Completed</strong></td><td>All loan team members</td><td>Appraisal completed, docs in Byte</td></tr>
                            <tr><td><strong style="color: var(--accent-amber);">Comments</strong></td><td>All loan team members</td><td>Fee changes, due dates, additional docs needed</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Comment Notifications</h4>
                        <p>When a comment is added from the loan team, appraisal desk, or AMC, an email notification is sent. Comments can be for fee changes, due dates, or additional documentation required by the appraiser and <strong>must be reviewed</strong>.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Reviewing Order Progress -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Reviewing Order Progress</h2><span>Track and manage appraisal orders</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Log on to BytePro</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open Loan File</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Interfaces > Appraisal</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">ValueLink Software Enhanced</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Click Order 1 (or 2, 3...)</div>
                        </div>
                    </div>

                    <div class="mi-comparison">
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Order Screen Actions</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">1</span> Check Status of appraisal order</li>
                                    <li><span class="check-icon">2</span> See Fee of the appraisal</li>
                                    <li><span class="check-icon">3</span> Add Comments for appraisal dept</li>
                                    <li><span class="check-icon">4</span> Put on Hold / Take off Hold</li>
                                    <li><span class="check-icon">5</span> Add Documents</li>
                                </ul>
                            </div>
                        </div>
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Multiple Orders</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">*</span> Multiple orders show as Order 1, Order 2, etc.</li>
                                    <li><span class="check-icon">*</span> For additional orders (final inspection, jumbo)</li>
                                    <li><span class="check-icon">*</span> Select product and due date</li>
                                    <li><span class="check-icon">*</span> Click "New Order" and Save file</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4>Submitting Revisions</h4>
                        <p>If revisions to the appraisal are needed, type information in the text box and click <strong>Add Comment</strong>. All revision requests should be submitted this way to ensure they get to the Appraiser.</p>
                    </div>

                    <div class="tip-box">
                        <h4>Viewing Comments</h4>
                        <p>To see the entire comment, expand the comment column and use the bar at the bottom to scroll, or double-click on the message to see the entire message in a pop-up window.</p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Appraisal Changes/Fee Updates -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Appraisal Changes & Fee Updates</h2><span>Managing order modifications</span></div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead><tr><th>Change Type</th><th>Description</th><th>Handled By</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Product Change</strong></td><td>Incorrect product selected (property type, occupancy)</td><td>Appraisal Coordinators</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Contact Information</strong></td><td>Changes to contact person for appraiser</td><td>Appraisal Coordinators</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Payment Method</strong></td><td>Change from Payment Link to Invoice or vice versa</td><td>Appraisal Coordinators</td></tr>
                            <tr><td><strong style="color: var(--accent-amber);">Fee Updates</strong></td><td>Appraiser/AMC proposes different fee or due date</td><td>Loan Team Approval</td></tr>
                        </tbody>
                    </table>

                    <div class="decision-tree">
                        <h3>Fee Change Workflow</h3>
                        <div class="tree-node level-1"><span class="tree-label">Fee Change Notification Received</span></div>
                        <div class="tree-node">STATUS: "Accepted by Vendor with Conditions" or "Order Modification Request"</div>
                        <div class="tree-node">Appraisal Coordinators notify loan team of condition</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-green); color: white;">Approve</span> -> Fee accepted, order continues</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-rose); color: white;">Deny</span> -> Order may be reassigned or cancelled</div>
                    </div>

                    <div class="tip-box">
                        <h4>Best Practice for Fee Changes</h4>
                        <p>You can <strong>Reply All</strong> to fee change notifications, not altering any system email addresses. This sends your response directly to the appraisal order.</p>
                    </div>

                    <div class="exception-box">
                        <h4>COC Auto-Flag</h4>
                        <p>If the Appraisal Fee is greater than the amount Disclosed, the <strong>COC box</strong> in the Appraisal Info screen will automatically be checked to alert the Disclosure Team for redisclosures.</p>
                    </div>

                    <div class="info-box">
                        <h4>Update Fee in Byte</h4>
                        <p>When a fee change is accepted, the Processor is notified. The fee <strong>must be updated in Byte</strong> on the LE or CD to trigger reconciliation and redisclosure.</p>
                    </div>
                </div>
            </section>

            <!-- Section 7: Completed Orders -->
            <section id="section-7" class="section">
                <div class="section-header">
                    <div class="section-number">7</div>
                    <div class="section-title"><h2>Completed Orders</h2><span>Delivery, holds, cancellations, and refunds</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>Automatic Upload on Completion</h4>
                        <p>When an order is marked completed in ValueLink, the system automatically uploads:</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li>Appraisal report and all supporting documents to Stored Documents</li>
                            <li>Appraisal Dates, Borrower Delivery, and Appraiser Information</li>
                            <li>Appraised Value, Effective Date, No of Units, Year Built</li>
                            <li>UCDP/EAD Information and CU/LCA scores</li>
                        </ul>
                    </div>

                    <div class="mi-comparison">
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Appraisal Delivery</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">*</span> Delivered electronically to customer 1 day after completion</li>
                                    <li><span class="check-icon">*</span> Customer receives email with eConsent link</li>
                                    <li><span class="check-icon">*</span> Revised appraisals also auto-delivered</li>
                                    <li><span class="x-icon">!</span> Customers without email need mailed copy</li>
                                </ul>
                            </div>
                        </div>
                        <div class="mi-card">
                            <div class="mi-card-header"><h4>Holds Management</h4></div>
                            <div class="mi-card-body">
                                <ul>
                                    <li><span class="check-icon">*</span> Type reason in text box</li>
                                    <li><span class="check-icon">*</span> Click "Put on Hold" or "Take off Hold"</li>
                                    <li><span class="x-icon">!</span> Max hold duration: 30 days</li>
                                    <li><span class="x-icon">!</span> After 30 days, order will be cancelled</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="decision-tree">
                        <h3>Cancellation & Refund Process</h3>
                        <div class="tree-node level-1"><span class="tree-label">Cancellation Requested</span></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-green); color: white;">Before Inspection</span> -> Credit card refund eligible</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-rose); color: white;">After Inspection</span> -> No refund available</div>
                        <div class="tree-node">Enter cancellation reason and refund request in text box</div>
                        <div class="tree-node">Click "Cancel" button</div>
                        <div class="tree-node">Appraisal Dept processes within 72 hours</div>
                    </div>
                </div>
            </section>

            <!-- Section 8: Helpful Reminders -->
            <section id="section-8" class="section">
                <div class="section-header">
                    <div class="section-number">8</div>
                    <div class="section-title"><h2>Helpful Appraisal Ordering Reminders</h2><span>Best practices and tips</span></div>
                </div>
                <div class="section-content">
                    <table class="field-table">
                        <thead><tr><th>Topic</th><th>Key Points</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Appraiser Selection</strong></td><td>Auto-selected based on property location and your panel. If none available, Appraisal Dept assigns from overall panel.</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Complex Property</strong></td><td>Check if waterfront, excess acreage, multiple outbuildings, rural, or unusual. May need Complex Fee.</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Ratified Sales Contract</strong></td><td>Upload COMPLETE contract with all signatures, pages, and addendums. Note escalation clauses in comments.</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Condos</strong></td><td>Upload condo questionnaire when received for appraiser review.</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Revisions</strong></td><td>If UW references a document (flood cert), upload it when requesting revision.</td></tr>
                            <tr><td><strong style="color: var(--accent-amber);">Hold/Off Hold</strong></td><td>Max 30 days on hold. When removing hold, provide new due date.</td></tr>
                            <tr><td><strong style="color: var(--accent-rose);">ACTION REQUIRED</strong></td><td>Messages starting with "ACTION REQUIRED TODAY" need immediate response.</td></tr>
                        </tbody>
                    </table>

                    <div class="exception-box">
                        <h4>Valid vs Invalid Fee Increases</h4>
                        <p><strong>Valid reasons</strong> (can pass to customer): Rush fee, inspection fee, complex property fee, property characteristics</p>
                        <p style="margin-top: 10px;"><strong>Invalid reasons</strong> (CMG pays tolerance cure): Heavy workloads, distance to property</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
ACCESS: Interfaces > Appraisal > ValueLink Software Enhanced

FIRST TIME SETUP:
  Click Defaults > Enter Username/Password > OK > Close > Relaunch
  Contact: AppraiserSetup@cmgfi.com (Subject: "ValueLink Credentials")

PLACE ORDER (Must have disclosures & ITP received):
  1. Select Product, Branch, Payment Method
  2. Add Additional Items if needed
  3. Upload Documents (no special characters in filename)
  4. Set Contact Party
  5. Click "Create Order Out" > Set Due Date
  6. Click "New Order"
  7. *** SAVE LOAN FILE *** (Critical!)

PAYMENT METHODS:
  * Pay Before Proceeding - Order held until paid
  * Invoice at Closing - No upfront, billed at close
  * Proceed Without Payment - Order starts, payment later
  WARNING: Unpaid fees charged to LO after 90 days!

TRACKING: Interfaces > Appraisal > ValueLink > Click Order Tab

ORDER ACTIONS:
  * Put on Hold (max 30 days)
  * Take off Hold (provide new due date)
  * Add Comment (for revisions)
  * Add Document

NOTIFICATIONS FROM: notifications@valuelinkams.com

FEE CHANGES: Reply All to notification (keeps system emails)
             Update fee in Byte LE/CD for redisclosure

CANCELLATION: Before inspection = refund eligible
              Enter reason > Click Cancel > 72hr processing

REMINDERS:
  * Complex property? Add Complex Fee
  * Purchase? Upload complete ratified contract
  * Condo? Upload questionnaire
  * ACTION REQUIRED = Respond immediately!
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for ValueLink Appraisal Ordering Workflow</p>
                <div class="meta">
                    <span class="meta-item">8 Process Steps Analyzed</span>
                    <span class="meta-item">5 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 45% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">5</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2</div>
                    <div class="agent-summary-label">High Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">45%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">80%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-autofill')" title="Click to view agent details">
                        <div class="heat-score">92</div>
                        <div class="heat-name">Order Auto-Fill Agent</div>
                        <div class="heat-desc">Pre-populate order from loan data</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>2</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-product')" title="Click to view agent details">
                        <div class="heat-score">85</div>
                        <div class="heat-name">Product Selector</div>
                        <div class="heat-desc">Recommend appraisal product from AUS</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>2</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-status')" title="Click to view agent details">
                        <div class="heat-score">78</div>
                        <div class="heat-name">Status Monitor</div>
                        <div class="heat-desc">Track orders and alert on issues</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>5</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-fee')" title="Click to view agent details">
                        <div class="heat-score">65</div>
                        <div class="heat-name">Fee Change Handler</div>
                        <div class="heat-desc">Auto-process fee change requests</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>6</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-doc')" title="Click to view agent details">
                        <div class="heat-score">58</div>
                        <div class="heat-name">Document Assembler</div>
                        <div class="heat-desc">Auto-attach required documents</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>2</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: Order Auto-Fill -->
                <div class="agent-card" id="agent-autofill">
                    <div class="agent-card-header">
                        <div class="agent-icon">A</div>
                        <div class="agent-info">
                            <div class="agent-name">Order Auto-Fill Agent</div>
                            <div class="agent-type">Data Integration Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically pre-populates ValueLink order fields by extracting data from the Byte loan file. Reduces manual entry, eliminates transcription errors, and ensures consistency between loan data and appraisal orders.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Byte Loan Data</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Extract Fields</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Map to VL</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Auto-Fill</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">3min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">95%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('autofill')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: Product Selector -->
                <div class="agent-card" id="agent-product">
                    <div class="agent-card-header">
                        <div class="agent-icon">P</div>
                        <div class="agent-info">
                            <div class="agent-name">Smart Product Selector</div>
                            <div class="agent-type">Decision Support Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Analyzes AUS findings, property type, occupancy, and loan value to recommend the correct appraisal product. Prevents ordering errors and ensures compliance with investor requirements.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">AUS Findings</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Property Analysis</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Match Product</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Recommend</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">2min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">-15%</div><div class="agent-stat-label">Errors</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('product')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: Status Monitor -->
                <div class="agent-card" id="agent-status">
                    <div class="agent-card-header">
                        <div class="agent-icon">S</div>
                        <div class="agent-info">
                            <div class="agent-name">Appraisal Status Monitor</div>
                            <div class="agent-type">Monitoring Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Continuously monitors appraisal order status and sends proactive alerts for delays, pending actions, approaching hold limits (30 days), and required fee approvals.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Poll ValueLink</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Check Status</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Apply Rules</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Alert Team</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">24/7</div><div class="agent-stat-label">Monitoring</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">-20%</div><div class="agent-stat-label">Delays</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('status')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 4: Fee Change Handler -->
                <div class="agent-card" id="agent-fee">
                    <div class="agent-card-header">
                        <div class="agent-icon">F</div>
                        <div class="agent-info">
                            <div class="agent-name">Fee Change Handler</div>
                            <div class="agent-type">Workflow Automation Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Processes fee change requests by validating reasons (valid: rush, complex, inspection vs invalid: distance, workload), updating disclosures, and flagging COC requirements automatically.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Fee Request</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Validate Reason</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Update Byte</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Flag COC</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">5min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Compliant</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('fee')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 5: Document Assembler -->
                <div class="agent-card" id="agent-doc">
                    <div class="agent-card-header">
                        <div class="agent-icon">D</div>
                        <div class="agent-info">
                            <div class="agent-name">Document Assembler</div>
                            <div class="agent-type">Document Processing Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically identifies and attaches required documents to appraisal orders based on transaction type (purchase contract, condo questionnaire, floor plans) while sanitizing filenames.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Scan Stored Docs</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Match Required</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Clean Filenames</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Attach</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">2min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">-90%</div><div class="agent-stat-label">Missing Docs</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('doc')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>ValueLink Ordering - Workflow Markdown</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># ValueLink Appraisal Ordering Workflow

## Overview
BytePro users can send appraisal orders directly from BytePro to ValueLink. The process is seamless, and orders can be placed and tracked from start to finish without leaving BytePro.

## Prerequisites
- Initial disclosures received
- Intent to Proceed received
- ValueLink credentials configured

## Step 1: Add ValueLink Credentials (First Time Only)
1. Log on to BytePro
2. Open the loan file
3. Click Interfaces > Appraisal
4. Select "ValueLink Software Enhanced"
5. Click "Defaults"
6. Enter ValueLink Username and Password
7. Click OK, close, and relaunch

Contact: AppraiserSetup@cmgfi.com (Subject: "ValueLink Credentials")

## Step 2: Create the Order
**IMPORTANT:** Orders must be placed in Byte only, NOT on the ValueLink website.

Required Fields:
- Product (per AUS findings, property type, value)
- Branch (determines appraiser panel)
- Payment Method

Optional Fields:
- Additional Items (Form 1007, Rush Fee, Complex Fee)
- Documents (purchase contract, floor plans, condo Q)
- Entry Contact Party

### Payment Methods:
1. **Send Payment Link - Pay Before Proceeding**: Order held until paid
2. **Invoice at Closing**: No upfront payment
3. **Send Payment Link - Proceed without Payment**: Order continues

WARNING: Unpaid fees charged to LO after 90 days if loan doesn't close!

## Step 3: Place the Order
1. Click "Create Order Out"
2. Enter Due Date (rush fee if only few days)
3. Click "New Order"
4. **SAVE THE LOAN FILE** (Critical!)

## Step 4: Notifications
All from notifications@valuelinkams.com:
- Order Created
- Accepted by Vendor
- Payment Request (to borrower, every 24 hours)
- Inspection Scheduled
- Inspection Completed
- Comments (fee changes, due dates, docs needed)

## Step 5: Review Order Progress
Interfaces > Appraisal > ValueLink Software Enhanced > Order Tab

Actions:
- Check Status and Fee
- Put on Hold / Take off Hold
- Add Comment (for revisions)
- Add Document

## Step 6: Changes & Fee Updates
- Product/Contact/Payment changes: Handled by Appraisal Coordinators
- Fee changes: Loan team must approve
- Reply All to notifications to respond directly
- COC auto-flagged if fee > disclosed amount
- Update fee in Byte LE/CD for redisclosure

## Step 7: Completed Orders
Auto-uploaded to Stored Documents:
- Appraisal report and supporting docs
- Dates, values, UCDP/EAD info, CU/LCA scores

Delivery: Auto-sent to borrower 1 day after completion (if email on file)

Holds: Max 30 days, then auto-cancelled

Cancellations: Before inspection = refund eligible (72hr processing)

## Reminders
- Complex property? Add Complex Fee
- Purchase? Upload complete ratified contract
- Condo? Upload questionnaire
- ACTION REQUIRED = Respond immediately!
- Valid fee increases: rush, complex, inspection, property characteristics
- Invalid fee increases: workloads, distance (CMG pays tolerance cure)</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with isScrolling flag and 1000ms timeout
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');
        let isScrolling = false;
        let scrollTimeout;

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Scroll to agent card
        function scrollToAgent(agentId) {
            switchTab('agents');
            setTimeout(() => {
                const agent = document.getElementById(agentId);
                if (agent) {
                    agent.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    agent.classList.add('highlight');
                    setTimeout(() => agent.classList.remove('highlight'), 2000);
                }
            }, 100);
        }

        // Modal functions
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                await navigator.clipboard.writeText(document.getElementById('docContent').textContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { closeDocModal(); closePromptModal(); } });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // Agent Prompt System
        const agentPrompts = {
            autofill: {
                name: 'Order Auto-Fill Agent',
                tags: ['Data Integration', 'BytePro API', 'Low Complexity', 'Critical Priority'],
                purpose: `This agent automatically pre-populates ValueLink order fields by extracting loan data from BytePro, reducing manual entry time from 3+ minutes to seconds while eliminating transcription errors between systems.`,
                prompt: `You are building a Data Integration Agent for CMG Financial's BytePro-ValueLink integration.

AGENT NAME: Order Auto-Fill Agent
TYPE: Data Integration / Form Pre-fill

OBJECTIVE:
Create an agent that extracts loan data from BytePro and automatically populates ValueLink appraisal order fields when a user opens the ordering interface.

INPUT DATA SOURCES:
1. BytePro Loan File
   - Borrower: First Name, Last Name, Email, Phone
   - Property: Street, City, State, Zip, County
   - Property Type, Occupancy Type
   - Lender Case Number
   - Purchase Price / Appraised Value
   - Prior Sale Date, Prior Sale Amount
   - Parcel Number

2. AUS Findings (DU/LP)
   - Property inspection waiver status
   - Required appraisal form type

FIELD MAPPING:
BytePro Field -> ValueLink Field
---------------------------------
borrower.lastName -> Borrower First, M, Last
borrower.email -> Borrower Email
borrower.phone -> Borrower Phone
loan.caseNumber -> Lender Case No
property.street -> Street
property.city -> City, State, Zip
property.county -> County
property.type -> Property Type
property.priorSaleDate -> Prior Sale Date
property.priorSaleAmount -> Prior Sale Amount
property.parcelNo -> Parcel No

VALIDATION RULES:
- Verify all required fields have values before auto-fill
- Flag missing required data for user input
- Sanitize special characters from property addresses
- Validate zip code format (5 digits or 5+4)

OUTPUT:
{
  "autoFilled": { "field": "value", ... },
  "missing": ["field1", "field2"],
  "warnings": ["message1"],
  "confidence": 0.95
}`,
                integration: `INTEGRATION POINTS:

1. BytePro Data Access
   - Hook into loan file open event
   - Read from Byte database/API
   - Cache loan data for session

2. ValueLink Interface
   - Inject values into form fields
   - Trigger on "ValueLink Software Enhanced" launch
   - Preserve user ability to override

3. Error Handling
   - Log all auto-fill operations
   - Alert on data mismatch
   - Fall back to manual entry if extraction fails

DEPLOYMENT:
- BytePro interface enhancement
- No external dependencies required
- Leverages existing Byte-ValueLink integration`
            },
            product: {
                name: 'Smart Product Selector',
                tags: ['Decision Support', 'AUS Integration', 'Medium Complexity', 'High Priority'],
                purpose: `This agent analyzes AUS findings, property characteristics, and loan parameters to recommend the correct appraisal product type, preventing ordering errors and ensuring compliance with investor requirements.`,
                prompt: `You are building a Decision Support Agent for appraisal product selection.

AGENT NAME: Smart Product Selector
TYPE: Decision Support / Rules Engine

OBJECTIVE:
Analyze loan data and recommend the correct ValueLink appraisal product based on AUS findings, property type, occupancy, and loan value thresholds.

INPUT PARAMETERS:
1. AUS Findings
   - DU/LP findings document
   - Property inspection waiver (PIW) status
   - Appraisal form requirement

2. Property Details
   - Property Type (SFR, Condo, PUD, 2-4 Unit, etc.)
   - Occupancy (Primary, Investment, Second Home)
   - High Rise Condo indicator

3. Loan Parameters
   - Loan Amount
   - Property Value
   - Loan Purpose (Purchase, Refi, Cash-Out)
   - Loan Type (Conventional, FHA, VA, USDA)

PRODUCT SELECTION LOGIC:

IF PropertyType = "Single Family" AND LoanType = "Conventional":
  IF Value < $1,000,000:
    RETURN "SF Conventional up to $999,999 (Form 1004)"
  ELSE:
    RETURN "SF Conventional $1,000,000 and over (Form 1004)"

IF PropertyType = "Condo":
  IF Value < $1,000,000:
    RETURN "Condo up to $999,999 (Form 1073)"
  ELSE:
    RETURN "Condo $1,000,000 and over (Form 1073)"

IF LoanType = "Investment":
  ADD "SF Investment" prefix
  CONSIDER Form 1004, 1007 requirements

IF PropertyType = "2-4 Unit":
  RETURN "2-4 Unit (Form 1025, 1007)"

IF PropertyType = "Manufactured":
  RETURN "Manufactured Home (Form 1004C)"

ADDITIONAL ITEMS RECOMMENDATIONS:
- Rush Fee: If due date < 5 business days
- Complex Fee: If waterfront, acreage, rural, unusual
- Form 1007: If rental/investment property
- Form 216: If operating income statement needed

OUTPUT:
{
  "recommendedProduct": "Product Name",
  "confidence": 0.92,
  "reasoning": "Based on AUS findings...",
  "additionalItems": ["Rush Fee", "Form 1007"],
  "warnings": ["Complex property - verify fee"]
}`,
                integration: `INTEGRATION POINTS:

1. AUS Data Parser
   - Read DU/LP findings from Byte
   - Extract appraisal requirements
   - Parse PIW status

2. Product Catalog
   - Maintain current ValueLink product list
   - Map to form types (1004, 1073, 1025, etc.)
   - Include fee schedules

3. User Interface
   - Display recommendation before product dropdown
   - Show reasoning for selection
   - Allow user override with confirmation

VALIDATION:
- Cross-check against investor guidelines
- Flag mismatches between AUS and selection
- Audit log all recommendations`
            },
            status: {
                name: 'Appraisal Status Monitor',
                tags: ['Monitoring', 'Alerts', 'Low Complexity', 'High Priority'],
                purpose: `This agent continuously monitors appraisal order status in ValueLink and sends proactive alerts for delays, pending actions, approaching hold limits, and required fee approvals to keep orders on track.`,
                prompt: `You are building a Monitoring Agent for appraisal order tracking.

AGENT NAME: Appraisal Status Monitor
TYPE: Real-time Monitoring / Push Notifications

OBJECTIVE:
Monitor all active appraisal orders and alert loan teams when action is required or when orders are at risk of delay.

MONITORING TRIGGERS:

1. PENDING ACTION ALERTS
   - Fee change pending approval > 4 hours
   - "ACTION REQUIRED TODAY" in comments
   - Payment not received after 48 hours
   - Documents requested by appraiser

2. DELAY WARNINGS
   - No status change in 3+ business days
   - Inspection not scheduled within 5 days of order
   - Past due date with no completion

3. HOLD MANAGEMENT
   - Order on hold approaching 25 days (5 day warning)
   - Order on hold at 28 days (URGENT - 2 day warning)
   - Auto-cancellation imminent at 30 days

4. COMPLETION ALERTS
   - Order completed - appraisal ready
   - Appraisal delivered to borrower
   - Revision request submitted

STATUS CHECK FREQUENCY:
- Active orders: Every 30 minutes
- On-hold orders: Every 4 hours
- Completed orders: Daily digest

ALERT CHANNELS:
- Email notification to loan team
- BytePro dashboard notification
- SMS for urgent (hold expiring, ACTION REQUIRED)

ALERT MESSAGE FORMAT:
{
  "orderId": "1-0000019",
  "loanNumber": "TEST0000001466",
  "borrowerName": "John Smith",
  "propertyAddress": "123 Main St",
  "alertType": "HOLD_WARNING",
  "severity": "HIGH",
  "message": "Order on hold for 25 days. Will auto-cancel in 5 days.",
  "action": "Remove hold or cancel order",
  "link": "bytepro://loan/12345/appraisal"
}`,
                integration: `INTEGRATION POINTS:

1. ValueLink Status Feed
   - Poll order status via API/webhook
   - Parse notification emails
   - Track status history

2. Alert Delivery
   - Email via SendGrid/internal mail
   - BytePro notification system
   - Optional SMS via Twilio

3. Dashboard
   - At-risk orders view
   - Hold countdown timers
   - Team workload distribution

ESCALATION RULES:
- First alert: Assigned processor
- No action in 4 hours: Add loan officer
- No action in 8 hours: Add manager
- Hold at 28 days: All parties + branch manager`
            },
            fee: {
                name: 'Fee Change Handler',
                tags: ['Workflow Automation', 'Compliance', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent processes fee change requests by validating reasons against compliance rules, automatically updating disclosures when appropriate, and flagging COC requirements to ensure regulatory compliance.`,
                prompt: `You are building a Workflow Automation Agent for appraisal fee changes.

AGENT NAME: Fee Change Handler
TYPE: Workflow Automation / Compliance

OBJECTIVE:
Process fee change requests from ValueLink, validate the reason for the change, determine if it can be passed to the borrower, and trigger appropriate disclosure updates.

FEE CHANGE VALIDATION RULES:

VALID REASONS (Can pass to borrower):
- Rush fee (documented urgent timeline)
- Complex property fee (waterfront, acreage, rural, unusual)
- Inspection fee (additional property visits)
- Property characteristics not disclosed at order time

INVALID REASONS (CMG tolerance cure):
- Heavy appraiser workload
- Distance to property
- Market conditions
- Appraiser availability issues

PROCESSING WORKFLOW:

1. RECEIVE fee change notification
   - Parse proposed fee and reason
   - Extract order and loan identifiers

2. VALIDATE reason against rules
   - Classify as VALID or INVALID
   - Calculate fee difference
   - Check against disclosed amount

3. IF fee > disclosed amount:
   - Flag COC box in Appraisal Info screen
   - Queue for Disclosure Team review
   - Notify processor of redisclosure need

4. UPDATE Byte records:
   - Appraisal fee field on LE/CD
   - Reconciliation trigger
   - Audit trail entry

5. RESPOND to ValueLink:
   - Approve valid fee changes
   - Route invalid changes to manager
   - Document decision rationale

OUTPUT:
{
  "decision": "APPROVED" | "DENIED" | "ESCALATE",
  "validReason": true/false,
  "passToBorrower": true/false,
  "cocRequired": true/false,
  "feeIncrease": 150.00,
  "disclosureAction": "REDISCLOSE_REQUIRED",
  "notes": "Complex fee approved - waterfront property"
}`,
                integration: `INTEGRATION POINTS:

1. ValueLink Notification Parser
   - Extract fee change data from emails
   - Parse "Accepted with Conditions" status
   - Read proposed fee and notes

2. Byte Disclosure System
   - Update fee fields on LE/CD
   - Trigger COC checkbox
   - Queue redisclosure workflow

3. Compliance Rules Engine
   - Maintain valid/invalid reason database
   - Check investor tolerance requirements
   - TRID timing calculations

4. Audit Trail
   - Log all fee change decisions
   - Store approval/denial rationale
   - Compliance reporting data`
            },
            doc: {
                name: 'Document Assembler',
                tags: ['Document Processing', 'Automation', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent automatically identifies required documents from Byte Stored Documents based on transaction type and attaches them to appraisal orders, while sanitizing filenames to prevent upload errors.`,
                prompt: `You are building a Document Processing Agent for appraisal order attachments.

AGENT NAME: Document Assembler
TYPE: Document Processing / Automation

OBJECTIVE:
Automatically identify, validate, and attach required documents to ValueLink appraisal orders based on transaction type, property type, and order requirements.

DOCUMENT REQUIREMENTS BY TRANSACTION:

PURCHASE:
- Ratified Sales Contract (REQUIRED)
  - Must include all signatures
  - Must include all pages and addendums
  - Flag if escalation clause present

CONDO:
- Condo Questionnaire (when received)
- HOA documents
- Floor plans (if available)

INVESTMENT PROPERTY:
- Current lease agreements
- Rent roll

REFINANCE:
- Prior appraisal (if available)
- Property survey

REVISION REQUESTS:
- Referenced documents (flood cert, etc.)
- Supporting documentation

FILENAME SANITIZATION:
Remove special characters: * < > ? # $ " | \\ / :
Replace spaces with underscores
Truncate to 100 characters max
Preserve file extension

DOCUMENT MATCHING LOGIC:

1. SCAN Byte Stored Documents
   - Match by document type codes
   - Check document dates (prefer recent)
   - Verify completeness

2. VALIDATE documents
   - Check page count
   - Verify signatures present
   - Confirm document quality

3. PREPARE for upload
   - Sanitize filename
   - Convert to PDF if needed
   - Generate document manifest

4. ATTACH to order
   - Upload via ValueLink interface
   - Set document type in dropdown
   - Confirm successful attachment

OUTPUT:
{
  "attached": [
    {"name": "Purchase_Contract_Smith.pdf", "type": "Purchase Agreement"},
    {"name": "Condo_Questionnaire.pdf", "type": "Condo Q"}
  ],
  "missing": ["Floor plans requested but not found"],
  "warnings": ["Contract missing page 3 - verify with team"],
  "sanitized": ["Original: Contract#123$.pdf -> Contract_123.pdf"]
}`,
                integration: `INTEGRATION POINTS:

1. Byte Stored Documents
   - Query by document type
   - Access document content
   - Read metadata (dates, status)

2. ValueLink Upload
   - Use existing upload mechanism
   - Set document type dropdown
   - Handle upload errors

3. Document Validation
   - PDF parsing for page count
   - Signature detection (optional)
   - Quality scoring

4. User Notification
   - Missing document alerts
   - Sanitization report
   - Attachment confirmation`
            }
        };

        let currentPromptKey = '';

        function showAgentPrompt(key) {
            const prompt = agentPrompts[key];
            if (!prompt) return;

            currentPromptKey = key;
            document.getElementById('promptModalTitle').textContent = prompt.name + ' - Build Prompt';
            document.getElementById('promptTags').innerHTML = prompt.tags.map(t => `<span class="prompt-tag">${t}</span>`).join('');
            document.getElementById('promptPurpose').textContent = prompt.purpose;
            document.getElementById('promptContent').textContent = prompt.prompt;
            document.getElementById('promptIntegration').textContent = prompt.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            const prompt = agentPrompts[currentPromptKey];
            if (!prompt) return;

            const fullPrompt = `${prompt.purpose}\n\n${prompt.prompt}\n\n${prompt.integration}`;
            try {
                await navigator.clipboard.writeText(fullPrompt);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => { if (e.target.id === 'promptModal') closePromptModal(); });
    </script>
</body>
</html>
