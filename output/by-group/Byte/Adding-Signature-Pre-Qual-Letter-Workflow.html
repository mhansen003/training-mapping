<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Byte Adding Signature to Pre-Qual Letter - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }
        .flow-node.end { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box, .warning-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        .warning-box { background: rgba(245, 158, 11, 0.08); border-color: var(--accent-amber); border: 1px solid rgba(245, 158, 11, 0.2); border-left: 4px solid var(--accent-amber); }
        .warning-box h4 { color: var(--accent-amber); margin-bottom: 10px; font-size: 1rem; }
        .warning-box p, .warning-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Step List */
        .step-list { list-style: none; padding: 0; margin: 18px 0; }
        .step-list li {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid var(--border-subtle);
        }
        .step-list li:last-child { border-bottom: none; }
        .step-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
            flex-shrink: 0;
        }
        .step-content { flex: 1; }
        .step-content strong { color: var(--text-primary); }
        .step-content p { color: var(--text-secondary); margin-top: 5px; font-size: 0.95rem; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
            scroll-margin-top: 75px;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        /* View Prompt Button */
        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* AI Prompt Modal */
        .prompt-modal .modal {
            max-width: 800px;
        }

        .prompt-modal .modal-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
        }

        .prompt-section {
            margin-bottom: 25px;
        }

        .prompt-section h4 {
            color: var(--accent-purple);
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .prompt-tag {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
            .breadcrumb-logo-link { display: flex; align-items: center; padding: 4px 8px; background: rgba(255,255,255,0.08); border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); transition: all 0.2s; }
        .breadcrumb-logo-link:hover { background: rgba(255,255,255,0.15); }
        .breadcrumb-logo { height: 28px; width: auto; }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html" class="breadcrumb-logo-link"><img src="../../images/clear-ai-logo.png" alt="Clear AI" class="breadcrumb-logo"></a>
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">Adding Signature to Pre-Qual Letter</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Pre-Qual Letter Signature</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-0" class="nav-item active">
                <span class="nav-number">0</span>
                <span class="nav-label">Prerequisites</span>
            </a>
            <a href="#section-1" class="nav-item">
                <span class="nav-number">1</span>
                <span class="nav-label">Open Loan</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Access Print Menu</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Search & Select</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Store Document</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Open & Sign</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Save Document</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Summary
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Adding a Signature to the Pre-Qual Letter</h1>
                <p class="subtitle">Complete Workflow for Electronic Document Signing in Byte</p>
                <div class="meta">
                    <span class="meta-item">System: BytePro Enterprise</span>
                    <span class="meta-item">Role: Loan Officer</span>
                    <span class="meta-item">Updated: Oct 17, 2022</span>
                    <span class="meta-item">Duration: 2-5 min</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Warning</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 0: Prerequisites -->
            <section id="section-0" class="section">
                <div class="section-header">
                    <div class="section-number">0</div>
                    <div class="section-title"><h2>Prerequisites</h2><span>Required setup before signing documents</span></div>
                </div>
                <div class="section-content">
                    <div class="info-box">
                        <h4>Signature Setup Required</h4>
                        <p>Before signing a document in Byte, your signature must be preloaded in the system. This is a one-time setup process.</p>
                    </div>

                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start Setup</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Download Signature Form</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Complete Form</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Send to bytesupport@cmgfi.com</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Signature Uploaded</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Requirement</th>
                                <th>Status</th>
                                <th>Details</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong style="color: var(--text-primary);">Signature Form</strong></td>
                                <td><span class="badge required-badge">Required</span></td>
                                <td>Download "Signature to Store in Byte" form</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--text-primary);">Email Submission</strong></td>
                                <td><span class="badge required-badge">Required</span></td>
                                <td>Send completed form to bytesupport@cmgfi.com</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--text-primary);">Policy Compliance</strong></td>
                                <td><span class="badge required-badge">Required</span></td>
                                <td>Follow CMG Electronic Signature policy</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="warning-box">
                        <h4>CMG Electronic Signature Policy</h4>
                        <p>Once your signature is uploaded into Byte, you can sign documents that are allowed to have an electronic signature. Always follow the CMG Electronic Signature policy when using your electronic signature on CMG documents.</p>
                    </div>
                </div>
            </section>

            <!-- Section 1: Open Loan -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Open Loan in Byte</h2><span>Access the loan file from the pipeline</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Navigate to Pipeline</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Double-Click Loan</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Loan Opens in Byte</div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li>
                            <span class="step-number">1</span>
                            <div class="step-content">
                                <strong>Locate the Loan</strong>
                                <p>Find the desired loan in the Pipeline view. You can search by File Name, First Name, Last Name, or use the available filters.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">2</span>
                            <div class="step-content">
                                <strong>Double-Click to Open</strong>
                                <p>Double-click the loan from the pipeline to open the loan in Byte. The loan details will load in the main window.</p>
                            </div>
                        </li>
                    </ul>

                    <div class="tip-box">
                        <h4>Pro Tip</h4>
                        <p>Use the search functionality with "File Name" or borrower name to quickly locate loans in a large pipeline.</p>
                    </div>
                </div>
            </section>

            <!-- Section 2: Access Print Menu -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Access Print Menu</h2><span>Navigate to the document printing interface</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node input">Loan Open</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Printer Icon</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Print Menu Opens</div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li>
                            <span class="step-number">1</span>
                            <div class="step-content">
                                <strong>Locate the Printer Icon</strong>
                                <p>Find the Printer icon on the Main Window toolbar. This is typically located in the upper portion of the Byte interface.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">2</span>
                            <div class="step-content">
                                <strong>Click the Printer Icon</strong>
                                <p>Click the Printer icon to open the Print menu. The Print dialog window will appear with document options.</p>
                            </div>
                        </li>
                    </ul>

                    <div class="info-box">
                        <h4>Print Menu Features</h4>
                        <p>The Print menu provides access to all available documents including Pre-Qual letters, disclosures, and other loan documents. You can browse by category or use the search function.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Search and Select Letter -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Search & Select Pre-Qual Letter</h2><span>Find and choose the appropriate letter</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node input">Print Menu Open</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Select "Search" Radio Button</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Type "Pre-Qual"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Search</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node output">Results Display</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Check Desired Letter</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Letter Selected</div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li>
                            <span class="step-number">1</span>
                            <div class="step-content">
                                <strong>Enable Search Mode</strong>
                                <p>Select the radio button next to "Search" in the Available Documents section.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">2</span>
                            <div class="step-content">
                                <strong>Enter Search Term</strong>
                                <p>Type "Pre-Qual" in the search box to filter available documents.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">3</span>
                            <div class="step-content">
                                <strong>Execute Search</strong>
                                <p>Click the "Search" button to display matching documents.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">4</span>
                            <div class="step-content">
                                <strong>Select the Letter</strong>
                                <p>Click the checkbox next to the desired Pre-Qual letter (e.g., "Retail Pre-Qual Letter - CMG").</p>
                            </div>
                        </li>
                    </ul>

                    <table class="field-table">
                        <thead>
                            <tr>
                                <th>Letter Type</th>
                                <th>Size</th>
                                <th>Use Case</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong style="color: var(--text-primary);">Retail Pre-Qual Letter - CMG</strong></td>
                                <td>Letter</td>
                                <td>Standard retail pre-qualification letter</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--text-primary);">Retail Pre-Qual Letter - Divmo</strong></td>
                                <td>Letter</td>
                                <td>Divmo channel pre-qualification</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--text-primary);">Retail Pre-Qual - CMG - No Address</strong></td>
                                <td>Letter</td>
                                <td>Pre-qual without property address</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--text-primary);">JV Pre-Qual Letter GRC - WHF</strong></td>
                                <td>Letter</td>
                                <td>Joint venture GRC/WHF</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--text-primary);">JV Pre-Qual Letter</strong></td>
                                <td>Letter</td>
                                <td>Standard joint venture letter</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--text-primary);">JV TX Conditional Pre-Qualification</strong></td>
                                <td>Letter</td>
                                <td>Texas conditional JV letter</td>
                            </tr>
                            <tr>
                                <td><strong style="color: var(--text-primary);">Retail TX Conditional Pre-Qualification</strong></td>
                                <td>Letter</td>
                                <td>Texas conditional retail letter</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 4: Store Document -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Store Document</h2><span>Save the letter to Stored Documents</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node input">Letter Selected</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Store Icon</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Password Protection?</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node input">Choose Protection Type</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Name Document</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click OK</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node output">Confirmation Pop-up</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click OK</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Document Stored</div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li>
                            <span class="step-number">1</span>
                            <div class="step-content">
                                <strong>Click the Store Icon</strong>
                                <p>Click the Store icon in the Selected Documents section. This loads the document to Stored Documents.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">2</span>
                            <div class="step-content">
                                <strong>Choose Password Protection Type</strong>
                                <p>Select the appropriate password protection level for the document based on security requirements.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">3</span>
                            <div class="step-content">
                                <strong>Name the Document</strong>
                                <p>Enter a descriptive name for the output file (e.g., "Retail Pre-Qual Letter - CMG David Testcase.pdf").</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">4</span>
                            <div class="step-content">
                                <strong>Click OK</strong>
                                <p>Click OK to save the document. A BytePro Enterprise pop-up will confirm the document was added.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">5</span>
                            <div class="step-content">
                                <strong>Acknowledge Confirmation</strong>
                                <p>Click OK on the confirmation pop-up noting the document was added to the loan file.</p>
                            </div>
                        </li>
                    </ul>

                    <div class="tip-box">
                        <h4>Document Naming</h4>
                        <p>Use a clear, descriptive name that includes the document type and borrower name for easy identification later.</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Open and Sign Document -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Open & Sign Document</h2><span>Access stored document and apply signature</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Open Stored Documents</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Double-Click Pre-Qual Letter</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Document Opens</div>
                        </div>
                        <div class="flow-row">
                            <span class="flow-arrow down">|</span>
                        </div>
                        <div class="flow-row">
                            <div class="flow-node action">Select Pen Tool</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Hold & Drag Cursor</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Signature Placed</div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li>
                            <span class="step-number">1</span>
                            <div class="step-content">
                                <strong>Open Stored Documents</strong>
                                <p>Navigate to the Stored Documents section within the loan file.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">2</span>
                            <div class="step-content">
                                <strong>Locate the Pre-Qual Letter</strong>
                                <p>Find the Pre-Qual Letter you just stored. It will appear with status "Not Reviewed" and the description you entered.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">3</span>
                            <div class="step-content">
                                <strong>Double-Click to Open</strong>
                                <p>Double-click on the document row to open the Pre-Qual Letter in the document viewer.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">4</span>
                            <div class="step-content">
                                <strong>Select the Pen Tool</strong>
                                <p>Add a signature to the document using the Pen tool from the document viewer toolbar.</p>
                            </div>
                        </li>
                        <li>
                            <span class="step-number">5</span>
                            <div class="step-content">
                                <strong>Place Your Signature</strong>
                                <p>Hold and drag the cursor to the signature location on the document. Position the signature appropriately.</p>
                            </div>
                        </li>
                    </ul>

                    <div class="info-box">
                        <h4>Signature Placement</h4>
                        <p>The signature will appear based on your cursor placement. Position it carefully in the designated signature area of the Pre-Qual letter.</p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Save Document -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Save Signed Document</h2><span>Finalize and save the signed letter</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node input">Signature Placed</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click Close</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Signature Saved</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node end">Complete</div>
                        </div>
                    </div>

                    <ul class="step-list">
                        <li>
                            <span class="step-number">1</span>
                            <div class="step-content">
                                <strong>Click Close</strong>
                                <p>Click the Close button to save the signature and close the document viewer.</p>
                            </div>
                        </li>
                    </ul>

                    <div class="exception-box">
                        <h4>CRITICAL: Signature is Permanent</h4>
                        <p><strong>The signature is burned on save and cannot be deleted.</strong> Ensure the signature is correctly placed before closing the document. If an error is made, you will need to re-generate the Pre-Qual letter and sign again.</p>
                    </div>

                    <div class="tip-box">
                        <h4>Best Practice</h4>
                        <p>Review the entire document and signature placement before clicking Close. Once saved, the signature becomes a permanent part of the document.</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
PREREQUISITE: Signature must be uploaded to Byte
- Download "Signature to Store in Byte" form
- Send completed form to bytesupport@cmgfi.com
- Follow CMG Electronic Signature policy

WORKFLOW SUMMARY:
1. Double-click loan from Pipeline to open
2. Click Printer icon on Main Window toolbar
3. Select "Search" radio button
4. Type "Pre-Qual" and click Search
5. Check desired letter checkbox
6. Click Store icon
7. Choose password protection, name document, click OK
8. Click OK on confirmation pop-up
9. Open Stored Documents
10. Double-click Pre-Qual Letter to open
11. Use Pen tool to add signature
12. Hold and drag cursor to place signature
13. Click Close to save

AVAILABLE PRE-QUAL LETTERS:
- Retail Pre-Qual Letter - CMG
- Retail Pre-Qual Letter - Divmo
- Retail Pre-Qual - CMG - No Address
- JV Pre-Qual Letter GRC - WHF
- JV Pre-Qual Letter
- JV TX Conditional Pre-Qualification
- Retail TX Conditional Pre-Qualification

WARNING: Signature is PERMANENT once saved!
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for Pre-Qual Letter Signature Workflow</p>
                <div class="meta">
                    <span class="meta-item">7 Process Steps Analyzed</span>
                    <span class="meta-item">3 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 50% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">3</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">1</div>
                    <div class="agent-summary-label">High Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">50%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">70%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item high" onclick="scrollToAgent('agent-autosign')" title="Click to view agent details">
                        <div class="heat-score">85</div>
                        <div class="heat-name">Auto-Sign Agent</div>
                        <div class="heat-desc">Automatically apply signature to documents</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>5-6</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-docselect')" title="Click to view agent details">
                        <div class="heat-score">65</div>
                        <div class="heat-name">Smart Document Selector</div>
                        <div class="heat-desc">Auto-select appropriate Pre-Qual letter</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>3</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-delivery')" title="Click to view agent details">
                        <div class="heat-score">58</div>
                        <div class="heat-name">Document Delivery Agent</div>
                        <div class="heat-desc">Auto-email signed letter to borrower/agent</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>Post-6</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: Auto-Sign Agent -->
                <div class="agent-card" id="agent-autosign">
                    <div class="agent-card-header">
                        <div class="agent-icon">E</div>
                        <div class="agent-info">
                            <div class="agent-name">Auto-Sign Agent</div>
                            <div class="agent-type">Document Automation Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically applies the Loan Officer's pre-loaded signature to documents in the correct position, eliminating manual placement steps and ensuring consistent signature positioning.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Document Stored</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Detect Signature Field</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Apply Signature</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Save Document</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">2min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Consistency</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('autosign')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: Smart Document Selector -->
                <div class="agent-card" id="agent-docselect">
                    <div class="agent-card-header">
                        <div class="agent-icon">D</div>
                        <div class="agent-info">
                            <div class="agent-name">Smart Document Selector</div>
                            <div class="agent-type">Decision Support Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Analyzes loan data to automatically recommend and pre-select the appropriate Pre-Qual letter type based on channel (Retail/JV), state (Texas conditional), and property details.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Analyze Loan Data</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Match Rules</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Select Letter</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Pre-populate</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">30sec</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">95%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('docselect')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: Document Delivery Agent -->
                <div class="agent-card" id="agent-delivery">
                    <div class="agent-card-header">
                        <div class="agent-icon">M</div>
                        <div class="agent-info">
                            <div class="agent-name">Document Delivery Agent</div>
                            <div class="agent-type">Communication Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically emails the signed Pre-Qual letter to the borrower and/or real estate agent upon completion, with customizable templates and delivery tracking.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Document Signed</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Get Recipients</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Generate Email</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Send & Track</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">3min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Auto</div><div class="agent-stat-label">Delivery</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('delivery')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Adding Signature to Pre-Qual Letter - Workflow Summary</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Adding a Signature to the Pre-Qual Letter - Byte

## Prerequisites
- Signature must be preloaded in Byte
- Download "Signature to Store in Byte" form
- Send completed form to bytesupport@cmgfi.com
- Follow CMG Electronic Signature policy

## Workflow Steps

### Step 1: Open Loan
- Double-click the loan from the pipeline to open in Byte

### Step 2: Access Print Menu
- Click the Printer icon on the Main Window toolbar

### Step 3: Search and Select Letter
- Select "Search" radio button
- Type "Pre-Qual" in the search box
- Click Search
- Check the checkbox next to desired letter

### Step 4: Store Document
- Click the Store icon
- Choose password protection type
- Name the document
- Click OK
- Click OK on confirmation pop-up

### Step 5: Open and Sign Document
- Open Stored Documents
- Double-click to open the Pre-Qual Letter
- Use the Pen tool to add signature
- Hold and drag cursor to place signature

### Step 6: Save Document
- Click Close to save the signature
- WARNING: Signature is burned on save and CANNOT be deleted

## Available Pre-Qual Letters
- Retail Pre-Qual Letter - CMG
- Retail Pre-Qual Letter - Divmo
- Retail Pre-Qual - CMG - No Address
- JV Pre-Qual Letter GRC - WHF
- JV Pre-Qual Letter
- JV TX Conditional Pre-Qualification
- Retail TX Conditional Pre-Qualification

## Contact
For signature upload issues: bytesupport@cmgfi.com

Updated: October 17, 2022</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Scroll spy with click debounce
        let isScrolling = false;
        let scrollTimeout = null;

        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Navigation click handler with debounce
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                isScrolling = true;

                // Clear any existing timeout
                if (scrollTimeout) {
                    clearTimeout(scrollTimeout);
                }

                // Set new timeout
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);

                // Update active state immediately
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Modal functions
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                const content = document.getElementById('docContent').textContent;
                await navigator.clipboard.writeText(content);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeDocModal();
                closePromptModal();
            }
        });
        document.getElementById('docModal').addEventListener('click', (e) => { if (e.target.id === 'docModal') closeDocModal(); });

        document.addEventListener('DOMContentLoaded', () => { updateActiveNav(); });

        // ====== AGENT PROMPT SYSTEM ======
        const agentPrompts = {
            autosign: {
                name: 'Auto-Sign Agent',
                tags: ['Document Automation', 'Signature', 'Low Complexity', 'High Priority'],
                purpose: `This agent automatically applies the Loan Officer's pre-loaded signature to Pre-Qual letters and other documents that require electronic signatures. It detects the signature field location and applies the signature consistently, eliminating manual placement steps.`,
                prompt: `You are building a Document Automation Agent for CMG Financial's Byte LOS system.

AGENT NAME: Auto-Sign Agent
TYPE: Document Automation / E-Signature

OBJECTIVE:
Create an agent that automatically applies the Loan Officer's pre-loaded signature to documents stored in Byte, specifically targeting Pre-Qual letters and other documents with signature fields.

INPUT PARAMETERS:
1. Document Context
   - Document Type (Pre-Qual Letter, etc.)
   - Document Template ID
   - Stored Document ID

2. User Context
   - Loan Officer User ID
   - Pre-loaded Signature Reference
   - Authorization Level

SIGNATURE PLACEMENT LOGIC:
1. DOCUMENT DETECTION
   - Identify document type from template
   - Locate signature field coordinates
   - Validate LO has signature on file

2. SIGNATURE APPLICATION
   - Retrieve LO signature from Byte storage
   - Scale signature to fit designated area
   - Apply at correct coordinates
   - Embed timestamp

3. VERIFICATION
   - Confirm signature applied
   - Validate document integrity
   - Log action for audit trail

OUTPUT:
{
  "status": "signed" | "error",
  "documentId": "string",
  "signatureTimestamp": "ISO-8601",
  "signedBy": "LO Name (NMLS#)",
  "coordinates": { "x": 0, "y": 0, "page": 1 },
  "auditLogId": "string"
}

ERROR HANDLING:
- If no signature on file: Prompt LO to upload signature
- If document type not supported: Return to manual process
- If placement fails: Alert user, preserve original document`,
                integration: `INTEGRATION POINTS:
1. Byte Document Storage API
   - Access stored documents
   - Write signed document back
   - Maintain version history

2. Byte Signature Storage
   - Retrieve pre-loaded signatures
   - Validate signature authorization

3. Document Template System
   - Map signature field locations per template
   - Support multiple letter types

4. Audit Trail
   - Log all signature actions
   - Compliance reporting integration

DEPLOYMENT OPTIONS:
- Byte plugin/extension
- Triggered on document store action
- One-click "Auto-Sign" button in UI`
            },
            docselect: {
                name: 'Smart Document Selector',
                tags: ['Decision Support', 'Rule Engine', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent analyzes loan data to automatically recommend and pre-select the appropriate Pre-Qual letter type based on channel, state requirements, and property details, reducing selection errors and saving time.`,
                prompt: `You are building a Decision Support Agent for CMG Financial's Byte LOS system.

AGENT NAME: Smart Document Selector
TYPE: Decision Support / Rule Engine

OBJECTIVE:
Create an agent that analyzes loan file data and automatically recommends the correct Pre-Qual letter variant, pre-selecting it when the LO accesses the Print menu.

INPUT PARAMETERS:
1. Loan Data
   - Channel (Retail, JV, Divmo)
   - Property State
   - Property Address (present/absent)
   - Branch/Division

2. Borrower Context
   - Loan Purpose
   - Pre-qualification Type (Standard, Conditional)

DOCUMENT SELECTION RULES:
+--------------------------------+----------------------------+
| Criteria                       | Document Selection          |
+--------------------------------+----------------------------+
| Channel = Retail, State != TX  | Retail Pre-Qual Letter - CMG|
| Channel = Retail, State = TX   | Retail TX Conditional Pre-Q |
| Channel = Divmo                | Retail Pre-Qual Letter-Divmo|
| Channel = JV, State != TX      | JV Pre-Qual Letter          |
| Channel = JV, State = TX       | JV TX Conditional Pre-Qual  |
| Channel = JV, Branch = GRC-WHF | JV Pre-Qual Letter GRC - WHF|
| No Property Address            | Retail Pre-Qual - No Address|
+--------------------------------+----------------------------+

OUTPUT:
{
  "recommendation": {
    "documentName": "Retail Pre-Qual Letter - CMG",
    "documentId": "PREQUAL-001",
    "confidence": 0.98,
    "matchedRules": ["Channel=Retail", "State=CA"]
  },
  "alternatives": [
    { "documentName": "...", "reason": "..." }
  ],
  "warnings": []
}

VALIDATION:
- Flag if multiple rules match with equal weight
- Warn if loan data is incomplete
- Log selection for training data`,
                integration: `INTEGRATION POINTS:
1. Byte Loan Data API
   - Read channel, state, property data
   - Subscribe to loan updates

2. Print Menu Integration
   - Pre-select recommended document
   - Show confidence badge
   - Allow LO override

3. Rule Engine
   - Configurable rule definitions
   - Admin UI for rule management
   - A/B testing for rule effectiveness

4. Analytics
   - Track recommendation acceptance rate
   - Identify rule improvements`
            },
            delivery: {
                name: 'Document Delivery Agent',
                tags: ['Communication', 'Email Automation', 'Medium Complexity', 'Medium Priority'],
                purpose: `This agent automatically delivers signed Pre-Qual letters to borrowers and real estate agents upon completion, using customizable email templates with delivery tracking and confirmation.`,
                prompt: `You are building a Communication Agent for CMG Financial's Byte LOS system.

AGENT NAME: Document Delivery Agent
TYPE: Communication / Email Automation

OBJECTIVE:
Create an agent that automatically emails signed Pre-Qual letters to borrowers and optionally to their real estate agents, with professional templates and delivery tracking.

INPUT PARAMETERS:
1. Document Context
   - Signed Document Reference
   - Document Type
   - Loan File Number

2. Recipients
   - Borrower Email
   - Co-Borrower Email (optional)
   - Real Estate Agent Email (optional)

3. Delivery Options
   - Email Template Selection
   - CC: Loan Officer
   - Delivery Timing (immediate/scheduled)

EMAIL TEMPLATE STRUCTURE:
Subject: Your Pre-Qualification Letter from CMG Financial

Body:
- Personalized greeting
- Purpose statement
- Document attachment
- LO contact information
- Compliance disclosures
- CMG branding/footer

DELIVERY WORKFLOW:
1. TRIGGER
   - Document signed event
   - Manual "Send" button click

2. RECIPIENT LOOKUP
   - Fetch borrower email from loan
   - Fetch agent email if on file
   - Validate email formats

3. EMAIL GENERATION
   - Select template based on channel
   - Personalize content
   - Attach signed PDF

4. SEND & TRACK
   - Send via approved email service
   - Log delivery timestamp
   - Track opens/downloads

OUTPUT:
{
  "deliveryStatus": "sent" | "scheduled" | "failed",
  "recipients": [
    { "email": "...", "status": "delivered", "timestamp": "..." }
  ],
  "trackingId": "string",
  "documentUrl": "secure-link-url"
}

ERROR HANDLING:
- Invalid email: Queue for manual review
- Delivery failure: Retry 3x, then alert LO
- Large attachment: Use secure download link`,
                integration: `INTEGRATION POINTS:
1. Byte Contact Data
   - Retrieve borrower/agent emails
   - Update delivery history on loan

2. Email Service Provider
   - SendGrid or similar
   - Template management
   - Delivery tracking webhooks

3. Document Storage
   - Generate secure download links
   - Track document access

4. Compliance
   - Log all communications
   - Consent verification
   - Opt-out handling

TEMPLATE VARIANTS:
- Standard delivery
- Urgent/time-sensitive
- Follow-up reminder
- Agent-only version`
            }
        };

        // Scroll to agent card and highlight
        function scrollToAgent(agentId) {
            const agentCard = document.getElementById(agentId);
            if (agentCard) {
                document.querySelectorAll('.agent-card.highlight').forEach(card => {
                    card.classList.remove('highlight');
                });

                agentCard.scrollIntoView({ behavior: 'smooth', block: 'center' });

                setTimeout(() => {
                    agentCard.classList.add('highlight');
                }, 300);

                setTimeout(() => {
                    agentCard.classList.remove('highlight');
                }, 2500);
            }
        }

        // Show agent prompt modal
        let currentPromptContent = '';

        function showAgentPrompt(agentKey) {
            const agent = agentPrompts[agentKey];
            if (!agent) return;

            document.getElementById('promptModalTitle').textContent = `${agent.name} - Build Prompt`;

            const tagsHtml = agent.tags.map(tag => `<span class="prompt-tag">${tag}</span>`).join('');
            document.getElementById('promptTags').innerHTML = tagsHtml;

            document.getElementById('promptPurpose').textContent = agent.purpose;
            document.getElementById('promptContent').textContent = agent.prompt;
            document.getElementById('promptIntegration').textContent = agent.integration;

            currentPromptContent = `# ${agent.name}\n\n## Purpose\n${agent.purpose}\n\n## Build Prompt\n${agent.prompt}\n\n## Integration Points\n${agent.integration}`;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            try {
                await navigator.clipboard.writeText(currentPromptContent);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) {
                alert('Failed to copy prompt.');
            }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });
    </script>
</body>
</html>
