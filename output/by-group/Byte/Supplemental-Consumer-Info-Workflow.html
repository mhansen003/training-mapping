<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supplemental Consumer Information Form (SCIF) - Process Workflow</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0f1a;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --accent-blue: #3b82f6;
            --accent-teal: #14b8a6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-green: #22c55e;
            --accent-purple: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-subtle: rgba(255,255,255,0.08);
            --sidebar-width: 280px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: linear-gradient(90deg, #0d1525 0%, #1a2234 100%);
            padding: 14px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1001;
            border-bottom: 1px solid var(--border-subtle);
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            transition: all 0.2s;
            border: 1px solid var(--border-subtle);
        }

        .breadcrumb a:hover {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .breadcrumb .separator { color: var(--text-muted); font-size: 1.2rem; }
        .breadcrumb .current { color: var(--accent-amber); font-weight: 600; padding: 8px 16px; }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 54px;
            left: 0;
            width: var(--sidebar-width);
            height: calc(100vh - 54px);
            background: var(--bg-secondary);
            overflow-y: auto;
            z-index: 1000;
            border-right: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 25px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-header h2 { color: var(--text-primary); font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .sidebar-header p { color: var(--text-muted); font-size: 0.85rem; }

        /* Tab Switch */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-subtle);
        }

        .sidebar-tab {
            flex: 1;
            padding: 14px 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            background: none;
            border-left: none;
            border-right: none;
            border-top: none;
        }

        .sidebar-tab:hover { background: rgba(255,255,255,0.03); color: var(--text-secondary); }
        .sidebar-tab.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); background: rgba(59, 130, 246, 0.08); }
        .sidebar-tab.agent-tab.active { color: var(--accent-purple); border-bottom-color: var(--accent-purple); background: rgba(139, 92, 246, 0.08); }

        .sidebar-nav { padding: 15px 0; flex: 1; overflow-y: auto; }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 20px;
            color: var(--text-secondary);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-item:hover { background: rgba(255,255,255,0.03); color: var(--text-primary); }
        .nav-item.active { background: rgba(59, 130, 246, 0.1); border-left-color: var(--accent-blue); color: var(--text-primary); }

        .nav-number {
            background: rgba(255,255,255,0.1);
            color: var(--text-secondary);
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .nav-item.active .nav-number { background: var(--accent-blue); color: white; }
        .nav-label { font-size: 0.95rem; font-weight: 500; }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border-subtle);
            background: rgba(0,0,0,0.2);
        }

        .doc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            font-size: 0.95rem;
        }

        .doc-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3); }

        /* Main Content */
        .main-content { margin-left: var(--sidebar-width); padding: 80px 40px 40px 40px; }

        /* Tab Panels */
        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        .header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-blue) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        .header .meta { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; position: relative; }

        .header .meta-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 0.85rem; color: var(--text-secondary); }
        .legend-color { width: 18px; height: 18px; border-radius: 4px; }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            margin-bottom: 25px;
            overflow: hidden;
            scroll-margin-top: 75px;
        }

        .section-header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-bottom: 1px solid var(--border-subtle);
            padding: 22px 25px;
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .section-number {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .section-title h2 { font-size: 1.35rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary); }
        .section-title span { font-size: 0.9rem; color: var(--text-muted); }
        .section-content { padding: 28px; }

        /* Workflow Diagrams */
        .workflow-diagram {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 28px;
            margin-bottom: 22px;
        }

        .flow-row { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px; margin: 15px 0; }

        .flow-node {
            padding: 14px 22px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            min-width: 150px;
            border: 1px solid var(--border-subtle);
        }

        .flow-node.start { background: linear-gradient(135deg, var(--accent-green) 0%, #16a34a 100%); color: white; border-radius: 25px; border: none; }
        .flow-node.action { background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%); color: white; border: none; }
        .flow-node.decision { background: linear-gradient(135deg, var(--accent-amber) 0%, #d97706 100%); color: var(--bg-primary); border: none; }
        .flow-node.input { background: var(--bg-secondary); border: 2px solid var(--accent-blue); color: var(--text-primary); }
        .flow-node.output { background: linear-gradient(135deg, var(--accent-teal) 0%, #0d9488 100%); color: white; border: none; }
        .flow-node.exception { background: linear-gradient(135deg, var(--accent-rose) 0%, #dc2626 100%); color: white; border: none; }

        .flow-arrow { color: var(--accent-blue); font-size: 1.5rem; }
        .flow-arrow.down { transform: rotate(90deg); }

        .decision-branch { display: flex; gap: 40px; justify-content: center; margin: 20px 0; flex-wrap: wrap; }
        .branch { display: flex; flex-direction: column; align-items: center; gap: 10px; }

        .branch-label {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        /* Tables */
        .field-table { width: 100%; border-collapse: collapse; margin: 18px 0; }

        .field-table th {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--border-subtle);
        }

        .field-table td { padding: 14px 18px; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
        .field-table tr:hover { background: rgba(255,255,255,0.02); }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .badge.required-badge { background: rgba(244, 63, 94, 0.15); color: var(--accent-rose); }
        .badge.optional-badge { background: rgba(34, 197, 94, 0.15); color: var(--accent-green); }
        .badge.conditional-badge { background: rgba(245, 158, 11, 0.15); color: var(--accent-amber); }
        .badge.calculated-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); }

        /* Info Boxes */
        .exception-box, .tip-box, .info-box, .warning-box {
            padding: 18px 22px;
            margin: 18px 0;
            border-radius: 0 10px 10px 0;
            border-left-width: 4px;
            border-left-style: solid;
        }

        .exception-box { background: rgba(244, 63, 94, 0.08); border-color: var(--accent-rose); border: 1px solid rgba(244, 63, 94, 0.2); border-left: 4px solid var(--accent-rose); }
        .exception-box h4 { color: var(--accent-rose); margin-bottom: 10px; font-size: 1rem; }
        .exception-box p, .exception-box li { color: var(--text-secondary); }

        .tip-box { background: rgba(34, 197, 94, 0.08); border-color: var(--accent-green); border: 1px solid rgba(34, 197, 94, 0.2); border-left: 4px solid var(--accent-green); }
        .tip-box h4 { color: var(--accent-green); margin-bottom: 10px; font-size: 1rem; }
        .tip-box p, .tip-box li { color: var(--text-secondary); }

        .info-box { background: rgba(59, 130, 246, 0.08); border-color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); border-left: 4px solid var(--accent-blue); }
        .info-box h4 { color: var(--accent-blue); margin-bottom: 10px; font-size: 1rem; }
        .info-box p, .info-box li { color: var(--text-secondary); }

        .warning-box { background: rgba(245, 158, 11, 0.08); border-color: var(--accent-amber); border: 1px solid rgba(245, 158, 11, 0.2); border-left: 4px solid var(--accent-amber); }
        .warning-box h4 { color: var(--accent-amber); margin-bottom: 10px; font-size: 1rem; }
        .warning-box p, .warning-box li { color: var(--text-secondary); }

        /* Decision Tree */
        .decision-tree {
            background: rgba(0,0,0,0.2);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 22px;
            margin: 22px 0;
        }

        .decision-tree h3 { color: var(--accent-blue); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border-subtle); font-size: 1.1rem; }

        .tree-node { margin-left: 20px; padding: 12px; border-left: 2px solid var(--accent-teal); position: relative; color: var(--text-secondary); }
        .tree-node::before { content: ''; position: absolute; left: -2px; top: 22px; width: 15px; height: 2px; background: var(--accent-teal); }
        .tree-node.level-1 { margin-left: 0; border-left: none; }
        .tree-node.level-1::before { display: none; }

        .tree-label { background: var(--accent-amber); color: var(--bg-primary); padding: 6px 14px; border-radius: 6px; font-weight: 700; display: inline-block; margin-bottom: 6px; font-size: 0.9rem; }

        /* Summary Grid */
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 18px; margin: 22px 0; }

        .summary-card { background: rgba(0,0,0,0.3); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 22px; text-align: center; }
        .summary-card h4 { color: var(--text-secondary); margin-bottom: 12px; font-size: 0.9rem; }
        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .summary-card .label { font-size: 0.85rem; color: var(--text-muted); margin-top: 8px; }

        /* Language Cards */
        .language-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 22px 0; }

        .language-card { background: rgba(0,0,0,0.2); border: 1px solid var(--border-subtle); border-radius: 12px; overflow: hidden; }
        .language-card-header { background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%); color: white; padding: 18px; text-align: center; }
        .language-card-header h4 { font-size: 1.05rem; }
        .language-card-body { padding: 22px; }
        .language-card ul { list-style: none; padding: 0; }
        .language-card li { padding: 10px 0; border-bottom: 1px solid var(--border-subtle); display: flex; align-items: center; gap: 12px; color: var(--text-secondary); font-size: 0.95rem; }
        .language-card li:last-child { border-bottom: none; }
        .check-icon { color: var(--accent-green); font-weight: bold; }
        .x-icon { color: var(--accent-rose); font-weight: bold; }

        /* Quick Reference */
        .quick-ref {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border: 1px solid var(--border-subtle);
            padding: 28px;
            border-radius: 16px;
            margin-top: 30px;
            font-family: 'JetBrains Mono', monospace;
        }

        .quick-ref h3 { color: var(--accent-amber); margin-bottom: 18px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .quick-ref pre { background: rgba(0,0,0,0.4); border: 1px solid var(--border-subtle); padding: 20px; border-radius: 10px; overflow-x: auto; font-size: 0.85rem; line-height: 1.7; color: var(--text-secondary); }

        /* ====== AGENT OPPORTUNITIES STYLES ====== */
        .agent-header {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            padding: 35px;
            border-radius: 16px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .agent-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .agent-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            position: relative;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-header .subtitle { color: var(--text-secondary); font-size: 1.1rem; position: relative; }

        /* Heat Map */
        .heat-map-container { margin-bottom: 35px; }
        .heat-map-title { font-size: 1.3rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .heat-item {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .heat-item:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .heat-item:active { transform: scale(0.98); }

        .heat-item::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
        }

        .heat-item.critical::before { background: linear-gradient(90deg, #ef4444, #f97316); }
        .heat-item.high::before { background: linear-gradient(90deg, #f97316, #eab308); }
        .heat-item.medium::before { background: linear-gradient(90deg, #eab308, #22c55e); }
        .heat-item.low::before { background: linear-gradient(90deg, #22c55e, #14b8a6); }

        .heat-score {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            font-weight: 800;
        }

        .heat-item.critical .heat-score { color: #ef4444; }
        .heat-item.high .heat-score { color: #f97316; }
        .heat-item.medium .heat-score { color: #eab308; }
        .heat-item.low .heat-score { color: #22c55e; }

        .heat-name { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 6px; padding-right: 50px; }
        .heat-desc { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; }

        .heat-metrics { display: flex; gap: 15px; margin-top: 12px; }
        .heat-metric { font-size: 0.75rem; color: var(--text-muted); }
        .heat-metric span { color: var(--text-secondary); font-weight: 600; }

        /* Agent Cards */
        .agent-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 25px; margin-bottom: 35px; }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .agent-card:hover { transform: translateY(-5px); box-shadow: 0 15px 50px rgba(0,0,0,0.3); }

        .agent-card.highlight {
            animation: highlightPulse 2s ease;
            box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.4);
        }

        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 3px var(--accent-purple), 0 15px 50px rgba(139, 92, 246, 0.6); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 15px 50px rgba(139, 92, 246, 0.3); }
            100% { box-shadow: 0 0 0 0px transparent, 0 15px 50px rgba(0,0,0,0.3); }
        }

        .agent-card-header {
            padding: 22px;
            display: flex;
            align-items: flex-start;
            gap: 18px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .agent-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            flex-shrink: 0;
        }

        .agent-info { flex: 1; }
        .agent-name { font-size: 1.15rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
        .agent-type { font-size: 0.8rem; color: var(--accent-purple); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-priority {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .agent-priority.critical { background: rgba(239, 68, 68, 0.15); color: #ef4444; }
        .agent-priority.high { background: rgba(249, 115, 22, 0.15); color: #f97316; }
        .agent-priority.medium { background: rgba(234, 179, 8, 0.15); color: #eab308; }
        .agent-priority.low { background: rgba(34, 197, 94, 0.15); color: #22c55e; }

        .agent-card-body { padding: 22px; }
        .agent-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }

        .agent-flow {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 20px;
        }

        .agent-flow-title { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }

        .agent-flow-diagram { display: flex; align-items: center; flex-wrap: wrap; gap: 8px; justify-content: center; }

        .agent-step {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .agent-arrow { color: var(--accent-purple); font-size: 1.2rem; }

        .agent-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }

        .agent-stat {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .agent-stat-value {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-stat-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-top: 4px; }

        .agent-prompt-btn {
            width: 100%;
            margin-top: 18px;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(59, 130, 246, 0.2) 100%);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            color: var(--accent-purple);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .agent-prompt-btn:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.3) 100%);
            border-color: var(--accent-purple);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.25);
        }

        /* Summary Stats */
        .agent-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 35px;
        }

        .agent-summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 14px;
            padding: 25px;
            text-align: center;
        }

        .agent-summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .agent-summary-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; }

        /* Heat Map Legend */
        .heat-legend {
            display: flex;
            gap: 25px;
            padding: 18px 22px;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .heat-legend-item { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; color: var(--text-secondary); }
        .heat-legend-color { width: 24px; height: 24px; border-radius: 6px; }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10, 15, 26, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.show { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            width: 100%;
            max-width: 950px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 80px rgba(0,0,0,0.5);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-teal) 100%);
            color: white;
            padding: 22px 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 16px 16px 0 0;
        }

        .modal-header h3 { font-size: 1.25rem; font-weight: 700; }
        .modal-actions { display: flex; gap: 12px; }

        .modal-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.2s;
            font-size: 0.9rem;
        }

        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn.copy { background: white; color: var(--accent-blue); }
        .modal-btn.close { background: rgba(255,255,255,0.2); color: white; }

        .modal-body { padding: 28px; overflow-y: auto; flex: 1; }

        .modal-body pre {
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-subtle);
            padding: 22px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: var(--text-secondary);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--accent-green);
            color: white;
            padding: 18px 35px;
            border-radius: 10px;
            font-weight: 700;
            z-index: 3000;
            display: none;
            animation: fadeInOut 2s ease;
        }

        @keyframes fadeInOut { 0%, 100% { opacity: 0; } 10%, 90% { opacity: 1; } }

        /* AI Prompt Modal */
        .prompt-modal .modal {
            max-width: 800px;
        }

        .prompt-modal .modal-header {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-blue) 100%);
        }

        .prompt-section {
            margin-bottom: 25px;
        }

        .prompt-section h4 {
            color: var(--accent-purple);
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .prompt-box {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-secondary);
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .prompt-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .prompt-tag {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 75px 20px 30px 20px; }
            .agent-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="../../index.html">Portal Home</a>
        <span class="separator">></span>
        <a href="./index.html">Byte</a>
        <span class="separator">></span>
        <span class="current">Supplemental Consumer Information Form</span>
    </nav>

    <!-- Fixed Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>SCIF Form</h2>
            <p>Interactive Workflow Guide</p>
        </div>

        <!-- Tab Switcher -->
        <div class="sidebar-tabs">
            <button class="sidebar-tab active" onclick="switchTab('workflow')">Workflow</button>
            <button class="sidebar-tab agent-tab" onclick="switchTab('agents')">AI Agents</button>
        </div>

        <!-- Workflow Navigation -->
        <nav class="sidebar-nav" id="workflow-nav">
            <a href="#section-0" class="nav-item active">
                <span class="nav-number">0</span>
                <span class="nav-label">Overview</span>
            </a>
            <a href="#section-1" class="nav-item">
                <span class="nav-number">1</span>
                <span class="nav-label">Access Screen</span>
            </a>
            <a href="#section-2" class="nav-item">
                <span class="nav-number">2</span>
                <span class="nav-label">Select Borrower</span>
            </a>
            <a href="#section-3" class="nav-item">
                <span class="nav-number">3</span>
                <span class="nav-label">Education Section</span>
            </a>
            <a href="#section-4" class="nav-item">
                <span class="nav-number">4</span>
                <span class="nav-label">Counseling Section</span>
            </a>
            <a href="#section-5" class="nav-item">
                <span class="nav-number">5</span>
                <span class="nav-label">Language Preference</span>
            </a>
            <a href="#section-6" class="nav-item">
                <span class="nav-number">6</span>
                <span class="nav-label">Upload Documents</span>
            </a>
            <a href="#quick-ref" class="nav-item">
                <span class="nav-number">*</span>
                <span class="nav-label">Quick Reference</span>
            </a>
        </nav>

        <!-- Agent Navigation -->
        <nav class="sidebar-nav" id="agents-nav" style="display: none;">
            <a href="#agent-summary" class="nav-item active">
                <span class="nav-number">S</span>
                <span class="nav-label">Summary</span>
            </a>
            <a href="#agent-heatmap" class="nav-item">
                <span class="nav-number">H</span>
                <span class="nav-label">Heat Map</span>
            </a>
            <a href="#agent-details" class="nav-item">
                <span class="nav-number">A</span>
                <span class="nav-label">Agent Details</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="doc-btn" onclick="openDocModal()">
                View Workflow Markdown
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- ==================== WORKFLOW TAB ==================== -->
        <div id="workflow-panel" class="tab-panel active">
            <!-- Header -->
            <div class="header">
                <h1>Supplemental Consumer Information Form (SCIF)</h1>
                <p class="subtitle">Fannie Mae/Freddie Mac Form 1103 - Interactive Process Workflow</p>
                <div class="meta">
                    <span class="meta-item">System: Byte LOS</span>
                    <span class="meta-item">Role: Loan Officer / Processor</span>
                    <span class="meta-item">Updated: Jan 11, 2024</span>
                    <span class="meta-item">Duration: 2-5 min per borrower</span>
                </div>
            </div>

            <!-- Legend -->
            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #22c55e, #16a34a);"></div><span>Start/End</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div><span>Action Step</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div><span>Decision Point</span></div>
                <div class="legend-item"><div class="legend-color" style="background: #111827; border: 2px solid #3b82f6;"></div><span>User Input</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #f43f5e, #dc2626);"></div><span>Exception</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(135deg, #14b8a6, #0d9488);"></div><span>Output</span></div>
            </div>

            <!-- Section 0: Overview -->
            <section id="section-0" class="section">
                <div class="section-header">
                    <div class="section-number">0</div>
                    <div class="section-title"><h2>Overview & Requirements</h2><span>FHFA mandate for GSE loan sales</span></div>
                </div>
                <div class="section-content">
                    <div class="summary-grid">
                        <div class="summary-card"><h4>Conventional Loans</h4><div class="value">Mar 1</div><div class="label">2023 - Required date</div></div>
                        <div class="summary-card"><h4>All Other Loans</h4><div class="value">Aug 28</div><div class="label">2023 - Required date</div></div>
                        <div class="summary-card"><h4>Form Number</h4><div class="value">1103</div><div class="label">Fannie Mae / Freddie Mac</div></div>
                    </div>

                    <div class="info-box">
                        <h4>What is the SCIF?</h4>
                        <p>At the direction of the Federal Housing Finance Agency (FHFA), Fannie Mae and Freddie Mac (the GSEs) require the Supplemental Consumer Information Form (SCIF) in the loan file for all loans sold to the GSEs. The form captures:</p>
                        <ul style="margin-top: 12px; margin-left: 20px;">
                            <li>Homeownership education program completion details</li>
                            <li>Housing counseling program completion details</li>
                            <li>Borrower language preference</li>
                        </ul>
                    </div>

                    <div class="warning-box">
                        <h4>CMG Policy Note</h4>
                        <p><strong>CMG only offers English and Spanish</strong> as language options. Refer to the CMG Language Preference Policy for complete guidelines.</p>
                    </div>

                    <div class="decision-tree">
                        <h3>When is Education/Counseling Required?</h3>
                        <div class="tree-node level-1"><span class="tree-label">Loan Product Check</span></div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--accent-green); color: white;">Required</span> - If loan program or product requires education/counseling completion</div>
                        <div class="tree-node"><span class="tree-label" style="background: var(--text-muted); color: white;">Not Required</span> - Select "No" and leave remainder of section blank</div>
                    </div>
                </div>
            </section>

            <!-- Section 1: Access Screen -->
            <section id="section-1" class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div class="section-title"><h2>Access the SCIF Screen</h2><span>Navigate to Supplemental Consumer Information in Byte</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node start">Start</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open Loan in Byte</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Click "All Screens"</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Select "Supplemental Consumer"</div>
                        </div>
                    </div>

                    <div class="tip-box">
                        <h4>Pro Tip: Quick Navigation</h4>
                        <p>The Supplemental Consumer Information screen is located alphabetically in the All Screens menu. Look for it between "Subject Property" and "Target GOS Margins".</p>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Screen Location</th><th>Menu Path</th><th>Loan Types</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Supplemental Consumer Information</strong></td><td>All Screens > Supplemental Consumer</td><td>All GSE loans</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section 2: Select Borrower -->
            <section id="section-2" class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title"><h2>Select Borrower</h2><span>Complete form separately for each borrower</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node input">Select Borrower Tab</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node decision">Multiple Borrowers?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Yes</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node action">Complete for each borrower separately</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">No</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Continue with single borrower</div>
                            </div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Important: Each Borrower Requires Separate Entry</h4>
                        <p>Select each borrower's tab (e.g., "Patrick", "Lorraine") to complete the form specific to <strong>their individual situation</strong>. Education, counseling, and language preferences may differ between borrowers.</p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Education Section -->
            <section id="section-3" class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title"><h2>Homeownership Education</h2><span>Group or web-based education completion</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Education Completion Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node decision">Education Required by Loan Program?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Yes - Required</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node decision">Completed within 12 months?</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">No - Not Required</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Select "No", leave blank</div>
                            </div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Status</th><th>Instructions</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Education Completed</strong></td><td><span class="badge conditional-badge">Conditional</span></td><td>Yes/No - Based on if borrower completed group or web-based education within last 12 months</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Education Format</strong></td><td><span class="badge conditional-badge">If Yes</span></td><td>Select format: Group, Web-Based, etc.</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Housing Counseling Agency ID #</strong></td><td><span class="badge conditional-badge">If Yes</span></td><td>Enter ID from borrower-provided documentation</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Housing Counseling Agency Name</strong></td><td><span class="badge conditional-badge">If Yes</span></td><td>Enter agency name from borrower documentation</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Education Completion Date</strong></td><td><span class="badge conditional-badge">If Yes</span></td><td>Enter date from borrower-provided certificate</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Documentation Required</h4>
                        <p>Upload any written evidence of education completion from the borrower to the loan Doc Manager. Certificates must show completion within the last 12 months.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Counseling Section -->
            <section id="section-4" class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <div class="section-title"><h2>Housing Counseling</h2><span>Customized counselor-to-client service</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <h3 style="text-align: center; margin-bottom: 22px; color: var(--accent-blue);">Counseling Completion Flow</h3>
                        <div class="flow-row">
                            <div class="flow-node decision">Counseling Required by Loan Program?</div>
                        </div>
                        <div class="decision-branch">
                            <div class="branch">
                                <span class="branch-label">Yes - Required</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node decision">Completed within 12 months?</div>
                            </div>
                            <div class="branch">
                                <span class="branch-label">No - Not Required</span>
                                <span class="flow-arrow down">|</span>
                                <div class="flow-node output">Select "No", leave blank</div>
                            </div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Field</th><th>Status</th><th>Instructions</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Counseling Completed</strong></td><td><span class="badge conditional-badge">Conditional</span></td><td>Yes/No - Based on if borrower completed customized counselor-to-client service within last 12 months</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Counseling Format</strong></td><td><span class="badge conditional-badge">If Yes</span></td><td>Select format the counseling was completed</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Housing Counseling Agency ID #</strong></td><td><span class="badge conditional-badge">If Yes</span></td><td>Enter ID from borrower-provided documentation</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Housing Counseling Agency Name</strong></td><td><span class="badge conditional-badge">If Yes</span></td><td>Enter agency name from borrower documentation</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Counseling Completion Date</strong></td><td><span class="badge conditional-badge">If Yes</span></td><td>Enter date from borrower-provided certificate</td></tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <h4>Education vs. Counseling: Key Difference</h4>
                        <p><strong>Education</strong> = Group or web-based learning (general information)<br>
                        <strong>Counseling</strong> = Customized counselor-to-client service (personalized guidance)</p>
                    </div>
                </div>
            </section>

            <!-- Section 5: Language Preference -->
            <section id="section-5" class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <div class="section-title"><h2>Language Preferences</h2><span>Required for all borrowers</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Present Language Options</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node input">Borrower Selects Preference</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Record Selection</div>
                        </div>
                    </div>

                    <div class="language-grid">
                        <div class="language-card">
                            <div class="language-card-header"><h4>CMG Supported Languages</h4></div>
                            <div class="language-card-body">
                                <ul>
                                    <li><span class="check-icon">Y</span> English</li>
                                    <li><span class="check-icon">Y</span> Spanish</li>
                                </ul>
                            </div>
                        </div>
                        <div class="language-card">
                            <div class="language-card-header"><h4>SCIF Form Options (Not Available at CMG)</h4></div>
                            <div class="language-card-body">
                                <ul>
                                    <li><span class="x-icon">N</span> Chinese</li>
                                    <li><span class="x-icon">N</span> Korean</li>
                                    <li><span class="x-icon">N</span> Tagalog</li>
                                    <li><span class="x-icon">N</span> Vietnamese</li>
                                    <li><span class="x-icon">N</span> Other</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="exception-box">
                        <h4>Mandatory Disclosure Requirement</h4>
                        <p>The lender <strong>MUST provide an opportunity</strong> for the borrower to indicate a language preference <strong>OR</strong> that they would prefer not to respond. This is a regulatory requirement - you cannot skip this section.</p>
                    </div>

                    <div class="warning-box">
                        <h4>CMG Language Policy</h4>
                        <p>CMG only offers <strong>English and Spanish</strong> as language options at this time. If a borrower prefers a language not offered, document their preference and refer to the CMG Language Preference Policy for guidance.</p>
                    </div>
                </div>
            </section>

            <!-- Section 6: Upload Documents -->
            <section id="section-6" class="section">
                <div class="section-header">
                    <div class="section-number">6</div>
                    <div class="section-title"><h2>Upload Supporting Documents</h2><span>Store evidence in loan Doc Manager</span></div>
                </div>
                <div class="section-content">
                    <div class="workflow-diagram">
                        <div class="flow-row">
                            <div class="flow-node action">Obtain Certificate/Evidence</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Open Doc Manager</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node action">Upload Document</div>
                            <span class="flow-arrow">-></span>
                            <div class="flow-node output">Complete</div>
                        </div>
                    </div>

                    <table class="field-table">
                        <thead><tr><th>Document Type</th><th>When Required</th><th>Upload Location</th></tr></thead>
                        <tbody>
                            <tr><td><strong style="color: var(--text-primary);">Education Completion Certificate</strong></td><td>When education is marked "Yes"</td><td>Loan Doc Manager</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Counseling Completion Certificate</strong></td><td>When counseling is marked "Yes"</td><td>Loan Doc Manager</td></tr>
                            <tr><td><strong style="color: var(--text-primary);">Agency Documentation</strong></td><td>To verify Agency ID and Name</td><td>Loan Doc Manager</td></tr>
                        </tbody>
                    </table>

                    <div class="tip-box">
                        <h4>Best Practice</h4>
                        <p>Always verify that the completion date on certificates falls within the 12-month requirement window before marking education or counseling as complete.</p>
                    </div>
                </div>
            </section>

            <!-- Quick Reference -->
            <section id="quick-ref" class="quick-ref">
                <h3>Quick Reference Card</h3>
                <pre>
ACCESS: All Screens > Supplemental Consumer Information

EFFECTIVE DATES:
* Conventional Loans: March 1, 2023
* All Other Loans: August 28, 2023

FORM CAPTURES:
* Homeownership Education completion
* Housing Counseling completion
* Language Preference

KEY RULES:
* Complete SEPARATELY for each borrower
* Education/Counseling must be within 12 months
* Language preference is MANDATORY (cannot skip)
* CMG only supports English and Spanish

EDUCATION vs COUNSELING:
* Education = Group/Web-based learning
* Counseling = Personalized counselor service

DOCUMENTATION:
* Upload certificates to Doc Manager
* Verify dates are within 12-month window
* Include Agency ID and Name

IF NOT REQUIRED:
* Select "No" for Education/Counseling
* Leave remaining fields blank
* Still complete Language Preference
                </pre>
            </section>
        </div>

        <!-- ==================== AGENT OPPORTUNITIES TAB ==================== -->
        <div id="agents-panel" class="tab-panel">
            <!-- Header -->
            <div class="agent-header">
                <h1>AI Agent Opportunities</h1>
                <p class="subtitle">Automation Analysis for SCIF Completion Workflow</p>
                <div class="meta">
                    <span class="meta-item">7 Process Steps Analyzed</span>
                    <span class="meta-item">4 Agent Candidates Identified</span>
                    <span class="meta-item">Est. 60% Time Savings</span>
                </div>
            </div>

            <!-- Summary Stats -->
            <div class="agent-summary" id="agent-summary">
                <div class="agent-summary-card">
                    <div class="agent-summary-value">4</div>
                    <div class="agent-summary-label">Agent Candidates</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">2</div>
                    <div class="agent-summary-label">High Priority</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">60%</div>
                    <div class="agent-summary-label">Time Savings</div>
                </div>
                <div class="agent-summary-card">
                    <div class="agent-summary-value">90%</div>
                    <div class="agent-summary-label">Automation Potential</div>
                </div>
            </div>

            <!-- Heat Map Legend -->
            <div class="heat-legend" id="agent-heatmap">
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #ef4444, #f97316);"></div><span><strong>Critical (90-100)</strong> - Immediate ROI</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #f97316, #eab308);"></div><span><strong>High (70-89)</strong> - Strong candidate</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #eab308, #22c55e);"></div><span><strong>Medium (50-69)</strong> - Consider</span></div>
                <div class="heat-legend-item"><div class="heat-legend-color" style="background: linear-gradient(135deg, #22c55e, #14b8a6);"></div><span><strong>Low (0-49)</strong> - Future phase</span></div>
            </div>

            <!-- Heat Map Grid -->
            <div class="heat-map-container">
                <div class="heat-map-title">Automation Priority Heat Map <span style="font-size: 0.8rem; font-weight: 400; color: var(--text-muted);">(Click to jump to agent)</span></div>
                <div class="heat-map-grid">
                    <div class="heat-item critical" onclick="scrollToAgent('agent-certificate')" title="Click to view agent details">
                        <div class="heat-score">95</div>
                        <div class="heat-name">Certificate Auto-Extract</div>
                        <div class="heat-desc">OCR extraction from uploaded certificates</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>3-4</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-validation')" title="Click to view agent details">
                        <div class="heat-score">85</div>
                        <div class="heat-name">Date Validation Agent</div>
                        <div class="heat-desc">Verify 12-month window compliance</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>3-4</span></div>
                        </div>
                    </div>
                    <div class="heat-item high" onclick="scrollToAgent('agent-requirement')" title="Click to view agent details">
                        <div class="heat-score">78</div>
                        <div class="heat-name">Requirement Checker</div>
                        <div class="heat-desc">Auto-determine if education/counseling required</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Medium</span></div>
                            <div class="heat-metric">Impact: <span>High</span></div>
                            <div class="heat-metric">Step: <span>0</span></div>
                        </div>
                    </div>
                    <div class="heat-item medium" onclick="scrollToAgent('agent-language')" title="Click to view agent details">
                        <div class="heat-score">62</div>
                        <div class="heat-name">Language Preference Agent</div>
                        <div class="heat-desc">Pre-fill from prior borrower interactions</div>
                        <div class="heat-metrics">
                            <div class="heat-metric">Effort: <span>Low</span></div>
                            <div class="heat-metric">Impact: <span>Medium</span></div>
                            <div class="heat-metric">Step: <span>5</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Details -->
            <h2 style="font-size: 1.4rem; margin: 35px 0 22px; color: var(--text-primary);" id="agent-details">Agent Specifications</h2>

            <div class="agent-grid">
                <!-- Agent 1: Certificate Auto-Extract -->
                <div class="agent-card" id="agent-certificate">
                    <div class="agent-card-header">
                        <div class="agent-icon">DOC</div>
                        <div class="agent-info">
                            <div class="agent-name">Certificate Auto-Extract Agent</div>
                            <div class="agent-type">Document Intelligence Agent</div>
                        </div>
                        <span class="agent-priority critical">Critical</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically extracts key data from uploaded education and counseling certificates using OCR and document intelligence. Populates Agency ID, Agency Name, Completion Date, and Format fields without manual entry.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Upload Certificate</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">OCR Scan</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Extract Fields</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Auto-Fill SCIF</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">2min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">98%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('certificate')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 2: Date Validation -->
                <div class="agent-card" id="agent-validation">
                    <div class="agent-card-header">
                        <div class="agent-icon">CAL</div>
                        <div class="agent-info">
                            <div class="agent-name">Date Validation Agent</div>
                            <div class="agent-type">Compliance Validation Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Automatically validates that education and counseling completion dates fall within the required 12-month window from the application date. Flags expired certifications and alerts user before submission.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Read Dates</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Calculate Window</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Validate</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Alert if Invalid</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">100%</div><div class="agent-stat-label">Error Prevention</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Real-time</div><div class="agent-stat-label">Validation</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('validation')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 3: Requirement Checker -->
                <div class="agent-card" id="agent-requirement">
                    <div class="agent-card-header">
                        <div class="agent-icon">CHK</div>
                        <div class="agent-info">
                            <div class="agent-name">Requirement Checker Agent</div>
                            <div class="agent-type">Decision Support Agent</div>
                        </div>
                        <span class="agent-priority high">High</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Analyzes loan program and product type to automatically determine if homeownership education or housing counseling is required. Pre-fills the Yes/No fields and guides user through only required sections.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Read Loan Type</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Check Guidelines</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Set Required</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Guide User</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">1min</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">95%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Med</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('requirement')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>

                <!-- Agent 4: Language Preference -->
                <div class="agent-card" id="agent-language">
                    <div class="agent-card-header">
                        <div class="agent-icon">LANG</div>
                        <div class="agent-info">
                            <div class="agent-name">Language Preference Agent</div>
                            <div class="agent-type">Data Integration Agent</div>
                        </div>
                        <span class="agent-priority medium">Medium</span>
                    </div>
                    <div class="agent-card-body">
                        <p class="agent-description">Pre-fills language preference based on prior borrower interactions, application language, or CRM data. Suggests English or Spanish based on communication history while still presenting choice to borrower.</p>
                        <div class="agent-flow">
                            <div class="agent-flow-title">Agent Flow</div>
                            <div class="agent-flow-diagram">
                                <div class="agent-step">Check History</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Analyze Comms</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Suggest Pref</div>
                                <span class="agent-arrow">-></span>
                                <div class="agent-step">Confirm</div>
                            </div>
                        </div>
                        <div class="agent-stats">
                            <div class="agent-stat"><div class="agent-stat-value">30sec</div><div class="agent-stat-label">Time Saved</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">90%</div><div class="agent-stat-label">Accuracy</div></div>
                            <div class="agent-stat"><div class="agent-stat-value">Low</div><div class="agent-stat-label">Complexity</div></div>
                        </div>
                        <button class="agent-prompt-btn" onclick="showAgentPrompt('language')">
                            View AI Prompt to Build This Agent
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="docModal">
        <div class="modal">
            <div class="modal-header">
                <h3>SCIF Form - Workflow Markdown</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyToClipboard()">Copy</button>
                    <button class="modal-btn close" onclick="closeDocModal()">X Close</button>
                </div>
            </div>
            <div class="modal-body">
                <pre id="docContent"># Supplemental Consumer Information Form (SCIF) - Byte Workflow

## Overview
FHFA-mandated form for GSE loan sales capturing:
- Homeownership education completion
- Housing counseling completion
- Borrower language preference

## Effective Dates
- Conventional Loans: March 1, 2023
- All Other Loans: August 28, 2023

## Access
All Screens > Supplemental Consumer Information

## Process Steps

### 1. Select Borrower
- Complete form SEPARATELY for each borrower
- Click borrower tab (e.g., Patrick, Lorraine)

### 2. Homeownership Education
IF required by loan program AND completed within 12 months:
- Education Completed: Yes
- Education Format: Select format
- Housing Counseling Agency ID #: Enter from certificate
- Housing Counseling Agency Name: Enter from certificate
- Education Completion Date: Enter date

IF not required:
- Education Completed: No
- Leave remaining fields blank

### 3. Housing Counseling
IF required by loan program AND completed within 12 months:
- Counseling Completed: Yes
- Counseling Format: Select format
- Housing Counseling Agency ID #: Enter from certificate
- Housing Counseling Agency Name: Enter from certificate
- Counseling Completion Date: Enter date

IF not required:
- Counseling Completed: No
- Leave remaining fields blank

### 4. Language Preference (MANDATORY)
- MUST present options to borrower
- CMG supports: English, Spanish only
- Borrower may decline to respond

### 5. Upload Documentation
- Upload certificates to Doc Manager
- Verify dates within 12-month window

## Key Rules
- 12-month window for education/counseling
- Each borrower completed separately
- Language preference cannot be skipped
- CMG: English and Spanish only</pre>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>

    <!-- AI Prompt Modal -->
    <div class="modal-overlay prompt-modal" id="promptModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="promptModalTitle">AI Agent Build Prompt</h3>
                <div class="modal-actions">
                    <button class="modal-btn copy" onclick="copyPromptToClipboard()">Copy Prompt</button>
                    <button class="modal-btn close" onclick="closePromptModal()">X Close</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="prompt-tags" id="promptTags"></div>
                <div class="prompt-section">
                    <h4>Agent Purpose</h4>
                    <div class="prompt-box" id="promptPurpose"></div>
                </div>
                <div class="prompt-section">
                    <h4>Full Build Prompt</h4>
                    <div class="prompt-box" id="promptContent"></div>
                </div>
                <div class="prompt-section">
                    <h4>Integration Points</h4>
                    <div class="prompt-box" id="promptIntegration"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Scroll spy with isScrolling flag and timeout
        let isScrolling = false;
        let scrollTimeout = null;

        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            if (tab === 'workflow') {
                document.querySelector('.sidebar-tab:not(.agent-tab)').classList.add('active');
                document.getElementById('workflow-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'block';
                document.getElementById('agents-nav').style.display = 'none';
            } else {
                document.querySelector('.sidebar-tab.agent-tab').classList.add('active');
                document.getElementById('agents-panel').classList.add('active');
                document.getElementById('workflow-nav').style.display = 'none';
                document.getElementById('agents-nav').style.display = 'block';
            }

            window.scrollTo(0, 0);
        }

        // Scroll spy with protection
        const sections = document.querySelectorAll('.section, .quick-ref');
        const navItems = document.querySelectorAll('#workflow-nav .nav-item');

        function updateActiveNav() {
            if (isScrolling) return;

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) current = section.getAttribute('id');
            });
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === '#' + current) item.classList.add('active');
            });
        }

        // Handle nav clicks with scroll protection
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                isScrolling = true;

                // Clear any existing timeout
                if (scrollTimeout) clearTimeout(scrollTimeout);

                // Update active state immediately
                navItems.forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                // Scroll to section
                const targetId = this.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({ behavior: 'smooth' });
                }

                // Reset flag after 1000ms
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                }, 1000);
            });
        });

        window.addEventListener('scroll', updateActiveNav);

        // Scroll to agent from heat map
        function scrollToAgent(agentId) {
            const agent = document.getElementById(agentId);
            if (agent) {
                agent.scrollIntoView({ behavior: 'smooth', block: 'center' });
                agent.classList.add('highlight');
                setTimeout(() => agent.classList.remove('highlight'), 2500);
            }
        }

        // Modal functions
        function openDocModal() {
            document.getElementById('docModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeDocModal() {
            document.getElementById('docModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyToClipboard() {
            try {
                const content = document.getElementById('docContent').textContent;
                await navigator.clipboard.writeText(content);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeDocModal();
                closePromptModal();
            }
        });

        document.getElementById('docModal').addEventListener('click', (e) => {
            if (e.target.id === 'docModal') closeDocModal();
        });

        // Agent Prompt System
        const agentPrompts = {
            certificate: {
                name: 'Certificate Auto-Extract Agent',
                tags: ['Document Intelligence', 'OCR', 'Low Complexity', 'Critical Priority'],
                purpose: `This agent automatically extracts key data from uploaded education and counseling certificates using OCR and document intelligence. It eliminates manual data entry by populating Agency ID, Agency Name, Completion Date, and Format fields directly from scanned documents.`,
                prompt: `You are building a Document Intelligence Agent for CMG Financial's Byte LOS SCIF form.

AGENT NAME: Certificate Auto-Extract Agent
TYPE: Document Intelligence / OCR

OBJECTIVE:
Create an agent that processes uploaded education and counseling certificates, extracts relevant fields using OCR, and auto-populates the SCIF form in Byte.

INPUT DOCUMENTS:
1. Homeownership Education Certificates
2. Housing Counseling Certificates
3. HUD-Approved Agency Documentation

FIELDS TO EXTRACT:
- Housing Counseling Agency ID #
- Housing Counseling Agency Name
- Completion Date
- Format (Group, Online, Individual, etc.)
- Borrower Name (for validation)

OCR PROCESSING STEPS:
1. Receive uploaded document from Doc Manager
2. Run OCR to extract all text
3. Use NLP to identify key fields:
   - Look for "Agency ID", "HUD ID", "Certificate #"
   - Look for agency names (cross-reference HUD database)
   - Look for date patterns (MM/DD/YYYY, Month DD, YYYY)
   - Look for format indicators (Online, Classroom, etc.)
4. Validate extracted data
5. Return structured JSON

OUTPUT FORMAT:
{
  "agencyId": "string",
  "agencyName": "string",
  "completionDate": "YYYY-MM-DD",
  "format": "Group|Online|Individual",
  "borrowerName": "string",
  "confidence": 0.0-1.0,
  "flaggedIssues": []
}

VALIDATION RULES:
- Agency ID should match HUD format
- Date must be parseable and within 12 months
- Agency name should exist in HUD database
- If confidence < 0.8, flag for manual review`,
                integration: `INTEGRATION POINTS:

1. Byte Doc Manager
   - Trigger on document upload to SCIF category
   - Access document via Byte API or file system

2. SCIF Screen in Byte
   - Auto-fill fields when extraction completes
   - Show confidence indicator next to each field
   - Allow manual override

3. HUD Agency Database
   - Validate agency names and IDs
   - Suggest corrections for misspellings

4. Audit Trail
   - Log all extractions with source document
   - Track manual corrections for model improvement

DEPLOYMENT:
- Byte plugin/extension
- Background service monitoring Doc Manager
- API endpoint for on-demand extraction`
            },
            validation: {
                name: 'Date Validation Agent',
                tags: ['Compliance', 'Real-time Validation', 'Low Complexity', 'High Priority'],
                purpose: `This agent automatically validates that education and counseling completion dates fall within the required 12-month window from the loan application date. It prevents compliance errors by flagging expired certifications before form submission.`,
                prompt: `You are building a Compliance Validation Agent for CMG Financial's Byte LOS SCIF form.

AGENT NAME: Date Validation Agent
TYPE: Compliance / Real-time Validation

OBJECTIVE:
Create an agent that validates education and counseling completion dates against the 12-month requirement window, preventing submission of non-compliant forms.

INPUT DATA:
1. Education Completion Date (from SCIF)
2. Counseling Completion Date (from SCIF)
3. Loan Application Date (from loan file)

VALIDATION LOGIC:
CompletionDate >= (ApplicationDate - 12 months)

CALCULATION:
windowStart = ApplicationDate - 365 days
isValid = CompletionDate >= windowStart

EDGE CASES:
- Leap years (use actual calendar calculation)
- Future dates (flag as error)
- Missing dates (flag if Education/Counseling = Yes)

OUTPUT FORMAT:
{
  "educationValid": true|false,
  "educationMessage": "string",
  "educationDaysRemaining": number,
  "counselingValid": true|false,
  "counselingMessage": "string",
  "counselingDaysRemaining": number,
  "overallStatus": "PASS|WARN|FAIL"
}

STATUS DEFINITIONS:
- PASS: All dates valid, > 30 days remaining
- WARN: Valid but < 30 days remaining in window
- FAIL: Date outside 12-month window

USER ALERTS:
- Green checkmark for valid dates
- Yellow warning for expiring soon
- Red error for expired certificates
- Suggest: "Certificate expires in X days"`,
                integration: `INTEGRATION POINTS:

1. SCIF Date Fields
   - Trigger validation on date entry
   - Real-time feedback as user types
   - Block form save if FAIL status

2. Loan Application Data
   - Pull application date from loan header
   - Handle rate lock date vs app date

3. User Interface
   - Visual indicators next to date fields
   - Tooltip with detailed message
   - Link to upload new certificate if expired

4. Notifications
   - Alert processor if certificate expiring soon
   - Email reminder X days before expiration

DEPLOYMENT:
- Client-side JavaScript validation
- Server-side validation on save
- Batch validation for pipeline review`
            },
            requirement: {
                name: 'Requirement Checker Agent',
                tags: ['Decision Support', 'Guidelines', 'Medium Complexity', 'High Priority'],
                purpose: `This agent analyzes the loan program and product type to automatically determine if homeownership education or housing counseling is required. It eliminates guesswork by pre-filling Yes/No fields based on investor guidelines.`,
                prompt: `You are building a Decision Support Agent for CMG Financial's Byte LOS SCIF form.

AGENT NAME: Requirement Checker Agent
TYPE: Decision Support / Guidelines Engine

OBJECTIVE:
Create an agent that analyzes loan characteristics and determines education/counseling requirements based on investor guidelines, pre-filling the SCIF form accordingly.

INPUT DATA:
1. Loan Type (Conventional, FHA, VA, USDA)
2. Product Code
3. Investor (Fannie Mae, Freddie Mac, Ginnie Mae)
4. LTV
5. First-Time Homebuyer Status
6. Property Type
7. Special Programs (HomeReady, Home Possible, etc.)

REQUIREMENT RULES DATABASE:

FANNIE MAE:
- HomeReady: Education REQUIRED
- High LTV (>95%): Education REQUIRED
- First-Time Buyer + LTV >95%: Education REQUIRED

FREDDIE MAC:
- Home Possible: Education REQUIRED
- First-Time Buyer + LTV >97%: Counseling REQUIRED

FHA:
- All FHA: Counseling RECOMMENDED
- HECM: Counseling REQUIRED

SPECIAL PROGRAMS:
- Down Payment Assistance: Counseling often REQUIRED
- State Housing Programs: Check specific requirements

DECISION LOGIC:
1. Read loan program from Byte
2. Look up requirements in rules database
3. Determine: REQUIRED | RECOMMENDED | NOT_REQUIRED
4. Pre-fill Education Completed / Counseling Completed
5. If REQUIRED and not completed, flag for action

OUTPUT FORMAT:
{
  "educationRequired": "REQUIRED|RECOMMENDED|NOT_REQUIRED",
  "educationReason": "string explaining why",
  "counselingRequired": "REQUIRED|RECOMMENDED|NOT_REQUIRED",
  "counselingReason": "string explaining why",
  "autoFill": {
    "educationCompleted": "Yes|No|null",
    "counselingCompleted": "Yes|No|null"
  },
  "guidanceLink": "URL to investor guidelines"
}`,
                integration: `INTEGRATION POINTS:

1. Loan Data
   - Read loan type, product, investor from Byte
   - Trigger on SCIF screen open
   - Re-evaluate if loan type changes

2. Guidelines Database
   - Maintain investor requirement matrix
   - Update when guidelines change
   - Version control for audit

3. SCIF Form
   - Auto-select Yes/No based on determination
   - Show reasoning to user
   - Allow override with documentation

4. User Guidance
   - Display "Why is this required?" tooltip
   - Link to relevant investor guidelines
   - Checklist of what borrower needs to provide

DEPLOYMENT:
- Server-side rules engine
- Real-time API call on form load
- Cached results for performance`
            },
            language: {
                name: 'Language Preference Agent',
                tags: ['Data Integration', 'CRM', 'Low Complexity', 'Medium Priority'],
                purpose: `This agent pre-fills the language preference field based on prior borrower interactions, application language selection, or CRM communication history. It streamlines data entry while ensuring the borrower still confirms their preference.`,
                prompt: `You are building a Data Integration Agent for CMG Financial's Byte LOS SCIF form.

AGENT NAME: Language Preference Agent
TYPE: Data Integration / Preference Prediction

OBJECTIVE:
Create an agent that suggests language preference based on borrower history, reducing clicks while maintaining compliance requirement to offer choice.

INPUT DATA SOURCES:
1. CRM Communication History
   - Email language
   - Phone notes mentioning language
   - Marketing preferences

2. Application Data
   - 1003 language selection
   - POS language setting
   - Document language requests

3. Prior Loan History
   - Previous SCIF selections
   - Translated document requests

LOGIC:
1. Check prior SCIF for same borrower -> Use that preference
2. Check application language -> Suggest same
3. Check CRM for Spanish communications -> Suggest Spanish
4. Default -> Suggest English

CMG CONSTRAINT:
- Only English and Spanish available
- If other language detected, default to English
- Note detected preference for future reference

OUTPUT FORMAT:
{
  "suggestedLanguage": "English|Spanish",
  "confidence": 0.0-1.0,
  "source": "Prior SCIF|Application|CRM|Default",
  "detectedOther": "Chinese|Korean|etc" (if applicable),
  "requiresConfirmation": true
}

COMPLIANCE NOTE:
- Agent SUGGESTS, borrower CONFIRMS
- Always present both options
- Allow "Prefer not to respond"
- Log final selection for audit`,
                integration: `INTEGRATION POINTS:

1. CRM System
   - Query borrower communication history
   - Check email language settings
   - Review phone notes for language mentions

2. Loan Origination Data
   - Read 1003 application language
   - Check POS session language
   - Review document requests

3. SCIF Form
   - Pre-select suggested language
   - Highlight selection for confirmation
   - Easy one-click to change

4. Audit Trail
   - Log suggestion source
   - Record final borrower selection
   - Track accuracy for model improvement

DEPLOYMENT:
- Background lookup on borrower load
- API integration with CRM
- Cached borrower preferences`
            }
        };

        let currentPromptKey = '';

        function showAgentPrompt(key) {
            const prompt = agentPrompts[key];
            if (!prompt) return;

            currentPromptKey = key;

            document.getElementById('promptModalTitle').textContent = prompt.name + ' - Build Prompt';
            document.getElementById('promptTags').innerHTML = prompt.tags.map(t => `<span class="prompt-tag">${t}</span>`).join('');
            document.getElementById('promptPurpose').textContent = prompt.purpose;
            document.getElementById('promptContent').textContent = prompt.prompt;
            document.getElementById('promptIntegration').textContent = prompt.integration;

            document.getElementById('promptModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closePromptModal() {
            document.getElementById('promptModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        async function copyPromptToClipboard() {
            const prompt = agentPrompts[currentPromptKey];
            if (!prompt) return;

            const fullPrompt = `${prompt.prompt}\n\n${prompt.integration}`;

            try {
                await navigator.clipboard.writeText(fullPrompt);
                const success = document.getElementById('copySuccess');
                success.style.display = 'block';
                setTimeout(() => { success.style.display = 'none'; }, 2000);
            } catch (e) { alert('Failed to copy.'); }
        }

        document.getElementById('promptModal').addEventListener('click', (e) => {
            if (e.target.id === 'promptModal') closePromptModal();
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateActiveNav();
        });
    </script>
</body>
</html>
